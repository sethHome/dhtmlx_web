<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="app">
<head>
    <title></title>
</head>
<body ng-controller="myCtrl">

    <button ng-click="open()">open</button>

    <test item="a"></test>

    <test item="b"></test>

    <script src="../assets/lib/jquery/jquery-1.11.2.js"></script>
    <script src="angular.js"></script>

    <script>
        var app = angular.module("app", []);

        app.controller("myCtrl", function ($scope, $element, $controller, $compile) {
            $scope.open = function () {
                $scope.b = [{ b: 222 }, { b: 3333 }, { b: 444 }];

            }

            $scope.a = [{ a: 111 }, { a: 222 }];
            $scope.b = [{ b: 222 }, { b: 3333 }];
        });

        app.directive("test", function () {
            return {
                restrict: 'E',
                template: '<div>{{item | json}}</div>',
                replace: true,
                controller: function () {
                },
                scope: {
                    item: '='
                },
                link: function (scope, element, attrs, ctrls) {

                    scope.$watch("item", function (newval, oldval) {
                        alert(newval);
                    });
                }
            };
        })

   

    </script>

</body>
</html>
