/*! web - v1.0.0 - 2017-12-12
* Copyright (c) 2017 home_tl@yeah.com; */

function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dhtmlXCellObject(t,e){this.cell=document.createElement("DIV"),this.cell.className="dhx_cell"+(e||""),this._idd=t,this._isCell=!0,this.conf={borders:!0,idx:{},css:e||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}},this.dataNodes={},this.views={};var i=document.createElement("DIV");return i.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(i),i=null,this._updateIdx=function(){for(var t in this.conf.idx)this.conf.idx[t]=null,delete this.conf.idx[t];for(var e=0;e<this.cell.childNodes.length;e++){var i=this.cell.childNodes[e].className;for(var t in this.conf.idx_data){var n=new RegExp(this.conf.idx_data[t]);null!=i.match(n)&&(this.conf.idx[t]=e)}}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var t in this.dataNodes)null!=this.dataNodes[t]&&"function"==typeof this.dataNodes[t].setSizes&&this.dataNodes[t].setSizes();if(null!=this.dataObj&&"function"==typeof this.dataObj.setSizes){if("layout"==this.dataType&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst())return void this.dataObj.setSizes();this.dataObj.setSizes.apply(this.dataObj,arguments)}},this._setSize=function(t,e,i,n,s,o,l,r){null==this.conf.size&&(this.conf.size={}),null==r&&(r={});var a={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=t,this.conf.size.y=e,this.conf.size.w=Math.max(i,0),this.conf.size.h=Math.max(n,0);for(var h in a){var d=r[h]||h;this.cell.style[d]=this.conf.size[a[h]]+"px"}this.callEvent("_onSetSize",[]),!0!==o?this._adjustCont(s,l):this._adjustAttached(s),this._adjustProgress()},this._adjustCont=function(t,e){var i=this.cell.childNodes[this.conf.idx.cont];if("function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&1==this.conf.collapsed)return i.style.left=i.style.top="0px",i.style.width=i.style.height="200px",void(i=null);var n=0;for(var s in this.conf.ofs_nodes.t){n+="func"==(l=this.conf.ofs_nodes.t[s])?this[s]():1==l?this.cell.childNodes[this.conf.idx[s]].offsetHeight:0}var o=0;for(var s in this.conf.ofs_nodes.b){var l;o+="func"==(l=this.conf.ofs_nodes.b[s])?this[s]():1==l?this.cell.childNodes[this.conf.idx[s]].offsetHeight:0}i.style.left="0px",i.style.top=n+"px",null==this.conf.cells_cont&&(this.conf.cells_cont={},i.style.width=this.cell.offsetWidth+"px",i.style.height=Math.max(this.cell.offsetHeight-n-o,0)+"px",this.conf.cells_cont.w=parseInt(i.style.width)-i.offsetWidth,this.conf.cells_cont.h=parseInt(i.style.height)-i.offsetHeight),i.style.left="0px",i.style.top=n+"px",i.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px",i.style.height=Math.max(this.conf.size.h-n-o+this.conf.cells_cont.h,0)+"px",i=null,this._adjustAttached(t),"expand"==e&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var t=["menu","toolbar","ribbon"],e=0;e<t.length;e++)if(null!=this.conf.idx[t[e]]){var i=this.cell.childNodes[this.conf.idx[t[e]]],n="dhx_cell_"+t[e]+"_no_borders",s="dhx_cell_"+t[e]+"_def";i.className=i.className.replace(new RegExp(this.conf.borders?n:s),this.conf.borders?s:n),i=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(t){this.views[t]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var e=this.cell.childNodes[this.conf.idx.cont];e.childNodes.length>0;)this.views[t].cellCont.push(e.firstChild),e.removeChild(e.firstChild);e=null,this.dataType=null,this.dataObj=null,this.conf.url_data=null;for(var i in this.dataNodes){for(var n in this.conf.ofs_nodes)void 0!==this.conf.ofs_nodes[n][i]&&(this.views[t].ofs_nodes[n][i]=this.conf.ofs_nodes[n][i],this.conf.ofs_nodes[n][i]=null,delete this.conf.ofs_nodes[n][i]);this.views[t].dataNodesCont[i]=this.cell.childNodes[this.conf.idx[i]],this.cell.removeChild(this.cell.childNodes[this.conf.idx[i]]),this.views[t].dataNodes[i]=this.dataNodes[i],this.dataNodes[i]=null,delete this.dataNodes[i],this._updateIdx()}this.callEvent("_onViewSave",[t])},this._viewRestore=function(t){if(null!=this.views[t]){this.dataObj=this.views[t].dataObj,this.dataType=this.views[t].dataType,this.conf.url_data=this.views[t].url_data;for(var e=0;e<this.views[t].cellCont.length;e++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[t].cellCont[e]);for(var i in this.views[t].dataNodes)this.dataNodes[i]=this.views[t].dataNodes[i],"menu"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.cont]),"ribbon"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.cont]),"sb"==i&&this.cell.appendChild(this.views[t].dataNodesCont[i]),this._updateIdx();for(var i in this.views[t].ofs_nodes)for(var n in this.views[t].ofs_nodes[i])this.conf.ofs_nodes[i][n]=this.views[t].ofs_nodes[i][n];this.conf.borders!=this.views[t].borders&&this[this.views[t].borders?"_showBorders":"_hideBorders"](!0),"url"==this.dataType&&null!=this.conf.url_data&&0==this.conf.url_data.ajax&&null!=this.conf.url_data.post_data&&this.reloadURL(),this.callEvent("_onViewRestore",[t]),this._viewDelete(t)}},this._viewDelete=function(t){if(null!=this.views[t]){this.views[t].borders=null;for(var e in this.views[t].ofs_nodes){for(var i in this.views[t].ofs_nodes[e])this.views[t].ofs_nodes[e][i]=null;this.views[t].ofs_nodes[e]=null}this.views[t].dataType=null,this.views[t].dataObj=null,this.views[t].url_data=null;for(var n=0;n<this.views[t].cellCont.length;n++)this.views[t].cellCont[n]=null;this.views[t].cellCont=null;for(var e in this.views[t].dataNodes)this.views[t].dataNodes[e]=null,this.views[t].dataNodesCont[e]=null;this.views[t].dataNodes=this.views[t].dataNodesCont=null,this.views[t]=null,delete this.views[t]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCellTop(t,e){if(0!=arguments.length&&void 0!==t){var i=this;if(this.dataNodes={},this.conf.ofs={t:0,b:0,l:0,r:0},this.conf.ofs_nodes={t:{},b:{}},this.conf.progress=!1,this.conf.fs_mode=!1,this.conf.fs_tm=null,this.conf.fs_resize=!1,t==document.body){if(this.conf.fs_mode=!0,this.base=t,this.base==document.body){var n={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=n[this.conf.skin]?n[this.conf.skin]:n.dhx_skyblue}}else this.base="string"==typeof t?document.getElementById(t):t;if(this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin,this.cont=document.createElement("DIV"),this.cont.className=this.conf.css+"_cont",this.base.appendChild(this.cont),null!=e)this.setOffsets(e,!1);else if(null!=this.base._ofs){this.setOffsets(this.base._ofs,!1),this.base._ofs=null;try{delete this.base._ofs}catch(t){}}this._adjustCont=function(){var t=this.conf.ofs.t;for(var e in this.conf.ofs_nodes.t)t+=1==this.conf.ofs_nodes.t[e]?this.dataNodes[e].offsetHeight:0;var i=this.conf.ofs.b;for(var e in this.conf.ofs_nodes.b)i+=1==this.conf.ofs_nodes.b[e]?this.dataNodes[e].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px",this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.cont.style.top=t+"px",this.cont.style.height=this.base.clientHeight-t-i+"px"},this._setBaseSkin=function(t){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+t)},this._initFSResize=function(){1!=this.conf.fs_resize&&(this._doOnResizeStart=function(){window.clearTimeout(i.conf.fs_tm),i.conf.fs_tm=window.setTimeout(i._doOnResizeEnd,200)},this._doOnResizeEnd=function(){i.setSizes()},"function"==typeof window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)},1==this.conf.fs_mode&&this._initFSResize(),this._unloadTop=function(){this._mtbUnload(),this.detachHeader(),this.detachFooter(),1==this.conf.fs_mode&&("function"==typeof window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart)),this.base.removeChild(this.cont);var t=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(t,""),this.cont=this.base=null,i=null},t=null}}function dhtmlXCalendarObject(t,e){this.i={};var i=null;if("string"==typeof t)var n=document.getElementById(t);else n=t;n&&"object"==typeof n&&n.tagName&&"input"!=String(n.tagName).toLowerCase()&&(i=n),n=null,"object"==typeof t&&t.length||(t=[t]);for(var s=0;s<t.length;s++)"string"==typeof t[s]&&(t[s]=document.getElementById(t[s])||null),null!=t[s]&&t[s].tagName&&"input"==String(t[s].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:t[s]}:t[s]instanceof Array||!(t[s]instanceof Object)||null==t[s].input&&null==t[s].button||(null!=t[s].input&&"string"==typeof t[s].input&&(t[s].input=document.getElementById(t[s].input)),null!=t[s].button&&"string"==typeof t[s].button&&(t[s].button=document.getElementById(t[s].button)),this.i[window.dhx4.newId()]=t[s]),t[s]=null;this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0},this.setSkin=function(t,e){(this.conf.skin!=t||e)&&(this.conf.skin=t,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=i?(this._hasParent=!0,i.appendChild(this.base),i=null):document.body.appendChild(this.base),this.setParent=function(t){this._hasParent&&("object"==typeof t?t.appendChild(this.base):"string"==typeof t&&document.getElementById(t).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(t){(t=t||event).preventDefault&&t.preventDefault(),t.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(t){if(this.langData[t]){if(this.lang=t,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont)for(var e=0,i=0;i<this.msCont.childNodes.length;i++)for(var n=0;n<this.msCont.childNodes[i].childNodes.length;n++)this.msCont.childNodes[i].childNodes[n].innerHTML=this.langData[this.lang].monthesSNames[e++];this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today,this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear}},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth);(r=document.createElement("UL")).className="dhtmlxcalendar_line",this.contMonth.appendChild(r);(a=document.createElement("LI")).className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",a.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",r.appendChild(a);var o=this;a.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(e.className&&0===e.className.indexOf("dhtmlxcalendar_month_arrow")){o._hideSelector();var i=e.parentNode.firstChild==e?-1:1,n=new Date(o._activeMonth);return o._drawMonth(new Date(o._activeMonth.getFullYear(),o._activeMonth.getMonth()+i,1,0,0,0,0)),void o._evOnArrowClick([n,new Date(o._activeMonth)])}return e.className&&"dhtmlxcalendar_month_label_month"==e.className?(t.cancelBubble=!0,void o._showSelector("month",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_month",!0)):e.className&&"dhtmlxcalendar_month_label_year"==e.className?(t.cancelBubble=!0,void o._showSelector("year",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_year",!0)):void o._hideSelector()},1==this.conf.touch&&(a.ontouchstart=a.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(t){0==t&&(t=7),this._wStart=Math.min(Math.max(isNaN(t)?1:t,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){(t=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDays.appendChild(t)}else var t=this.contDays.firstChild;var e=this._wStart,i=this.langData[this.lang].daysSNames;i.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var n=0;n<8;n++){if(null==t.childNodes[n]){var s=document.createElement("LI");t.appendChild(s)}else s=t.childNodes[n];0==n?(s.className="dhtmlxcalendar_cell_wn",s.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(s.className="dhtmlxcalendar_cell"+(e>=6?" dhtmlxcalendar_day_weekday_cell":"")+(1==n?"_first":""),s.innerHTML=i[e],++e>7&&(e=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date&&!e._css_dis){var i=o._activeDate.getHours(),n=o._activeDate.getMinutes(),s=e._date;if(o.checkEvent("onBeforeChange")&&!o.callEvent("onBeforeChange",[new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),i,n)]))return;null!=o._activeDateCell&&(o._activeDateCell._css_date=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w));var l=o._activeDate.getFullYear()+"_"+o._activeDate.getMonth()!=s.getFullYear()+"_"+s.getMonth();o._nullDate=!1,o._activeDate=new Date(s.getFullYear(),s.getMonth(),s.getDate(),i,n),o._activeDateCell=e,o._activeDateCell._css_date=!0,o._activeDateCell._css_hover=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w),l&&o._drawMonth(o._activeDate),o._updateInp(),o._hasParent||("touchstart"==t.type?window.setTimeout(function(){o._hide()},400):o._hide()),o._evOnClick([new Date(o._activeDate.getTime())])}},1==this.conf.touch&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(t){var e=(t=t||event).target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date){if(o._lastHover==e||e._css_hover)return;e._css_hover=!0,o._updateCellStyle(e._q,e._w),o._lastHover=e,o._evOnMouseOver([new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),0,0,0,0),t]),e=null}},this.contDates.onmouseout=function(t){o._clearDayHover(t||event)},this._lastHover=null,this._clearDayHover=function(t){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),null!=t&&o._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),t]),this._lastHover=null)};for(s=0;s<6;s++){(r=document.createElement("UL")).className="dhtmlxcalendar_line",this.contDates.appendChild(r);for(var l=0;l<=7;l++){(a=document.createElement("LI")).className=0==l?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",r.appendChild(a)}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.contTime.style.display="none",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){1!=this.conf.time&&(this.conf.time=!0,this._adjustTimeCont())},this.hideTime=function(){1==this.conf.time&&(this.conf.time=!1,this._adjustTimeCont())},this.showToday=function(){1!=this.conf.today&&(this.conf.today=!0,this._adjustTimeCont())},this.hideToday=function(){1==this.conf.today&&(this.conf.today=!1,this._adjustTimeCont())},this._adjustTimeCont=function(){var t="";1==this.conf.time&&(t+="_time"),1==this.conf.today&&(t+="_today"),""==t?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+t,this.contTime.style.display=""),this._ifrSize()},this._adjustTimeCont();var r;(r=document.createElement("UL")).className="dhtmlxcalendar_line",this.contTime.appendChild(r);var a;(a=document.createElement("LI")).className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",a.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"</span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"</span>",r.appendChild(a),a.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;if(null!=e.tagName&&"span"==e.tagName.toLowerCase()&&1==e._par&&null!=e.parentNode&&(e=e.parentNode),e.className&&"dhtmlxcalendar_label_hours"==e.className){t.cancelBubble=!0;var i=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;o._showSelector("hours",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_hours",!0)}else if(e.className&&"dhtmlxcalendar_label_minutes"==e.className){if(t.cancelBubble=!0,1==o._minutesInterval){var n=o.getFormatedDate("%i");e.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+n.charAt(0)+"</span>"+n.charAt(1),e.firstChild._par=!0,o._selectorMode=1}i=o.contMonth.offsetHeight+o.contDays.offsetHeight+o.contDates.offsetHeight+e.offsetTop;o._showSelector("minutes",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_minutes",!0)}else{if(o._hideSelector(),e.className&&"dhtmlxcalendar_label_today"==e.className){n=new Date;n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),o._activeDate.getHours(),o._activeDate.getMinutes(),o._activeDate.getSeconds(),o._activeDate.getMilliseconds()),o.setDate(n),o._updateInp(),o.callEvent("onButtonClick",[n])}e.className&&"dhtmlxcalendar_label_clear"==e.className&&(o._nullDate=!0,o._drawMonth(new Date),o._updateInp(),o.callEvent("onButtonClick",[null]))}},1==this.conf.touch&&(a.ontouchstart=a.onclick),this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(t){window.dhx4.temp_calendar={tz:null},this._nullDate=void 0===t||""===t||!t,t instanceof Date||("Invalid Date"==(t=this._strToDate(String(t||"")))?t=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null),null==this.conf.tz&&(this.conf.tz=window.dhx4.date2str(t,"%P"));var e=t.getTime();this._isOutOfRange(e)||(this._activeDate=new Date(e),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(t){if(this._nullDate)return null;var e=new Date(this._activeDate.getTime());if(t){window.dhx4.temp_calendar={tz:this.conf.tz};var i=this._dateToStr(e);return window.dhx4.temp_calendar=null,i}return e},this._drawMonth=function(t){if(t instanceof Date){isNaN(t.getFullYear())&&(t=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),this._activeDateCell=null;var e=new Date(this._activeMonth.getTime()),i=e.getDay()-this._wStart;i<0&&(i+=7),e.setDate(e.getDate()-i);for(var n=t.getMonth(),s=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),o=0,l=0;l<6;l++)for(var r=this._wStart,a=0;a<=7;a++)if(0==a){var h=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,0,0,0,0));if(h>=52&&1==this.conf.ws_first&&0==this._activeMonth.getMonth()){var d=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+o+7,0,0,0,0));d<h&&d>1&&(h=1)}this.contDates.childNodes[l].childNodes[a].innerHTML="<div class='dhtmlxcalendar_label'>"+h+"</div>"}else{var c=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o,0,0,0,0);if(0!=c.getHours()){var u=c.getHours()>12?24-c.getHours():c.getHours();c.setTime(c.getTime()+36e5*u)}c.getDay();var f=c.getTime(),p="dhtmlxcalendar_label";null!=this._tipData[f]?(this._tipData[f].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[l].childNodes[a].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[l].childNodes[a].setAttribute("title",this._tipData[f].text),this._tipData[f].showIcon&&(p+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[l].childNodes[a].removeAttribute("title"),this.contDates.childNodes[l].childNodes[a].innerHTML="<div class='"+p+"'>"+c.getDate()+"</div>",this.contDates.childNodes[l].childNodes[a]._date=new Date(f),this.contDates.childNodes[l].childNodes[a]._q=l,this.contDates.childNodes[l].childNodes[a]._w=a,this.contDates.childNodes[l].childNodes[a]._css_month=c.getMonth()==n,this.contDates.childNodes[l].childNodes[a]._css_date=!this._nullDate&&f==s,this.contDates.childNodes[l].childNodes[a]._css_weekend=r>=6,this.contDates.childNodes[l].childNodes[a]._css_dis=this._isOutOfRange(f),this.contDates.childNodes[l].childNodes[a]._css_holiday=1==this._holidays[f],this._updateCellStyle(l,a),f==s&&(this._activeDateCell=this.contDates.childNodes[l].childNodes[a]),++r>7&&(r=1),o++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(t)}},this._updateCellStyle=function(t,e){var i=this.contDates.childNodes[t].childNodes[e],n="dhtmlxcalendar_cell dhtmlxcalendar_cell";n+=i._css_month?"_month":"",n+=i._css_date?"_date":"",n+=i._css_weekend?"_weekend":"",n+=i._css_holiday?"_holiday":"",n+=i._css_dis?"_dis":"",n+=i._css_hover&&!i._css_dis?"_hover":"",i.className=n,i=null},this._minutesInterval=5,this._initSelector=function(t,e){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(t){var e=(t=t||event).target||t.srcElement;!0===e._cell&&(o._selHover!=e&&o._clearSelHover(),null!=String(e.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(e.className+=" dhtmlxcalendar_selector_cell_hover",o._selHover=e))},this._sel.onmouseout=function(){o._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,o._scrollYears(1)},1==this.conf.touch&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[t]){if("month"==t){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var i=0,n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.msCont.appendChild(h);for(var s=0;s<3;s++){(d=document.createElement("LI")).innerHTML=this.langData[this.lang].monthesSNames[i],d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._month=i,d._cell=!0,this._msCells[i++]=d}}this.msCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._month&&(o._hideSelector(),o._updateActiveMonth(),o._drawMonth(new Date(o._activeMonth.getFullYear(),e._month,1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.msCont.ontouchstart=this.msCont.onclick)}if("year"==t){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(h);for(s=0;s<3;s++){(d=document.createElement("LI")).className="dhtmlxcalendar_selector_cell",d._cell=!0,h.appendChild(d)}}this.ysCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._year&&(o._hideSelector(),o._drawMonth(new Date(e._year,o._activeMonth.getMonth(),1,0,0,0,0)),o._doOnSelectorChange())},1==this.conf.touch&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if("hours"==t){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(i=0,n=0;n<4;n++){(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(h);for(s=0;s<6;s++){(d=document.createElement("LI")).innerHTML=this._fixLength(i,2),d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._hours=i,d._cell=!0,this._hsCells[i++]=d}}this.hsCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._hours&&(o._hideSelector(),o._activeDate.setHours(e._hours),o._updateActiveHours(),o._updateVisibleHours(),o._doOnSelectorChange(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]))},1==this.conf.touch&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if("minutes"==t){var l=4,r=3,a=2;1==this._minutesInterval&&(1==this._selectorMode?(l=2,r=3,a=1):(l=2,r=5,a=1,e+="5")),10==this._minutesInterval&&(l=2),15==this._minutesInterval&&(l=1,r=4,e+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(i=0,n=0;n<l;n++){var h;(h=document.createElement("UL")).className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(h);for(s=0;s<r;s++){var d;(d=document.createElement("LI")).innerHTML=a>1?this._fixLength(i,a):i,d.className="dhtmlxcalendar_selector_cell",h.appendChild(d),d._minutes=i,d._cell=!0,this._rsCells[i]=d,i+=this._minutesInterval}}this.rsCont.onclick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var e=t.target||t.srcElement;if(null!=e._minutes){if(1==o._minutesInterval){var i=o.getFormatedDate("%i");if(i=1==o._selectorMode?e._minutes.toString()+i.charAt(1):i.charAt(0)+e._minutes.toString(),o._activeDate.setMinutes(Number(i)),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]),o._hideSelector(),1==o._selectorMode)return o._updateVisibleMinutes(!0),o._selectorMode=2,o._showSelector("minutes",o._sel._x,o._sel._y,"selector_minutes",!0),void o._updateActiveMinutes();o._selectorMode=1}else o._hideSelector(),o._activeDate.setMinutes(e._minutes),o._updateActiveMinutes(),o.callEvent("onTimeChange",[new Date(o._activeDate.getTime())]);o._updateVisibleMinutes(),o._doOnSelectorChange()}},1==this.conf.touch&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[t]=!0}},this._showSelector=function(t,e,i,n,s){if(!0===s&&null!=this._sel&&this._isSelectorVisible()&&t==this._sel._t)this._hideSelector();else{"dhx_terrace"==this.conf.skin&&(e+=12),this._sel&&this._sel._ta[t]||this._initSelector(t,n),t!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=e,this._sel._y=i,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=t,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+n+("hours"==t&&1==this.conf.today?"2":""),this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==t?"":"none";var o=Math.max(0,e-Math.round(this._sel.offsetWidth/2));o+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(o=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=o+"px",this._sel.style.top="hours"==t||"minutes"==t?i-this._sel.offsetHeight+"px":i+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(t)}},this._doOnSelectorShow=function(t){"month"==t&&this._updateActiveMonth(),"year"==t&&this._updateYearsList(this._activeMonth),"hours"==t&&this._updateActiveHours(),"minutes"==t&&this._updateActiveMinutes()},this._hideSelector=function(t){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return!!this._sel&&"none"!=this._sel.style.display},this._doOnSelectorChange=function(t){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),!0===t])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(t){if(this._sel&&this._sel._ta[t]){if("month"==t){this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null;for(var e in this._msCells)this._msCells[e]._cell=null,this._msCells[e]._month=null,this._msCells[e].parentNode.removeChild(this._msCells[e]),this._msCells[e]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==t){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var e in this._ysCells)this._ysCells[e]._cell=null,this._ysCells[e]._year=null,this._ysCells[e].parentNode.removeChild(this._ysCells[e]),this._ysCells[e]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==t){this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null;for(var e in this._hsCells)this._hsCells[e]._cell=null,this._hsCells[e]._hours=null,this._hsCells[e].parentNode.removeChild(this._hsCells[e]),this._hsCells[e]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==t){this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null;for(var e in this._rsCells)this._rsCells[e]._cell=null,this._rsCells[e]._minutes=null,this._rsCells[e].parentNode.removeChild(this._rsCells[e]),this._rsCells[e]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[t]=null}},this.setMinutesInterval=function(t){1!=t&&5!=t&&10!=t&&15!=t||(this._minutesInterval=t,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){void 0!==this._msActive&&void 0!==this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var t=this._activeMonth.getFullYear();this._ysCells[t]&&(this._ysCells[t].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateYearsList=function(t){for(var e in this._ysCells)this._ysCells[e]=null,delete this._ysCells[e];for(var i=12*Math.floor(t.getFullYear()/12),n=0;n<4;n++)for(var s=0;s<3;s++)this.ysCont.childNodes[n].childNodes[s].innerHTML=i,this.ysCont.childNodes[n].childNodes[s]._year=i,this.ysCont.childNodes[n].childNodes[s].className="dhtmlxcalendar_selector_cell",this._ysCells[i++]=this.ysCont.childNodes[n].childNodes[s];this._updateActiveYear()},this._scrollYears=function(t){var e=(t<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+t,i=new Date(e,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(i)},this._updateActiveHours=function(){void 0!==this._hsActive&&void 0!==this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&void 0!==this._rsActive&&void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),1==this._minutesInterval?this._rsActive=this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._rsActive=this._activeDate.getMinutes(),void 0!==this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(t){var e=this._fixLength(this._activeDate.getMinutes(),2).toString();1==t&&(e=e.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+e.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=e,1==t&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(t,e){for(;String(t).length<e;)t="0"+String(t);return t},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(t){var e={};if(null!=this._strToDate)for(var i in this.i)if(null!=this.i[i].input&&this.i[i].input.value.length>0){var n=this._strToDate(this.i[i].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");n instanceof Date&&(e[i]=n)}this._dateFormat=t;var s=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(t){switch(t.replace(/%/,"")){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+o.langData[o.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+o.langData[o.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return t});this._dateFormatRE=new RegExp(s,"i");for(var i in e)this.i[i].input.value=this._dateToStr(e[i]);e=null},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._updateDateStr=function(t){if(this._dateFormatRE&&t.match(this._dateFormatRE)&&t!=this.getFormatedDate()){var e=this._strToDate(t);e instanceof Date&&(!this.checkEvent("onBeforeChange")||this.callEvent("onBeforeChange",[new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())])?(this._nullDate=!1,this._activeDate=e,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)):this._updateInp())}},this.showMonth=function(t){"string"==typeof t&&(t=this._strToDate(t)),t instanceof Date&&this._drawMonth(t)},this.setFormatedDate=function(t,e,i,n){var s=this._strToDate(e,t);if(n)return s;this.setDate(s)},this.getFormatedDate=function(t,e){if(!(e&&e instanceof Date)){if(this._nullDate)return"";e=new Date(this._activeDate)}return this._dateToStr(e,t)},this.getWeekNumber=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return"Invalid Date";void 0===this._ftDay&&(this._ftDay=4);var e=this._wStart,i=4,n=new Date(t.getFullYear(),0,1,0,0,0,0).getDay();0==n&&(n=7),i<e&&(i+=7,n+=7);var s=0;n>=e&&n<=i||(s=1);var o=n-e,l=new Date(t.getFullYear(),0,1-o+7*s,0,0,0,0),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0),a=Math.ceil((r.getTime()-l.getTime())/6048e5);if(0==a){var h=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),d=h.getDay()-this._wStart;d<0&&(d+=7),h.setDate(h.getDate()-d),a=this.getWeekNumber(h)}return a},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(t){if(t||!this._hasParent){if("string"==typeof t){var e=document.getElementById(t);if(null!=e&&void 0!==e._dhtmlxcalendar_uid&&null!=this.i[e._dhtmlxcalendar_uid])return void this._show(e._dhtmlxcalendar_uid)}if("object"!=typeof t||void 0===t._dhtmlxcalendar_uid||this.i[t._dhtmlxcalendar_uid]!=t){if(void 0===t)for(var i in this.i)t||(t=i);t&&this._show(t)}else this._show(t._dhtmlxcalendar_uid)}else this._show()},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(t,e){this._px=null,this._py=null,"right"==t||"bottom"==t?this.pos=t:(this.pos="int",void 0===t||isNaN(t)||(this.base.style.left=t+"px",this._px=t),void 0===e||isNaN(e)||(this.base.style.top=e+"px",this._py=e),this._ifrSize())},this._show=function(t,e){if(!0===e&&this._activeInp==t&&this._isVisible())this._hide();else{if(this.base.style.visibility="hidden",this.base.style.display="",t){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var i=this.i[t].input||this.i[t].button,n=window.dhx4.screenDim(),s={top:window.dhx4.absTop(i),left:window.dhx4.absLeft(i)};if("right"==this.pos)this.base.style.left=s.left+i.offsetWidth+"px",this.base.style.top=Math.min(s.top,n.bottom-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var o=s.top+i.offsetHeight+1;if(o+this.base.offsetHeight>n.bottom){var l=s.top-this.base.offsetHeight;l>=-20&&(o=l)}var r=s.left;r+this.base.offsetWidth>n.right&&(r=Math.max(0,s.left+i.offsetWidth-this.base.offsetWidth)),this.base.style.left=r+"px",this.base.style.top=o+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=t,i=null}else null!=this._px&&null!=this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[])}},this._hide=function(){null!=this._lastHover&&this._clearDayHover(),this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[])},this._isVisible=function(){return"none"!=this.base.style.display},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++)this._rangeSet[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(t){if(null==t)this._clearHolidays();else if(null!=t)for(var e=this._extractDates(t),i=0;i<e.length;i++)this._holidays[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(t){("string"==typeof t||t instanceof Date)&&(t=[t]);for(var e=[],i=0;i<t.length;i++)if("string"==typeof t[i])for(var n=t[i].split(","),s=0;s<n.length;s++)e.push(this._strToDate(n[s]));else t[i]instanceof Date&&e.push(t[i]);return e},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var t in this._rangeSet)this._rangeSet[t]=null,delete this._rangeSet[t]},this._clearHolidays=function(){for(var t in this._holidays)this._holidays[t]=null,delete this._holidays[t]},this._isOutOfRange=function(t){if(1==this._rangeSet[t])return!0;if(this._rangeActive){if("in"==this._rangeType&&(t<this._rangeFrom||t>this._rangeTo))return!0;if("out"==this._rangeType&&t>=this._rangeFrom&&t<=this._rangeTo)return!0;if("from"==this._rangeType&&t<this._rangeFrom)return!0;if("to"==this._rangeType&&t>this._rangeTo)return!0}var e=new Date(t);return!(!this._rangeWeek||!0!==this._rangeWeekData[e.getDay()])||(!(!this._rangeMonth||!0!==this._rangeMonthData[e.getDate()])||!(!this._rangeYear||!0!==this._rangeYearData[e.getMonth()+"_"+e.getDate()]))},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(t,e,i){var n=!1;if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",n=!0}n||null==t||null!=e||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=null,!0===i&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",n=!0),n||null!=t||null==e||(e instanceof Date||(e=this._strToDate(e)),this._rangeFrom=null,this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),!0===i&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",n=!0),n&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(t,e){if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;return this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}null==t||null!=e?null!=t||null==e||this.setSensitiveRange(e,null,!0):this.setSensitiveRange(null,t,!0)},this.disableDays=function(t,e){if("week"==t){"object"!=typeof e&&void 0===e.length&&(e=[e]),this._rangeWeekData||(this._rangeWeekData={});for(var i in this._rangeWeekData)this._rangeWeekData[i]=!1,delete this._rangeWeekData[i];for(var n=0;n<e.length;n++)this._rangeWeekData[e[n]]=!0,7==e[n]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==t){"object"!=typeof e&&void 0===e.length&&(e=[e]),this._rangeMonthData||(this._rangeMonthData={});for(var i in this._rangeMonthData)this._rangeMonthData[i]=!1,delete this._rangeMonthData[i];for(n=0;n<e.length;n++)this._rangeMonthData[e[n]]=!0;this._rangeMonth=!0}if("year"==t){var s=this._extractDates(e);this._rangeYearData||(this._rangeYearData={});for(var i in this._rangeYearData)this._rangeYearData[i]=!1,delete this._rangeYearData[i];for(n=0;n<s.length;n++)this._rangeYearData[s[n].getMonth()+"_"+s[n].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(t){"week"==t&&(this._rangeWeek=!1),"month"==t&&(this._rangeMonth=!1),"year"==t&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(t,e,i,n){for(var s=this._extractDates(t),o=0;o<s.length;o++){var l=new Date(s[o].getFullYear(),s[o].getMonth(),s[o].getDate(),0,0,0,0).getTime();this._tipData[l]={text:e,showIcon:i,usePopup:n}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++){var n=new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime();this._tipData[n]=null,delete this._tipData[n]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();null!=this._tipData[e]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=t,this._tipCellDim=this.getCellDimension(t),this._tipText=this._tipData[e].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(t,e,i,n,s){o._tipPopup||(o._tipPopup=new dhtmlXPopup({mode:"top"})),o._tipPopup.attachHTML(o._tipText),o._tipPopup.show(o._tipCellDim.x,o._tipCellDim.y,o._tipCellDim.w,o._tipCellDim.h),o.callEvent("onPopupShow",[o._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return null;for(var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),i=null,n=0;n<this.contDates.childNodes.length;n++)for(var s=0;s<this.contDates.childNodes[n].childNodes.length;s++){var o=this.contDates.childNodes[n].childNodes[s];null!=o._date&&o._date.getTime()==e&&(i={x:window.dhx4.absLeft(o),y:window.dhx4.absTop(o),w:o.offsetWidth,h:o.offsetHeight}),o=null}return i},this._updateFromInput=function(t){if(this._nullInInput&&0==t.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void this._updateInp();this.setDate(null)}else this._updateDateStr(t.value);t=null},this._doOnClick=function(t){var e=(t=t||event).target||t.srcElement;e._dhtmlxcalendar_uid&&e._dhtmlxcalendar_uid!=o._activeInp&&o._isVisible()&&o._activeInp?o._hide():e._dhtmlxcalendar_uid&&o.i[e._dhtmlxcalendar_uid]||(o._isSelectorVisible()?o._hideSelector():!o._hasParent&&o._isVisible()&&o._hide())},this._doOnKeyDown=function(t){27!=(t=t||event).keyCode&&13!=t.keyCode||(o._isSelectorVisible()?o._hideSelector():o._isVisible()&&!o._hasParent&&o._hide())},this._doOnInpClick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(t){var e=(t=t||event).target||t.srcElement;13!=t.keyCode&&e._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(e))},this._doOnBtnClick=function(t){"touchstart"==(t=t||event).type&&null!=t.preventDefault&&t.preventDefault();var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(null!=o.i[e._dhtmlxcalendar_uid].input&&o._updateFromInput(o.i[e._dhtmlxcalendar_uid].input),o._show(e._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){o&&o.unload&&o.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener("click",o._doOnClick,!1),window.addEventListener("keydown",o._doOnKeyDown,!1),window.addEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.addEventListener("touchstart",o._doOnClick,!1)):(document.body.attachEvent("onclick",o._doOnClick),document.body.attachEvent("onkeydown",o._doOnKeyDown),window.attachEvent("onunload",o._doOnUnload)),this.attachObj=function(t){var e=window.dhx4.newId();return"string"==typeof t?this.i[e]={input:document.getElementById(t)}:void 0!==t.tagName?this.i[e]={input:t}:"object"!=typeof t||null==t.input&&null==t.button||(this.i[e]={},null!=t.input&&(this.i[e].input="string"==typeof t.input?document.getElementById(t.input):t.input),null!=t.button&&(this.i[e].button="string"==typeof t.button?document.getElementById(t.button):t.button)),this._attachEventsToObject(e),e},this.detachObj=function(t){var e=null;if(null!=this.i[t]?e=t:"string"==typeof t?e=(t=document.getElementById(t))._dhtmlxcalendar_uid:void 0!==t.tagName?e=t._dhtmlxcalendar_uid:"object"!=typeof t||null==t.input&&null==t.button||(null==e&&null!=t.input&&(e=("string"==typeof t.input?document.getElementById(t.input):t.input)._dhtmlxcalendar_uid),null==e&&null!=t.button&&(e=("string"==typeof t.button?document.getElementById(t.button):t.button)._dhtmlxcalendar_uid)),null!=e&&null!=this.i[e]){this._detachEventsFromObject(e);for(var i in this.i[i])this.i[e][i]._dhtmlxcalendar_uid=null,this.i[e][i]=null,delete this.i[e][i];return this.i[e]=null,delete this.i[e],!0}return!1},this._attachEventsToObject=function(t){null!=this.i[t].button?(this.i[t].button._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].button.addEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.addEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.attachEvent("onclick",o._doOnBtnClick)):null!=this.i[t].input&&(this.i[t].input._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].input.addEventListener("click",o._doOnInpClick,!1),this.i[t].input.addEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.addEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.attachEvent("onclick",o._doOnInpClick),this.i[t].input.attachEvent("onkeyup",o._doOnInpKeyUp)))},this._detachEventsFromObject=function(t){null!=this.i[t].button?"function"==typeof window.addEventListener?(this.i[t].button.removeEventListener("click",o._doOnBtnClick,!1),1==this.conf.touch&&this.i[t].button.removeEventListener("touchstart",o._doOnBtnClick,!1)):this.i[t].button.detachEvent("onclick",o._doOnBtnClick):null!=this.i[t].input&&("function"==typeof window.addEventListener?(this.i[t].input.removeEventListener("click",o._doOnInpClick,!1),this.i[t].input.removeEventListener("keyup",o._doOnInpKeyUp,!1),1==this.conf.touch&&this.i[t].input.removeEventListener("touchstart",o._doOnInpClick,!1)):(this.i[t].input.detachEvent("onclick",o._doOnInpClick),this.i[t].input.detachEvent("onkeyup",o._doOnInpKeyUp)))},this._updateInp=function(){null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate())},this.enableListener=function(t){t&&("function"==typeof window.addEventListener?(t.addEventListener("focus",o._listenerEvFocus,!1),t.addEventListener("blur",o._listenerEvBlur,!1)):(t.attachEvent("onfocus",o._listenerEvFocus),t.attachEvent("onblur",o._listenerEvBlur)),t=null)},this.disableListener=function(t){t&&(t._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(t.removeEventListener("focus",o._listenerEvFocus,!1),t.removeEventListener("blur",o._listenerEvBlur,!1)):(t.detachEvent("onfocus",o._listenerEvFocus),t.detachEvent("onblur",o._listenerEvBlur)),t=null)},this._startListener=function(t){this._tmListener&&window.clearTimeout(this._tmListener),void 0===t._v1&&(t._v1=t.value),t._v1!=t.value&&(this._updateFromInput(t),t._v1=t.value),t._f0&&(this._tmListener=window.setTimeout(function(){o._startListener(t)},100))},this._listenerEvFocus=function(t){var e=(t=t||event).target||t.srcElement;e._f0=!0,o._startListener(e),e=null},this._listenerEvBlur=function(t){var e=(t=t||event).target||t.srcElement;e._f0=!1,e=null};for(var h in this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(t){return this.callEvent("onArrowClick",t)},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnMouseOut=function(t){return this.callEvent("onMouseOut",t)},this._evOnMouseOver=function(t){return this.callEvent("onMouseOver",t)},this.unload=function(){this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener("click",o._doOnClick,!1),window.removeEventListener("keydown",o._doOnKeyDown,!1),window.removeEventListener("unload",o._doOnUnload,!1),1==this.conf.touch&&document.body.removeEventListener("touchstart",o._doOnClick,!1)):(document.body.detachEvent("onclick",o._doOnClick),document.body.detachEvent("onkeydown",o._doOnKeyDown),window.detachEvent("onunload",o._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null;for(var t in this.i)this.i[t]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(t),this.disableListener(this.i[t].input),this.i[t]=null,delete this.i[t];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var t in this._sel._ta)this._sel._ta[t]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,this.unload=null,null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(var t in this)delete this[t];t=o=null},this.setDate(this._activeDate),this}function dhtmlXCombo(t,e,i,n,s){var o=this,l=null,r=null;"object"!=typeof t||t.tagName||(t=(l=t).parent,i=l.width,e=l.name,n=l.mode,r=l.skin),this.cont="string"==typeof t?document.getElementById(t):t,this.conf={skin:null,form_name:e||"dhxcombo",combo_width:(parseInt(i)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof n&&void 0!==this.modes[n]?n:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,free_text_empty:!1,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{header:!0,input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list._listId=window.dhx4.newId(),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this._doOnListScroll=function(){null!=o.conf.s_tm&&window.clearTimeout(o.conf.s_tm),o.conf.s_tm=window.setTimeout(o._doOnListScrollAction,o.conf.s_time)},this._doOnListScrollAction=function(){o.conf.s_tm=null,"scroll"==o.conf.s_mode&&o.list.scrollHeight-o.list.scrollTop-10<o.list.clientHeight&&o._subloadRequest()},"function"==typeof window.addEventListener?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll),this.setSkin(r||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material"),this._updateTopImage=function(t){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=t?this.t[t].obj.getTopImage(this.t[t].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(t){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var e=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last!=e.toLowerCase()){if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=e.toLowerCase(),void this.callEvent("onDynXLS",[e]);if(null!=this.conf.f_url){if(0==e.length)return this.conf.f_server_last=e.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[e]){this.clearAll(),this.conf.f_server_last=e.toLowerCase();for(var i=0;i<this.conf.f_cache_data[e].data.length;i++)this.load(this.conf.f_cache_data[e].data[i]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[e].dyn_end,this.conf.f_mask=this.conf.f_cache_data[e].mask),!0!==t&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){o.conf.f_server_last=e.toLowerCase(),o.conf.f_mask=e;var i="mask="+encodeURIComponent(e);o.conf.f_dyn&&(i+="&pos=0",o.conf.f_dyn_end=!1);var n=function(i){o.conf.f_cache&&(o.conf.f_cache_data[e]||(o.conf.f_cache_data[e]={data:[],dyn_end:!1,mask:e}),o.conf.f_cache_data[e].data.push(i.xmlDoc.responseXML)),o.clearAll(),o.load(i.xmlDoc.responseXML);if(1==(o.base.offsetWidth>0&&o.base.offsetHeight>0)&&1==o.conf.enabled&&1==o.conf.combo_focus&&!0!==t){if(o.conf.f_ac&&"start"==o.conf.f_mode&&0==o.conf.clear_bsp&&null!=o.list.firstChild){var s=o.list.firstChild._optId,l=String(o.t[s].obj.getText(o.list.firstChild,!0));e==o.base.firstChild.value&&0===String(l).toLowerCase().indexOf(String(e).toLowerCase())&&(o.base.firstChild.value=l,o.conf.f_ac_text=l.substr(e.length),o._selectRange(e.length,l.length))}o._showList(!0),o._checkForMatch()}n=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(o.conf.f_url,i,n):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(o.conf.f_url+(String(o.conf.f_url).indexOf("?")>=0?"&":"?")+i,n)},200)}else{this.conf.f_server_last=e.toLowerCase();var n=0==e.length||new RegExp(("start"==this.conf.f_mode?"^":"")+this._fixRE(e),"i"),s=null;for(var l in this.t){var r=!1;if(!0!==n)if(null!=this.conf.f_func){var a=this._getOption(this.t[l].item._optId,i);r=1==this.conf.f_func.apply(window,[e,a])}else{var h=this.t[l].obj.getText(this.t[l].item,!0);r=1==n.test(h)}!0===n||1==r?(this.t[l].item.style.display="",null==s&&e.length>0&&(s=String(this.t[l].obj.getText(this.t[l].item,!0)))):this.t[l].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=s&&(this.conf.f_ac_text=s.replace(new RegExp("^"+e,"i"),""),this.base.firstChild.value=s,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),!0!==t&&(this._showList(!0),this._checkForMatch())}}else this._checkForMatch()},this._searchRO=function(t){this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm),this.conf.ro_text+=t,this._showList();for(var e=0;e<this.list.childNodes.length;e++){var i=this.list.childNodes[e]._optId;if(0===String(this.t[i].obj.getText(this.list.childNodes[e],!0)).toLowerCase().indexOf(this.conf.ro_text)){this._setSelected(i,!0,!0),this._confirmSelect("script",!1);break}}this.conf.ro_tm=window.setTimeout(function(){o.conf.ro_text=""},this.conf.ro_tm_time)},this._fixRE=function(t){return String(t).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")},this._initObj=function(t){void 0!==t.template&&this.setTemplate(t.template),1!=t.add&&1!=this.conf.f_loading&&this.clearAll(!1),this.addOption(t.options)},this._xmlToObj=function(t,e,i){var n={add:!1,options:[]},s=1==e?t:t.getElementsByTagName("complete");if(s.length>0){1==window.dhx4.s2b(s[0].getAttribute("add"))&&(n.add=!0);for(var o=s[0].childNodes,l=0;l<o.length;l++)if(void 0!==o[l].tagName){if("template"==String(o[l].tagName).toLowerCase()){for(var r={},a=0;a<o[l].childNodes.length;a++){if(null!=(g=o[l].childNodes[a]).tagName){var h=g.tagName;if(void 0!==this.conf.template[h]&&(r[h]=window.dhx4._xmlNodeValue(g)),"columns"==h)for(var d=0;d<g.childNodes.length;d++){var c=g.childNodes[d];if(null!=c.tagName&&"column"==c.tagName){var u={};for(var f in{width:1,css:1,header:1,option:1})null!=c.getAttribute(f)&&(u[f]=c.getAttribute(f));for(var f in{header:1,option:1}){var p=c.getElementsByTagName(f);null!=p[0]&&null!=p[0].firstChild&&(u[f]=window.dhx4._xmlNodeValue(p[0]))}null==r.columns&&(r.columns=[]),r.columns.push(u)}c=null}}g=null}this.setTemplate(r)}if("option"==String(o[l].tagName).toLowerCase()){var _=!1;_=1==e?n.options.length==i:window.dhx4.s2b(o[l].getAttribute("selected"));var m={value:o[l].getAttribute("value"),text:window.dhx4._xmlNodeValue(o[l]),selected:_,checked:window.dhx4.s2b(o[l].getAttribute("checked"))};for(var f in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})null!=o[l].getAttribute(f)&&(m[f]=o[l].getAttribute(f));for(a=0;a<o[l].childNodes.length;a++)if(null!=o[l].childNodes[a].tagName&&"text"==String(o[l].childNodes[a].tagName).toLowerCase()){m.text={};var g=o[l].childNodes[a];for(d=0;d<g.childNodes.length;d++)null!=g.childNodes[d].tagName&&(m.text[g.childNodes[d].tagName]=window.dhx4._xmlNodeValue(g.childNodes[d]))}n.options.push(m)}}s=o=null}return n},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(t,e){for(var i=null;null!=t;)t=t[e<0?"previousSibling":"nextSibling"],null==i&&null!=t&&""==t.style.display&&null!=t._optId&&(i=t,t=null);return i},this.setName(this.conf.form_name),this._doOnListMouseMove=function(t){for(var e=(t=t||event).target||t.srcElement;null!=e&&e!=this;)void 0!==e._optId&&(o.conf.tm_hover&&window.clearTimeout(o.conf.tm_hover),o._setSelected(e._optId,!1,!1,!0)),e=e.parentNode;e=null},this._doOnListMouseDown=function(t){(t=t||event).cancelBubble=!0,o.conf.clear_click=!0,window.setTimeout(function(){o.base.firstChild.focus()},1)},this._doOnListMouseUp=function(t){if((t=t||event).button==o.conf.btn_left){for(var e=t.target||t.srcElement;null!=e&&e!=this;){if(void 0!==e._optId){var i=!0;"function"==typeof o.t[e._optId].obj.optionClick&&!0!==o.t[e._optId].obj.optionClick(e,t,o)&&(i=!1),i&&(o._setSelected(e._optId,null,!0),o._confirmSelect("click"))}e=e.parentNode}e=null}},this._doOnListMouseOut=function(t){o.conf.tm_hover&&window.clearTimeout(o.conf.tm_hover),o.conf.tm_hover=window.setTimeout(function(){var t=o.conf.last_match||o.conf.last_selected;null==o.conf.last_match&&null!=o.t[t]&&o.base.firstChild.value!=o.t[t].obj.getText(o.t[t].item,!0)&&(t=null),o._setSelected(t,null,!0,!0)},1)},this._doOnBaseMouseDown=function(t){if(o.conf.enabled&&(o.conf.clear_click=!0,(t=t||event).button==o.conf.btn_left)){var e=t.target||t.srcElement;if(e!=this.firstChild){window.setTimeout(function(){o.base.firstChild.focus()},1);for(var i=e;i!=this&&null!=i;)if(i==this.lastChild){if("function"==typeof o.modes[o.conf.opts_type].topImageClick){var n=o.conf.last_hover||o.conf.last_selected,s=null!=n?o.t[n].item:null;if(!0!==o.modes[o.conf.opts_type].topImageClick(s,o))return void(n=s=null)}i=null}else i=i.parentNode}o._isListVisible()?o._hideList():(e!=this.firstChild&&(o.conf.clear_blur=!0),o._showList(),o._setSelected(o.conf.last_selected,!0,!0)),e=null}},this._doOnBodyMouseDown=function(){o.conf.clear_click?o.conf.clear_click=!1:o._confirmSelect("blur")},this._doOnInputFocus=function(){o.conf.clear_blur=!1,o.conf.tm_confirm_blur&&window.clearTimeout(o.conf.tm_confirm_blur),0==o.conf.combo_focus&&(o.conf.combo_focus=!0,"material"==o.conf.skin&&null==o.base.className.match(/dhxcombo_actv/)&&(o.base.className+=" dhxcombo_actv"),o.callEvent("onFocus",[]))},this._doOnInputBlur=function(){1!=o.conf.clear_blur?(o.conf.tm_confirm_blur&&window.clearTimeout(o.conf.tm_confirm_blur),o.conf.tm_confirm_blur=window.setTimeout(function(){0==o.conf.clear_click&&(o._confirmSelect("blur"),o.conf.combo_focus=!1,"material"==o.conf.skin&&null!=o.base.className.match(/dhxcombo_actv/)&&(o.base.className=o.base.className.replace(/\s*dhxcombo_actv/gi,"")),o.callEvent("onBlur",[]))},20)):o.conf.clear_blur=!1},this._doOnInputKeyUp=function(t){if(t=t||event,0!=o.conf.f_mode)return o.conf.clear_bsp=8==t.keyCode||46==t.keyCode,void o._filterOpts();o._checkForMatch()},this._doOnInputKeyDown=function(t){38!=(t=t||event).keyCode&&40!=t.keyCode||t.ctrlKey||t.shiftKey||t.altKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,o._keyOnUpDown(38==t.keyCode?-1:1)),113==t.keyCode&&(o._isListVisible()||(o._showList(),o.base.firstChild.value==o.conf.last_text?(o._setSelected(o.conf.last_selected,!0,!0),o.base.firstChild.value=o.conf.last_text,o.conf.f_server_last=o.base.firstChild.value.toLowerCase()):(o.conf.f_server_last=o.base.firstChild.value.toLowerCase(),0==o.conf.f_mode&&o._checkForMatch()))),27==t.keyCode&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,o._cancelSelect()),13==t.keyCode&&(t.preventDefault&&t.preventDefault(),o._confirmSelect("kbd")),1==o.conf.ro_mode&&(t.keyCode>=48&&t.keyCode<=57||t.keyCode>=65&&t.keyCode<=90)&&(o._searchRO(String.fromCharCode(t.keyCode).toLowerCase()),t.cancelBubble=!0),o.conf.clear_key=!0,o.callEvent("onKeyPressed",[t.keyCode||t.charCode])},this._doOnInputKeyPress=function(t){o.conf.clear_key?o.conf.clear_key=!1:(t=t||event,o.callEvent("onKeyPressed",[t.keyCode||t.charCode]))},this._keyOnUpDown=function(t){var e=null;if(this.conf.last_hover?e=this.t[this.conf.last_hover].item:this.conf.last_selected&&(e=this.t[this.conf.last_selected].item),(e||0!=this._getListVisibleCount())&&(null!=e&&""!=e.style.display&&(e=null),this._showList(),null!=e?this.t[e._optId].obj.isSelected(e)&&(e=this._getNearItem(e,t)):""!=(e=this.list.firstChild).style.display&&(e=this._getNearItem(e,1)),null!=e)){if(this._setSelected(e._optId,!0,!0),0==this.conf.f_mode)this.base.firstChild.value=this.t[e._optId].obj.getText(e,!0);else{var i=String(this.t[e._optId].obj.getText(e,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===i.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=i.substring(this.conf.f_server_last.length,i.length),this.base.firstChild.value=i,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}e=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var a=0;a<this.conf.evs_nodes.length;a++)for(var h in this.conf.evs_nodes[a].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[a].node.addEventListener(h,this[this.conf.evs_nodes[a].evs[h]],!1):this.conf.evs_nodes[a].node.attachEvent("on"+h,this[this.conf.evs_nodes[a].evs[h]]);return this.unload=function(){this.clearAll(),this.t=null;for(var t=0;t<this.conf.evs_nodes.length;t++){for(var e in this.conf.evs_nodes[t].evs)"function"==typeof window.addEventListener?this.conf.evs_nodes[t].node.removeEventListener(e,this[this.conf.evs_nodes[t].evs[e]],!1):this.conf.evs_nodes[t].node.detachEvent("on"+e,this[this.conf.evs_nodes[t].evs[e]]),this.conf.evs_nodes[t].evs[e]=null,delete this.conf.evs_nodes[t].evs[e];this.conf.evs_nodes[t].node=null,this.conf.evs_nodes[t].evs=null,delete this.conf.evs_nodes[t].node,delete this.conf.evs_nodes[t].evs,this.conf.evs_nodes[t]=null}window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this._mcDetachHeader(),this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var e in this.conf)this.conf[e]=null,delete this.conf[e];this.conf=null,"function"==typeof window.addEventListener?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll),this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null;for(var e in this)"function"==typeof this[e]&&(this[e]=null);o=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=t,t=null,null!=l&&(null!=l.filter&&("string"==typeof l.filter?this.enableFilteringMode(!0,l.filter,window.dhx4.s2b(l.filter_cache),window.dhx4.s2b(l.filter_sub_load)):this.enableFilteringMode(!0)),null!=l.image_path&&this.setImagePath(l.image_path),null==l.default_image&&null==l.default_image_dis||this.setDefaultImage(l.default_image,l.default_image_dis),(l.items||l.options)&&this.addOption(l.items||l.options),(l.xml||l.json)&&this.load(l.xml||l.json),void 0!==l.readonly&&this.readonly(l.readonly),l=null),this}function dhtmlXComboFromSelect(t){"string"==typeof t&&(t=document.getElementById(t));var e=t.offsetWidth,i=t.getAttribute("name")||null,n=document.createElement("SPAN");t.parentNode.insertBefore(n,t);var s=new dhtmlXCombo(n,i,e,t.getAttribute("mode")||t.getAttribute("opt_type")||"option");n=null;var o=t.getAttribute("imagePath");o&&s.setImagePath(o);var l=t.getAttribute("defaultImage"),r=t.getAttribute("defaultImageDis");1==window.dhx4.s2b(r)&&(r=!0),null==l&&null==r||s.setDefaultImage(l,r);var a=s._xmlToObj([t],!0,t.selectedIndex);return a.options.length>0&&s.addOption(a.options),a=null,t.parentNode.removeChild(t),t=null,s}function dhtmlXComboExtend(t,e){for(var i in dhtmlXCombo.prototype.modes[e])void 0===dhtmlXCombo.prototype.modes[t][i]&&(dhtmlXCombo.prototype.modes[t][i]=dhtmlXCombo.prototype.modes[e][i])}function dhtmlXColorPicker(t){if(!(this instanceof window.dhtmlXColorPicker))return new dhtmlXColorPicker(t);dhx4._eventable(this);var e,i,n=this,s=null;switch(this._nodes=[],this.activeNode=null,this._inputListenerId=null,this.base=null,this._globalNode=null,this.memory=null,this.skin=null,this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0},this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1},this._initMoveSelection=function(t){return t=t||event,"function"==typeof window.addEventListener?(n._controllerNodes.colorArea.addEventListener("mousemove",n._setMoveSelection,!1),document.body.addEventListener("mouseup",n._cleanMoveSelection,!1)):(n._controllerNodes.colorArea.attachEvent("onmousemove",n._setMoveSelection),document.body.attachEvent("onmouseup",n._cleanMoveSelection)),n._setMoveSelection(t,n._controllerNodes.colorArea),!1},this._cleanMoveSelection=function(){return"function"==typeof window.removeEventListener?(n._controllerNodes.colorArea.removeEventListener("mousemove",n._setMoveSelection,!1),document.body.removeEventListener("mouseup",n._cleanMoveSelection,!1)):(n._controllerNodes.colorArea.detachEvent("onmousemove",n._setMoveSelection),document.body.detachEvent("onmouseup",n._cleanMoveSelection)),!1},this._setMoveSelection=function(t){t=t||event;var e=n._getOffsetPosition(t,n._controllerNodes.colorArea);return n._controllerNodes.fr_cover?setTimeout(function(){n._setColorAreaXY(e.x,e.y),n._setColorByXYC()},0):(n._setColorAreaXY(e.x,e.y),n._setColorByXYC()),!1},this._initMoveContrast=function(t){t=t||event,"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",n._setMoveContrast,!1),document.body.addEventListener("mouseup",n._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",n._setMoveContrast),document.body.attachEvent("onmouseup",n._cleanMoveContrast)),n._setMoveContrast(t,n._controllerNodes.contrastArea)},this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",n._setMoveContrast,!1),document.body.removeEventListener("mouseup",n._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",n._setMoveContrast),document.body.detachEvent("onmouseup",n._cleanMoveContrast))},this._setMoveContrast=function(t){t=t||event;var e=n._getOffsetPosition(t,n._controllerNodes.contrastArea);n._setContrastY(e.y),n._setColorByXYC(!0)},this._doOnSelectColor=function(){var t=n.colorAIP.rgb2hex({r:n.value.red,g:n.value.green,b:n.value.blue});null!=n.activeNode&&(n.activeNode.valueCont&&(n.activeNode.valueCont.value=t),n.activeNode.valueColor&&(n.activeNode.valueColor.style.backgroundColor=t)),(n.base._dhx_remove||n.conf.hideOnSelect)&&n.hide(),n.callEvent("onSelect",[t,n.activeNode?n.activeNode.node:null])},this._doOnCancel=function(){1==n.callEvent("onCancel",[n.activeNode?n.activeNode.node:null])&&1==n.conf.closeable&&n.hide()},this._doOnFocusByInput=function(){var t=this!=window?this:event.srcElement,e=n.activeNode&&n.activeNode.valueCont&&n.activeNode.valueCont==t?n.activeNode:n._getNodeByValueCont(t);n.activeNode=e,e&&e==n.activeNode&&n._initListenerInput()},this._doOnBlurByInput=function(){var t=this!=window?this:event.srcElement,e=n.activeNode&&n.activeNode.valueCont&&n.activeNode.valueCont==t?n.activeNode:n._getNodeByValueCont(t);e&&e==n.activeNode&&n._removeListenerInput()},this._doOnClickByNode=function(t){t=t||event;var e=this!=window?this:event.srcElement;n.activeNode=n.activeNode.node!=e?n._getNodeByElement(e):n.activeNode,n.isVisible()||n.show()},this.saveColor=function(){n.memory.setValue(n.value)},this._onSelectMemoryEl=function(t){var e;n._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);for(e in t.value)n.value[e]=t.value[e];n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnClickByBody=function(t){var e=!0,i=(t=t||event).target||t.srcElement;n._isBaseNode(i)&&(e=!1),e&&n.activeNode&&(n.activeNode.node==i||n.activeNode.valueCont==i)&&(e=!1),e&&n.hide()},this._doOnChangeHSL=function(){var t,e=parseInt(n._controllerNodes.hue.value),i=parseInt(n._controllerNodes.sat.value),s=parseInt(n._controllerNodes.lum.value);isNaN(e)||e>359||e<0?n._controllerNodes.hue.value=n.value.hue:n.value.hue=e,isNaN(i)||i>100||i<0?n._controllerNodes.sat.value=n.value.sat:n.value.sat=i,isNaN(s)||s>100||s<0?n._controllerNodes.lum.value=n.value.lum:n.value.lum=s,t=n.colorAIP.hsl2rgb(n.value.hue,n.value.sat/100,n.value.lum/100),n.value.red=Math.round(255*t.r),n.value.green=Math.round(255*t.g),n.value.blue=Math.round(255*t.b),n._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum),n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnChangeRGB=function(){var t,e=parseInt(n._controllerNodes.red.value),i=parseInt(n._controllerNodes.green.value),s=parseInt(n._controllerNodes.blue.value);isNaN(e)||e>255||e<0?n._controllerNodes.red.value=n.value.red:n.value.red=e,isNaN(i)||i>255||i<0?n._controllerNodes.green.value=n.value.green:n.value.green=i,isNaN(s)||s>255||s<0?n._controllerNodes.blue.value=n.value.blue:n.value.blue=s,t=n.colorAIP.rgb2hsl(n.value.red/255,n.value.green/255,n.value.blue/255),n.value.hue=Math.round(t.h),n.value.sat=Math.round(100*t.s),n.value.lum=Math.round(100*t.l),n._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum),n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnChangeHSV=function(){n._controllerNodes.hsv.value=n.setColor(n._controllerNodes.hsv.value)},this._checkType=function(t){if(!(t instanceof Array))return void 0==t?null:"string"==typeof t?"string":t.tagName&&"input"==t.tagName.toLowerCase()?"input":t.tagName&&"textarea"==t.tagName.toLowerCase()?"textarea":t.tagName?"container":"object"==typeof t?"object":void 0;switch(n._checkType(t[0])){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return}},this._initByObject=function(t){t.parent&&t.parent.tagName?n.base=t.parent:"string"==typeof t.parent?n.base=document.getElementById(t.parent):(n.base=document.createElement("div"),n.base._dhx_remove=!0),t.color&&(n.conf.selectedColor=t.color),void 0!==t.closeable&&(this.conf.closeable=dhx4.s2b(t.closeable)),t.custom_colors&&(this._tempInitCC=function(){var e,i;if(this.initMemoryColors(),this.conf.customColors=!0,t.custom_colors instanceof Array)for(i=t.custom_colors.length,e=0;e<i;e++)this.setCustomColors(t.custom_colors[e]);this.base.parentNode&&this.showMemory(),delete this._tempInitCC}),t.hide&&(n.conf.hide=!0),t.input&&n._addNode(t.input,t.target_color,t.target_value);var e=t.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";n.setSkin(e),t.colors&&(n.initMemoryColors(),n.conf.customColors=!0),t.link&&n._addNode(t.link)},this.unload=function(){var t,e,o;for(this.isVisible()&&this.hide(),this.destructMemory(),e=this._nodes.length,t=0;t<e;t++){this._detachEventsFromNode(this._nodes[t]);for(o in this._nodes[t])this._nodes[t][o]=null;delete this._nodes[t]}this._nodes=null,this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,""),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)),this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover),dhx4.zim.clear(this.conf.cp_id),dhx4._eventable(this,"clear");for(o in this)this[o]=null;n=null,s=null,i=null},this._checkType(t)){case"object":n._initByObject(t);break;case"input":case"textarea":n._initByObject({}),this._addNode(t);break;case"string":return s=document.getElementById(t),new dhtmlXColorPicker(s);case"container":n._initByObject({parent:t});break;case null:n._initByObject({});break;case"array_string":case"array_input":for(n._initByObject({}),e=t.length,o=0;o<e;o++)this._addNode(t[o]);break;case"array_object":for(n._initByObject({}),e=t.length,o=0;o<e;o++)(i=this._addNode(t[o].input,t[o].target_color,t[o].target_value).conf).customColors=void 0!=t[o].custom_colors?dhx4.s2b(t[o].custom_colors):i.customColors,i.selectedColor=void 0!=t[o].color?t[o].color:i.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},"function"==typeof this._tempInitCC&&this._tempInitCC(),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.setColor(this.conf.selectedColor||"#ffffff"),this._nodes.length)for(var o=0;o<this._nodes.length;o++)this._attachEventsToNode(this._nodes[o]);this.conf.hide&&this.hide(),"function"==typeof this._cpInitFRM&&this._cpInitFRM()}function dhtmlXSlider(t){var e=this;if(this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,decimals:0,margin:2,border:1,inverse:!1,disabled:!1,tooltip:!1,visible:!0,linkTo:null,range:!1,bg:null,bg_mode:"left"},this._attachedNode={},this._movingInitialValues=null,this.base=null,arguments.length>1)return new dhtmlXSlider(this._renderArgumets(arguments));if("string"==typeof t||"object"==typeof t&&t.tagName)return new dhtmlXSlider({parent:t});"string"==typeof t.parent?this.base=document.getElementById(t.parent):this.base=t.parent,this._mergeConfig(this._readAttFormNode(this.base)),this._mergeConfig(t),null==this.conf.bg&&(this.conf.bg=1==this.conf.range),1==this.conf.range&&(this.conf.value instanceof Array||(this.conf.value=[this.conf.value]),this.conf.value.length<2&&this.conf.value.push(this.conf.value[0]),this.conf.linkTo instanceof Array||(this.conf.linkTo=[this.conf.linkTo])),this._detectDecimals(),null!=this.conf.size&&void 0!==this.conf.size||(this.conf.vertical?this.conf.size=this.base.offsetHeight:this.conf.size=this.base.offsetWidth);var i=this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"material";return this.setSkin(i),this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'>"+(1==this.conf.bg?"<div class='dhxsl_track_bg'></div>":"")+"</div><div class='dhxsl_runner'></div>"+(1==this.conf.range?"<div class='dhxsl_runner'></div>":"")+"</div>",this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1],runner2:this.base.firstChild.childNodes[2]},this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(t){return"function"==typeof(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this._r_actv=null,1==this.conf.range?this.conf.value=this._normalizeRange(this.conf.value,this.conf.min,this.conf.max):this.conf.value=this._normalize(this.conf.value,this.conf.min,this.conf.max),this._setOrient(this.conf.vertical),this.setSize(this.conf.size),this._initMover=function(t,i){if(!e.conf.disabled)return"function"==typeof(t=t||event).preventDefault&&t.preventDefault(),null!=i?e._r_actv=e._nodes[0==i?"runner":"runner2"]:(e._r_actv=t.target||t.srcElement,-1==e._r_actv.className.indexOf("dhxsl_runner")&&(e._r_actv=e._nodes.runner)),e._r_actv.className="dhxsl_runner dhxsl_runner_actv",e._movingInitialValues={},1==e.conf.range?(e._movingInitialValues.index=e._r_actv==e._nodes.runner?0:1,e._movingInitialValues.value=e.conf.value[e._movingInitialValues.index]):e._movingInitialValues.value=e.conf.value,e._movingInitialValues.coord=e._getTouchCoord(t),0==e.conf.disabled&&("function"==typeof window.addEventListener?(window.addEventListener("mousemove",e._move,!1),window.addEventListener("mouseup",e._cleanMove,!1),window.addEventListener("touchmove",e._move,!1),window.addEventListener("touchend",e._cleanMove,!1)):(document.body.attachEvent("onmousemove",e._move),document.body.attachEvent("onmouseup",e._cleanMove))),e.callEvent("onMouseDown",[e._r_actv==e._nodes.runner?0:1]),!1},this._move=function(t){if(!e.conf.disabled){"function"==typeof(t=t||event).preventDefault&&t.preventDefault();var i=e.conf.vertical?e._r_actv.offsetHeight:e._r_actv.offsetWidth,n=e.conf.max-e.conf.min,s=e._getTouchCoord(t),o=e._movingInitialValues.value+(s-e._movingInitialValues.coord)*n/(e.conf.size-i)*(e.conf.inverse?-1:1);if(1==e.conf.range){var l=[e.conf.value[0],e.conf.value[1]];0==e._movingInitialValues.index?l[0]=Math.min(l[1],o):1==e._movingInitialValues.index&&(l[1]=Math.max(l[0],o)),e.setValue(l,!0)}else e.setValue(o,!0)}},this._cleanMove=function(t){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",e._move,!1),window.removeEventListener("mouseup",e._cleanMove,!1),window.removeEventListener("touchmove",e._move,!1),window.removeEventListener("touchend",e._cleanMove,!1)):(document.body.detachEvent("onmousemove",e._move),document.body.detachEvent("onmouseup",e._cleanMove)),e._movingInitialValues=null,e._r_actv.className=e._r_actv.className.replace(/\s{0,}dhxsl_runner_actv/gi,""),e.callEvent("onSlideEnd",[e.conf.value]),e.callEvent("onMouseUp",[e._r_actv==e._nodes.runner?0:1]),e._r_actv=null},this._doOnSetValue=function(t){if(!e.conf.disabled){if(null!=e._movingInitialValues)return!1;"function"==typeof(t=t||event).preventDefault&&t.preventDefault();var i=0,n=t.target||t.srcElement;if(null!=n.className.match(/dhxsl_track_bg/)&&(i=parseInt(n.style[e.conf.vertical?"top":"left"])),null!=t.type.match(/touch/))var s=e._getTouchCoord(t)+i;else s=(e.conf.vertical?t.offsetY||t.layerY:t.offsetX||t.layerX)+i;e.conf.vertical?e._nodes.runner.offsetHeight:e._nodes.runner.offsetWidth;var o=e.conf.max-e.conf.min,l=null,r=null;return r=1==e.conf.inverse?e.conf.max-s*o/e.conf.size:s*o/e.conf.size+e.conf.min,1==e.conf.range&&(r=[0==(l=Math.abs(e.conf.value[0]-r)<=Math.abs(e.conf.value[1]-r)?0:1)?r:e.conf.value[0],1==l?r:e.conf.value[1]]),e.conf.init_index=l,e.setValue(r,!0),e.conf.init_index=null,null==e._movingInitialValues&&e._initMover(t,l),!1}},this._doOnChangeInput=function(t){var i=(t=t||event).target||t.srcElement;e.setValue(i.value)},this._doOnKeyDown=function(t){var i=(t=t||event).target||t.srcElement;13==t.keyCode&&e.setValue(i.value)},this._attachEvents(this._nodes),this.unload=function(){dhx4._eventable(this,"clear"),this._detachNode(),this._detachEvents(this._nodes),this.base.removeChild(this._nodes.cont),this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null,delete this._nodes.cont,delete this._nodes.track,delete this._nodes.max,delete this._nodes.min,delete this._nodes.runner,this._nodes.runner2&&delete this._nodes.runner2,/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,""));for(var t in this)this[t]=null;e=null},dhx4._eventable(this),this.conf.disabled&&this.disable(),this.conf.tooltip&&this.enableTooltip(),this.conf.visible||this.hide(),this.conf.linkTo&&this.linkTo(this.conf.linkTo),this}function dhtmlXPopup(t){var e=this;if(this.conf=t||{},t=null,this.mode=this.conf.mode||"bottom",this.conf.zi=window.dhx4.newId(),this.conf.context=null==this.conf.context||window.dhx4.s2b(this.conf.context),this.conf.IE6_display_fix=null!=this.conf.IE6_display_fix&&window.dhx4.s2b(this.conf.IE6_display_fix),this.conf.last_p_click=this.conf.last_body_click=null,this.p=document.createElement("DIV"),this.p.style.display="none",this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>",document.body.appendChild(this.p),this.p.oncontextmenu=function(t){if(0==e.conf.context)return t=t||event,t.returnValue=!1,!1},this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9},material:{t0:19,t1:9,t2:19,t3:9}},this.p.ontouchstart=this.p.onclick=function(t){t=t||event;var i=null!=e.conf.last_p_click&&e.conf.last_p_click!=t.type;if(e.conf.last_p_click=t.type,1!=i){if(e._clearClick=!0,null!=e._nodeObj)return e.callEvent("onContentClick",[]),!0;for(var n=t.target||t.srcElement,s=null;n!=e.p&&null!=n;)void 0===n._idd||n._isSeparator?n=n.parentNode:(s=n._idd,n=null);n=null,null!=s&&(e.callEvent("onClick",[s]),null!=e&&null!=e.isVisible&&e.isVisible()&&!0===e.callEvent("onBeforeHide",["select",t,s])&&(t.cancelBubble=!0,e.hide()))}},this.separator="DHXSEP_"+window.dhx4.newId(),this.tpl=[],this._setTemplate=function(t){this.tpl=t.split(",")},this.show=function(t){var e=null;if(1==arguments.length){if(t){if(!this._idExists(t))return}else t=this.conf.id[0];this.conf.toolbar&&(e=this.conf.toolbar._getItemDim(t)),this.conf.ribbon&&(e=this.conf.ribbon._getItemDim(t)),this.conf.form&&(e=this.conf.form._getItemDim(t))}else 4==arguments.length&&(this._clearClick=!0,e={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},t=null);e&&(this.p.style.visibility="hidden",this.p.style.display="",this._setPos(e),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=t,this.callEvent("onShow",[t]))},this._setPos=function(t,e){var i=t.left,n=t.top,s=t.width,o=t.height;this._posData={left:i,top:n,width:s,height:o};var l=window.dhx4.screenDim(),r=e||this.mode;void 0===e&&(e=!1);var a={top:n-this.p.offsetHeight-l.top,bottom:l.bottom-(n+o+this.p.offsetHeight),left:i-this.p.offsetWidth-l.left,right:l.right-(i+s+this.p.offsetWidth)};if(!e&&a[r]<0){var h=this._getAvailPos(r,a);if(!1!==h)return void this._setPos(t,h)}if("top"==r||"bottom"==r){var d=this.skinParams[this.conf.skin].t2,c=this.skinParams[this.conf.skin].t3,u=Math.round(this.p.offsetWidth/2),f=Math.round(this.p.lastChild.offsetWidth/2);if(i<l.left){var p=Math.min(i+s,l.left);s=i+s-p,i=p}i+s>l.right&&(s=l.right-i);var _=(x=Math.round(i+s/2))-u,m=x-d-f,g=x+f+d-this.p.offsetWidth;_<l.left-c?_=Math.min(l.left-c,m):_+this.p.offsetWidth>l.right+c&&(_=Math.max(g,l.right+c-this.p.offsetWidth)),this.p.style.left=_+"px",this.p.style.top=("top"==r?n-this.p.offsetHeight:n+o)+"px",x=x-_-f,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r,this.p.lastChild.style.top=("top"==r?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px",this.p.lastChild.style.left=x+"px"}if("left"==r||"right"==r){d=this.skinParams[this.conf.skin].t0,c=this.skinParams[this.conf.skin].t1;var v=Math.round(this.p.offsetHeight/2),b=Math.round(this.p.lastChild.offsetHeight/2);if(n<l.top){var y=Math.min(n+o,l.top);o=n+o-y,n=y}n+o>l.bottom&&(o=l.bottom-n);var x,w=(x=Math.round(n+o/2))-v,C=x-d-b,N=x+b+d-this.p.offsetHeight;w<l.top-c?w=Math.min(l.top-c,C):w+this.p.offsetHeight>l.bottom+c&&(w=Math.max(N,l.bottom+c-this.p.offsetHeight)),this.p.style.left=("left"==r?i-this.p.offsetWidth:i+s)+"px",this.p.style.top=w+"px",x=x-w-b,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r,this.p.lastChild.style.left=("left"==r?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px",this.p.lastChild.style.top=x+"px"}if(this._IEDisp&&null!=this._nodeId){var k=document.getElementById(this._nodeId);1==this.conf.IE6_display_fix&&(k.style.visibility="hidden"),window.setTimeout(function(){k.style.visibility="visible",k=null},1)}},this._getAvailPos=function(t,e){for(var i={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},n=null,s=0;s<i[t].length;s++)null==n&&e[i[t][s]]>0&&(n=i[t][s]);if(null==n){n="bottom";for(var o in e)e[o]>e[n]&&(n=o)}return n!=t&&n},this._repaint=function(){this.isVisible()&&this._setPos(this._posData)},this.clear=function(){if(this._nodeObj&&(window.dhx4.isIE&&"function"==typeof window.dhtmlXLayoutObject&&this._nodeObj instanceof window.dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,null!=this._nodeObjEv)){for(var t=0;t<this._nodeObjEv.length;t++)this.detachEvent(this._nodeObjEv[t]);this._nodeObjEv=null}this._IEHoverInited&&this._IEHoverClear();for(var e=this.p.firstChild.firstChild.firstChild;e.childNodes.length>0;)e.removeChild(e.lastChild);e=null,this.itemData={}},this.hide=function(){if("none"!=this.p.style.display){this.p.style.display="none",window.dhx4.zim.clear(this.conf.zi);var t=this._lastId;this._lastId=null,this.callEvent("onHide",[t]),this.conf.last_p_click=this.conf.last_body_click=null}},this.isVisible=function(){return""==this.p.style.display},this.itemData={},this.getItemData=function(t){return t?this.itemData[t]?this.itemData[t]:{}:this.itemData},this.setSkin=function(t){this.conf.skin=t,this.p.className="dhx_popup_"+this.conf.skin,null!=this._nodeObj&&"function"==typeof this._nodeObj.setSkin&&this._nodeObj.setSkin(this.conf.skin),this._repaint()},this.attachList=function(t,e){this._setTemplate(t),this.clear();for(var i=this.p.firstChild.firstChild.firstChild,n=0;n<e.length;n++){var s=document.createElement("TR");if(e[n]!=this.separator){if(void 0===e[n].id||null==e[n].id)for(s._idd=window.dhx4.newId();null!=this.itemData[s._idd];)s._idd=window.dhx4.newId();else s._idd=e[n].id;this.itemData[s._idd]=e[n]}if(i.appendChild(s),e[n]==this.separator){s.className="dhx_popup_sep",s._isSeparator=!0;(r=document.createElement("TD")).className="dhx_popup_sep",r.colSpan=this.tpl.length,r.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>",s.appendChild(r),r=null}else{for(var o=0;o<this.tpl.length;o++){var l="dhx_popup_td";!this._IEFirstLast||1!=this.tpl.length&&0!=o&&o!=this.tpl.length-1||(1==this.tpl.length?l+=" dhx_popup_td_single":l+=0==o?" dhx_popup_td_first":" dhx_popup_td_last");var r;(r=document.createElement("TD")).className=l,r.innerHTML=e[n][this.tpl[o]]||"&nbsp;",s.appendChild(r),r=null}this._IEHover&&(s._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}s=null}i=null,this._repaint()},this._attachNode=function(t,e){this.clear(),this._nodeId="dhxpopup_node_"+window.dhx4.newId();var i=this.p.firstChild.firstChild.firstChild,n=document.createElement("TR");n.className="dhxnode",i.appendChild(n);var s=document.createElement("TD");return s.className="dhx_popup_td",s.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>",e.width&&(s.firstChild.style.width=e.width+"px"),e.height&&(s.firstChild.style.height=e.height+"px"),n.appendChild(s),s=n=i=null,"function"==typeof this["_attach_init_"+t]&&(this["_attach_init_"+t](e),this._enableIEVFix()),this._repaint(),this._nodeObj},this.unload=function(){if("function"==typeof window.addEventListener?(window.removeEventListener("touchstart",this._doOnClick,!1),window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1)),window.dhx4.detachEvent(this.conf.ev_grid_click),this.clear(),null!=this.conf.toolbarEvent&&null!=this.conf.toolbar&&(null!=this.conf.toolbar.detachEvent?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=null),null!=this.conf.ribbonEvent&&null!=this.conf.ribbon&&(null!=this.conf.ribbon.detachEvent?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null),null!=this.conf.slider){for(var t=0;t<this.conf.slider_events.length;t++)this.conf.slider.detachEvent(this.conf.slider_events[t]);this.conf.slider_events=null,this._sliderShow=this._sliderHide=null,this.conf.slider=null}window.dhx4._eventable(this,"clear"),this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null,this.p.parentNode.removeChild(this.p),this.p=null;for(var i in this.conf)this.conf[i]=null;for(var i in this)this[i]=null;e=null},window.dhx4._eventable(this),this._doOnClick=function(t){t=t||event;var i=null!=e.conf.last_body_click&&e.conf.last_body_click!=t.type;if(e.conf.last_body_click=t.type,1!=i)if(1!=e._clearClick){if(null!=e.conf.form){var n;if("option"==((h=t.target||t.srcElement).tagName||"").toLowerCase()&&(h=h.parentNode),null!=h.className&&h.className.search("dhxform")>=0)null!=h.parentNode&&null!=h.parentNode.parentNode&&null!=h.parentNode.parentNode._idd&&(n=h.parentNode.parentNode._idd,"ra"==h.parentNode.parentNode._type&&(n=[h.parentNode.parentNode._group,h.parentNode.parentNode._value]));else{for(var s=!0,o=!1;s&&!o;){(r=(h.className||"").toLowerCase()).length>0&&(o="dhxform_btn"==r||r.search(/dhxeditor_inside/gi)>=0||"dhxcombo_input"==r||r.search(/dhxcombolist/gi)>=0),s=null!=(h=h.parentNode)}if(o)return}if(h=null,null!=n&&e._idExists(n))return}if("function"==typeof window.dhtmlXForm&&e._nodeObj instanceof window.dhtmlXForm){var l={},r=0,a=e._nodeObj;if(a.forEachItem(function(t){"combo"==a.getItemType(t)&&(l[a.getCombo(t).list._listId]=!0,r++)}),a=null,r>0){var h=t.target||t.srcElement;for(s=!0,o=!1;1==s&&1!=o;){(r=(h.className||"").toLowerCase()).length>0&&r.search(/^dhxcombolist/gi)>=0&&null!=h._listId&&1==l[h._listId]?(o=!0,h=null):s=null!=(h=h.parentNode)}if(1==o)return}}e.isVisible()&&!0===e.callEvent("onBeforeHide",["click",t])&&e.hide()}else e._clearClick=!1},this._doOnKeyUp=function(t){27==(t=t||event).keyCode&&e.isVisible()&&!0===e.callEvent("onBeforeHide",["esc",t])&&e.hide()},this._doOnUnload=function(){e.unload()},"function"==typeof window.addEventListener?(window.addEventListener("touchstart",this._doOnClick,!1),window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1)),this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(t,i){(null==e._nodeObj||e._nodeObj!=i&&1!=e._findGrid(e._nodeObj,i))&&(e._clearClick=!1,e._doOnClick(t)),i=null}),this._findGrid=function(t,e){var i=!1;return"function"==typeof window.dhtmlXTabBar&&t instanceof window.dhtmlXTabBar&&t.forEachTab(function(t){var n=t.getAttachedObject();0==i&&null!=n&&(i=i||n==e||this._findGrid(n),n=null)}),"function"==typeof window.dhtmlXForm&&t instanceof window.dhtmlXForm&&t.forEachItem(function(n){1!=i&&"container"==t.getItemType(n)&&e.entBox==t.getContainer(n)&&(i=!0)}),t=null,i},this._idExists=function(t){for(var e=!1,i=0;i<this.conf.id.length;i++)e=this.conf.id[i]instanceof Array?e||this.conf.id[i][0]==t[0]&&this.conf.id[i][1]==t[1]:e||this.conf.id[i]==t;return e},this._IEDisp=window.dhx4.isIE6||"CSS1Compat"!=document.compatMode,this._IEHover=1==window.dhx4.isIE6,this._IEHover&&(this._IEHoverInit=function(){this.p.onmouseover=function(){for(var t=event.srcElement;t!=this&&1!=t._IEHover;)t=t.parentNode;if(t._IEHover){if(e._IEHoverTM&&window.clearTimeout(e._IEHoverTM),e._lastIEHover==t)return;e._IEHoverRender(t),t=null}},this.p.onmouseout=function(){e._IEHoverTM&&window.clearTimeout(e._IEHoverTM),e._IEHoverTM=window.setTimeout(function(){e._IEHoverRender(null)},1)},this._IEHoverRender=function(t){null!=this._lastIEHover&&this._lastIEHover.className.search(/tr_hover/gi)>=0&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null),null!=t&&t.className.search(/tr_hover/gi)<0&&(t.className+=" tr_hover",e._lastIEHover=t)},this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null,this.p.onmouseout=null,this._IEHoverInited=!1}),this._IEFirstLast=window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var t=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),e=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(t,e)}},"function"==typeof window.dhtmlXToolbarObject&&null!=this.conf.toolbar&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(t){for(var i=0;i<e.conf.id.length;i++)t==e.conf.id[i]&&t!=e._lastId&&(e.show(t),e._clearClick=!0)},void 0===dhtmlXToolbarObject.prototype._getItemDim&&(dhtmlXToolbarObject.prototype._getItemDim=function(t){var e=this.objPull[this.idPrefix+t],i={left:window.dhx4.absLeft(e.obj),top:window.dhx4.absTop(e.obj),width:e.obj.offsetWidth+(e.arw?e.arw.offsetWidth:0),height:e.obj.offsetHeight};return e=null,i}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)),"function"==typeof window.dhtmlXRibbon&&null!=this.conf.ribbon&&this.conf.ribbon instanceof window.dhtmlXRibbon&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(t){for(var i=0;i<e.conf.id.length;i++)t==e.conf.id[i]&&t!=e._lastId&&(e.show(t),e._clearClick=!0)},void 0===dhtmlXRibbon.prototype._getItemDim&&(dhtmlXRibbon.prototype._getItemDim=function(t){var e=this._items[t].base,i={left:window.dhx4.absLeft(e),top:window.dhx4.absTop(e),width:e.offsetWidth,height:e.offsetHeight};return e=null,i}),this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)),"function"==typeof window.dhtmlXForm&&null!=this.conf.form&&this.conf.form instanceof window.dhtmlXForm&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,void 0===dhtmlXForm.prototype._getItemDim)){dhtmlXForm.prototype._getItemDim=function(t,e){return this.doWithItem(t,"_getDim")};for(var i in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[i]._getDim=function(t){var e=t;({ta:!0,pw:!0,se:!0,tp:!0,fl:!0,calendar:!0,colorpicker:1,editor:!0,container:!0})[t._type]&&(e=t.childNodes[t._ll?1:0].childNodes[0]),{ch:!0,ra:!0,btn2state:!0}[t._type]&&(e=t.childNodes[t._ll?1:0].childNodes[1]),{bt:!0,lb:!0,fs:!0}[t._type]&&(e=t.firstChild),{combo:!0}[t._type]&&(e=t._combo.DOMParent.firstChild),{image:!0}[t._type]&&(e=t.childNodes[t._ll?1:0].lastChild),{bl:!0}[t._type]&&(e=t.firstChild.firstChild.firstChild);var i={left:window.dhx4.absLeft(e),top:window.dhx4.absTop(e),width:e.offsetWidth,height:e.offsetHeight};return e=null,i}}return"function"==typeof window.dhtmlXSlider&&null!=this.conf.slider&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){e.conf.slider_tm&&window.clearTimeout(e.conf.slider_tm);var t=e.conf.slider._r_actv;if(null!=t){var i={left:window.dhx4.absLeft(t),top:window.dhx4.absTop(t),width:t.offsetWidth,height:t.offsetHeight};e.show(i.left,i.top,i.width,i.height),t=null}},this._sliderHide=function(){e.conf.slider_tm=window.setTimeout(function(){e.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]),this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"material"),this}function dhtmlXMenuObject(t,e){var i=this;if(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"material",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",icons_css:!1,arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27,material:25},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24,material:30},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof t&&null!=t&&void 0===t.tagName){null==t.icons_path&&null==t.icon_path||(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.skin&&(this.conf.skin=t.skin),t.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:t.visible_area.x1,x2:t.visible_area.x2,y1:t.visible_area.y1,y2:t.visible_area.y2});for(var n in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1,iconset:1})null!=t[n]&&(this.conf.autoload[n]=t[n]);t=t.parent}if(null==t)this.base=document.body;else{var s="string"==typeof t?document.getElementById(t):t;null!=s?(this.base=s,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1}):this.base=document.body}this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(t){var e=this.conf.skin;switch(this.conf.skin=t,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":case"material":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+e+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(var i in this.idPull)this.idPull[i].className=String(this.idPull[i].className).replace(e,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(t,e){for(var i=!0,n=0;n<this.conf.selected_sub.length;n++)this.conf.selected_sub[n][0]==t&&this.conf.selected_sub[n][1]==e&&(i=!1);return 1==i&&this.conf.selected_sub.push(new Array(t,e)),i},this._removeSubItemFromSelected=function(t,e){for(var i=new Array,n=!1,s=0;s<this.conf.selected_sub.length;s++)this.conf.selected_sub[s][0]==t&&this.conf.selected_sub[s][1]==e?n=!0:i[i.length]=this.conf.selected_sub[s];return 1==n&&(this.conf.selected_sub=i),n},this._getSubItemToDeselectByPolygon=function(t){for(var e=new Array,i=0;i<this.conf.selected_sub.length;i++)if(this.conf.selected_sub[i][1]==t){e[e.length]=this.conf.selected_sub[i][0],e=e.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[i][0]));for(var n=!0,s=0;s<this.conf.opened_poly.length;s++)this.conf.opened_poly[s]==this.conf.selected_sub[i][0]&&(n=!1);1==n&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[i][0]),this.conf.selected_sub[i][0]=-1,this.conf.selected_sub[i][1]=-1}return e},this._hidePolygon=function(t){if(null!=this.idPull["polygon_"+t]){if(null!=this.idPull["polygon_"+t]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+t]._zId),void 0!==this._menuEffect&&!1!==this._menuEffect)this._hidePolygonEffect("polygon_"+t);else{if("none"==this.idPull["polygon_"+t].style.display)return;this.idPull["polygon_"+t].style.display="none",null!=this.idPull["arrowup_"+t]&&(this.idPull["arrowup_"+t].style.display="none"),null!=this.idPull["arrowdown_"+t]&&(this.idPull["arrowdown_"+t].style.display="none"),this._updateItemComplexState(t,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+t+"_ie6cover"]&&(this.idPull["polygon_"+t+"_ie6cover"].style.display="none")}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onHide",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!0)}},this._showPolygon=function(t,e){var i=this._countVisiblePolygonItems(t);if(0!=i){var n="polygon_"+t;if(null!=this.idPull[n]&&null!=this.idPull[t]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[t]._mouseOver&&e==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var s=null,o=null;if(null==this.idPull[n]._zId&&(this.idPull[n]._zId=window.dhx4.newId()),this.idPull[n]._zInd=window.dhx4.zim.reserve(this.idPull[n]._zId),this.idPull[n].style.visibility="hidden",this.idPull[n].style.left="0px",this.idPull[n].style.top="0px",this.idPull[n].style.display="",this.idPull[n].style.zIndex=this.idPull[n]._zInd,this.conf.auto_overflow)if(this.idPull[n].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1){var l=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-2*this.conf.of_ah[this.conf.skin])/this.conf.of_ih[this.conf.skin]),1);this.conf.overflow_limit=l}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+t]&&this._removeUpArrow(String(t).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+t]&&this._removeDownArrow(String(t).replace(this.idPrefix,""));if(this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(null==this.idPull["arrowup_"+t]&&this._addUpArrow(String(t).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+t]&&this._addDownArrow(String(t).replace(this.idPrefix,"")),(s=this.idPull["arrowup_"+t]).style.display="none",(o=this.idPull["arrowdown_"+t]).style.display="none"),this.conf.overflow_limit>0&&this.conf.overflow_limit<i?(this.idPull[n].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",s.style.width=o.style.width=this.idPull[n].childNodes[1].style.width=this.idPull[n].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[n].childNodes[1].scrollTop=0,s.style.display="",s.offsetHeight,o.style.display="",o.offsetHeight):(this.idPull[n].childNodes[1].style.height="",this.idPull[n].childNodes[1].style.width=""),null!=this.itemPull[t])this.itemPull[t].parent;else if(this.conf.context)this.idPull[this.idPrefix+this.topId];var r=null!=this.idPull[t].tagName?window.dhx4.absLeft(this.idPull[t]):this.idPull[t][0],a=null!=this.idPull[t].tagName?window.dhx4.absTop(this.idPull[t]):this.idPull[t][1],h=null!=this.idPull[t].tagName?this.idPull[t].offsetWidth:0,d=null!=this.idPull[t].tagName?this.idPull[t].offsetHeight:0,c=0,u=0,f=this.idPull[n].offsetWidth,p=this.idPull[n].offsetHeight;if("bottom"==e&&(c=this.conf.rtl?r+(null!=h?h:0)-f:"right"==this.conf.align?r+h-f:r-1+(e==this.conf.dir_toplv?this.conf.tl_rmarg:0),u=a-1+d+this.conf.tl_botmarg),"right"==e&&(c=r+h-1,u=a+2),"left"==e&&(c=r-this.idPull[n].offsetWidth+2,u=a+2),"top"==e&&(c=r-1,u=a-p+2),this.conf.fixed_pos)var _=65536,m=65536;else{_=null!=this.conf.v.x2?this.conf.v.x2:0,m=null!=this.conf.v.y2?this.conf.v.y2:0;0==_&&(window.innerWidth?(_=window.innerWidth,m=window.innerHeight):(_=document.body.offsetWidth,m=document.body.scrollHeight))}if(c+f>_&&!this.conf.rtl&&(c=r-f+2),c<this.conf.v.x1&&this.conf.rtl&&(c=r+h-2),c<0&&(c=0),u+p>m&&null!=this.conf.v.y2&&(u=Math.max(a+d-p+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==t&&null!=o&&(u-=2),null==this.itemPull[t]||this.conf.context||this.itemPull[t].parent==this.idPrefix+this.topId&&(u-=this.base.offsetHeight)),this.idPull[n].style.left=c+"px",this.idPull[n].style.top=u+"px",void 0!==this._menuEffect&&!1!==this._menuEffect)this._showPolygonEffect(n);else if(this.idPull[n].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(this.idPull[n].childNodes[1].scrollTop=0,this._checkArrowsState(t)),window.dhx4.isIE6){var g=n+"_ie6cover";if(null==this.idPull[g]){var v=document.createElement("IFRAME");v.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,v.frameBorder=0,v.setAttribute("src","javascript:false;"),document.body.insertBefore(v,document.body.firstChild),this.idPull[g]=v}this.idPull[g].style.left=c+"px",this.idPull[g].style.top=u+"px",this.idPull[g].style.width=this.idPull[n].offsetWidth+"px",this.idPull[g].style.height=this.idPull[n].offsetHeight+"px",this.idPull[g].style.zIndex=this.idPull[n].style.zIndex-1,this.idPull[g].style.display=""}(t=String(t).replace(this.idPrefix,""))==this.topId&&(t=null),this.callEvent("onShow",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!1)}}},this._redistribSubLevelSelection=function(t,e){for(;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();var i=this._getSubItemToDeselectByPolygon(e);this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)null!=this.idPull[i[n]]&&i[n]!=t&&"enabled"==this.itemPull[i[n]].state&&(this.idPull[i[n]].className="sub_item");for(n=0;n<this.conf.opened_poly.length;n++)this.conf.opened_poly[n]!=e&&this._hidePolygon(this.conf.opened_poly[n]);if("enabled"==this.itemPull[t].state){if(this.idPull[t].className="sub_item_selected",this.itemPull[t].complex&&this.conf.dload&&"no"==this.itemPull[t].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(t,!0),this.itemPull[t].loaded="get";var s=t.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var t={params:{}};t.params[this.conf.dload_pid]=s;for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)}(this.itemPull[t].complex||this.conf.dload&&"yes"==this.itemPull[t].loaded)&&this.itemPull[t].complex&&null!=this.idPull["polygon_"+t]&&(this._updateItemComplexState(t,!0,!0),this._showPolygon(t,this.conf.dir_sublv)),this._addSubItemToSelected(t,e),this.conf.selected=t}},this._doOnClick=function(t,e,i){if(this.conf.last_click=t,null!=this.itemPull[this.idPrefix+t].href_link&&"enabled"==this.itemPull[this.idPrefix+t].state){var n=document.createElement("FORM"),s=String(this.itemPull[this.idPrefix+t].href_link).split("?");if(n.action=s[0],null!=s[1])for(var o=String(s[1]).split("&"),l=0;l<o.length;l++){var r=String(o[l]).split("="),a=document.createElement("INPUT");a.type="hidden",a.name=r[0]||"",a.value=r[1]||"",n.appendChild(a)}return null!=this.itemPull[this.idPrefix+t].href_target&&(n.target=this.itemPull[this.idPrefix+t].href_target),n.style.display="none",document.body.appendChild(n),n.submit(),void(null!=n&&(document.body.removeChild(n),n=null))}if("c"!=e.charAt(0)&&"d"!=e.charAt(1)&&"s"!=e.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[t,this.conf.ctx_zoneid,i]);else if("d"==e.charAt(1)||"win"==this.conf.mode&&"t"==e.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(t){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[t]))},this._searchMenuNode=function(t,e){for(var i=new Array,n=0;n<e.length;n++)if("object"==typeof e[n]){5==e[n].length&&"object"!=typeof e[n][0]&&e[n][0].replace(this.idPrefix,"")==t&&0==n&&(i=e);var s=this._searchMenuNode(t,e[n]);s.length>0&&(i=s)}return i},this._getMenuNodes=function(t){var e=new Array;for(var i in this.itemPull)this.itemPull[i].parent==t&&(e[e.length]=i);return e},this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.getItemType=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:this.itemPull[t].type},this.forEachItem=function(t){for(var e in this.itemPull)t(String(e).replace(this.idPrefix,""))},this._clearAndHide=function(){for(i.conf.selected=-1,i.conf.last_click=-1;i.conf.opened_poly.length>0;)i.conf.opened_poly.pop();for(var t=0;t<i.conf.selected_sub.length;t++){var e=i.conf.selected_sub[t][0];null!=i.idPull[e]&&"enabled"==i.itemPull[e].state&&("sub_item_selected"==i.idPull[e].className&&(i.idPull[e].className="sub_item"),i.idPull[e].className=="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected"&&(null!=i.itemPull[e].cssNormal?i.idPull[e].className=i.itemPull[e].cssNormal:i.idPull[e].className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal")),i._hidePolygon(e)}i.conf.is_touched=!1,i.conf.context&&i.conf.ctx_hideall&&i._hidePolygon(i.idPrefix+i.topId)},this._showSubLevelItem=function(t,e){null!=document.getElementById("arrow_"+this.idPrefix+t)&&(document.getElementById("arrow_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById("image_"+this.idPrefix+t)&&(document.getElementById("image_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById(this.idPrefix+t)&&(document.getElementById(this.idPrefix+t).style.display=e?"":"none")},this._hideSubLevelItem=function(t){this._showSubLevelItem(t,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(t){2==(t=t||event).button||window.dhx4.isOpera&&1==t.ctrlKey||(i.conf.context?i.conf.ctx_autohide&&(!window.dhx4.isOpera||i._isContextMenuVisible()&&window.dhx4.isOpera)&&i._hideContextMenu():i._clearAndHide&&i._clearAndHide())},this._bodyContext=function(t){t=t||event;var e=String((t.srcElement||t.target).className);if(-1==e.search("dhtmlxMenu")||-1==e.search("SubLevelArea")){for(var n=!0,s=t.target||t.srcElement;null!=s;)null!=s.id&&i.isContextZone(s.id)&&(n=!1),s==document.body&&(n=!1),s=s.parentNode;n&&i.hideContextMenu()}},void 0!==window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(t){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var t in this.conf.ctx_zones)this.removeContextZone(t);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null);for(var t in this)this[t]=null;i=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(var n in{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[n]&&("function"==typeof this.conf.autoload[n]?this.attachEvent(n,this.conf.autoload[n]):"function"==typeof window[this.conf.autoload[n]]&&this.attachEvent(n,window[this.conf.autoload[n]]));null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow),"awesome"==this.conf.autoload.iconset&&(this.conf.icons_css=!0);for(var n in this.conf.autoload)this.conf.autoload[n]=null,delete this.conf.autoload[n];return this.conf.autoload=null,this}function dhtmlXRibbon(t){var e,i,n=this;this.conf={type:"ribbon",icons_path:t&&t.icons_path?t.icons_path:"",icons_css:t&&"awesome"==t.iconsset,arrows_mode:t&&t.arrows_mode?t.arrows_mode:null,skin:"dhx_skyblue"},this._eventHandlers={},this._base=null,this._items={},this._tabbar=null,this.childIds=[],"string"==typeof t?i=t:t&&t.tagName?i=t:t&&t.parent&&(t.parent.tagName||"string"==typeof t.parent)&&(i=t.parent),this._doOnHighlight0=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable)return(!n.items[s.type]||"function"!=typeof n.items[s.type].mouseover||1==n.items[s.type].mouseover(s,n,t))&&void(/dhxrb_highlight0/.test(i.className)||(i.className+=" dhxrb_highlight0"))},this._doOffHighlight0=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable){if(n.items[s.type]&&"function"==typeof n.items[s.type].mouseout&&1!=n.items[s.type].mouseout(s,n,t))return!1;/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")),/dhxrb_highlight0/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight0/,""))}},this._doOnHighlight1=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable){if(n.callEvent("_showPopup",[s.id]),n.items[s.type]&&"function"==typeof n.items[s.type].mousedown&&1!=n.items[s.type].mousedown(s,n,t))return!1;/dhxrb_highlight1/.test(i.className)||(i.className+=" dhxrb_highlight1")}},this._doOffHighlight1=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];if(!s.conf.disable)return(!n.items[s.type]||"function"!=typeof n.items[s.type].mouseup||1==n.items[s.type].mouseup(s,n,t))&&void(/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")))},this._doOnClick=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].click&&n.items[s.type].click(s,n,t)},this._doOnFocus=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||(n.callEvent("_showPopup",[s.id]),n.items[s.type]&&"function"==typeof n.items[s.type].focus&&n.items[s.type].focus(s,n,t))},this._doOnBlur=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].blur&&n.items[s.type].blur(s,n,t)},this._doOnChange=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].change&&n.items[s.type].change(s,n,t)},this._doOnKeydown=function(t){var e=(t=t||event).target||t.srcElement,i=n._findItemByNode(e),s=n._items[i._dhx_ribbonId];s.conf.disable||n.items[s.type]&&"function"==typeof n.items[s.type].keydown&&n.items[s.type].keydown(s,n,t)},this._tabCustomApi={enable:function(t,e){var i=null;if(1!=(e=e||!1)){i=n._items[this._idd];for(var s=0;s<i.childIds.length;s++)n.enable(i.childIds[s])}return n._tabOriginalApi.enable.apply(this,[t])},disable:function(t,e){var i=null;if(0!=e){i=n._items[this._idd];for(var s=0;s<i.childIds.length;s++)n.disable(i.childIds[s])}return n._tabOriginalApi.disable.apply(this,[t])},close:function(t){var e=n._items[this._idd];n._removeTab(e),n._tabOriginalApi.close.apply(this,[t]);for(var i in n._tabOriginalApi)this[i]=null}},this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return n.callEvent("onSelect",arguments)}),this._tabbar.attachEvent("onTabClick",function(){return n.callEvent("onTabClick",arguments)}),this._tabbar.attachEvent("onTabClose",function(){return n.callEvent("onTabClose",arguments)})},"string"==typeof i?this._base=document.getElementById(i):i&&i.tagName?this._base=i:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base)),e=dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"material","object"==typeof t&&t.skin&&(e=t.skin),this.setSkin(e),dhx4._eventable(this),dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0}),this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0}),this._base.className+=" dhxrb_without_tabbar",this._base.innerHTML="<div class='dhxrb_background_area'></div>",null!=t&&(t.json?this.loadStruct(t.json,t.onload):t.xml?this.loadStruct(t.xml,t.onload):this._renderData(t)),this.unload=function(){for(var t=[],e=0;e<this.childIds.length;e++)t.push(this.childIds[e]);dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear");for(e=0;e<t.length;e++)"tab"==this._items[t[e]].type?this.tabs(t[e]).close(!1):this.removeItem(t[e]);this._tabbar&&(this._tabbar.unload(),this._tabbar=null),this._base.innerHTML="",this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/gi,"");for(var i in this)this[i]=null;n=null}}function dhtmlXToolbarObject(t,e){var i=this;for(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material",align:"left",align_autostart:"left",icons_path:"",icons_css:!1,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow"},"object"==typeof t&&null!=t&&void 0===t.tagName&&(null==t.icons_path&&null==t.icon_path||(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.icons_size&&(this.conf.icons_size_autoload=t.icons_size),null!=t.iconset&&(this.conf.icons_css="awesome"==t.iconset),null!=t.json&&(this.conf.json_autoload=t.json),null!=t.xml&&(this.conf.xml_autoload=t.xml),null!=t.onload&&(this.conf.onload_autoload=t.onload),null==t.onclick&&null==t.onClick||(this.conf.auto_onclick=t.onclick||t.onClick),null!=t.items&&(this.conf.items_autoload=t.items),null!=t.skin&&(this.conf.skin=t.skin),null!=t.align&&(this.conf.align_autostart=t.align),t=t.parent),this.cont="object"!=typeof t?document.getElementById(t):t;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);return t=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),this.cont.ontouchstart=function(t){return t=t||event,"input"==String(t.target.tagName||"").toLowerCase()||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1)},this.setSkin(this.conf.skin),this.objPull={},this.anyUsed=null,this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"),this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(t,e){for(var i=null,n=0;n<t.childNodes.length;n++)null!=t.childNodes[n].tagName&&String(t.childNodes[n].tagName).toLowerCase()==String(e).toLowerCase()&&(i=t.childNodes[n]);return i},this._addImgObj=function(t){var e=document.createElement(1==this.conf.icons_css?"I":"IMG");return t.childNodes.length>0?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),e},this._setItemImage=function(t,e,i){if(1==i?t.imgEn=e:t.imgDis=e,!(!t.state&&1==i||t.state&&0==i))if(1==this.conf.icons_css){null==(n=this._getObj(t.obj,"i"))&&(n=this._addImgObj(t.obj)),n.className=this.conf.icons_path+e}else{var n;null==(n=this._getObj(t.obj,"img"))&&(n=this._addImgObj(t.obj)),n.src=this.conf.icons_path+e}},this._clearItemImage=function(t,e){if(1==e?t.imgEn="":t.imgDis="",!(!t.state&&1==e||t.state&&0==e)){var i=this._getObj(t.obj,this.conf.icons_css?"i":"img");null!=i&&i.parentNode.removeChild(i)}},this._setItemText=function(t,e){var i=this._getObj(t.obj,"div");null!=e&&0!=e.length?(null==i&&((i=document.createElement("DIV")).className="dhxtoolbar_text",t.obj.appendChild(i)),i.innerHTML=e):null!=i&&i.parentNode.removeChild(i)},this._getItemText=function(t){var e=this._getObj(t.obj,"div");return null!=e?e.innerHTML:""},this._enableItem=function(t){if(!t.state){t.state=!0,"buttonTwoState"==this.objPull[t.id].type&&1==this.objPull[t.id].obj.pressed?(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",t.obj.renderAs=t.obj.className),t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,this.conf.icons_css?"i":"img");""!=t.imgEn?(null==e&&(e=this._addImgObj(t.obj)),e[this.conf.icons_css?"className":"src"]=this.conf.icons_path+t.imgEn):null!=e&&e.parentNode.removeChild(e)}},this._disableItem=function(t){if(t.state){t.state=!1,t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[t.id].type&&t.obj.pressed?"pres_":"")+"dis",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,this.conf.icons_css?"i":"img");""!=t.imgDis?(null==e&&(e=this._addImgObj(t.obj)),e[this.conf.icons_css?"className":"src"]=this.conf.icons_path+t.imgDis):null!=e&&e.parentNode.removeChild(e),null!=t.polygon&&"none"!=t.polygon.style.display&&(window.dhx4.zim.clear(t.polygon._idd),t.polygon.style.display="none",t.polygon._ie6cover&&(t.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(t.id,!0),this.callEvent("onButtonSelectHide",[t.obj.idd])),this.anyUsed=null}},this.clearAll=function(){for(var t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""))},this._doOnClick=function(t){i&&i.forEachItem&&i.forEachItem(function(t){if("buttonSelect"==i.objPull[i.idPrefix+t].type){var e=i.objPull[i.idPrefix+t];!0===e.arw._skip?e.arw._skip=!1:"none"!=e.polygon.style.display&&(e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",e.obj.className=e.obj.renderAs,e.arw.className=String(e.obj.renderAs).replace("btn","arw"),i.anyUsed=null,i.conf.touch_id=null,window.dhx4.zim.clear(e.polygon._idd),e.polygon.style.display="none",e.polygon._ie6cover&&(e.polygon._ie6cover.style.display="none"),"dhx_terrace"==i.conf.skin&&i._improveTerraceButtonSelect(e.id,!0),i.callEvent("onButtonSelectHide",[e.obj.idd]))}})},void 0!==window.addEventListener?(window.addEventListener("mousedown",this._doOnClick,!1),window.addEventListener("touchstart",this._doOnClick,!1)):document.body.attachEvent("onmousedown",this._doOnClick),null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),"function"==typeof this.conf.auto_onclick?this.attachEvent("onClick",this.conf.auto_onclick):"string"==typeof this.conf.auto_onclick&&"function"==typeof window[this.conf.auto_onclick]&&this.attachEvent("onClick",window[this.conf.auto_onclick]),this}function dhtmlXEditor(t,e){var i=this;for(this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:null!=navigator.userAgent.match(/Mobile/gi)&&null!=navigator.userAgent.match(/iPad/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi),extra_css:"",font:{family:"Tahoma",size:"12px",color:"black"}},this._doOnFocusChanged=null,this._doOnAccess=null,"object"==typeof t&&null!=t&&null==t.tagName&&(e=t.skin,null!=t.content&&(this.conf.content=t.content),null!=t.contentHTML&&(this.conf.contentHTML=t.contentHTML),null!=t.iconsPath&&(this.conf.iconsPath=t.iconsPath),null!=t.extraCss&&(this.conf.extra_css=t.extraCss),null!=t.toolbar&&(this.conf.toolbar=window.dhx4.s2b(t.toolbar)),null!=t.onFocusChanged&&(this._doOnFocusChanged=t.onFocusChanged),null!=t.onAccess&&(this._doOnAccess=t.onAccess),t=t.parent),this.conf.skin=e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"material","string"==typeof t&&(t=document.getElementById(t)),this.base=t,this.base.className+=" dhxeditor_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);var n=window.dhx4.isIE?this.base.currentStyle.position:null!=window.getComputedStyle?window.getComputedStyle(this.base,null).getPropertyValue("position"):"";"relative"!=n&&"absolute"!=n&&(this.base.style.position="relative"),this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this),this.base.appendChild(this.cell.cell),this.cBlock=document.createElement("DIV"),this.cBlock.className="dhxcont_content_blocker",this.cBlock.style.display="none",this.base.appendChild(this.cBlock),this.editor=document.createElement("IFRAME"),this.editor.className="dhxeditor_mainiframe",this.editor.frameBorder=0,window.dhx4.isOpera&&(this.editor.scrolling="yes"),this.setSizes();var s=this.editor;return void 0!==window.addEventListener?s.onload=function(){for(var t=0;t<i.conf.evs.length;t++)s.contentWindow.addEventListener(i.conf.evs[t],i._ev,!1)}:s.onreadystatechange=function(t){if(void 0!==s.readyState&&"complete"==s.readyState)try{for(var e=0;e<i.conf.evs.length;e++)s.contentWindow.document.body.attachEvent("on"+i.conf.evs[e],i._ev)}catch(t){}},this._ev=function(t){var e=(t=t||event).type;1!=i.conf.iOSfix||"touchend"!=e?(i.callEvent("onAccess",[e,t]),"function"==typeof i._doOnAccess?i._doOnAccess(e,t):"string"==typeof i._doOnAccess&&"function"==typeof window[i._doOnAccess]&&window[i._doOnAccess](e,t)):i.editor.contentWindow.focus()},this._focus=function(){window.dhx4.isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()},this.cell.attachObject(this.editor),this.edWin=this.editor.contentWindow,this.edDoc=this.edWin.document,this._prepareContent=function(t,e){var i="";!0===t&&null!=this.getContent&&(i=this.getContent());var n=this.editor.contentWindow.document;if(n.open("text/html","replace"),window.dhx4.isOpera?n.write("<html><head>"+this.conf.extra_css+"<style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==e?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isKHTML?n.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==e?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window.dhx4.isIE?n.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; background-color: #ffffff; outline: none; "+this._fontConf()+"} </style></head><body "+(!0!==e?"contenteditable='true'":"")+" tabindex='0'></body></html>"):n.write("<html><head>"+this.conf.extra_css+"<style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} </style></head><body "+(!0!==e?"contenteditable='true'":"")+" tabindex='0'></body></html>"),n.close(),window.dhx4.isIE?n.contentEditable=!0!==e:n.designMode=!0!==e?"On":"Off",window.dhx4.isFF)try{n.execCommand("useCSS",!1,!0)}catch(t){}!0===t&&null!=this.setContent&&this.setContent(i)},this._prepareContent(),this._doOnResize=function(){window.clearTimeout(i.conf.resizeTM),i.conf.resizeTM=window.setTimeout(function(){i.setSizes&&i.setSizes()},i.conf.resizeTMTime)},this._runCommand=function(t,e){if(!0!==this.conf.roMode){arguments.length<2&&(e=null),window.dhx4.isIE&&this.edWin.focus();try{this.editor.contentWindow.document.execCommand(t,!1,e)}catch(t){}if(window.dhx4.isIE){this.edWin.focus();var i=this;window.setTimeout(function(){i.edWin.focus(),i=null},1)}}},this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.clearFormatting=function(){this._runCommand("RemoveFormat");var t=this.getContent();t=t.replace(/<\/?h\d>/gi,""),this.setContent(t)},this._doOnClick=function(t){var e=t||window.event,n=e.target||e.srcElement;i._showInfo(n)},this._doOnMouseDown=function(t){var e=t||window.event,n=e.target||e.srcElement;i._showInfo(n)},this._doOnKeyUp=function(t){var e=t||window.event,n=e.keyCode,s=e.target||e.srcElement;1=={37:1,38:1,39:1,40:1,13:1}[n]&&i._showInfo(s)},this._getParentByTag=function(t,e){e=e.toLowerCase();var i=t;do{if(""==e||i.nodeName.toLowerCase()==e)return i}while(i=i.parentNode);return t},this._isStyleProperty=function(t,e,i,n){e=e.toLowerCase();var s=t;do{if(s.nodeName.toLowerCase()==e&&s.style[i]==n)return!0}while(s=s.parentNode);return!1},this._setStyleProperty=function(t,e){this.style[e]=!1;var i=this._getParentByTag(t,e);i&&i.tagName.toLowerCase()==e&&(this.style[e]=!0),"del"==e&&this._getParentByTag(t,"strike")&&"strike"==this._getParentByTag(t,"strike").tagName.toLowerCase()&&(this.style.del=!0)},this._showInfo=function(t){if((t=this._getSelectionBounds().end?this._getSelectionBounds().end:t)&&this._setStyleProperty)try{if(this.edWin.getComputedStyle){var e=401==(i=this.edWin.getComputedStyle(t,null)).getPropertyValue("font-weight")?700:i.getPropertyValue("font-weight");this.style={fontStyle:i.getPropertyValue("font-style"),fontSize:i.getPropertyValue("font-size"),textDecoration:i.getPropertyValue("text-decoration"),fontWeight:e,fontFamily:i.getPropertyValue("font-family"),textAlign:i.getPropertyValue("text-align")},window.dhx4.isKHTML&&(this.style.fontStyle=i.getPropertyValue("font-style"),this.style.vAlign=i.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(t,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(t,"span","textDecoration","underline"))}else{var i=t.currentStyle;this.style={fontStyle:i.fontStyle,fontSize:i.fontSize,textDecoration:i.textDecoration,fontWeight:i.fontWeight,fontFamily:i.fontFamily,textAlign:i.textAlign}}this._setStyleProperty(t,"h1"),this._setStyleProperty(t,"h2"),this._setStyleProperty(t,"h3"),this._setStyleProperty(t,"h4"),window.dhx4.isKHTML||(this._setStyleProperty(t,"del"),this._setStyleProperty(t,"sub"),this._setStyleProperty(t,"sup"),this._setStyleProperty(t,"u")),this.callEvent("onFocusChanged",[this.style,i])}catch(t){return null}},this._getSelectionBounds=function(){var t,e,i,n;if(this.edWin.getSelection){var s=this.edWin.getSelection();return window.dhx4.isEdge&&0==s.rangeCount?{root:null,start:null,end:null}:(t=s.getRangeAt(s.rangeCount-1),i=t.startContainer,n=t.endContainer,e=t.commonAncestorContainer,"#text"==i.nodeName&&(e=e.parentNode),"#text"==i.nodeName&&(i=i.parentNode),"body"==i.nodeName.toLowerCase()&&(i=i.firstChild),"#text"==n.nodeName&&(n=n.parentNode),"body"==n.nodeName.toLowerCase()&&(n=n.lastChild),i==n&&(e=i),{root:e,start:i,end:n})}if(this.edWin.document.selection){if(!(t=this.edDoc.selection.createRange()).duplicate)return null;e=t.parentElement();var o=t.duplicate(),l=t.duplicate();return o.collapse(!0),l.moveToElementText(o.parentElement()),l.setEndPoint("EndToStart",o),i=o.parentElement(),o=t.duplicate(),(l=t.duplicate()).collapse(!1),o.moveToElementText(l.parentElement()),o.setEndPoint("StartToEnd",l),n=l.parentElement(),"body"==i.nodeName.toLowerCase()&&(i=i.firstChild),"body"==n.nodeName.toLowerCase()&&(n=n.lastChild),i==n&&(e=i),{root:e,start:i,end:n}}return null},this.getContent=function(){return this.edDoc.body?window.dhx4.isFF||window.dhx4.isChrome?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&0==this.edDoc.body.innerText.length?"":this.edDoc.body.innerHTML:""},this.setContent=function(t){if(t=t||"",this.edDoc.body){var e=!1;if(window.dhx4.isFF){var n=navigator.userAgent.match(/Firefox\/(\d*)/);e=null!=n&&n[1]<28}e?(void 0===this.conf.ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=this.editor.contentWindow.document.body.innerHTML.length>0),this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=t:(this.editor.contentWindow.document.body.innerHTML="",0==t.length&&(t=" "),this._runCommand("InsertHTML",t))):this.editor.contentWindow.document.body.innerHTML=t,this.callEvent("onContentSet",[])}else this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=t,this._onFirstLoad=function(){i.setContent(i.conf.firstLoadData),"function"==typeof window.addEventListener?i.edWin.removeEventListener("load",i._onFirstLoad,!1):i.edWin.detachEvent("onload",i._onFirstLoad),i.conf.firstLoadData=null,i.conf.firstLoadEv=!1,i._onFirstLoad=null},"function"==typeof window.addEventListener?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))},this.setContentHTML=function(t){window.dhx4.ajax.get(t,function(t){null!=t.xmlDoc.responseText&&i.setContent(t.xmlDoc.responseText)})},window.dhx4._eventable(this),this.attachEvent("onFocusChanged",function(t){"function"==typeof this._doOnFocusChanged?this._doOnFocusChanged(t):"string"==typeof this._doOnFocusChanged&&"function"==typeof window[this._doOnFocusChanged]&&window[this._doOnFocusChanged](t)}),"function"==typeof window.addEventListener?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)),this.unload=function(){if("function"==typeof window.addEventListener){window.removeEventListener("resize",this._doOnResize,!1),this.edDoc.removeEventListener("click",this._doOnClick,!1),this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1);for(var t=0;t<i.conf.evs.length;t++)s.contentWindow.removeEventListener(i.conf.evs[t],i._ev,!1);null!=this.tb&&1==this.conf.iOSfix&&(this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,!1),this._doOnIOSFix=null)}else{window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(t=0;t<i.conf.evs.length;t++)s.contentWindow.document.body.detachEvent("on"+i.conf.evs[t],i._ev)}for(this._doOnAccess=null,this._doOnFocusChanged=null,"function"==typeof window.addEventListener?this.editor.onload=null:this.editor.onreadystatechange=null,this.editor.parentNode.removeChild(this.editor),this.editor=null,this.edDoc=null,this.edWin=null,this.cell._unload(),this.cell=null,this.tb=null,window.dhx4._eventable(this,"clear"),this.cBlock.parentNode.removeChild(this.cBlock),this.cBlock=null,this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base=null,this._doOnClick=null,this._doOnKeyUp=null,this._doOnMouseDown=null,this._ev=null,this._focus=null,this._prepareContent=null,this._doOnResize=null,this.setIconsPath=null,this.init=null,this.setSizes=null,this._runCommand=null,this.applyBold=null,this.applyItalic=null,this.applyUnderscore=null,this.clearFormatting=null,this._showInfo=null,this._getSelectionBounds=null,this.getContent=null,this.setContent=null,this.setContentHTML=null,this.setReadonly=null,this.isReadonly=null,this.unload=null,i=s=null},1==this.conf.toolbar&&"function"==typeof this.attachToolbar&&"function"==typeof window.dhtmlXToolbarObject&&(this.attachToolbar(this.conf.iconsPath),1==this.conf.iOSfix&&(this._doOnIOSFix=function(){i.editor.contentWindow.focus()},this.tb.cont.addEventListener("touchend",this._doOnIOSFix,!1))),this.setIconsPath=function(t){this.conf.iconsPath=t},this.conf.content.length>0?(this.setContent(this.conf.content),this.conf.content=""):this.conf.contentHTML.length>0&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML=""),this}function xmlPointer(t){this.d=t}function dhtmlXTreeObject(t,e,i,n){if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}this.parentObject="object"!=typeof t?document.getElementById(t):t,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(!0),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=e,this.height=i,this.rootId=n,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="24px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._dynDeleteBranches={},this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhx4._eventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var s=this;if(this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(t){return s._doContClick(t||window.event,!0)}),this.allTree.onmousedown=function(t){return s._doContClick(t||window.event)},this.XMLLoader=this._parseXMLTree,_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{s.destructor()}catch(t){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{s.destructor()}catch(t){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"material"),dhtmlx.image_path){var o=dhtmlx.image_path,l=this.parentObject.className.match(/dhxtree_dhx_([a-z_]*)/i);null!=l&&null!=l[1]&&(o+="dhxtree_"+l[1]+"/"),this.setImagePath(o)}return this}function cObject(){return this}function dhtmlXTreeItemObject(t,e,i,n,s,o){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=n,this.label=e,this.parentObject=i,this.actionHandler=s,this.images=new Array(n.imageArray[0],n.imageArray[1],n.imageArray[2]),this.id=n._globalIdStorageAdd(t,this),this.treeNod.checkBoxOff?this.htmlNode=this.treeNod._createItem(1,this,o):this.htmlNode=this.treeNod._createItem(0,this,o),this.htmlNode.objBelong=this,this}function dhx_dragSomethingInTree(){this.lWin=window,this._createDragNode=function(t){var e=document.createElement("div");return e.style.position="absolute",e.innerHTML=t.innerHTML||t.value,e.className="dragSpanDiv",e},this._preventNsDrag=function(t){return(t||window.event).cancelBubble=!0,!(!t||!t.preventDefault)&&(t.preventDefault(),!1)},this._nonTrivialNode=function(t,e,i,n){if(this._customDrop)return this._customDrop(t,n.img.id,e.id,i?i.id:null);var s=n.img.getAttribute("image")||"",o=n.img.id||"new",l=n.img.getAttribute("text")||(_isIE?n.img.innerText:n.img.textContent);t[i?"insertNewNext":"insertNewItem"](i?i.id:e.id,o,l,"",s,s,s)}}function jsonPointer(t,e){this.d=t,this.dp=e}function dhtmlXTreeFromHTML(obj){"object"!=typeof obj&&(obj=document.getElementById(obj));for(var n=obj,id=n.id,cont="",j=0;j<obj.childNodes.length;j++)if("1"==obj.childNodes[j].nodeType){if("XMP"==obj.childNodes[j].tagName)for(var cHead=obj.childNodes[j],m=0;m<cHead.childNodes.length;m++)cont+=cHead.childNodes[m].data;else"ul"==obj.childNodes[j].tagName.toLowerCase()&&(cont=dhx_li2trees(obj.childNodes[j],new Array,0));break}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0),z_all=new Array;for(b in t)z_all[b.toLowerCase()]=b;for(var atr=obj.attributes,a=0;a<atr.length;a++)if(0==atr[a].name.indexOf("set")||0==atr[a].name.indexOf("enable")){var an=atr[a].name;t[an]||(an=z_all[atr[a].name]),t[an].apply(t,atr[a].value.split(","))}if("object"==typeof cont){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);cont[i][2]&&t._setCheck(n,cont[i][2])}t.XMLloadingWarning=0,t.lastLoadedXMLId=0,t._redrawFrom(t)}else t.parse("<tree id='0'>"+cont+"</tree>");window[id]=t;var oninit=obj.getAttribute("oninit");return oninit&&eval(oninit),t}function dhx_init_trees(){for(var t=document.getElementsByTagName("div"),e=0;e<t.length;e++)"dhtmlxTree"==t[e].className&&dhtmlXTreeFromHTML(t[e])}function dhx_li2trees(t,e,i){for(var n=0;n<t.childNodes.length;n++){var s=t.childNodes[n];if(1==s.nodeType&&"li"==s.tagName.toLowerCase()){for(var o="",l=null,r=s.getAttribute("checked"),a=0;a<s.childNodes.length;a++){var h=s.childNodes[a];3==h.nodeType?o+=h.data:"ul"!=h.tagName.toLowerCase()?o+=dhx_outer_html(h):l=h}e[e.length]=[i,o,r,s.id||e.length+1],l&&(e=dhx_li2trees(l,e,s.id||e.length))}}return e}function dhx_outer_html(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("DIV");return e.appendChild(t.cloneNode(!0)),e=e.innerHTML}function setCookie(t,e){document.cookie=t+"="+e}function getCookie(t){var e=t+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(e);if(-1!=i){i+=e.length;var n=document.cookie.indexOf(";",i);return-1==n&&(n=document.cookie.length),document.cookie.substring(i,n)}}}function dhtmlXTreeView(t){var e=this;if("object"==typeof t&&null==t.tagName||(t={parent:t,clear:!0}),this.base="string"==typeof t.parent?document.getElementById(t.parent):t.parent,this.base!=document.body)for(;this.base.childNodes.length>0;)this.base.removeChild(this.base.lastChild);this.conf={skin:t.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtreeview")||"material",tree_id:window.dhx4.newId(),ofs:{w:1,h:0},adjust_base:!1,icons:this.icons["string"==typeof t.iconset&&null!=this.icons[t.iconset]&&1==this.icons[t.iconset].r?t.iconset:"tree_native"],autoload:{url:null,mode:"id"},selected:{},ud:{},idx:{sign:0,icon:1,text:2},silent:!1,is_mac:null!=navigator.platform.match(/^mac/i)&&"function"==typeof window.addEventListener,mac_cmd_key:!1},this.setSkin(this.conf.skin),this.cont=document.createElement("DIV"),this.cont.className="dhxtreeview_cont",this.base.appendChild(this.cont),this.area=document.createElement("DIV"),this.area.className="dhxtreeview_area",this.cont.appendChild(this.area),this.cont.onclick=function(t){t=t||event,e.callEvent("_onTreeClick",[t,{stop:!1}])},this.cont.ondblclick=function(t){var i=(t=t||event).target||t.srcElement;null!=i.className.match(/dhxtreeview_item_label/)&&e._openCloseItem(i.parentNode.parentNode._itemId,!0)},this.items={},this._addItem=function(t,e,i,n){var s=null!=e?this.items[e].level+1:1,o=document.createElement("DIV");if(o.className="dhxtreeview_item",o.innerHTML="<div class='dhxtreeview_item_text'></div>",null!=n&&n<0&&(i.index=0),null==e)var l=this.area;else{0==this.items[e].kids&&this._initKidsNode(e),this.items[e].kids_request=!1;l=this.items[e].item.lastChild.firstChild}null!=n&&null!=l.childNodes[n]?l.insertBefore(o,l.childNodes[n]):l.appendChild(o),l=null,o._itemId=t,o._treeId=this.conf.tree_id,1==window.dhx4.isIE&&(o.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1}),this.items[t]={id:t,pId:e,treeId:this.conf.tree_id,text:i.text,item:o,level:s,kids:!1,opened:window.dhx4.s2b(i.open),userdata:window.dhx4._copyObj(i.userdata||{}),half_opened:!1},this.callEvent("_onItemRendered",[t,i]),o.firstChild.innerHTML=this._getItemHtml(t),o=null,1==window.dhx4.s2b(i.select)&&this._setSelected(t,!0),this.callEvent("_onItemInited",[t,i])},this.addItem=function(t,e,i,n){null==this.items[t]&&(null!=i&&null==this.items[i]&&(i=null),this._addItem(t,i,{text:e},n),this._callPublicEvent("onAddItem",[t,e,i,n]))},this._removeSingleItem=function(t){1==window.dhx4.isIE&&(this.items[t].item.onselectstart=null),this.items[t].item.parentNode.removeChild(this.items[t].item);for(var e in this.items[t])this.items[t][e]=null,delete this.items[t][e];delete this.items[t],1==this.conf.selected[t]&&delete this.conf.selected[t]},this._removeItem=function(t){for(var e in this.items)this.items[e].pId==t&&this._removeItem(e);null!=t&&this._removeSingleItem(t)},this.deleteItem=function(t){null!=this.items[t]&&this._callPublicEvent("onBeforeDeleteItem",[t])&&(this._removeItem(t),this._callPublicEvent("onDeleteItem",[t]))},this.clearAll=function(){this._removeItem(null),1!=this.conf.unloading&&this._fixAreaWidth()},this._initKidsNode=function(t){var e;null==this.items[t].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&((e=document.createElement("DIV")).className="dhxtreeview_kids_cont",e.innerHTML="<div style='position:relative;'></div>",e.style.opacity="1",1!=this.items[t].opened&&(0!=this.conf.transProp?(e.style.height="0px",e.style.opacity="0",e.firstChild.style.display="none"):e.style.display="none"),this.items[t].item.appendChild(e)),this.items[t].kids=!0,this._iconUpdate(t),this._signUpdate(t),e=null},this._clearKidsNode=function(t){null!=this.items[t].item.lastChild.className.match(/dhxtreeview_kids_cont/)&&this.items[t].item.removeChild(this.items[t].item.lastChild),this.items[t].kids=!1,this._iconUpdate(t),this._signUpdate(t)},this.openItem=function(t,e){1!=this.items[t].opened&&(void 0===e&&(e=!0),this._openCloseItem(t,e))},this.closeItem=function(t,e){1==this.items[t].opened&&(void 0===e&&(e=!0),this._openCloseItem(t,e))},this._openCloseItem=function(t,i){if(!0===this.callEvent("_onBeforeOpen",[t]))return(1==this.items[t].kids||1==this.items[t].kids_request)&&(1==this.items[t].half_opened?(this.items[t].half_opened=!1,void this._signUpdate(t)):void(i&&0!=this.conf.transProp?(this.items[t].transEv||(this.items[t].item.lastChild.addEventListener(this.conf.transEv,this._doOnTrEnd),this.items[t].transEv=!0),1==this.items[t].opened?(this.items[t].transMode="close",this.items[t].item.lastChild.style.overflow="hidden",this.items[t].item.lastChild.style.height=this.items[t].item.lastChild.childNodes[0].offsetHeight+"px",window.setTimeout(function(){e.items[t].item.lastChild.style[e.conf.transProp]=e.conf.transValueHeight,e.items[t].item.lastChild.style.height="0px",e.items[t].item.lastChild.style.opacity="0",e.items[t].opened=!1,e._iconUpdate(t),e._signUpdate(t)},50)):(this.items[t].transMode="open",this.items[t].item.lastChild.style[this.conf.transProp]=this.conf.transValueHeight,this.items[t].item.lastChild.childNodes[0].style.display="",this.items[t].item.lastChild.style.overflow="hidden",this.items[t].item.lastChild.style.height=this.items[t].item.lastChild.childNodes[0].offsetHeight+"px",this.items[t].item.lastChild.style.opacity="1",this.items[t].opened=!0,this._iconUpdate(t),this._signUpdate(t))):(this.items[t].opened=!this.items[t].opened,this.items[t].item.lastChild.style.display=1==this.items[t].opened?"":"none",this.items[t].item.lastChild.childNodes[0].style.display=this.items[t].item.lastChild.style.display,this.items[t].item.lastChild.style.height=1==this.items[t].opened?"":"0px",this.items[t].item.lastChild.style.opacity=1==this.items[t].opened?1:0,this._iconUpdate(t),this._signUpdate(t),this._fixAreaWidth())))},this._doOnTrEnd=function(){var t=this.parentNode._itemId;e.items[t].item.lastChild.style[e.conf.transProp]="","close"==e.items[t].transMode?e.items[t].item.lastChild.childNodes[0].style.display="none":(e.items[t].item.lastChild.style.height="",e.items[t].item.lastChild.style.overflow=""),e._fixAreaWidth()},this.setSizes=function(){1==this.conf.adjust_base&&(this.base.style.width=this.base.parentNode.clientWidth-2+"px",this.base.style.height=this.base.parentNode.clientHeight-2+"px"),this.cont.style.left=this.conf.ofs.w+"px",this.cont.style.top=this.conf.ofs.h+"px",this.cont.style.width=this.base.clientWidth-2*this.conf.ofs.w+"px",this.cont.style.height=this.base.clientHeight-2*this.conf.ofs.h+"px",this._fixAreaWidth()},this._fixAreaWidth=function(t){this.area.style.width="100%",this.cont.scrollWidth!=this.cont.clientWidth&&(this.area.style.width=this.cont.scrollWidth+1+"px"),1==window.dhx4.isIE7&&!1!==t&&window.setTimeout(function(){e._fixAreaWidth(!1)},1)},this.setSizes(),dhx4._eventable(this);var i=window.dhx4.transDetect();this.conf.transProp=i.transProp,this.conf.transEv=i.transEv,this.conf.transValueHeight="height 0.15s",i=null,1==this.conf.is_mac&&(this._macOnKey=function(t){((window.dhx4.isKHTML||window.dhx4.isChrome||window.dhx4.isOpera)&&(91==t.keyCode||93==t.keyCode)||window.dhx4.isFF&&224==t.keyCode)&&(e.conf.mac_cmd_key="keydown"==t.type)},window.addEventListener("keydown",this._macOnKey,!1),window.addEventListener("keyup",this._macOnKey,!1));for(var n in this.modules)null!=this.modules[n].init&&this[this.modules[n].init](t);return this.unload=function(){this.conf.unloading=!0,this.cont.onclick=null,this.cont.ondblclick=null,this.clearAll(),1==this.conf.is_mac&&(window.removeEventListener("keydown",this._macOnKey,!1),window.removeEventListener("keyup",this._macOnKey,!1));for(var t in this.modules)null!=this.modules[t].unload&&this[this.modules[t].unload]();this.area.parentNode.removeChild(this.area),this.area=null,this.cont.parentNode.removeChild(this.cont),this.cont=null,this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),""),window.dhx4._eventable(this,"clear");for(var t in this)this[t]=null;e=null},null==t.items&&null==t.json&&null==t.xml||this.loadStruct(t.items||t.json||t.xml,t.onload),this}function dhtmlxArray(t){return dhtmlx.extend(t||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}id?"object"==typeof id?(this.entBox=id,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhx4._eventable(this);var self=this;this._RaSeCol=[],this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=this.doLoadDetails,this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(t){var e=document.createElement("TABLE");return e.cellSpacing=e.cellPadding=0,e.style.cssText="width:100%;table-layout:fixed;",e.className=t.substr(2),e};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(t){}}),this.setSkin=function(t){this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+t)+4,this.skin_name=t,this._imgURL&&this.setImagePath(this._imgURL);var e=this.entBox.className.split(" gridbox")[0];switch(this.entBox.className=e+" gridbox gridbox_"+t+(_isIE?" isIE":" isModern"),this.skin_h_correction=0,this.enableAlterCss("ev_"+t,"odd_"+t,this.isTreeGrid()),this._fixAlterCss(),t){case"dhx_terrace":case"material":this._srdh=33,this.forceDivInHeader=!0;break;case"dhx_web":case"material":this.forceDivInHeader=!0,this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=!0}if(_isIE&&this.hdr){var i=this.hdr.parentNode;i.removeChild(this.hdr),i.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(t,e){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(t,e)},this.doOnScroll=function(t,e){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),e||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view&&self._update_srnd_view()},100))},this.attachToObject=function(t){t.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(t){if(this.isTreeGrid()&&!this._h2&&(this._h2=this._createHierarchy(),this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){if(this.skin_name||this.setSkin(window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0){var e=this.xmlFileUrl;this.clearAll(!0),this.xmlFileUrl=e}for(var i=this.hdr.insertRow(0),n=0;n<this.hdrLabels.length;n++)i.appendChild(document.createElement("TH")),i.childNodes[n]._cellIndex=n,i.childNodes[n].style.height="0px";_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?i.style.position="absolute":i.style.height="auto";(i=this.hdr.insertRow(_isKHTML?2:1))._childIndexes=new Array;var s=0;for(n=0;n<this.hdrLabels.length;n++)i._childIndexes[n]=n-s,this.hdrLabels[n]!=this.splitSign||0==n?(i.insertCell(n-s),i.childNodes[n-s]._cellIndex=n,i.childNodes[n-s]._cellIndexS=n,this.setColumnLabel(n,this.hdrLabels[n])):(_isKHTML&&i.insertCell(n-s),i.cells[n-s-1].colSpan=(i.cells[n-s-1].colSpan||1)+1,i.childNodes[n-s-1]._cellIndex++,s++,i._childIndexes[n]=n-s);0==s&&(i._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes&&self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var o=this.obj.firstChild;if(!o.firstChild){o.appendChild(document.createElement("TR")),o=o.firstChild,_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?o.style.position="absolute":o.style.height="auto";for(n=0;n<this.hdrLabels.length;n++)o.appendChild(document.createElement("TH")),o.childNodes[n].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.className="dhxgrid_sort_desc",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),t&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),dhx4.callEvent("onGridCreated",[this])}},this.setColumnSizes=function(t){for(var e=0,i=[],n=0,s=0;s<this._cCount;s++)if("*"!=this.initCellWidth[s]||this._hrrar[s]){if("%"==this.cellWidthType){void 0===this.cellWidthPC[s]&&(this.cellWidthPC[s]=this.initCellWidth[s]);var o=t*this.cellWidthPC[s]/100||0;n>.5&&(o++,n--);n=n+o-(this.cellWidthPX[s]=Math.floor(o))}else void 0===this.cellWidthPX[s]&&(this.cellWidthPX[s]=this.initCellWidth[s]);this._hrrar[s]||(e+=1*this.cellWidthPX[s])}else this._awdth=!1,i.push(s);if(i.length){var l=Math.floor((t-e)/i.length);l<0&&(l=1);for(s=0;s<i.length;s++){var r=Math.max(this._drsclmW?this._drsclmW[i[s]]||0:0,l);this.cellWidthPX[i[s]]=r,e+=r}if(t>e){var a=i[i.length-1];this.cellWidthPX[a]=this.cellWidthPX[a]+(t-e),e=t}this._setAutoResize()}return this.obj.style.width=e+"px",this.hdr.style.width=e+"px",this.ftr&&(this.ftr.style.width=e+"px"),this.chngCellWidth(),e},this.setSizes=function(){if(this.hdr.rows[0]){var t=this.quirks=_isIE&&"BackCompat"==document.compatMode,e=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){if(!this.globalBox.clientWidth)return;var i=this.globalBox.clientWidth,n=(this.globalBox.offsetWidth-i)/2;if(this._delta_x&&!this._realfake){this.globalBox.style.width=this._delta_x;var s=this.globalBox.clientWidth;this.entBox.style.width=Math.max(0,s+(t?2*n:0)-this._fake.entBox.clientWidth)+"px",s!=this._lastTimeSplitWidth&&(this._fake._correctSplit(this._fake.entBox.clientWidth),this._lastTimeSplitWidth=s)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(t?2*n:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*e+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth){var o=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||t?0:2,l=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||t?0:2;this._sizeFix&&(o-=this._sizeFix,l-=this._sizeFix);var r=!this.parentGrid&&this.objBox.scrollHeight>this.objBox.offsetHeight,a=dhtmlx.$customScroll?0:18,h=this.entBox.clientWidth-(this.skin_h_correction||0)*(t?0:1)-o,d=this.entBox.clientWidth-(this.skin_h_correction||0)-o,c=this.entBox.clientHeight-l,u=this.setColumnSizes(d-(r?a:0)-(this._correction_x||0)),f=!this.parentGrid&&(this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX),p=this.hdr.clientHeight,_=this.ftr?this.ftr.clientHeight:0,m=h,g=c-p-_;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(f=0),this._ahgr&&(g=this._ahgrMA?this.entBox.parentNode.clientHeight-p-_:this.obj.offsetHeight+(f?a:0)+(this._correction_y||0),this._ahgrM&&(g=this._ahgrF?Math.min(this._ahgrM,g+p+_)-p-_:Math.min(this._ahgrM,g)),r&&g>=this.obj.scrollHeight+(f?a:0)&&(r=!1,this.setColumnSizes(d-(this._correction_x||0)))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(u+=this._fake.entBox.clientWidth);m=Math.min(Math.max(u+(r?a:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=!r&&this.objBox.scrollWidth<=m?"hidden":"auto",this._fake&&(m-=this._fake.entBox.clientWidth)}g=Math.max(0,g),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.dontSetSizes||(this.entBox.style.width=Math.max(0,m+(t?2:0)*e+this._ff_size_delta)+"px",this.entBox.style.height=g+(t?2:0)*e+p+_+"px"),this.objBox.style.height=g+(t&&!r?2:0)*e+"px",this.hdrBox.style.height=p+"px",g!=c&&this.doOnScroll(0,!this._srnd);var v=this["setSizes_"+this.skin_name];v&&v.call(this),this.setSortImgPos(),p!=this.hdr.clientHeight&&this._ahgr&&this.setSizes(),this.callEvent("onSetSizes",[])}else this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250)}},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var t=this._cCount,e=0;e<t;e++)this.hdr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px",this.obj.rows[0].childNodes[e].style.width=this.cellWidthPX[e]+"px",this.ftr&&(this.ftr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px")},this.setDelimiter=function(t){this.delim=t},this.setInitWidthsP=function(t){this.cellWidthType="%",this.initCellWidth=t.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){window;var t=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(t._resize_timer),t._setAutoResize&&(t._resize_timer=window.setTimeout(function(){t.setSizes&&t.setSizes(),t._fake&&t._fake._correctSplit()},100))}),this._setAutoResize=function(){}}},this.setInitWidths=function(t){if(this.cellWidthType="px",this.initCellWidth=t.split(this.delim),_isFF)for(var e=0;e<this.initCellWidth.length;e++)"*"!=this.initCellWidth[e]&&(this.initCellWidth[e]=parseInt(this.initCellWidth[e]))},this.enableMultiline=function(t){this.multiLine=dhx4.s2b(t)},this.enableMultiselect=function(t){this.selMultiRows=dhx4.s2b(t)},this.setImagePath=function(t){t=t.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/"),this._imgURL=t,this.imgURL=t+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/",this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(t){this.iconURL=t},this.setIconsPath=this.setIconPath,this.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),e){if("TD"==e.tagName&&this._drsclmn&&!this._drsclmn[e._cellIndex])return e.style.cursor="default";var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft);e.offsetWidth-(t.offsetX||-1*(parseInt(this.getPosition(e,this.hdrBox))-i))<(_isOpera?20:10)?e.style.cursor="E-resize":e.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(t){this.resized&&this.stopColResize(),this.resized=null;var e=t.target||t.srcElement;"TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD"));var i=t.clientX,n=this.hdr.offsetWidth,s=parseInt(e.offsetWidth);if("TD"==e.tagName&&"default"!=e.style.cursor){if(this._drsclmn&&!this._drsclmn[e._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(t){self&&self.doColResize(t||window.event,e,s,i,n)},document.body.onmouseup=function(){self&&self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"",document.body.onmouseup=self._old_d_mu||"",this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(t,e,i,n,s){e.style.cursor="E-resize",this.resized=e;var o=i+(t.clientX-n);t.clientX;if(this.callEvent("onResize",[e._cellIndex,o,this])){_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft);var l=!1;if(e.colSpan>1){for(var r=new Array,a=0;a<e.colSpan;a++)r[a]=Math.round(o*this.hdr.rows[0].childNodes[e._cellIndexS+a].offsetWidth/e.offsetWidth);for(a=0;a<e.colSpan;a++)l=this._setColumnSizeR(e._cellIndexS+1*a,r[a])}else l=this._setColumnSizeR(e._cellIndex,o);return this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit(),l}},this._setColumnSizeR=function(t,e){if(!(e>(this._drsclmW&&!this._notresize?this._drsclmW[t]||10:10)))return!1;if(this.obj.rows[0].childNodes[t].style.width=e+"px",this.hdr.rows[0].childNodes[t].style.width=e+"px",this.ftr&&(this.ftr.rows[0].childNodes[t].style.width=e+"px"),"px"==this.cellWidthType)this.cellWidthPX[t]=e;else{var i=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(i-=17);var n=Math.round(e/i*100);this.cellWidthPC[t]=n}"none"!=this.sortImg.style.display&&this.setSortImgPos()},this.setSortImgState=function(t,e,i,n){if(i=(i||"asc").toLowerCase(),!dhx4.s2b(t))return this.sortImg.style.display="none",this.r_fldSorted&&(this.r_fldSorted.className=""),void(this.fldSorted=this.r_fldSorted=null);this.sortImg.className="asc"==i?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[e];var s=this.hdr.rows[n||1];if(s){for(var o=0;o<s.childNodes.length;o++)if(s.childNodes[o]._cellIndexS==e)return this.r_fldSorted=s.childNodes[o],this.setSortImgPos();return this.setSortImgState(t,e,i,(n||1)+1)}},this.setSortImgPos=function(t,e,i,n){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:t]){if(this.ar_fldSorted&&(this.ar_fldSorted.className=""),!n)if(t)n=this.hdr.rows[i||0].cells[t];else var n=this.r_fldSorted;if(null!=n){var s=this.getPosition(n,this.hdrBox),o=n.offsetWidth;this.ar_fldSorted=n,n.className=this.sortImg.className+"_col",this.sortImg.style.left=Number(s[0]+o-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(s[1]+5)+"px",this.useImagesInHeader||e||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(t){if(0==arguments.length)t=!0;1==t?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(t){var e=0,i=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(i&&i.parentNode&&i.parentNode.idd){if(this.markedCells){var n=0;return(t.shiftKey||t.metaKey)&&(n=1),t.ctrlKey&&(n=2),this.doMark(i,n),!0}return 0!=this.selMultiRows&&(t.shiftKey&&null!=this.row&&this.selectedRows.length&&(e=1),(t.ctrlKey||t.metaKey)&&(e=2)),this.doClick(i,!0,e,!1)}},this._doContClick=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(!e||void 0===e.parentNode.idd)return this.callEvent("onEmptyClick",[t]),!0;if(2==t.button||_isMacOS&&t.ctrlKey){if(!this.callEvent("onRightClick",[e.parentNode.idd,e._cellIndex,t])){var i=function(t){return(t||event).cancelBubble=!0,!1};return(t.srcElement||t.target).oncontextmenu=i,i(t)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[e.parentNode.idd,e._cellIndex,this]))return!0;if(_isIE&&(t.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var n=window.document.documentElement,s=window.document.body,o=new Array(n.scrollLeft||s.scrollLeft,n.scrollTop||s.scrollTop);if(_isIE)var l=t.clientX+o[0],r=t.clientY+o[1];else l=t.pageX,r=t.pageY;this._ctmndx.showContextMenu(l-1,r-1),this.contextID=this._ctmndx.contextMenuZoneId=e.parentNode.idd+"_"+e._cellIndex,this._ctmndx._skip_hide=!0}else e.contextMenuId=e.parentNode.idd+"_"+e._cellIndex,e.contextMenu=this._ctmndx,e.a=this._ctmndx._contextStart,e.a(e,t),e.a=null;return t.cancelBubble=!0,!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(t,e,i,n){this.selMultiRows||(i=0);var s=this.row?this.row.idd:0;if(this.setActive(!0),i||(i=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==t.tagName){if(this.checkEvent("onSelectStateChanged"))var o=this.getSelectedId();var l=this.row;if(1==i){var r=this.rowsCol._dhx_find(t.parentNode),a=this.rowsCol._dhx_find(this.lastClicked);if(r>a)var h=a,d=r;else h=r,d=a;for(var c=0;c<this.rowsCol.length;c++)if(c>=h&&c<=d){if(!this.rowsCol[c]||this.rowsCol[c]._sRow)return this.clearSelection(),this.doClick(t,e,0,n);if(!this.rowsCol[c].idd)continue;-1==this.rowsCol[c].className.indexOf("rowselected")&&this.callEvent("onBeforeSelect",[this.rowsCol[c].idd,s,t._cellIndex])&&(this.rowsCol[c].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[c])}}else if(2==i&&-1!=t.parentNode.className.indexOf("rowselected")){t.parentNode.className=t.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(t.parentNode));var u=!0;n=!1}if(this.editStop(),void 0===t.parentNode.idd)return!0;if(u||t.parentNode._sRow||(this.callEvent("onBeforeSelect",[t.parentNode.idd,s,t._cellIndex])?this.getSelectedRowId()!=t.parentNode.idd?(0==i&&this.clearSelection(),this.cell=t,l==t.parentNode&&this._chRRS&&(e=!1),this.row=t.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=t,this.row=t.parentNode):e=!1),this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=i&&!this.row)return;this.lastClicked=t.parentNode;var f=this.row.idd,p=this.cell;if(e&&void 0!==f&&p&&!u?self.onRowSelectTime=setTimeout(function(){self.callEvent&&self.callEvent("onRowSelect",[f,p._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[f]),this.checkEvent("onSelectStateChanged")){var _=this.getSelectedId();o!=_&&this.callEvent("onSelectStateChanged",[_,o])}if(u)return!1}this.isActive=!0,!1!==n&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection();var t=this.rowsBuffer;this.pagingOn&&(t=this.rowsCol);for(var e=0;e<t.length;e++)this.render_row(e).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(t)),this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(t,e,i,n,s,o){if(i||(i=!1),"object"!=typeof t&&(t=this.render_row(t)),!t||-1==t)return null;if(t._childIndexes)var l=t.childNodes[t._childIndexes[e]];else l=t.childNodes[e];l||(l=t.childNodes[0]),this.markedCells?this.doMark(l,n?2:0):n?this.doClick(l,i,3,o):this.doClick(l,i,0,o),s&&this.editCell()},this.moveToVisible=function(t,e){if(this.pagingOn){var i=Math.floor(this.getRowIndex(t.parentNode.idd)/this.rowsBufferOutSize)+1;i!=this.currentPage&&this.changePage(i)}try{if(t.offsetHeight){var n=t.offsetLeft+t.offsetWidth+20,s=0;n>this.objBox.offsetWidth+this.objBox.scrollLeft?t.offsetLeft>this.objBox.scrollLeft&&(s=t.offsetLeft-(this.objBox.offsetWidth-t.offsetWidth)+5):t.offsetLeft<this.objBox.scrollLeft&&(n-=2*t.offsetWidth/3)<this.objBox.scrollLeft&&(s=t.offsetLeft-5),s&&!e&&(this.objBox.scrollLeft=s)}if(t.offsetHeight)n=t.offsetTop;else{var o=this._realfake?this._fake.rowsAr[t.parentNode.idd]:t.parentNode;n=this.rowsBuffer._dhx_find(o)*this._srdh}if(n+t.offsetHeight+38>this.objBox.offsetHeight+this.objBox.scrollTop)var l=n;else if(n<this.objBox.scrollTop)l=n-5;l&&(this.objBox.scrollTop=l)}catch(t){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var t=this.cell;if(t.parentNode._locked)return!1;if(this.editor=this.cells4(t),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),t.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(t){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),t){var e=this.editor.val;return this.editor.detach(),this.editor.setValue(e),this.editor=null,void this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,e])}this.editor.detach()&&(this.cell.wasChanged=!0);var i=this.editor;if(null==i)return;this.editor=null;var n=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,i.getValue(),i.val]);"string"==typeof n||"number"==typeof n?i[i.setImage?"setLabel":"setValue"](n):n||i[i.setImage?"setLabel":"setValue"](i.val),this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(t,e,i){return(t=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(t),e))?t.childNodes[t._childIndexes?t._childIndexes[i]:i]:null},this._getNextCell=function(t,e,i){var n=(t=t||this.cell).parentNode;if(this._tabOrder)void 0!==(i=this._tabOrder[t._cellIndex])&&(t=i<0?this._nextRowCell(n,e,Math.abs(i)-1):n.childNodes[i]);else{(i=t._cellIndex+e)>=0&&i<this._cCount?(n._childIndexes&&(i=n._childIndexes[t._cellIndex]+e),t=n.childNodes[i]):t=this._nextRowCell(n,e,1==e?0:this._cCount-1)}return t?"none"==t.style.display||this.smartTabOrder&&this.cells(t.parentNode.idd,t._cellIndex).isDisabled()?this._getNextCell(t,e):t:(1==e&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==e&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)},this._nextRow=function(t,e){var i=this.render_row(t+e);return i&&-1!=i?i&&"none"==i.style.display?this._nextRow(t+e,e):i:null},this.scrollPage=function(t){if(this.rowsBuffer.length){var e=this._realfake?this._fake:this,i=Math.floor((e._r_select||this.getRowIndex(this.row.idd)||0)+t*this.objBox.offsetHeight/(this._srdh||20));i<0&&(i=0),i>=this.rowsBuffer.length&&(i=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[i]?(this.objBox.scrollTop+=Math.floor(t*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),e._r_select=i):(this.selectCell(i,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(i)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),e._r_select=null)}},this.doKey=function(t){if(!t)return!0;if((t.target||t.srcElement).value!==window.undefined){var e=t.target||t.srcElement;if("dhxcombo_input"!=e.className&&(!e.parentNode||-1==e.parentNode.className.indexOf("editable")))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(t);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[t.keyCode,t.ctrlKey,t.shiftKey,t]))return!1;var i="k"+t.keyCode+"_"+(t.ctrlKey?1:0)+"_"+(t.shiftKey?1:0);if(this.cell){if(this._key_events[i])return!1===this._key_events[i].call(this)||(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,t)}return!0},this.selectRow=function(t,e,i,n){"object"!=typeof t&&(t=this.render_row(t)),this.selectCell(t,0,e,i,!1,n)},this.wasDblClicked=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(e){var i=e.parentNode.idd;return this.callEvent("onRowDblClicked",[i,e._cellIndex,t])}},this._onHeaderClick=function(t,e){var i=this.grid;if(e=e||i.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[e._cellIndexS,t||window.event]))return!1;i.sortField(e._cellIndexS,!1,e)}this.grid.resized=null},this.deleteSelectedRows=function(){var t=this.selectedRows.length;if(0!=t){var e=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=t-1;i>=0;i--){var n=e[i];if(this.deleteRow(n.idd,n)){if(n==this.row)var s=i}else this.selectedRows[this.selectedRows.length]=n}if(s)try{s+1>this.rowsCol.length&&s--,this.selectCell(s,0,!0)}catch(t){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var t=new Array(0),e={},i=0;i<this.selectedRows.length;i++){var n=this.selectedRows[i].idd;e[n]||(t[t.length]=n,e[n]=!0)}return 0==t.length?null:t.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(t){return parseInt(this.cellWidthPX[t])},this.setColWidth=function(t,e){if("*"==e)this.initCellWidth[t]="*";else{if(this._hrrar[t])return;"px"==this.cellWidthType?this.cellWidthPX[t]=parseInt(e):this.cellWidthPC[t]=parseInt(e)}this.setSizes()},this.getRowIndex=function(t){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==t)return e;return-1},this.getRowId=function(t){return this.rowsBuffer[t]?this.rowsBuffer[t].idd:this.undefined},this.setRowId=function(t,e){this.changeRowId(this.getRowId(t),e)},this.changeRowId=function(t,e){if(t!=e){var i=this.rowsAr[t];i.idd=e,this.UserData[t]&&(this.UserData[e]=this.UserData[t],this.UserData[t]=null),this._h2&&this._h2.get[t]&&(this._h2.get[e]=this._h2.get[t],this._h2.get[e].id=e,delete this._h2.get[t]),this.rowsAr[t]=null,this.rowsAr[e]=i;for(var n=0;n<i.childNodes.length;n++)i.childNodes[n]._code&&(i.childNodes[n]._code=this._compileSCL(i.childNodes[n]._val,i.childNodes[n]));if(this._mat_links&&this._mat_links[t]){var s=this._mat_links[t];delete this._mat_links[t];for(var o in s)for(n=0;n<s[o].length;n++)this._compileSCL(s[o][n].original,s[o][n])}this.callEvent("onRowIdChange",[t,e])}},this.setColumnIds=function(t){this.columnIds=t.split(this.delim)},this.setColumnId=function(t,e){this.columnIds[t]=e},this.getColIndexById=function(t){for(var e=0;e<this.columnIds.length;e++)if(this.columnIds[e]==t)return e},this.getColumnId=function(t){return this.columnIds[t]},this.getColumnLabel=function(t,e,i,n){for(var s=(i||this.hdr).rows[(e||0)+1],o=0;o<s.cells.length;o++)if(s.cells[o]._cellIndexS==t)return n?s.cells[o].firstChild.innerHTML:_isIE?s.cells[o].innerText:s.cells[o].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(t,e,i){return this.getColumnLabel(t,e,this.ftr,i)},this.setRowTextBold=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="bold")},this.setRowTextStyle=function(t,e){var i=this.getRowById(t);if(i)for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n]._attrs.style||"";this._hrrar&&this._hrrar[n]&&(s="display:none;"),_isIE,i.childNodes[n].style.cssText=s+"width:"+i.childNodes[n].style.width+";"+e}},this.setRowColor=function(t,e){for(var i=this.getRowById(t),n=0;n<i.childNodes.length;n++)i.childNodes[n].bgColor=e},this.setCellTextStyle=function(t,e,i){var n=this.getRowById(t);if(n){var s=n.childNodes[n._childIndexes?n._childIndexes[e]:e];if(s){var o="";this._hrrar&&this._hrrar[e]&&(o="display:none;"),_isIE,s.style.cssText=o+"width:"+s.style.width+";"+i}}},this.setRowTextNormal=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="normal")},this.doesRowExist=function(t){return null!=this.getRowById(t)},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,-1);var i=this.rowsCol._dhx_find(e);if(e.previousSibling&&0!=i){e.parentNode.insertBefore(e,e.previousSibling),this.rowsCol._dhx_swapItems(i,i-1),this.setSizes();var n=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(n,n-1),this._cssEven&&this._fixAlterCss(i-1)}},this.moveRowDown=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,1);var i=this.rowsCol._dhx_find(e);if(e.nextSibling){this.rowsCol._dhx_swapItems(i,i+1),e.nextSibling.nextSibling?e.parentNode.insertBefore(e,e.nextSibling.nextSibling):e.parentNode.appendChild(e),this.setSizes();var n=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(n,n+1),this._cssEven&&this._fixAlterCss(i)}},this.getCombo=function(t){return this.combos[t]||(this.combos[t]=new dhtmlXGridComboObject),this.combos[t]},this.setUserData=function(t,e,i){t||(t="gridglobaluserdata"),this.UserData[t]||(this.UserData[t]=new Hashtable),this.UserData[t].put(e,i)},this.getUserData=function(t,e){t||(t="gridglobaluserdata"),this.getRowById(t);var i=this.UserData[t];return i?i.get(e):""},this.setEditable=function(t){this.isEditable=dhx4.s2b(t)},this.selectRowById=function(t,e,i,n){n||(n=!1),this.selectCell(this.getRowById(t),0,n,e,!1,i)},this.clearSelection=function(){this.editStop();for(var t=0;t<this.selectedRows.length;t++){var e=this.rowsAr[this.selectedRows[t].idd];e&&(e.className=e.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),this.row=null,null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null),this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(t,e){var i=this.getRowById(t);if(this.isTreeGrid())this._copyTreeGridRowContent(i,t,e);else for(var n=0;n<i.cells.length;n++)this.cells(e,n).setValue(this.cells(t,n).getValue());_isIE||(this.getRowById(t).cells[0].height=i.cells[0].offsetHeight)},this.setFooterLabel=function(t,e,i){return this.setColumnLabel(t,e,i,this.ftr)},this.setColumnLabel=function(t,e,i,n){var s=(n||this.hdr).rows[i||1],o=s._childIndexes?s._childIndexes[t]:t;if(s.cells[o]){if(this.useImagesInHeader){s.cells[o].style.textAlign="left",s.cells[o].innerHTML="<img src='"+e+"'>";var l=new Image;l.src=""+e.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=l;var r=new Image;r.src=""+e.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=r}else{var a="<div class='hdrcell'>";if(-1!=e.indexOf("img:[")){var h=e.replace(/.*\[([^>]+)\].*/,"$1");e=e.substr(e.indexOf("]")+1,e.length),a+="<img width='18px' height='18px' align='absmiddle' src='"+h+"' hspace='2'>"}a+=e,a+="</div>",s.cells[o].innerHTML=a,this._hstyles[t]&&(s.cells[o].style.cssText=this._hstyles[t])}if(-1!=(e||"").indexOf("#")){var d=e.match(/(^|{)#([^}]+)(}|$)/);if(d){var c="_in_header_"+d[2];this[c]&&this[c](this.forceDivInHeader?s.cells[o].firstChild:s.cells[o],o,e.split(d[0]))}}}},this.setColLabel=function(t,e,i,n){return this.setColumnLabel(t,e,(i||0)+1,n)},this.clearAll=function(t){if(this.obj.rows[0]){this._h2&&(this._h2=this._createHierarchy(),this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);this.rowsCol.length;for(var e=this.obj.rows.length-1;e>0;e--){(i=this.obj.rows[e]).parentNode.removeChild(i)}if(t){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(e=this.hdr.rows.length-1;e>=0;e--){var i;(i=this.hdr.rows[e]).parentNode.removeChild(i)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this.cellWidth=this._aFoot=null,this.cellType=dhtmlxArray(),this._hrrar=[],this.columnIds=[],this.combos=[],this._strangeParams=[],this.defVal=[],this._ivizcol=null}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr={},this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(t,e,i){if(0==this.getRowsNum())return!1;var n=this.hdr.rows[0].cells[t];if(n&&"TH"==n.tagName&&this.fldSort.length-1>=n._cellIndex&&"na"!=this.fldSort[n._cellIndex]){var s=this.getSortingState(),o=s[0]==t&&"asc"==s[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[t,this.fldSort[t],o]))return;if(this.sortImg.className="dhxgrid_sort_"+("asc"==o?"asc":"desc"),this.useImagesInHeader){var l=this.hdr.rows[1].cells[n._cellIndex].firstChild;if(null!=this.fldSorted){var r=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;r.src=r.src.replace(/(\.asc\.)|(\.des\.)/,".")}l.src=l.src.replace(/(\.[a-z]+)$/,"."+o+"$1")}this.sortRows(n._cellIndex,this.fldSort[n._cellIndex],o),this.fldSorted=n,i&&"th"!=i.tagName.toLowerCase()&&(this.r_fldSorted=i);var a=this.hdr.rows[1];(a=i.parentNode)._childIndexes?a._childIndexes[n._cellIndex]:n._cellIndex;this.setSortImgPos(!1,!1,!1,i)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(t){this.useImagesInHeader=t},this.setHeader=function(t,e,i){if("object"!=typeof t)var n=this._eSplit(t);else n=[].concat(t);for(var s=new Array(0),o=new dhtmlxArray(0),l=new Array(0),r=new Array(0),a=new Array(0),h=0;h<n.length;h++)s[s.length]=Math.round(100/n.length),o[o.length]="ed",l[l.length]="left",r[r.length]="middle",a[a.length]="na";this.splitSign=e||"#cspan",this.hdrLabels=n,this.cellWidth=s,this.initCellWidth.length||this.setInitWidthsP(s.join(this.delim),!0),this.cellType=o,this.cellAlign=l,this.cellVAlign=r,this.fldSort=a,this._hstyles=i||[]},this._eSplit=function(t){if(![].push)return t.split(this.delim);var e="r"+(new Date).valueOf(),i=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(t||"").replace(RegExp(i,"g"),e).replace(RegExp("\\\\"+e,"g"),this.delim).split(e)},this.getColType=function(t){return this.cellType[t]},this.getColTypeById=function(t){return this.cellType[this.getColIndexById(t)]},this.setColTypes=function(t){this.cellType=dhtmlxArray(t.split(this.delim)),this._strangeParams=new Array;for(var e=0;e<this.cellType.length;e++){if(-1!=this.cellType[e].indexOf("[")){var i=this.cellType[e].split(/[\[\]]+/g);this.cellType[e]=i[0],this.defVal[e]=i[1],0==i[1].indexOf("=")&&(this.cellType[e]="math",this._strangeParams[e]=i[0])}window["eXcell_"+this.cellType[e]]||dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[e],this,this.cellType[e]])}},this.setColSorting=function(t){this.fldSort=t.split(this.delim);for(var e={str:1,int:1,date:1},i=0;i<this.fldSort.length;i++)e[this.fldSort[i]]||"function"!=typeof window[this.fldSort[i]]||(this._customSorts||(this._customSorts=new Array),this._customSorts[i]=window[this.fldSort[i]],this.fldSort[i]="cus")},this.setColAlign=function(t){this.cellAlign=t.split(this.delim);for(var e=0;e<this.cellAlign.length;e++)this.cellAlign[e]=this.cellAlign[e]._dhx_trim()},this.setColVAlign=function(t){this.cellVAlign=t.split(this.delim)},this.setNoHeader=function(t){this.noHeader=dhx4.s2b(t)},this.showRow=function(t){this.getRowById(t),this._h2&&this.openItem(this._h2.get[t].parent.id);for(var e=this.getRowById(t).childNodes[0];e&&"none"==e.style.display;)e=e.nextSibling;e&&this.moveToVisible(e,!0)},this.setStyle=function(t,e,i,n){this.ssModifier=[t,e,i,i,n];for(var s=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],o=0;!_isIE;){try{document.styleSheets[o].cssRules.length}catch(t){o++;continue}break}for(var l=0;l<s.length;l++)this.ssModifier[l]&&(_isIE?document.styleSheets[0].addRule(s[l],this.ssModifier[l]):document.styleSheets[o].insertRule(s[l]+" { "+this.ssModifier[l]+" }",document.styleSheets[o].cssRules.length))},this.setColumnColor=function(t){this.columnColor=t.split(this.delim)},this.enableAlterCss=function(t,e,i,n){(t||e)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=i,this._cssSU=n,this._cssEven=t,this._cssUnEven=e},this._fixAlterCss=function(t){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(t);if(this._cssEven||this._cssUnEven)for(var e=t=t||0,i=t;i<this.rowsCol.length;i++)if(this.rowsCol[i]&&"none"!=this.rowsCol[i].style.display){if(this.rowsCol[i]._cntr){e=1;continue}-1!=this.rowsCol[i].className.indexOf("rowselected")?this.rowsCol[i].className=e%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||""):this._cssEven+" rowselected "+(this.rowsCol[i]._css||""):this.rowsCol[i].className=e%2==1?this._cssUnEven+" "+(this.rowsCol[i]._css||""):this._cssEven+" "+(this.rowsCol[i]._css||""),e++}},this.clearChangedState=function(){for(var t=0;t<this.rowsCol.length;t++){var e=this.rowsCol[t];if(e&&e.childNodes)for(var i=e.childNodes.length,n=0;n<i;n++)e.childNodes[n].wasChanged=!1}},this.getChangedRows=function(t){var e=new Array;return this.forEachRow(function(i){var n=this.rowsAr[i];if("TR"==n.tagName){var s=n.childNodes.length;if(t&&n._added)e[e.length]=n.idd;else for(var o=0;o<s;o++)if(n.childNodes[o].wasChanged){e[e.length]=n.idd;break}}}),e.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(t,e,i,n,s,o){this._sUDa=t,this._sAll=e,this._sConfig=i,this._chAttr=n,this._onlChAttr=s,this._asCDATA=o},this.setSerializableColumns=function(t){if(t){this._srClmn=(t||"").split(",");for(var e=0;e<this._srClmn.length;e++)this._srClmn[e]=dhx4.s2b(this._srClmn[e])}else this._srClmn=null},this._serialise=function(t,e,i){this.editStop();var n=[],s="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(t){var e=this._serializeRow(this.render_row_tree(-1,t.id));return n.push(e),!!e},this,function(){n.push(s)});else for(var o=0;o<this.rowsBuffer.length;o++)if(this.rowsBuffer[o]){if(this._chAttr&&this.rowsBuffer[o]._locator)continue;var l=this._serializeRow(this.render_row(o));n.push(l),l&&n.push(s)}return[n.join("")]},this._serializeRow=function(t,e){var i=[],n=this.xml.row_attrs,s=this.xml.cell_attrs;if(i.push("<"+this.xml.s_row),i.push(" id='"+t.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(t)&&i.push(" selected='1'"),this._h2&&"minus"==this._h2.get[t.idd].state&&i.push(" open='1'"),n.length)for(e=0;e<n.length;e++)i.push(" "+n[e]+"='"+t._attrs[n[e]]+"'");if(i.push(">"),this._sUDa&&this.UserData[t.idd]){keysAr=this.UserData[t.idd].getKeys();for(var o=0;o<keysAr.length;o++){var l=keysAr[o];0!==l.indexOf("__")&&i.push("<userdata name='"+l+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[t.idd].get(l)+(this._asCDATA?"]]>":"")+"</userdata>")}}for(var r=!1,a=0;a<this._cCount;a++)if(!this._srClmn||this._srClmn[a]){var h=this.cells3(t,a);if(i.push("<cell"),s.length)for(e=0;e<s.length;e++)i.push(" "+s[e]+"='"+h.cell._attrs[s[e]]+"'");if(zxVal=h[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&h.cell.colSpan&&h.cell.colSpan>1&&i.push(' colspan="'+h.cell.colSpan+'" '),this._chAttr?h.wasChanged()&&(i.push(' changed="1"'),r=!0):this._onlChAttr&&h.wasChanged()&&(r=!0),this._sAll&&"tree"==this.cellType[a]?i.push((this._h2?" image='"+this._h2.get[t.idd].image+"'":"")+">"+zxVal+"</cell>"):i.push(">"+zxVal+"</cell>"),this._ecspn&&h.cell.colSpan)for(var d=0;d<h.cell.colSpan-1;d++)i.push("<cell/>"),a++}return!this._onlChAttr||r||t._added?i.join(""):""},this._serialiseConfig=function(){for(var t="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if(!this._srClmn||this._srClmn[e]){var i=this.fldSort[e];"cus"==i&&(i=(i=this._customSorts[e].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),t+="<column width='"+this.getColWidth(e)+"' align='"+this.cellAlign[e]+"' type='"+this.cellType[e]+"' sort='"+(i||"na")+"' color='"+(this.columnColor[e]||"")+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">",this._asCDATA?t+="<![CDATA["+this.getColumnLabel(e)+"]]>":t+=this.getColumnLabel(e);var n=this.getCombo(e);if(n)for(var s=0;s<n.keys.length;s++)t+="<option value='"+n.keys[s]+"'>"+n.values[s]+"</option>";t+="</column>"}return t+="</head>"},this.serialize=function(){var t='<?xml version="1.0"?><rows>';if(this._mathSerialization?this._agetm="getMathValue":this._agetm="getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var e=this.UserData.gridglobaluserdata.getKeys(),i=0;i<e.length;i++)t+="<userdata name='"+e[i]+"'>"+this.UserData.gridglobaluserdata.get(e[i])+"</userdata>";return this._sConfig&&(t+=this._serialiseConfig()),t+=this._serialise(),t+="</rows>"},this.getPosition=function(t,e){if(!e){var i=dhx4.getOffset(t);return[i.left,i.top]}e=e||document.body;for(var n=t,s=0,o=0;n&&n!=e;)s+=n.offsetLeft-n.scrollLeft,o+=n.offsetTop-n.scrollTop,n=n.offsetParent;return e==document.body&&(_isIE?(o+=document.body.offsetTop||document.documentElement.offsetTop,s+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(s+=document.body.offsetLeft,o+=document.body.offsetTop)),[s,o]},this.getFirstParentOfType=function(t,e){for(;t&&t.tagName!=e&&"BODY"!=t.tagName;)t=t.parentNode;return t},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(t){this.grid.changeCursorState(t||window.event)},this.hdr.onmousedown=function(t){return this.grid.startColResize(t||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(t){(t=t||event).cancelBubble=!0,this.firstChild.grid.setActive(!0),window.dhx4.callEvent("_onGridClick",[t,this.firstChild.grid])},this.obj.onclick=function(t){!1!==this.grid._doClick(t||window.event)&&(this.grid._sclE?this.grid.editCell(t||window.event):this.grid.editStop()),(t=t||event).cancelBubble=!0,window.dhx4.callEvent("_onGridClick",[t,this.grid])},_isMacOS?this.entBox.oncontextmenu=function(t){t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1;var e=this.grid;return e._realfake&&(e=e._fake),e._doContClick(t||window.event)}:(this.entBox.onmousedown=function(t){return this.grid._doContClick(t||window.event)},this.entBox.oncontextmenu=function(t){return this.grid._ctmndx&&((t||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(t){if(!this.grid.wasDblClicked(t||window.event))return!1;if(this.grid._dclE){this.grid.getFirstParentOfType(_isIE?event.srcElement:t.target,"TR")==this.grid.row&&this.grid.editCell(t||window.event)}return(t||event).cancelBubble=!0,!_isOpera&&void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(t){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(t||window.event)}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop(),self.isActive&&self.setActive(!1)}),-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(t){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=t,this.getValue=function(){return this.cell.textContent&&"TEXTAREA"==this.cell.textContent.tagName?this.cell.textContent.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),"bold"!=this.cell.style.fontWeight&&"bold"!=this.cell.parentNode.style.fontWeight||(arOut[1]="bold"),"italic"!=this.cell.style.fontStyle&&"italic"!=this.cell.parentNode.style.fontWeight||(arOut[1]+="italic"),this.cell.style.fontSize?arOut[2]=this.cell.style.fontSize:arOut[2]="",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(t){fntAr=t.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(t){this.cell.style.color=t},this.setBgColor=function(t){""==t&&(t=null),this.cell.style.background=t},this.setHorAlign=function(t){1==t.length?this.cell.style.textAlign="c"==t?"center":"l"==t?"left":"right":this.cell.style.textAlign=t},this.wasChanged=function(){return!!this.cell.wasChanged},this.isCheckbox=function(){var t=this.cell.firstChild;return!(!t||"INPUT"!=t.tagName)&&(type=t.type,"radio"==type||"checkbox"==type)},this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(t){this.isCheckbox()&&("true"!=t&&1!=t&&(t=!1),this.cell.firstChild.checked=t)},this.setDisabled=function(t){"true"!=t&&1!=t&&(t=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=t,this.disabledF&&this.disabledF(t)),this.cell._disabled=t}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(t){for(var e=t,i=0,n=0;"BODY"!=e.tagName;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return new Array(i,n)}}function eXcell_ed(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},_isIE&&(this.obj.focus(),this.obj.blur()),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_edn(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var t=this.obj.value;return this.setValue(t),this.val!=this.getValue()}}function eXcell_ch(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(t){!0!==t||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(t){this.base=eXcell_ch,this.base(t),this.grid=t.parentNode.grid,this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(t){!1===t&&1==this.getValue()||!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.edit=null}function eXcell_txt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(t){(t||event).cancelBubble=!0};var t=this.grid.getPosition(this.cell);if(this.obj.value=this.val,this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(t){if(9==t.keyCode||27==t.keyCode)return!1}),this.obj.onkeydown=function(t){var e=t||event;if(9==e.keyCode||27==e.keyCode)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:e.keyCode,shiftKey:e.shiftKey,srcElement:"0"}),!1},this.obj.style.left=t[0]+"px",this.obj.style.top=t[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var e=200;else e=this.cell.offsetWidth;this.obj.style.width=e+16+"px",_isIE&&(this.obj.select(),this.obj.value=this.obj.value),this.obj.focus()},this.detach=function(){var t="";return t=this.obj.value,this.cell._clearCell=""==t,this.setValue(t),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?"":void 0!==this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_co(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var t=this.list.options[this.list.selectedIndex+1];return t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var t=this.list.options[this.list.selectedIndex-1];t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var t=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0};var e=this;this.obj.onkeyup=function(t){var i=(t||event).keyCode;if(38!=i&&40!=i&&9!=i)for(var n=this.readonly?String.fromCharCode(i):this.value,s=e.list.options,o=0;o<s.length;o++)if(0==s[o].text.indexOf(n))return s[o].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=t[0]+"px",this.list.style.top=t[1]+this.cell.offsetHeight+"px",this.list.onclick=function(t){var i=t||window.event,n=i.target||i.srcElement;"OPTION"==n.tagName&&(n=n.parentNode),e.editable=!1,e.grid.editStop(),i.cancelBubble=!0};for(var i=this.combo.getKeys(),n=!1,s=0,o=0;o<i.length;o++){var l=this.combo.get(i[o]);this.list.options[this.list.options.length]=new Option(l,i[o]),i[o]==this.val&&(s=this.list.options.length-1,n=!0)}0==n&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),s=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="0px",this.obj.style.height="0px"),this.cell.appendChild(this.obj),this.list.options[s].selected=!0,this.editable&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.obj.style.position="absolute",this.list.focus(),this.list.onkeydown=function(t){if(t=t||window.event,e.grid.setActive(!0),t.keyCode<30)return e.grid.doKey({target:e.cell,keyCode:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey})})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var t=this.list.options[this.list.selectedIndex];if(t&&t.text==this.obj.value)this.setValue(this.list.value);else{var e=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),i=e.values._dhx_find(this.obj.value);-1!=i?this.setValue(e.keys[i]):this.setValue(this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cotxt(t){this.base=eXcell_co,this.base(t)}function eXcell_corotxt(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cp(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var t=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=t[0]+"px",this.obj.style.zIndex=1e3,this.obj.style.top=t[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(t){return 1==t.length&&(t="0"+t),t},this.colorPanel=function(t,e){var i=document.createElement("TABLE");e.appendChild(i),i.cellSpacing=0,i.editor_obj=this,i.style.cursor="default",i.onclick=function(t){var e=t||window.event,i=e.target||e.srcElement,n=i.parentNode.parentNode.parentNode.editor_obj;n&&(n.setValue(i._bg),n.grid.editStop())};for(var n=256/t,s=0;s<=256/n;s++)for(var o=i.insertRow(s),l=0;l<=256/n;l++)for(var r=0;r<=256/n;r++){R=new Number(n*s)-(0==s?0:1),G=new Number(n*l)-(0==l?0:1),B=new Number(n*r)-(0==r?0:1);var a=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),h=o.insertCell(l);h.width="10px",h.innerHTML="&nbsp;",h.title=a.toUpperCase(),h.style.backgroundColor="#"+a,h._bg="#"+a,null!=this.val&&"#"+a.toUpperCase()==this.val.toUpperCase()&&(h.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var t=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");return t+="^"+this.cell.lnk,this.cell.trg&&(t+="^"+this.cell.trg),t}},this.isDisabled=function(){return!0}}function eXcell_icon(t){this.base=eXcell_ed,this.base(t);try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.setValue=function(t){this.cell._raw_value=t,this.setCValue('<div class="dhx_grid_icon"><i class="fa fa-'+t.toString()._dhx_trim()+'"></i></div>')},this.getValue=function(){return this.cell._raw_value},this.isDisabled=function(){return!0}}function eXcell_price(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){t?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(t,e){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==t)return this.values[i]=e,!0;this.values[this.values.length]=e,this.keys[this.keys.length]=t},this.get=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.values[e];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.keys._dhx_removeAt(e),this.values._dhx_removeAt(e),!0},this.size=function(){for(var t=0,e=0;e<this.keys.length;e++)null!=this.keys[e]&&t++;return t},this.getKeys=function(){for(var t=new Array(0),e=0;e<this.keys.length;e++)null!=this.keys[e]&&(t[t.length]=this.keys[e]);return t},this.save=function(){this._save=new Array;for(var t=0;t<this.keys.length;t++)this._save[t]=[this.keys[t],this.values[t]]},this.restore=function(){if(this._save){this.keys[t]=new Array,this.values[t]=new Array;for(var t=0;t<this._save.length;t++)this.keys[t]=this._save[t][0],this.values[t]=this._save[t][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(t,e,i,n,s,o,l,r,a,h,d){return this.source=t||"grid",this.target=e||"grid",this.mode=i||"move",this.dropmode=n||"child",this.sid=s||0,this.tid=o,this.sobj=l||null,this.tobj=r||null,this.sExtra=a||null,this.tExtra=h||null,this.before=d||!1,this}function eXcell_stree(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[t._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(t){this.cell._val=t,t=this._sub.getItemText(this.cell._val),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this._sub.parentObject.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=t[1]+"px",this._sub.parentObject.style.left=t[0]+"px",this._sub.parentObject.style.position="absolute";var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=t}}}function eXcell_link(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){if(this.cell.firstChild.getAttribute){var t=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(t?"^"+t:"")}return""},this.setValue=function(t){if("number"!=typeof t&&(!t||""==t.toString()._dhx_trim()))return this.setCValue("&nbsp;",e),this.cell._clearCell=!0;var e=t.split("^");1==e.length?e[1]="":e.length>1&&(e[1]="href='"+e[1]+"'",3==e.length?e[1]+=" target='"+e[2]+"'":e[1]+=" target='_blank'"),this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}function eXcell_grid(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell.val},this.setValue=function(t){this.cell.val=t,this._sub.getRowById(t)&&(t=(t=this._sub.cells(t,this._sindex))?t.getValue():""),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this.val=this.cell.val,this._sub.entBox.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.entBox.style.top=t[1]+"px",this._sub.entBox.style.left=t[0]+"px",this._sub.entBox.style.position="absolute",this._sub.setSizes();var e=this.grid.editStop;this.grid.editStop=function(){},this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val),this._sub.setActive(!0),this.grid.editStop=e},this.detach=function(){var t=this.cell.val;return this._sub.entBox.style.display="none",null!==this._sub.getSelectedId()&&(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=t)}}function eXcell_dhxCalendar(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(t){(t||event).cancelBubble=!0}),e=null}}function eXcell_dhxCalendarA(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});dhtmlxEvent(e.base,"click",function(t){(t||event).cancelBubble=!0})}}function eXcell_cntr(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(e){this.resetCounter(t._cellIndex)});var e=function(){var e=this;return window.setTimeout(function(){e.resetCounter&&(e._fake&&!e._realfake&&t._cellIndex<e._fake._cCount?e._fake.resetCounter(t._cellIndex):e.resetCounter(t._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",e),this.grid.attachEvent("onFilterEnd",e)}this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(t){this.cell.style.paddingRight="2px";var e=this.cell;window.setTimeout(function(){if(e.parentNode){var t=e.parentNode.rowIndex;(e.parentNode.grid.currentPage||t<0||e.parentNode.grid._srnd)&&(t=e.parentNode.grid.rowsBuffer._dhx_find(e.parentNode)+1),t<=0||(e.innerHTML=t,e.parentNode.grid._fake&&e._cellIndex<e.parentNode.grid._fake._cCount&&e.parentNode.grid._fake.rowsAr[e.parentNode.idd]&&e.parentNode.grid._fake.cells(e.parentNode.idd,e._cellIndex).setCValue(t),e=null)}},100)}}function eXcell_acheck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(t){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),"1"==this.val?this.setValue("<checkbox state='false'>"):this.setValue("<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){try{return this.cell.chstate.toString()}catch(t){return null}},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}function eXcell_context(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._val=t;var e=this._sub.itemPull[this._sub.idPrefix+this.cell._val];t=e?e.title:t,this.setCValue(t||"&nbsp;",t)},this.edit=function(){var t=this.grid.getPosition(this.cell);this._sub.showContextMenu(t[0]+this.cell.offsetWidth,t[1]);var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=t}this._sub.hideContextMenu()}}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj));var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0)),w.className=obj.className,obj.className="",obj.id&&(w.id=obj.id);var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(windowf.imgURL||mr.getAttribute("imgpath")||mr.getAttribute("image_path")||"");var skin=mr.getAttribute("skin");skin&&windowf.setSkin(skin),init&&init(windowf);for(var hrow=mr.rows[0],za=[],zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za.push(hrow.cells[i].innerHTML);var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf.callEvent("onXLS",[]),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode&&obj.parentNode.removeChild&&obj.parentNode.removeChild(obj),windowf.callEvent("onXLE",[]),windowf}function eXcell_math(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.fix_self=!0,this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue,this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(t){t=this.grid._compileSCL(t,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(t):(this.setCValue(t),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.innerHTML.toString()},this.setValue=function(t){var e=new RegExp(" ","i");if(""==(t=t.replace(e,":")))t="00:00";else{e=new RegExp("[a-zA-Z]","i");if(t.match(e))t="00:00";else{e=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i");if(-1!=t.search(e)){e=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");t=t.replace(e,":")}else{e=new RegExp("[^0-9]","i");if(res1=t.search(e),t.match(e))t="00:00";else if(1==t.length)t="00:0"+t;else if(parseInt(t)<60)t="00:"+t;else if(t.length<5){var i=parseInt(t);i-=60*(n=Math.floor(i/60));var n=n.toString();for(i=i.toString();n.length<2;)n="0"+n;for(;i.length<2;)i="0"+i;t=n+":"+i}}}}this.cell.innerHTML=t}}function eXcell_sub_row(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(t,e){(e||this.cell).innerHTML="<img src='"+this.grid.imgURL+t+"' width='18' height='18' />",(e||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.isOpen=function(){return!!this.cell.parentNode._expanded},this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this._setState(t?"plus.gif":"blank.gif")},this.setContent=function(t){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=t,this.resize()):(this.cell._previous_content=null,this.setValue(t),this.cell._sub_row_type=null)},this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="ajax",this.cell._previous_content=null,this._setState(t?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="grid",this._setState(t?"plus.gif":"blank.gif")},this.getSubGrid=function(){return t._sub_grid?t._sub_grid:null}}function eXcell_ra_str(t){t&&(this.base=eXcell_ra,this.base(t),this.grid=t.parentNode.grid)}function eXcell_combo(t){t&&(this.cell=t,this.grid=t.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var t=this.getText();this.cell._clearCell&&(t=""),this.cell.innerHTML="",this.cell._brval?this.combo=this.cell._brval:this.combo=(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo._xml?this.combo.setComboText(t):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(t)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(t).value)):this.combo.setComboText(t),this.combo.openSelect()},this.selectComboOption=function(t,e){e.selectOption(e.getIndexByValue(e.getOptionByLabel(t).value))},this.getValue=function(t){return this.cell.combo_value||""},this.getText=function(t){var e=this.cell;return""==this._combo_pre&&e.childNodes[1]?e=e.childNodes[1]:e.childNodes[0].childNodes[1],_isIE?e.innerText:e.textContent},this.setValue=function(t){if("object"==typeof t){this.cell._brval=this.initCombo();var e=this.cell._cellIndex,i=this.cell.parentNode.idd;t.firstChild?this.cell.combo_value=t.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,t,this.grid,e,i)}else{this.cell.combo_value=t;var n=null;(n=this.cell._brval)&&"object"==typeof this.cell._brval?t=(n.getOption(t)||{}).text||t:(n=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(n=this.grid._fake._col_combos[this.cell._cellIndex]))&&(t=(n.getOption(t)||{}).text||t),""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setComboCValue(t):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){var t=this.combo.getParent();if(t.parentNode!=this.cell)return!1;this.cell.removeChild(t);var e=this.cell.combo_value;return this.combo._confirmSelect("blur"),this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),e!=this.cell.combo_value})}function eXcell_clist(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();var t=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(t){this.obj=document.createElement("DIV");for(var e=this.val.split(","),i="",n=0;n<t.length;n++){for(var s=!1,o=0;o<e.length;o++)t[n]==e[o]&&(s=!0);i+=s?"<div><input type='checkbox' id='dhx_clist_"+n+"' checked='true' /><label for='dhx_clist_"+n+"'>"+t[n]+"</label></div>":"<div><input type='checkbox' id='dhx_clist_"+n+"'/><label for='dhx_clist_"+n+"'>"+t[n]+"</label></div>"}i+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",this.obj.editor=this,this.obj.innerHTML=i,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(t){return(t||event).cancelBubble=!0,!0};var l=this.grid.getPosition(this.cell);this.obj.style.left=l[0]+"px",this.obj.style.top=l[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var t="",e=0;e<this.childNodes.length-1;e++)this.childNodes[e].childNodes[0].checked&&(t&&(t+=", "),t+=this.childNodes[e].childNodes[1].innerHTML);return t.replace(/&amp;/g,"&")}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&").replace(/, /g,",")},this.detach=function(t){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();var t=this.grid.getPosition(this.cell);this.obj=new calcX(t[0],t[1]+this.cell.offsetHeight,this,this.val)},this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(left,top,onReturnSub,val){if(this.top=top||0,this.left=left||0,this.onReturnSub=onReturnSub||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(t){return-1==t.search(/[^1234567890]/gi)},this.isOperation=function(t){return-1==t.search(/[^\+\*\-\/]/gi)},this.onCalcKey=function(t){that=this.calk;var e=this.innerHTML,i=that.inputZone;0!=that.state&&2!=that.state||!that.isNumeric(e)||("0"!=i.value?i.value+=e:i.value=e),0!=that.state&&2!=that.state||"."!=e||0!=that.dotState||(that.dotState=1,i.value+=e),"C"==e&&(i.value=0,that.dotState=0,that.state=0),0==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&that.isOperation(e)&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&"="==e&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=3),1==that.state&&that.isNumeric(e)&&(i.value=e,that.state=2,that.dotState=0),3==that.state&&that.isNumeric(e)&&(i.value=e,that.state=0),3==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),"e"==e&&(i.value=Math.E,1==that.state&&(that.state=2),that.dotState=0),"p"==e&&(i.value=Math.PI,1==that.state&&(that.state=2),that.dotState=0),"Off"==e&&that.topNod.parentNode.removeChild(that.topNod),(t||event)&&((t||event).cancelBubble=!0)},this.sendResult=function(){if(that=this.calk,2==that.state){var t=that.inputZone;that.operandB=t.value,t.value=that.calckGo(),that.operatorA=e,that.operandA=t.value,that.state=3}var e=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod),that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var t=this.topNod.childNodes[0];if(t&&"TABLE"==t.tagName){for(i=1;i<t.childNodes[0].childNodes.length;i++)for(j=0;j<t.childNodes[0].childNodes[i].childNodes.length;j++)t.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,t.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,t.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var t=document.createElement("div");t.className="calcTable",t.style.position="absolute",t.style.top=this.top+"px",t.style.left=this.left+"px",t.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>",t.onclick=function(t){(t||event).cancelBubble=!0},document.body.appendChild(t),this.topNod=t},this.drawSelf(),this.init_table(),val){var rZone=this.inputZone;rZone.value=1*val,this.operandA=1*val,this.state=3}return this}function dhtmlxHierarchy(t){var e={id:0,childs:[],level:-1,parent:null,index:0,state:t._emptyLineImg};return this.order=[e],this.get={0:e},this.swap=function(t,e){var i=t.parent,n=t.index;i.childs[n]=e,i.childs[e.index]=t,t.index=e.index,e.index=n},this.forEachChildF=function(t,e,i,n){for(var s=this.get[t],o=0;o<s.childs.length;o++)e.apply(i||this,[s.childs[o]])&&(s.childs[o].childs.length&&this.forEachChildF(s.childs[o].id,e,i,n),n&&n.call(i||this,s.childs[o]))},this.forEachChild=function(t,e,i){for(var n=this.get[t],s=0;s<n.childs.length;s++)e.apply(i||this,[n.childs[s]]),n.childs[s].childs.length&&this.forEachChild(n.childs[s].id,e,i)},this.change=function(t,e,i){var n=this.get[t];n[e]!=i&&(n[e]=i,n.update=!0)},this.add=function(t,e){return this.addAfter(t,e)},this.addAfter=function(e,i,n,s){var o=this.get[i||0];if(n)var l=this.get[n].index+(s?0:1);else l=o.childs.length;var r={id:e,childs:[],level:o.level+1,parent:o,index:l,state:t._emptyLineImg};if(o.state==t._emptyLineImg&&this.change(i,"state",0==i?"minus":"plus"),n){for(var a=l;a<o.childs.length;a++)o.childs[a].index++;o.childs=o.childs.slice(0,l).concat([r]).concat(o.childs.slice(l,o.childs.length))}else o.childs.push(r);return this.get[e]=r,r},this.addBefore=function(t,e,i){return this.addAfter(t,e,i,!0)},this.remove=function(t){for(var e=this.get[t||0],i=0;i<e.childs.length;i++)this.deleteAll(e.childs[i].id);e.childs=[],e.parent.childs=e.parent.childs.slice(0,e.index).concat(e.parent.childs.slice(e.index+1));for(i=e.index;i<e.parent.childs.length;i++)e.parent.childs[i].index--;delete this.get[t]},this.deleteAll=function(t){for(var e=this.get[t||0],i=0;i<e.childs.length;i++)this.deleteAll(e.childs[i].id);e.childs=[],delete this.get[t]},this}function eXcell_tree(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.isDisabled=function(){return this.cell._disabled||this.grid._edtc},this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(t){(t||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},this.er.className+=" editable",this.er.firstChild.onclick=function(t){(t||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())},this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value),this.er.className=this.er.className.replace("editable","");var t=this.val!=this.er.innerHTML;return this.obj=this.er=null,t}},this.getValue=function(){return this.getLabel()},this.setImage=function(t){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+t,this.grid._h2.get[this.cell.parentNode.idd].image=t},this.setIcon=function(t){this.grid._h2.get[this.cell.parentNode.idd].icon=t,this.cell.parentNode.imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+t},this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image},this.getIcon=function(){return this.grid._h2.get[this.cell.parentNode.idd].icon},this.setLabel=function(t){this.setValueA(t)},this.getLabel=function(t){return this.cell.parentNode.valTag.innerHTML}}function dhtmlXForm(t,e,i){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20},this.idef_const={offsetNested:20},this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"},this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var n=this;this.setSkin=function(t){this.skin=t,this.cont.className="dhxform_obj_"+this.skin,this.cont.style.fontSize="material"==t?"14px":"dhx_terrace"==t?"13px":"12px",this._updateBlocks(),this.forEachItem(function(e){var i=n.getItemType(e);void 0!==n.items[i]&&"function"==typeof n.items[i].setSkin&&n.doWithItem(e,"setSkin",t)})},this.skin=i||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material",this.separator=",",this.live_validate=!1,this._type="checkbox",this._rGroup="default",this._idIndex={},this._indexId=[],this.cont="object"==typeof t?t:document.getElementById(t),t._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="material"==this.skin?"14px":"dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(t){this.cont.style.fontSize=t,this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(t){if(13==(t=t||event).keyCode){var e=t.target||t.srcElement;if(void 0!==e.tagName&&"textarea"==String(e.tagName).toLowerCase()&&!t.ctrlKey)return;n.callEvent("onEnter",[])}}),this.b_index=null,this.base=[],this._prepare=function(t,e){null==this.b_index?this.b_index=0:this.b_index++;var i=null,n=null;if(null!=e){e<0&&(e=0);for(var s=0,o=0;o<this.cont.childNodes.length;o++)for(var l=0;l<this.cont.childNodes[o].childNodes.length;l++)null==n&&1!=this.cont.childNodes[o].childNodes[l]._isNestedForm&&(s==e&&(i=this.cont.childNodes[o].nextSibling,n=this.cont.childNodes[o].childNodes[l]),s++)}if(this.base[this.b_index]=document.createElement("DIV"),this.base[this.b_index].className="dhxform_base",void 0!==t&&(this.base[this.b_index].style.cssText+=" margin-left:"+t+"px!important;"),null!=i?(this.cont.insertBefore(this.base[this.b_index],i),i=null):this.cont.appendChild(this.base[this.b_index]),null!=n)for(;null!=n;){var r=n;n=n.nextSibling,this.base[this.b_index].appendChild(r),r=null}},this.setSizes=function(){},this._mergeSettings=function(t){var e=-1,i={type:"settings"};for(var n in this.idef)i[n]=this.idef[n];for(var s=0;s<t.length;s++)if(void 0!==t[s]&&"settings"==t[s].type){for(var n in t[s])i[n]=t[s][n];e=s}return t[e>=0?e:t.length]=i,t},this._genStr=function(t){for(var e="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},this.idPrefix="dhxForm_"+this._genStr(12)+"_",this._rId=this._parentForm?this._genStr(12)+"_":t._rId,this.objPull={},this.itemPull={},this._ic=0,this._addItem=function(t,e,i,s,o,l,r){if(this.items[t]._index&&(this.getForm()._indexId.push(e),this.getForm()._idIndex[e]={ind:this.getForm()._indexId.length-1}),t||(t=this._type),"list"==t&&null!=o&&null!=this.itemPull[this.idPrefix+o]&&"function"==typeof this.itemPull[this.idPrefix+o]._addSubListNode)var a=this.itemPull[this.idPrefix+o]._addSubListNode();else if("newcolumn"==t)a={};else{null==this.b_index&&this._prepare();var h=this.base[this.b_index],d=null;if(void 0===l||isNaN(l)||"list"==t){if("list"==t)for(var c in this.itemPull)c==this.idPrefix+e&&(d=this.itemPull[c].nextSibling,null!=this.itemPull[c]._listBase&&this.itemPull[c]._listBase.length>0&&(d=this.itemPull[c]._listBase[this.itemPull[c]._listBase.length-1]))}else{l=Math.max(parseInt(l),0)+1;for(var u=0;u<this.cont.childNodes.length;u++)for(var f=0;f<this.cont.childNodes[u].childNodes.length;f++)null==d&&1!=this.cont.childNodes[u].childNodes[f]._isNestedForm&&0==--l&&(d=this.cont.childNodes[u].childNodes[f],h=this.cont.childNodes[u])}a=document.createElement("DIV");1==r&&null!=d&&(d=d.nextSibling),null!=d?h.insertBefore(a,d):h.appendChild(a)}if(a._idd=e,a._rId=this._rId,void 0!==a.style){void 0===i.offsetLeft&&this.idef.offsetLeft>0&&(i.offsetLeft=this.idef.offsetLeft),void 0===i.offsetTop&&this.idef.offsetTop>0&&(i.offsetTop=this.idef.offsetTop);var p="";void 0!==i.offsetLeft&&(p+=" padding-left:"+i.offsetLeft+"px!important;"),void 0!==i.offsetTop&&(p+=" padding-top:"+i.offsetTop+"px!important;"),a.style.cssText+=p}if("block"==t&&isNaN(i.blockOffset)&&(i.blockOffset=this.idef.blockOffset),"list"==t){void 0===a._ofsNested&&(a._ofsNested=this.idef_const.offsetNested),null!=s&&(a._sId=s);var _=this.items[t].render(a,this.skin);return this.itemPull[this.idPrefix+e]._listObj||(this.itemPull[this.idPrefix+e]._listObj=[]),this.itemPull[this.idPrefix+e]._list||(this.itemPull[this.idPrefix+e]._list=[]),this.itemPull[this.idPrefix+e]._listBase||(this.itemPull[this.idPrefix+e]._listBase=[]),this.itemPull[this.idPrefix+e]._listObj.push(_[0]),this.itemPull[this.idPrefix+e]._list.push(_[1]),this.itemPull[this.idPrefix+e]._listBase.push(a),_[1].checkEvent=function(t){return n.checkEvent(t)},_[1].callEvent=function(t,e){return n.callEvent(t,e)},_[1].getForm=function(){return n.getForm()},_[1]._initObj(this._mergeSettings(i)),a._inBlcok&&(a.className+=" in_block"),_[1]}if("newcolumn"!=t){if("label"==t&&0==this._ic++&&(i._isTopmost=!0),i.position=this.apos_css[i.position&&this.apos_css[i.position]?i.position:this.idef.position],a.className=i.position+("string"==typeof i.className?" "+i.className:""),i.labelWidth||(i.labelWidth=this.idef.labelWidth),i.labelHeight||(i.labelHeight=this.idef.labelHeight),void 0!==i.wrap&&(i.wrap=window.dhx4.s2b(i.wrap)),i.labelAlign=this.align_css[i.labelAlign]?this.align_css[i.labelAlign]:this.align_css[this.idef.labelAlign],i.inputWidth=i.width?i.width:i.inputWidth?i.inputWidth:this.idef.inputWidth,i.inputHeight||(i.inputHeight=this.idef.inputHeight),void 0!==i.note&&(null!=i.note.length&&null!=i.note[0]&&(i.note=i.note[0]),void 0===i.note.width&&(i.note.width=this.idef.noteWidth),"auto"==i.note.width&&(i.note.width=i.inputWidth)),a.checkEvent=function(t){return n.checkEvent(t)},a.callEvent=function(t,e){return n.callEvent(t,e)},a.getForm=function(){return n.getForm()},a._autoCheck=function(t){n._autoCheck(t)},"string"==typeof i.readonly&&(i.readonly=window.dhx4.s2b(i.readonly)),"string"==typeof i.autoStart&&(i.autoStart=window.dhx4.s2b(i.autoStart)),"string"==typeof i.autoRemove&&(i.autoRemove=window.dhx4.s2b(i.autoRemove)),"string"==typeof i.titleScreen&&(i.titleScreen=window.dhx4.s2b(i.titleScreen)),"string"==typeof i.info&&(i.info=window.dhx4.s2b(i.info)),"string"==typeof i.hidden&&(i.hidden=window.dhx4.s2b(i.hidden)),"string"==typeof i.checked&&(i.checked=window.dhx4.s2b(i.checked)),void 0!==i.userdata)for(var c in i.userdata)this.getForm().setUserData(e,c,i.userdata[c]);if(i.validate&&(i.validate,"function"==typeof i.validate||"function"==typeof window[i.validate]?a._validate=[i.validate]:a._validate=String(i.validate).split(this.separator)),void 0!==i.required&&("string"==typeof i.required&&(i.required=window.dhx4.s2b(i.required)),a._required=1==i.required),a._required){a._validate||(a._validate=[]);var m=!1;for(f=0;f<a._validate.length;f++)m=m||"NotEmpty"==a._validate[f];m||a._validate.push("NotEmpty")}a._ll=i.position==this.apos_css["label-left"]||i.position==this.apos_css["label-top"],this.objPull[this.idPrefix+e]=this.items[t].render(a,i),this.itemPull[this.idPrefix+e]=a}else this._prepare(i.offset,l)},this._initObj=function(t,e){if(void 0!==t.data){var i=null;return void 0!==e&&null!=(i=e.match(/(\?|\&)id\=([a-z0-9_\-]*)/i))&&null!=i[0]&&(i=i[0].split("=")[1]),void(!0===this.callEvent("onBeforeDataLoad",[i,window.dhx4._copyObj(t.data)])&&(this.formId=i,this._last_load_data=t,this.setFormData(t.data),this.resetDataProcessor("updated")))}this._prepare();for(var n=0;n<t.length;n++)if(void 0!==t[n]&&"settings"==t[n].type)for(var s in t[n])this.idef[s]=t[n][s];for(n=0;n<t.length;n++)this._prepareItem(t[n]);this._autoCheck()},this._prepareItem=function(t,e,i){var n=null!=t&&null!=t.type?t.type:"";if(this.items[n]){t.name||(t.name=this._genStr(12));var s=t.name;null==this.objPull[this.idPrefix+s]&&"radio"!=n||(s=this._genStr(12));var o=t;o.label=o.label||"",o.value=o.value,o.checked=window.dhx4.s2b(o.checked),o.disabled=window.dhx4.s2b(o.disabled),o.name=o.name||this._genStr(12),o.options=o.options||[],o.rows=o.rows||"none",o.uid=this._genStr(12),this._addItem(n,s,o,null,null,e,i),e=null,!1===this._parentEnabled&&this._disableItem(s);for(var l=0;l<o.options.length;l++)if(null!=o.options[l].list){o.options[l].value||(o.options[l].value=this._genStr());(r=this._addItem("list",s,o.options[l].list,o.options[l].value,null))._subSelect=!0,r._subSelectId=o.options[l].value}if(null!=t.list){t.listParent||(t.listParent=o.name);var r=this._addItem("list",s,t.list,null,t.listParent)}}},this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"},this._xmlToObject=function(t,e){if(void 0===e&&(e=!0),e){var i=t.getElementsByTagName("items");i=null!=i&&null!=i[0]?i[0]:null;var n=t.getElementsByTagName("data");n=null!=n&&null!=n[0]?n[0]:null}else i=t;var s=e?[]:{};if(null!=i)for(var o=0;o<i.childNodes.length;o++)if(void 0!==i.childNodes[o].tagName){var l=i.childNodes[o].tagName;if(null!=this._xmlSubItems[l]){var r=this._xmlSubItems[l];void 0===s[r]&&(s[r]=[]);for(var a=i.childNodes[o],h={},d=0;d<a.attributes.length;d++){var c=a.attributes[d].name,u=a.attributes[d].value;h[c]=u}"note"==r&&(h.text=a.firstChild.nodeValue),"_userdata"==r&&(h.value=null!=a.firstChild&&null!=a.firstChild.nodeValue?a.firstChild.nodeValue:"");var f=this._xmlToObject(a,!1);for(var p in f)if("_userdata"==p){h.userdata||(h.userdata={});for(d=0;d<f[p].length;d++)h.userdata[f[p][d].name]=f[p][d].value}else h[p]=f[p];a=null,e?s.push(h):s[r].push(h)}}if(null!=n){s={data:{}};for(o=0;o<n.childNodes.length;o++)if(void 0!==n.childNodes[o].tagName){var _=n.childNodes[o].tagName,m=null!=n.childNodes[o].firstChild?n.childNodes[o].firstChild.nodeValue:"";s.data[_]=m}}return s},this._autoCheck=function(t){!0===this._locked?t=!1:void 0===t&&(t=!0);for(var e in this.itemPull){var i=t&&!0!==this.itemPull[e]._udis;this[i?"_enableItem":"_disableItem"](this.itemPull[e]._idd),null!=this.getForm()._idIndex[this.itemPull[e]._idd]&&(this.getForm()._idIndex[this.itemPull[e]._idd].enabled=i);var n=i&&("boolean"!=typeof this.itemPull[e]._checked||this.itemPull[e]._checked);if(this.itemPull[e]._list)for(var s=0;s<this.itemPull[e]._list.length;s++){var o=!0;if(1==this.itemPull[e]._list[s]._subSelect){o=!1;var l=this.getItemValue(this.itemPull[e]._idd);"object"==typeof l&&"number"==typeof l.length||(l=[l]);for(var r=0;r<l.length;r++)o=l[r]==this.itemPull[e]._list[s]._subSelectId||o;this.itemPull[e]._listObj[s][o?"show":"hide"](this.itemPull[e]._listBase[s])}this.itemPull[e]._list[s]._autoCheck(n&&o)}}},this.doWithItem=function(t,e,i,n,s,o){if("object"!=typeof t){if(this.itemPull[this.idPrefix+t])return this.objPull[this.idPrefix+t][e](this.itemPull[this.idPrefix+t],i,n,s,o);h=null;for(var l in this.itemPull)if(this.itemPull[l]._list&&!h)for(d=0;d<this.itemPull[l]._list.length;d++)null==h&&(h=this.itemPull[l]._list[d].doWithItem(t,e,i,n,s,o));return h}var r=t[0],a=t[1],h=null;for(var l in this.itemPull){if((this.itemPull[l]._value==a||null===a)&&this.itemPull[l]._group==r)return this.objPull[l][e](this.itemPull[l],i,n,s,o);if(null!=this.itemPull[l]._list&&!h)for(var d=0;d<this.itemPull[l]._list.length;d++)h=this.itemPull[l]._list[d].doWithItem(t,e,i,n,s)}return null!=h?h:"getType"==e?this.doWithItem(t[0],"getType"):void 0},this._removeItem=function(t,e){null!=e?t=this.doWithItem([t,e],"destruct"):this.doWithItem(t,"destruct"),this._clearItemData(t)},this._clearItemData=function(t){if(this.itemPull[this.idPrefix+t]){t=this.idPrefix+t;try{this.objPull[t]=null,this.itemPull[t]=null,delete this.objPull[t],delete this.itemPull[t]}catch(t){}}else for(var e in this.itemPull)if(this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++)this.itemPull[e]._list[i]._clearItemData(t)},this.isItem=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isExist")},this.getItemType=function(t,e){return t=[t,e||null],this.doWithItem(t,"getType")},this.forEachItem=function(t){for(var e in this.objPull)if("radio"==this.objPull[e].t?t(this.itemPull[e]._group,this.itemPull[e]._value):t(String(e).replace(this.idPrefix,"")),this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++)this.itemPull[e]._list[i].forEachItem(t)},this.setItemLabel=function(t,e,i){null!=i?t=[t,e]:i=e,this.doWithItem(t,"setText",i)},this.getItemLabel=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"getText")},this._enableItem=function(t){this.doWithItem(t,"enable")},this._disableItem=function(t){this.doWithItem(t,"disable")},this._isItemEnabled=function(t){return this.doWithItem(t,"isEnabled")},this.checkItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"check"),this._autoCheck()},this.uncheckItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"unCheck"),this._autoCheck()},this.isItemChecked=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isChecked")},this.getCheckedValue=function(t){return this.doWithItem([t,null],"getChecked")},this._getRGroup=function(t,e){for(var i in this.itemPull){if(this.itemPull[i]._group==t&&(null==e||this.itemPull[i]._value==e))return this.itemPull[i]._idd;if(null!=this.itemPull[i]._list)for(var n=0;n<this.itemPull[i]._list.length;n++){var s=this.itemPull[i]._list[n]._getRGroup(t,e);if(null!=s)return s}}return null},this.setItemValue=function(t,e){return this.resetValidateCss(t,e),"radio"==this.getItemType(t)?(null!=this._getRGroup(t,e)?this.checkItem(t,e):this.uncheckItem(t,this.getCheckedValue(t)),null):this.doWithItem(t,"setValue",e)},this.getItemValue=function(t,e){return"radio"==this.getItemType(t)?this.getCheckedValue(t):this.doWithItem(t,"getValue",e)},this.updateValues=function(){this._updateValues()},this.showItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"show")},this.hideItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"hide")},this.isItemHidden=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isHidden")},this.getOptions=function(t){return this.doWithItem(t,"getOptions")},this.setItemWidth=function(t,e){this.doWithItem(t,"setWidth",e)},this.getItemWidth=function(t){return this.doWithItem(t,"getWidth")},this.setItemHeight=function(t,e){this.doWithItem(t,"setHeight",e)},this.setItemFocus=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"setFocus")},this._updateValues=function(){for(var t in this.itemPull)if(this.objPull[t]&&"function"==typeof this.objPull[t].updateValue&&this.objPull[t].updateValue(this.itemPull[t]),this.itemPull[t]._list)for(var e=0;e<this.itemPull[t]._list.length;e++)this.itemPull[t]._list[e]._updateValues()},this._getItemByName=function(t){for(var e in this.itemPull){if(this.itemPull[e]._idd==t)return this.itemPull[e];if(null!=this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++){var n=this.itemPull[e]._list[i]._getItemByName(t);if(null!=n)return n}}return null},this._resetValidateCss=function(t){t.className=t.className.replace(t._vcss,""),t._vcss=null},this.setValidateCss=function(t,e,i){var n=this._getItemByName(t);n&&(null!=n._vcss&&this._resetValidateCss(n),n._vcss="string"==typeof i?i:"validate_"+(!0===e?"ok":"error"),n.className+=" "+n._vcss)},this.resetValidateCss=function(t){for(var e in this.itemPull)if(null!=this.itemPull[e]._vcss&&this._resetValidateCss(this.itemPull[e]),null!=this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++)this.itemPull[e]._list[i].resetValidateCss()},this._validateLoop=function(t){for(var e in this.objPull)if(t(String(e).replace(this.idPrefix,"")),this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++)this.itemPull[e]._list[i]._validateLoop(t)},this.validate=function(t){if(0!=this.callEvent("onBeforeValidate",[])){var e=!0;return this._validateLoop(function(t,i){var s=n.doWithItem(t,"_validate");"boolean"!=typeof s&&(s=!0),e=s&&e},!0),this.callEvent("onAfterValidate",[e]),e}},this.validateItem=function(t,e){return void 0!==e&&(t=[t,e]),this.doWithItem(t,"_validate")},this.enableLiveValidation=function(t){this.live_validate=1==t},this.setReadonly=function(t,e){this.doWithItem(t,"setReadonly",e)},this.isReadonly=function(t){return this.doWithItem(t,"isReadonly")},this.getFirstActive=function(t){for(var e=0;e<this._indexId.length;e++){var i=!0;if(1==t){var n=this.getItemType(this._indexId[e]);dhtmlXForm.prototype.items[n].setFocus||(i=!1)}if(i&&this._idIndex[this._indexId[e]].enabled)return this._indexId[e]}return null},this.setFocusOnFirstActive=function(){var t=this.getFirstActive(!0);null!=t&&this.setItemFocus(t)},this.enableItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"userEnable"),this._autoCheck()},this.disableItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"userDisable"),this._autoCheck()},this.isItemEnabled=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isUserEnabled")},this.clear=function(){var t={};this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted");for(var e in this.itemPull){var i=this.itemPull[e]._idd;if("ch"==this.itemPull[e]._type&&this.uncheckItem(i),this.itemPull[e]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(i,""),"combo"==this.itemPull[e]._type){this.itemPull[e]._apiChange=!0;var n=this.getCombo(i);n.selectOption(0),n=null,this.itemPull[e]._apiChange=!1}if("se"==this.itemPull[e]._type){var s=this.getOptions(i);s.length>0&&(s[0].selected=!0)}if("ra"==this.itemPull[e]._type){var o=this.itemPull[e]._group;t[o]||(this.checkItem(o,this.doWithItem(i,"_getFirstValue")),t[o]=!0)}if(this.itemPull[e]._list)for(var l=0;l<this.itemPull[e]._list.length;l++)this.itemPull[e]._list[l].clear();this["setFormData_"+this.itemPull[e]._type]&&this["setFormData_"+this.itemPull[e]._type](i,"")}t=null,this._parentForm&&this._autoCheck(),this.resetValidateCss()},this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear");for(var t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm),this._formLS=null;for(var e=0;e<this.base.length;e++){for(;this.base[e].childNodes.length>0;)this.base[e].removeChild(this.base[e].childNodes[0]);this.base[e].parentNode&&this.base[e].parentNode.removeChild(this.base[e]),this.base[e]=null}this.base=null,this.cont.onkeypress=null,this.cont.className="",this.cont=null;for(var t in this)this[t]=null;n=null};for(var s in this.items)this.items[s].t=s,void 0===this.items[s]._index&&(this.items[s]._index=!0),this.items[s].show||(this.items[s].show=function(t){if(t.style.display="",t._listObj)for(var e=0;e<t._listObj.length;e++)t._listObj[e].show(t._listBase[e])}),this.items[s].hide||(this.items[s].hide=function(t){if(t.style.display="none",t._listObj)for(var e=0;e<t._listObj.length;e++)t._listObj[e].hide(t._listBase[e])}),this.items[s].isHidden||(this.items[s].isHidden=function(t){return"none"==t.style.display}),this.items[s].userEnable||(this.items[s].userEnable=function(t){t._udis=!1}),this.items[s].userDisable||(this.items[s].userDisable=function(t){t._udis=!0}),this.items[s].isUserEnabled||(this.items[s].isUserEnabled=function(t){return!0!==t._udis}),this.items[s].getType||(this.items[s].getType=function(){return this.t}),this.items[s].isExist||(this.items[s].isExist=function(){return!0}),this.items[s]._validate||(this.items[s]._validate=function(t){if(!t._validate||!t._enabled)return!0;if("ch"==t._type||"ra"==t._type){var e=this.isChecked(t)?this.getValue(t):0;"ra"==t._type&&void 0===e&&(e=0)}else e=this.getValue(t);for(var i=!0,n=0;n<t._validate.length;n++){var s="is"+t._validate[n];if(null!=e&&0!=e.length||"isNotEmpty"==s||"container"==t._type){var o=dhtmlxValidation[s];"container"==t._type&&"function"==typeof o&&(o=function(){return!0}),"function"!=typeof o&&"function"==typeof t._validate[n]&&(o=t._validate[n]),"function"!=typeof o&&"function"==typeof window[t._validate[n]]&&(o=window[t._validate[n]]),i=("function"==typeof o?o(e,t._idd):new RegExp(t._validate[n]).test(e))&&i,o=null}else;}return!1!==t.callEvent("onValidate"+(i?"Success":"Error"),[t._idd,e,i])&&t.getForm().setValidateCss(t._idd,i),i});return this._locked=!1,this._doLock=function(t){var e=!0===t;this._locked!=e&&(this._locked=e,this._autoCheck(!this._locked))},this.lock=function(){this._doLock(!0)},this.unlock=function(){this._doLock(!1)},this.isLocked=function(){return this._locked},this.setNumberFormat=function(t,e,i,n){return this.doWithItem(t,"setNumberFormat",e,i,n)},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0}),window.dhx4._eventable(this),this.attachEvent("_onButtonClick",function(t,e){this.callEvent("onButtonClick",[t,e])}),this._updateBlocks=function(){this.forEachItem(function(t){"block"!=n.getItemType(t)&&"combo"!=n.getItemType(t)||n.doWithItem(t,"_setCss",n.skin,n.cont.style.fontSize)})},this._isObj=function(t){return null!=t&&"object"==typeof t&&void 0===t.length},this._copyObj=function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},null!=e&&"object"==typeof e&&this._initObj(this._copyObj(e)),this._parentForm&&this._updateBlocks(),this._ccActive=!1,this._ccTm=null,this}function dhtmlXFileUploader(t,e,i,n,s,o,l,r,a){var h=this;if("string"==typeof n&&"function"==typeof this[n])this.engine=n;else{this.engine="html4";var d=null;if(void 0!==window.FormData&&void 0!==window.XMLHttpRequest&&void 0===(d=new XMLHttpRequest).upload&&(d=null),null!=d)this.engine="html5";else if(void 0!==window.swfobject||!1===d){(d=swfobject.getFlashPlayerVersion()).major>=10&&(this.engine="flash")}else this._sl_v=this.getSLVersion(),this._sl_v&&(this.engine="sl");d=null}"string"==typeof t&&(t=document.getElementById(t)),this._upload_mp=void 0===a||1==a,this._upload_dnd=!0,this._swf_file_url=e||"",this._swf_upolad_url=i||"",this._swf_logs=s,this._sl_xap=o,this._sl_upload_url=l,this._sl_logs=r,this.p=document.createElement("DIV"),this.p.className+=" dhx_file_uploader",t.appendChild(this.p),this.p_files=document.createElement("DIV"),this.p_files.className="dhx_upload_files",this.p.appendChild(this.p_files),this.p_controls=document.createElement("DIV"),this.p_controls.className="dhx_upload_controls",this.p.appendChild(this.p_controls),this._files={},this._items={},this._data={},this._autoStart=!1,this._autoRemove=!1,this._titleScreen=!0,this._enabled=!0,this._uploaded_count=0,this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){h._enabled&&(h._uploading||h._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){h._enabled&&(h._uploadStop(),h._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){h._enabled&&h.clear()},tooltip:"Clear list"}},this.buttons={};for(var t in this.b_opts){var e=document.createElement("DIV");e.innerHTML="&nbsp;",e.className="dhx_file_uploader_button button_"+t,e.onclick=this.b_opts[t].onclick,this.b_opts[t].tooltip&&(e.title=this.b_opts[t].tooltip),this.p_controls.appendChild(e),this.buttons[t]=e,e=null}this.buttons.cancel.style.display="none"},this._readableSize=function(t){for(var e=!1,i=["b","Kb","Mb","Gb","Tb","Pb","Eb"],n=0;n<i.length;n++)t>1024?t/=1024:!1===e&&(e=n);return!1===e&&(e=i.length-1),Math.round(100*t)/100+" "+i[e]},this._beforeAddFileToList=function(t,e){return!0===this.callEvent("onBeforeFileAdd",[t,e])},this._addFileToList=function(t,e,i,n,s){this._checkTitleScreen();var o=document.createElement("DIV");o._idd=t,o.className="dhx_file dhx_file_"+n,o.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+s+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>",this.p_files.appendChild(o),o.childNodes[0].style.width=o.offsetWidth-127+"px",this._items[t]=o,this._updateFileNameSize(t),o.childNodes[2].onclick=function(){if(h._enabled){var t=this.parentNode._idd;h._removeFileFromQueue(t)}},this.callEvent("onFileAdd",[e])},this._removeFileFromList=function(t){this._items[t]&&(this._items[t].childNodes[2].onclick=null,this._items[t].parentNode.removeChild(this._items[t]),this._items[t]=null,delete this._items[t],this._data[t]&&(this._data[t]=null,delete this._data[t]),this._checkTitleScreen())},this._updateFileNameSize=function(t){this._items[t].childNodes[0].innerHTML=this._files[t].name+(isNaN(this._files[t].size)?"&nbsp;":" ("+this._readableSize(this._files[t].size)+")"),this._items[t].childNodes[0].title=this._files[t].name+(isNaN(this._files[t].size)?"":" ("+this._readableSize(this._files[t].size)+")")},this._updateFileInList=function(t,e,i){this._items[t]&&(this._items[t].className="dhx_file dhx_file_"+e,this._updateProgress(t,e,i),this._updateFileNameSize(t))},this._updateProgress=function(t,e,i){"uploading"==e&&i<100&&"loader"==this._progress_type?(this._items[t].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[t].childNodes[1].innerHTML="&nbsp;"):(this._items[t].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[t].childNodes[1].innerHTML=i+"%"),this._updateFileNameSize(t)},this._removeFilesByState=function(t){for(var e in this._files)!0!==t&&this._files[e].state!=t||this._removeFileFromQueue(e)},this._switchButton=function(t){if(1==t)this.buttons.upload.style.display="none",this.buttons.cancel.style.display="";else{var e=this._uploaded_count;this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",this._uploaded_count=0,e>0&&this.callEvent("onUploadComplete",[e])}},this._uploadStart=function(){if(this._switchButton(!0),!this._uploading)for(var t in this._files)"fail"==this._files[t].state&&(this._files[t].state="added",this._updateFileInList(t,"added",0));this._uploading=!0;var e=!1;for(var t in this._files)e||"added"!=[this._files[t].state]||(e=!0,this._files[t].state="uploading",this._updateFileInList(t,"uploading",0),this._doUploadFile(t));e||(this._uploading=!1,this._switchButton(!1))},this._onUploadSuccess=function(t,e,i,n){if(void 0!==i&&"flash"==this.engine){var s=dhx4.s2j(i.data);if(null==s||1!=s.state||null==s.name)return void this._onUploadFail(t,null!=s&&null!=s.extra?s.extra:null);e=s.name,null!=s.extra&&(n=s.extra)}this._uploaded_count++,this._data[t]={realName:this._files[t].name,serverName:e},this._files[t].state="uploaded",this._updateFileInList(t,"uploaded",100),this.callEvent("onUploadFile",[this._files[t].name,e,n]),this._autoRemove&&this._removeFileFromQueue(t),this._uploading&&this._uploadStart()},this._onUploadFail=function(t,e){this._files[t].state="fail",this._updateFileInList(t,"fail",0),this.callEvent("onUploadFail",[this._files[t].name,e]),this._uploading&&this._uploadStart()},this._onUploadAbort=function(t){this._uploading=!1,this._files[t].state="added",this._updateFileInList(t,"added",0),this.callEvent("onUploadCancel",[this._files[t].name])},this._checkTitleScreen=function(){var t=0;for(var e in this._files)t++;0==t&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"),(t>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")},this.callEvent=function(){},this.upload=function(){this._uploading||this._uploadStart()},this.setAutoStart=function(t){this._autoStart=1==t},this.setAutoRemove=function(t){this._autoRemove=1==t},this.enableTitleScreen=function(t){this._titleScreen=1==t,this._checkTitleScreen()},this.setTitleText=function(t){this._titleText=t,this.p.className.search("dhx_file_uploader_title")>=0&&(this.buttons.info.innerHTML=this._titleText)},this.setURL=function(t){this._url=t},this.setSWFURL=function(t){this._swf_upolad_url=t},this.enable=function(){this._enabled=!0,this.p_files.className="dhx_upload_files",this.p_controls.className="dhx_upload_controls"},this.disable=function(){this._enabled=!1,this.p_files.className="dhx_upload_files dhx_uploader_dis",this.p_controls.className="dhx_upload_controls dhx_uploader_dis"},this.getStatus=function(){var t=0;for(var e in this._files){if("uploaded"!=this._files[e].state)return-1;t=1}return t},this.getData=function(){return this._data},this.clear=function(){!0===this.callEvent("onBeforeClear",[])&&(this._uploading&&h._uploadStop(),h._switchButton(!1),h._removeFilesByState(!0),this.callEvent("onClear",[]))},this.unload=function(){this._removeFilesByState(!0),this._data=null,this._files=null,this._items=null,this._unloadEngine();for(var t in this.buttons)this.buttons[t].onclick=null,this.buttons[t].parentNode.removeChild(this.buttons[t]),this.buttons[t]=null,delete this.buttons[t];this.buttons=null;for(var t in this.b_opts)this.b_opts[t].onclick=null,this.b_opts[t]=null,delete this.b_opts[t];this.b_opts=null,this.p_controls.parentNode.removeChild(this.p_controls),this.p_files.parentNode.removeChild(this.p_files),this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var t in this)this[t]=null;h=t=null};var c=new this[this.engine];for(var u in c)this[u]=c[u],c[u]=null;return u=c=t=null,this._initToolbar(),this._initEngine(),this._checkTitleScreen(),this}function dhtmlXAccordion(t,e){var i=this,n=window.dhx4.transDetect();this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"material",css:"dhxacc",icons_path:"",icons_css:!1,multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,cont_w:null},this.conf.tr={prop:n.transProp,ev:n.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"},this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}},material:{m:{between:12,left:0,right:0}}}},navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident"),this.conf.tr.height_open=this.conf.tr.height_close;var s=null;if("object"==typeof t&&!t.tagName){s={};for(var o in t)s[o]=t[o],t[o]=null;t=s.parent,s.parent=null}if(window.dhtmlXCellTop.apply(this,[t,t._ofs]),this._adjustCont(),null!=this.base._ofs)for(var l in this.ofs.base)if(null!=this.base._ofs[l])for(var o in this.base._ofs[l])this.ofs.base[l][o]=this.base._ofs[l][o];return this._applyOffsets=function(){for(var t in this.ofs.def){var e=this.ofs.def[t],i=null!=this.ofs.skin[this.conf.skin]&&null!=this.ofs.skin[this.conf.skin][t]?this.ofs.skin[this.conf.skin][t]:null,n=null!=this.base._ofs?this.base._ofs[t]:null;for(var s in e)null!=i&&null!=i[s]?this.ofs[t][s]=i[s]:null!=n&&null!=n[s]?this.ofs[t][s]=n[s]:this.ofs[t][s]=e[s]}},this._applyOffsets(),this.t={},this.addItem=function(t,e,n,s,o){for(null==t&&(t="a"+window.dhx4.newId());null!=this.t[t];)t="a"+window.dhx4.newId();var l=new dhtmlXAccordionCell(t,this);if(l.conf.skin=this.conf.skin,l.setText(e),null!=o&&l.setIcon(o),l.cell._accId=t,l.cell.childNodes[l.conf.idx.hdr].onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},l.cell.childNodes[l.conf.idx.hdr].onclick=function(t){if((t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,null==i._dnd||1!=i._dnd.ofs){for(var e=t.target||t.srcElement,n=null;e._accId!=this&&null==n;)null!=e._accId?n=e._accId:e=e.parentNode;null!=n&&i._hdrClick(n)}},this.t[t]={cell:l},this.conf.total_count++,this.conf.multi_mode)void 0===n&&(n=!0),this.cont.appendChild(l.cell),l.conf.opened=1==n,void 0===s||null==s||"*"==s?("*"==s&&(l.conf.h_auto=!0),s=this.conf.def_height):s=Math.max(parseInt(s),30),l._setSize(this.ofs.m.left,0,this.conf.cont_w||this._getAvailItemWidth(),l.conf.opened?s:l._getHdrHeight()),l.cell.style.marginTop=(l.cell==this.cont.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",1!=n&&(l.conf.size.h=s,l._adjustCell(),l.cell.className+=" dhx_cell_closed"),this._adjustOpened(),null!=this._dnd&&this._dndAttachEvent(t);else{n=null==this.conf.last_opened||window.dhx4.s2b(n);var r=this._updateCellsHeight();if(null!=this.conf.last_opened)if(n)this._closeItem(this.conf.last_opened,!1);else{var a=this.t[this.conf.last_opened].cell;a._setSize(a.conf.size.x,a.conf.size.y,a.conf.size.w,r),a=null}this.cont.appendChild(l.cell),l.conf.opened=n,l.cell.style.marginTop=String(l.cell==this.cont.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",l._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),n?r:l._getHdrHeight()),n?this.conf.last_opened=t:(l.conf.size.h=r,l._adjustCell(),l.cell.className+=" dhx_cell_closed")}return l=null,this.t[t].cell},this.removeItem=function(t){this.t[t]&&(this.conf.last_opened==t&&(this.conf.last_opened=null),this.conf.on_active_id==t&&(this.conf.on_active_id=null),null!=this._dnd&&this._dndClearCell(t),this.conf.total_count--,this.conf.multi_mode||this.t[t].cell.conf.visible||this.conf.hiden_count--,this.t[t].cell._unload(),this.t[t].cell=null,this.t[t]=null,delete this.t[t],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))},this.cells=function(t){return this.t[t].cell},this.enableMultiMode=function(t,e){this.conf.multi_mode=!0,isNaN(e)||(this.conf.def_height=e),"auto"==t||"scroll"==t?(this.cont.style.overflowX="hidden",this.cont.style.overflowY=t):this.cont.style.overflow="visible"},this.forEachItem=function(t){for(var e in this.t)"function"==typeof t?t.apply(this,[this.t[e].cell]):"string"==typeof t&&"function"==typeof window[t]&&window[t].apply(this,[this.t[e].cell])},this._openItem=function(t,e){void 0===e&&(e=!0),0==this.t[t].cell.conf.opened&&(this.conf.multi_mode?this.t[t].cell._open(e):0==this.conf.tr.prop?(null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(!1),this.t[t].cell._open(!1),this.conf.last_opened=t):(this.conf.on_active_id=t,this.t[t].cell._open(e),null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(e),this.conf.last_opened=t))},this._closeItem=function(t,e){void 0===e&&(e=!0),1==this.t[t].cell.conf.opened&&(this.t[t].cell._close(e),this.conf.last_opened=null)},this._adjustOpened=function(){if(1==this.conf.multi_mode){if(null==this._openCache){var t=this._getDynData();for(var e in t)this.t[e].cell.conf.size.h=Math.max(t[e],0),this.t[e].cell.cell.style.height=Math.max(t[e],0)+"px"}else{var i=!1;for(var e in this._openCache)i=i||this._openCache[e];if(1==i)return;this._openCache=this._openId=null}var n=this._getAvailItemWidth();for(var e in this.t){var s=!0;n!=this.t[e].cell.conf.size.w||"close"!=this._openMode&&0!=this.t[e].cell.conf.opened||(s=!1),s&&this.t[e].cell._setWidth(n)}this._openMode=null}else if(null!=this.conf.last_opened){var o=this.conf.last_opened;this.t[o].cell._setSize(this.t[o].cell.conf.size.x,this.t[o].cell.conf.size.y,this.t[o].cell.conf.size.w,this.t[o].cell.conf.size.h)}},this._getDynData=function(t,e){void 0!==t&&null!=t||(t={}),void 0!==e&&null!=e||(e={});for(var i={},n=0,s=0,o=0,l=0;l<this.cont.childNodes.length;l++){var r=this.cont.childNodes[l]._accId,a=this.t[r].cell;if(1==a.conf.visible){var h=this.ofs.m[0==o?"first":"between"];if(1==t[r]||1==e[r]||1==a.conf.opened&&1==a.conf.h_auto)if(1==e[r]){var d=a._getHdrHeight();i[r]=d,s+=d+h}else 1==a.conf.h_auto?(i[r]=!0,s+=h,n++):1==t[r]&&(i[r]=a.conf.size.h,s+=a.conf.size.h+h);else s+=a.cell.offsetHeight+h;o++}a=null}if(n>0){var c=this.cont.offsetHeight-s;s=Math.floor(c/n);for(var u in i)1==i[u]&&(n>1?c-=s:s=c,i[u]=s,n--)}return i},this.setSizes=function(){if(this._adjustCont(),1==this.conf.multi_mode)this._adjustOpened();else{this.conf.cont_w=null;var t=this._updateCellsHeight();for(var e in this.t)1==this.t[e].cell.conf.visible&&(this.t[e].cell._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),this.t[e].cell.conf.opened?t:this.t[e].cell._getHdrHeight()),1!=this.t[e].cell.conf.opened&&(this.t[e].cell.conf.size.h=t,this.t[e].cell._adjustCell()));this.conf.size_changed=!0}this.callEvent("_onSetSizes",[])},this.setSkin=function(t){this._setBaseSkin(t),this.conf.skin=t;for(var e in this.t)this.t[e].cell.conf.cells_cont=null,this.t[e].cell.conf.skin=this.conf.skin;this._applyOffsets(),this._updateCellsMargin(),this.setSizes()},this.setIconsPath=function(t){this.conf.icons_path=t},this._getAvailItemWidth=function(){var t=this.ofs[this.conf.multi_mode?"m":"s"],e=Math.max(this.cont.clientWidth-t.left-t.right,10);return this.conf.cont_w=e,t=null,e},this._updateCellsHeight=function(){if(1!=this.conf.multi_mode){var t=this.conf.total_count-this.conf.hiden_count,e=this.cont.offsetHeight-this.ofs.s.last;if(0==t)return e;for(var i=!1,n=0;n<this.cont.childNodes.length;n++)if(0==i){var s=this.cont.childNodes[n]._accId;this.t[s].cell.conf.visible&&(e-=this.t[s].cell._getHdrHeight()*(t-1),i=!0)}e-=(t-1)*this.ofs.s.between+this.ofs.s.first;for(var o in this.t)null!=this.t[o].cell.conf.size&&(this.t[o].cell.conf.size.h=e,this.t[o].cell._adjustCell());return e}},this._updateCellsMargin=function(){for(var t=0,e=0;e<this.cont.childNodes.length;e++){var i=this.cont.childNodes[e]._accId;this.t[i].cell.conf.visible&&(this.t[i].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][0==t++?"first":"between"])+"px")}},this._hdrClick=function(t){if(this.conf.multi_mode||!this.t[t].cell.conf.opened){var e=this.t[t].cell.conf.opened;!0===this.callEvent("onBeforeActive",[t,!e])&&(this.conf.on_active_click=!0,this[e?"_closeItem":"_openItem"](t),this.conf.multi_mode&&0==this.conf.tr.prop&&this._adjustOpened())}},this.unload=function(){this.conf.unloading=!0;for(var t in this.t)this.removeItem(t);this.t=null,"function"==typeof this._unloadDND&&this._unloadDND(),this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),this._unloadTop(),window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.ofs=this.conf=null;for(var t in this)this[t]=null;i=null},this.setOffset=function(t){this.ofs.s.between=t,this.ofs.m.between=t,this._updateCellsMargin(),this.setSizes()},this._initObj=function(t){if(null!=t.skin&&this.setSkin(t.skin),window.dhx4.s2b(t.multi_mode)&&this.enableMultiMode(),null!=t.icons_path&&this.setIconsPath(t.icons_path),null!=t.icon_path&&this.setIconsPath(t.icon_path),null!=t.iconset&&(this.conf.icons_css="awesome"==t.iconset),null!=t.items)for(var e=0;e<t.items.length;e++)this.addItem(t.items[e].id,t.items[e].text,t.items[e].open,t.items[e].height,t.items[e].icon||t.items[e].img);1==window.dhx4.s2b(t.dnd)&&"function"==typeof this.enableDND&&this.enableDND()},this._xmlToObj=function(t){var e={items:[]},i=t.getElementsByTagName("accordion")[0];null!=i.getAttribute("skin")&&(e.skin=i.getAttribute("skin")),"multi"==i.getAttribute("mode")&&(e.multi_mode=!0),null!=i.getAttribute("multiMode")&&(e.multi_mode=window.dhx4.s2b(i.getAttribute("multiMode"))),null!=i.getAttribute("iconsPath")&&(e.icons_path=i.getAttribute("iconsPath"));for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(void 0!==s.tagName&&"cell"==String(s.tagName).toLowerCase()){var o={};null!=s.getAttribute("id")&&(o.id=s.getAttribute("id")),null!=s.getAttribute("icon")&&(o.icon=s.getAttribute("icon")),null!=s.getAttribute("height")&&(o.height=s.getAttribute("height")),null!=s.getAttribute("open")&&(o.open=window.dhx4.s2b(s.getAttribute("open"))),o.text=s.firstChild.nodeValue,e.items.push(o)}s=null}return e},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0}),window.dhx4._eventable(this),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this.attachEvent("onActive",function(t){null!=t&&null!=this.t[t]&&null!=this.t[t].cell.dataObj&&"editor"==this.t[t].cell.dataType&&this.t[t].cell.dataObj._prepareContent(!0),null!=t&&null!=this.t[t]&&1==this.t[t].cell.conf.opened&&this.t[t].cell._adjustProgress()}),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),null!=s&&(this._initObj(s),s=null),this}function dhtmlXAccordionCell(t,e){dhtmlXCellObject.apply(this,[t,"_acc"]),this.acc=e,this.conf.visible=!0,this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this._trDetachEv(),this._unloadDocking(),this.acc=null,this.cell._accObj=null,this.cell.childNodes[this.conf.idx.hdr].onselectstart=null,this.cell.childNodes[this.conf.idx.hdr].onclick=null,this._initHeader=null,this._getHdrHeight=null,this._setWidth=null,this._adjustCell=null,this._open=null,this._close=null,this._isOpened=null,this._trInitEv=null,this._trAttachEv=null,this._trDetachEv=null,this._trOnEnd=null,this._onActiveCall=null,this.setText=null,this.getText=null,this.setIcon=null,this.clearIcon=null,this.show=null,this.hide=null,this.isVisible=null,this.setHeight=null,this.moveOnTop=null}),this.acc.attachEvent("onBeforeDrag",function(t){null!=this.t[t].cell.dataObj&&"editor"==this.t[t].cell.dataType&&(null==this.conf.editor_data&&(this.conf.editor_data={}),this.conf.editor_data[t]=this.t[t].cell.dataObj.getContent());for(var e in this.t)this.t[e].cell._showCellCover();return!0}),this.acc.attachEvent("onDrop",function(t){null!=this.t[t].cell.dataObj&&"editor"==this.t[t].cell.dataType&&(this.t[t].cell.dataObj._prepareContent(!0),null!=this.conf.editor_data&&null!=this.conf.editor_data[t]&&(this.t[t].cell.dataObj.setContent(this.conf.editor_data[t]),this.conf.editor_data[t]=null));for(var e in this.t)this.t[e].cell._hideCellCover()}),this.acc.attachEvent("_onDropCancel",function(t){for(var e in this.t)this.t[e].cell._hideCellCover()}),this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)}),this.attachEvent("_onBeforeContentAttach",function(t){"sidebar"==t&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()}),this._initHeader(),this.conf.tr={};for(var i in this.acc.conf.tr)this.conf.tr[i]=this.acc.conf.tr[i];return 0!=this.conf.tr.prop&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)}),this.open=function(t){1==window.dhx4.s2b(t)&&(this.acc.conf.on_active_click=!0),this.acc._openItem(this._idd)},this.close=function(t){1==window.dhx4.s2b(t)&&(this.acc.conf.on_active_click=!0),this.acc._closeItem(this._idd)},this._setWidth=function(t){t!=this.conf.size.w&&(this.conf.size.w=t,this.cell.style.width=t+"px"),this._adjustCell()},this._adjustCell=function(){this._adjustCont(),null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes()},this._initDocking(),this}function dhtmlXLayoutObject(t,e,i){var n=null;if(null!=t&&"object"==typeof t&&void 0===t.tagName&&1!=t._isCell&&(n={},null!=t.autosize&&(n.autosize=t.autosize),null!=t.cells&&(n.cells=t.cells),null!=t.pattern&&(e=t.pattern),null!=t.skin&&(i=t.skin),null!=t.offsets&&(n.offsets=t.offsets),t=t.parent),this.cdata={},this.conf={skin:i||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"material",css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:!1,b_size:{w:-1,h:-1}},"material"==this.conf.skin&&(this.conf.hh=window.dhx4.readFromCss("dhxlayout_base_material dhxlayout_collapsed_height")),"object"==typeof t&&1==t._isCell){var s=void 0!==n&&null!=n?n:{};null==s.pattern&&null!=e&&(s.pattern=e),null==s.skin&&null!=i&&(s.skin=i);return t.attachLayout(s)}window.dhtmlXCellTop.apply(this,[t,null==n?null:n.offsets]),this.conf.sw=this._detectSW();var o=this;this._getLayout=function(){return this},this.mainInst=null!=t._layoutMainInst?t._layoutMainInst:null,this._getMainInst=function(){return null!=this.mainInst?this.mainInst._getMainInst():this},this._init=function(t){var e="string"==typeof t?this.tplData[t]:t;this.conf.mode=e.mode,"c"==this.conf.mode?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this));for(var i in this.cdata)this.cont.appendChild(this.cdata[i].cell),this.cdata[i].conf.init={w:.5,h:.5};if("c"!=this.conf.mode){var n=this._getMainInst();null==n.conf.sep_idx?n.conf.sep_idx=1:n.conf.sep_idx++,this.sep=new dhtmlXLayoutSepObject(this.conf.mode,n.conf.sep_idx),this.cont.appendChild(this.sep.sep),this.sep._getLayout=function(){return o._getLayout()},n=null}if(null!=e.cells)for(var i in e.cells)null!=e.cells[i].width&&(this.cdata[i].conf.init.w=e.cells[i].width),null!=e.cells[i].height&&(this.cdata[i].conf.init.h=e.cells[i].height),null!=e.cells[i].name&&(this.cdata[i].conf.name=e.cells[i].name,this.cdata[i].setText(e.cells[i].name)),null!=e.cells[i].fsize&&(this.cdata[i].conf.fsize=e.cells[i].fsize);this.setSizes();for(var i in this.cdata)this.cdata[i].conf.init={};if(null!=e.cells)for(var i in e.cells)null!=e.cells[i].layout&&(this.cdata[i].dataNested=!0,this.cdata[i]._layoutMainInst=this,this.cdata[i].cell.className+=" dhx_cell_nested_layout",this.cdata[i].attachLayout({pattern:e.cells[i].layout}),this.cdata[i]._layoutMainInst=null)},this.setSizes=function(t,e,i,n){var s=1==this.conf.inited&&this._getMainInst()==this&&1==this.checkEvent("onResizeFinish")&&{};this._adjustCont();var o=this.cont.offsetWidth,l=this.cont.offsetHeight;if("c"==this.conf.mode){var r=0,a=0,h=o,d=l;return this.cdata.a._setSize(r,a,h,d,t,i,n),this.callEvent("_onSetSizes",[]),!s||this.conf.b_size.w==o&&this.conf.b_size.h==l||this._callMainEvent("onResizeFinish",[]),void(this.conf.b_size={w:o,h:l})}if(void 0===e){this.conf.mode;e=this.conf.autosize,this.cdata.a.conf.collapsed?e="b":this.cdata.b.conf.collapsed?e="a":"a"!=t&&"b"!=t||(e=this.conf.nextCell[t])}if("v"==this.conf.mode){if("a"==e){if(null!=this.cdata.b.conf.init.w)var c=Math.round(o*this.cdata.b.conf.init.w-this.conf.sw/2);else c=this.cdata.b.conf.size.w;var u=l;a=f=0,h=(p=o-c)-(r=0)-this.conf.sw,d=u}else{r=0,a=0;if(null!=this.cdata.a.conf.init.w)h=Math.round(o*this.cdata.a.conf.init.w-this.conf.sw/2)-r;else h=this.cdata.a.conf.size.w;d=l-a;var f=a;c=o-(p=r+h+this.conf.sw),u=d}this.cdata.a._setSize(r,a,h,d,t,i,n),this.cdata.b._setSize(p,f,c,u,t,i,n),this.sep._setSize(r+h,a,this.conf.sw,d)}else{if("a"==e){if(null!=this.cdata.b.conf.init.h)u=Math.round(l*this.cdata.b.conf.init.h-this.conf.sw/2);else u=this.cdata.b.conf.size.h;r=p=0,h=c=o-p,d=(f=l-u)-(a=0)-this.conf.sw}else{a=0,h=o-(r=0);if(null!=this.cdata.a.conf.init.h)d=Math.round(l*this.cdata.a.conf.init.h-this.conf.sw/2);else d=this.cdata.a.conf.size.h;var p=r;c=h,u=l-(f=a+d+this.conf.sw)}this.cdata.a._setSize(r,a,h,d,t,i,n),this.cdata.b._setSize(p,f,c,u,t,i,n),this.sep._setSize(r,a+d,h,this.conf.sw)}this.callEvent("_onSetSizes",[]),!s||this.conf.b_size.w==o&&this.conf.b_size.h==l||this._callMainEvent("onResizeFinish",[]),this.conf.b_size={w:o,h:l}},this._getAvailWidth=function(){for(var t=[],e=0;e<this.conf.as_cells.h.length;e++){var i=this.cells(this.conf.as_cells.h[e]),n=i.layout,s=n.conf.autosize;i.conf.collapsed&&(i=n.cdata[n.conf.nextCell[i._idd]],s=n.conf.nextCell[s]),t.push(Math.max(0,i.getWidth()-i._getMinWidth(s))),n=i=null}var o=t.length>0?Math.min.apply(window,t):0;return this.cont.offsetWidth-o},this._getAvailHeight=function(){for(var t=[],e=0;e<this.conf.as_cells.v.length;e++){var i=this.cells(this.conf.as_cells.v[e]),n=i.layout,s=n.conf.autosize;i.conf.collapsed&&(i=n.cdata[n.conf.nextCell[i._idd]],s=n.conf.nextCell[s]),t.push(Math.max(0,i.getHeight()-i._getHdrHeight()-i._getMinHeight(s))),n=i=null}var o=Math.min.apply(window,t);return this.cont.offsetHeight-o},this.setSkin=function(t){this._setBaseSkin(t),this.conf.skin=t},this.unload=function(){if(this.conf.unloading=!0,this.mainInst=null,this.parentLayout=null,null!=this.items){for(var t=0;t<this.items.length;t++)this.items[t]=null;this.items=null}null!=this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),null!=this.sep&&(this.sep._unload(),this.sep=null);for(var e in this.cdata)this.cdata[e]._unload(),this.cdata[e]=null;this._unloadTop(),window.dhx4._eventable(this,"clear");for(var e in this)this[e]=null;o=null},this._getWindowMinDimension=function(t){var e=o._getAvailWidth()+7+7,i=o._getAvailHeight()+7+31;return null,{w:Math.max(e,200),h:Math.max(i,140)}},window.dhx4._eventable(this),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this._init(e||"3E");var l=this._availAutoSize[e];if(null!=l&&(this.conf.pattern=e,this.setAutoSize(l.h[l.h.length-1],l.v[l.v.length-1])),"function"==typeof window.dhtmlXWindows&&null==this.mainInst){var r={vp_overflow:1!=this.conf.fs_mode&&"auto"};this.dhxWins=new dhtmlXWindows(r),this.dhxWins.setSkin(this.conf.skin)}if(this.conf.inited=!0,this==this._getMainInst()){var a=0;this.items=[],this.forEachItem(function(t){o.items.push(t),t.conf.index=a++})}if(this==this._getMainInst()&&null!=n&&(null!=n.autosize&&this.setAutoSize.apply(this,n.autosize),null!=n.cells))for(var h=0;h<n.cells.length;h++){var d=n.cells[h],c=this.cells(d.id);d.width&&c.setWidth(d.width),d.height&&c.setHeight(d.height),d.text&&c.setText(d.text),d.collapsed_text&&c.setCollapsedText(d.collapsed_text),d.collapse&&c.collapse(),d.fix_size&&c.fixSize(d.fix_size[0],d.fix_size[1]),void 0!==d.header&&0==window.dhx4.s2b(d.header)&&c.hideHeader()}return n=null,this}function dhtmlXLayoutSepObject(t,e){var i=this;return this.conf={mode:t,idx:e,blocked:!1,locked:!1,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0},window.dhx4.isIE&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&(this.conf.btn_left=1),this.sep=document.createElement("DIV"),this.sep.className="dhxlayout_sep",1==window.dhx4.isIE&&(this.sep.onselectstart=function(){return!1}),this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode,this._setSize=function(t,e,i,n){this.sep.style.left=t+"px",this.sep.style.top=e+"px",this.sep.style.width=Math.max(i,0)+"px",this.sep.style.height=Math.max(n,0)+"px"},this._lockSep=function(t){this.conf.locked=1==t,this._blockSep()},this._setWH=function(t){var e=this._getLayout();e.conf.sw=null==t?e._detectSW():Math.max(parseInt(t)||-1,-1),e._getMainInst().setSizes(),e=null},this._blockSep=function(){var t=this._getLayout(),e=t.cdata.a.conf.collapsed||t.cdata.b.conf.collapsed||this.conf.locked;t=null,this.conf.blocked!=e&&(this.sep.className="dhxlayout_sep"+(e?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=e)},this._beforeResize=function(t){if(!this.conf.blocked&&(null==this.conf.resize||1!=this.conf.resize.active)){if(t.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var e=t.pageX||t.touches[0].pageX,i=t.pageY||t.touches[0].pageY}else{if(t.button!==this.conf.btn_left)return;e=t.clientX,i=t.clientY}1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOff();var n=this._getLayout();this.conf.resize={sx:e,sy:i,tx:t.layerX,ty:t.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:n.cdata.a._getAvailWidth("a"),min_wb:n.cdata.b._getAvailWidth("b"),min_ha:n.cdata.a._getAvailHeight("a"),min_hb:n.cdata.b._getAvailHeight("b")},this.conf.resize.nx=this.conf.resize.sep_x,this.conf.resize.ny=this.conf.resize.sep_y,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._doOnMouseMove,!1),window.addEventListener("mouseup",this._doOnMouseUp,!1),window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp)),n=null}},this._onResize=function(t){if(this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0),"v"==this.conf.mode){var e="mousemove"==t.type?t.clientX:t.pageX||t.touches[0].pageX,i=this.conf.resize.sx-e;this.conf.resize.nx=this.conf.resize.sep_x-i,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"}else{var n="mousemove"==t.type?t.clientY:t.pageY||t.touches[0].pageY;i=this.conf.resize.sy-n;this.conf.resize.ny=this.conf.resize.sep_y-i,this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px"}},this._afterResize=function(t){if("function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._doOnMouseMove,!1),window.removeEventListener("mouseup",this._doOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)),this.conf.resize.active){if(t.type==window.dhx4.dnd.evs.end)this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"");else if(t.button!==this.conf.btn_left)return;var e=this._getLayout(),i=e._getMainInst(),n=1==i.checkEvent("onPanelResizeFinish")&&{};!1!==n&&i.forEachItem(function(t){n[t.conf.name]={w:t.conf.size.w,h:t.conf.size.h},t=null});var s=this.conf.resize.nx-this.conf.resize.sep_x,o=this.conf.resize.ny-this.conf.resize.sep_y;if(e.cdata.a._setSize(e.cdata.a.conf.size.x,e.cdata.a.conf.size.y,e.cdata.a.conf.size.w+s,e.cdata.a.conf.size.h+o,"a"),e.cdata.b._setSize(e.cdata.b.conf.size.x+s,e.cdata.b.conf.size.y+o,e.cdata.b.conf.size.w-s,e.cdata.b.conf.size.h-o,"b"),this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height)),window.dhx4.isIE){var l=this;window.setTimeout(function(){l._removeResizeArea(),l=null},1)}else this._removeResizeArea();if(!1!==n){var r=[];i.forEachItem(function(t){var e=n[t.conf.name];e.w==t.conf.size.w&&e.h==t.conf.size.h||r.push(t.conf.name),t=null}),i._callMainEvent("onPanelResizeFinish",[r])}i=e=null,this.conf.resize.active=!1,this.conf.resize=null,1==window.dhx4.dnd.p_en&&window.dhx4.dnd._touchOn()}else this.conf.resize=null},this._initResizeArea=function(){if(null==this.r_sep&&(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1})),null==this.r_area){if(this.r_area=document.createElement("DIV"),this.r_area.className="dhxlayout_resize_area",this.sep.parentNode.appendChild(this.r_area),window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1}),"v"==this.conf.mode)var t=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,e=parseInt(this.r_sep.style.top),i=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),n=parseInt(this.r_sep.style.height);else t=parseInt(this.r_sep.style.left),e=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,i=parseInt(this.r_sep.style.width),n=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);this.r_area.style.left=t+"px",this.r_area.style.top=e+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=i+"px",this.r_area.style.height=n+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight),this.r_area.style.width=i+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px",this.r_area.style.height=n+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode},this._removeResizeArea=function(){this.r_sep.onselectstart=null,this.r_sep.parentNode.removeChild(this.r_sep),this.r_sep=null,this.r_area.onselectstart=null,this.r_area.parentNode.removeChild(this.r_area),this.r_area=null,document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")},this._doOnMouseDown=function(t){(t=t||event).preventDefault?t.preventDefault():t.cancelBubble=!0,i._beforeResize(t)},this._doOnBodyMouseDown=function(t){if(t=t||event,null!=i.conf.resize)return 1==i.conf.resize.active&&t.button!==i.conf.btn_left?(t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.cancelBubble=!0,!1):void 0},this._doOnMouseMove=function(t){(t=t||event).preventDefault?t.preventDefault():t.cancelBubble=!0,i._onResize(t)},this._doOnMouseUp=function(t){"mouseup"==(t=t||event).type&&t.button!==i.conf.btn_left||i._afterResize(t)},"function"==typeof window.addEventListener?(this.sep.addEventListener("mousedown",this._doOnMouseDown,!1),this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.addEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.attachEvent("onmousedown",this._doOnMouseDown),document.body.attachEvent("onmousedown",this._doOnBodyMouseDown),document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)),this._unload=function(){"function"==typeof window.addEventListener?(this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1),this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.detachEvent("onmousedown",this._doOnMouseDown),document.body.detachEvent("onmousedown",this._doOnBodyMouseDown),document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown)),1==window.dhx4.isIE&&(this.sep.onselectstart=null),this.sep.parentNode.removeChild(this.sep),this.sep=null;for(var t in this)this[t]=null;i=null},this}function dhtmlXTabBar(t,e){var i=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material",css:"dhxtabbar",lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==e?"bottom":"top",tabsContCss:"",contZone:!0,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:!1,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}},"material"==this.conf.skin&&(this.conf.arwMode="auto");var n=navigator.userAgent;n.indexOf("Safari")>=0&&(n.indexOf("5.1.7")>=0||null!=n.match(/7[\.\d]* mobile/gi)&&null!=n.match(/AppleWebKit/gi))&&(this.conf.tabsContCss=" safari_517_fix");var s;null!=t&&"object"==typeof t&&void 0===t.tagName?(s=t.parent,void 0!==t.skin&&(this.conf.skin=t.skin),void 0!==t.mode&&(this.conf.tabsMode="bottom"==t.mode?"bottom":"top"),void 0!==t.align&&(this.conf.align="right"==t.align?"right":"left"),void 0!==t.close_button&&(this.conf.closeButton=window.dhx4.s2b(t.close_button)),void 0!==t.content_zone&&(this.conf.contZone=window.dhx4.s2b(t.content_zone)),void 0!==t.xml&&(this.conf.autoload.xml=t.xml),void 0!==t.json&&(this.conf.autoload.xml=t.json),void 0!==t.tabs&&(this.conf.autoload.tabs=t.tabs),void 0!==t.onload&&(this.conf.autoload.onload=t.onload),void 0!==t.arrows_mode&&(this.conf.autoload.arrows_mode=t.arrows_mode)):s=t,window.dhtmlXCellTop.apply(this,[s,t.offsets]),null!=this.base._ofs&&null!=this.base._ofs.t&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.cont.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>",this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){"left"==i.conf.align?i._moveTabs(1):i._moveTabs(-1)},this.tabsArea.childNodes[2].onclick=function(){"left"==i.conf.align?i._moveTabs(-1):i._moveTabs(1)},this._onTabsAreaClick=function(t){return this._callMainEvent("onTabClose",[t])},this.tabsArea.onclick=function(t){for(var e=(t=t||event).target||t.srcElement;null!=e;){if(void 0!==e._tabCloseId){if(!0!==i._onTabsAreaClick(e._tabCloseId))return;i.t[e._tabCloseId].conf.remove=!0,i._hideTab(e._tabCloseId),e=null}else void 0!==e._tabId&&(i._doOnClick(e._tabId),e=null);null!=e&&(e=e.parentNode)==this&&(e=null)}},this.tabsArea.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this._doOnClick=function(t){this.callEvent("onTabClick",[t,this.conf.lastActive]),this.t[t].conf.enabled&&this._setTabActive(t)},this.t={},this.addTab=function(t,e,i,n,s,o){o=void 0===o?1==this.conf.closeButton:window.dhx4.s2b(o),s=window.dhx4.s2b(s);var l=document.createElement("DIV");l.className="dhxtabbar_tab",l.innerHTML="<div class='dhxtabbar_tab_text"+(o?" dhxtabbar_tab_text_close":"")+"'>"+e+"</div>"+(o?"<div class='dhxtabbar_tab_close'></div>":""),l._tabId=t,o&&(l.childNodes[1]._tabCloseId=t);var r=this.tabsArea.childNodes[1].firstChild;null!=n&&n+1>0&&n+1<r.childNodes.length?r.insertBefore(l,r.childNodes[n+1]):r.appendChild(l);var a=!1;void 0===i||null==i||"*"==i?(i=this._getLabelWidth(e,o),a=!0):i=parseInt(i),l.style.width=i+"px";var h=new dhtmlXTabBarCell(t,this);this.tabsMode.appendChild(h.cell),this.t[t]={tab:l,cell:h,conf:{text:e,visible:!0,active:!1,enabled:!0,close:o,width:i,autowidth:a}},r=h=null,s?this._setTabActive(t):this._adjustCell(t),1!=this.conf.initSeq&&"auto"==this.conf.arwMode&&this.setSizes()},this.setSizes=function(){this._adjustCont(),null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.cont.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth),this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px",this._adjustCell(this.conf.lastActive),this._adjustTabs(!0),this.callEvent("_onSetSizes",[])},this._adjustCell=function(t){if(this.conf.contZone&&null!=t){var e=("top"==this.conf.tabsMode?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,i=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,n=this.t[t].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=n&&"tabbar"!=n&&"acc"!=n||("top"==this.conf.tabsMode&&(e-=1),i+=1),t!=this.conf.lastActive&&(e=-5e3,this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.zIndex=0),this.t[t].cell._setSize(0,e,this.cont.offsetWidth,i)}},this.setTabsMode=function(t){this.conf.tabsMode="bottom"==t?"bottom":"top",this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.style.top="top"==this.conf.tabsMode?this.conf.tabsTop+"px":"auto",this.setSizes()},this._tabCss=function(t,e){var i=this.t[t].conf.active,n=!this.t[t].conf.enabled;return"dhxtabbar_tab"+(!this.t[t].conf.visible?" dhxtabbar_tab_hidden":i||n?" dhxtabbar_tab"+(i?"_actv":"")+(n?"_dis":""):"")},this._getLabelWidth=function(t,e){null==this.tabsTextTest&&(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),document.body.appendChild(this.tabsTextTest),this.tabsTextTest.innerHTML=t;var i=this.tabsTextTest.offsetWidth;return window.dhx4.isIE&&0==i&&(i=this.tabsTextTest.offsetWidth),i+=this.conf.tabsWidth[this.conf.skin][0],1==e&&(i+=this.conf.tabsWidth[this.conf.skin][1]),document.body.removeChild(this.tabsTextTest),i},this._adjustTabs=function(t){1!=this._checkArrows()&&1!=t||(this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+2*this.conf.tabsOfs+"px");var e=this.tabsArea.childNodes[1];if(e.offsetWidth<5)e=null;else{for(var i=parseInt(e.childNodes[0].style[this.conf.align]),n=null,s=0;s<e.childNodes[0].childNodes.length;s++){var o=e.childNodes[0].childNodes[s]._tabId;if(null!=o&&this.t[o].conf.visible){var l=this.t[o].tab.offsetWidth-this.conf.tabsOfs;this.t[o].conf.active&&(i<0||e.offsetWidth<l?n={d:1,id:o}:i+l>e.offsetWidth&&(n={d:-1,id:o})),i+=l}}null!=n?this._moveTabs(n.d,n.id):e.offsetWidth>i+1&&(e.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(e.childNodes[0].style[this.conf.align])+(e.offsetWidth-i))+"px"),e=n=null}},this._moveTabs=function(t,e){for(var i=this.tabsArea.childNodes[1].childNodes[0],n=0,s=[],o=null,l=0;l<i.childNodes.length;l++){var r=i.childNodes[l]._tabId;null!=r&&this.t[r].conf.visible&&(s.push({id:r,w:this.t[r].tab.offsetWidth-this.conf.tabsOfs,ind:n}),r==e&&(o=n),n++)}var a=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),h=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs,d=null,c=null;for(l=0;l<s.length;l++)s[l].x=a,null==d&&a>=0&&a+s[l].w>0&&(d=s[l]),a<h&&a+s[l].w<=h&&(c=s[l]),a+=s[l].w;if(null!=o)var u=s[o];else{u=null;t>0?null==d?s.length>0&&(u=s[s.length-1]):d.ind>0&&s.length>=d.ind&&(u=s[d.ind-1]):null==c?s.length>0&&(u=s[0]):s.length>c.ind&&(u=s[c.ind+1])}null!=u&&(i.style[this.conf.align]=t>0?a<h?Math.min(0,parseInt(i.style[this.conf.align])+(h-a))+"px":parseInt(i.style[this.conf.align])-u.x+"px":parseInt(i.style[this.conf.align])-u.x+h-u.w+"px"),i=u=s=null},this._getNextVisible=function(t,e){return this._getNearVisible(t,e,"next")},this._getPrevVisible=function(t,e){return this._getNearVisible(t,e,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(t,e,i){if("first"==i){var n=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];i="next"}else{if(null==t||null==this.t[t])return e?this._getFirstVisible():null;n=this.t[t].tab[i+"Sibling"]}for(var s=null;null!=n&&null==s;){var o=n._tabId;null!=o&&null==s&&this.t[o].conf.visible?s=o:n=n[i+"Sibling"]}return n=null,s},this._showTab=function(t,e){if(null!=this.t[t]){if(1==this.t[t].conf.transActv){if("show"==this.t[t].conf.transMode)return}else if(1==this.t[t].conf.visible)return;!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="show",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=e?t:null,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!0),this.t[t].conf.visible=!0,this.t[t].tab.className=this._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width=this.t[t].conf.width+"px",this.t[t].tab.clientWidth>=this.t[t].conf.width&&(this.t[t].tab.style.visibility="visible")):(this.t[t].conf.visible=!0,this.t[t].tab.style.display="",e||this.t[t].conf.active?(this.t[t].conf.active=!1,this._setTabActive(t)):this._adjustTabs())}},this._hideTab=function(t,e){if(null!=this.t[t]){if(1==this.t[t].conf.transActv){if("hide"==this.t[t].conf.transMode)return}else if(1!=this.t[t].conf.visible)return;var n=!1;this.conf.lastActive==t&&(this.conf.lastActive=null,this.t[t].conf.active=!1,this.t[t].tab.className=this._tabCss(t),n=!0);var s=this._getPrevVisible(t),o=this._getNextVisible(t),l=1==n&&!1!==e?(1==e?null:e)||o||s:null;!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="hide",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=l,this.t[t].conf.visible=!1,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!0),this.t[t].tab.style.visibility="hidden",this.t[t].tab.className=i._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width="0px"):(this.t[t].tab.style.display="none",this.t[t].conf.visible=!1,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.top="-5000px"),null!=l&&this._setTabActive(l),this._adjustTabs(),this.t[t].conf.remove&&this._removeTab(t))}},this._isTabVisible=function(t){return 1==this.t[t].conf.visible},this._doOnTrEnd=function(){var t=this._tabId;if(null!=i.t[t]){var e=i.t[t],n=e.conf.transActvId;"hide"==e.conf.transMode?e.conf.remove?i._removeTab(t):(e.tab.style[e.conf.transProp]="",i.conf.contZone&&(e.cell.cell.style.visibility="hidden",e.cell.cell.style.top="-5000px"),e.conf.transActv=!1):"show"==e.conf.transMode&&(e.tab.style[e.conf.transProp]="",e.tab.style.visibility="visible",e.conf.transMode=null,e.conf.transActv=!1),null!=n?i._setTabActive(n):i._adjustTabs(),e=null}},this.enableTabCloseButton=function(t){this.conf.closeButton=window.dhx4.s2b(t)},this.unload=function(){this.conf.unloading=!0,this.clearAll(),this.t=null,null!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.tabsArea.childNodes[0].onclick=null,this.tabsArea.childNodes[2].onclick=null,this.tabsArea.onclick=null,this.tabsArea.onselectstart=null,this.tabsArea.parentNode.removeChild(this.tabsArea),this.tabsArea=null,this.tabsMode.parentNode.removeChild(this.tabsMode),this.tabsMode=null,this._unloadTop(),window.dhx4._eventable(this,"clear");for(var t in this)this[t]=null;i=null},this.enableContentZone=function(t){this.conf.contZone=1==t},this.setSkin=function(t){this._setBaseSkin(t),this.conf.skin=t,null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);for(var e in this.t)this.t[e].cell._resetSizeState(),1==this.t[e].conf.autowidth&&(this.t[e].conf.width=this._getLabelWidth(this.t[e].conf.text,this.t[e].conf.close),this.t[e].conf.visible&&(this.t[e].tab.style.width=this.t[e].conf.width+"px"));this.conf.tabsAreaOfs=null,this._fixTabsOfs(),this.setSizes()},this.setAlign=function(t){(t="left"==t?"left":"right")!=this.conf.align?(!1!==this.conf.transProp&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=t,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)):this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},this._initObj=function(t){this.conf.initSeq=!0,this.clearAll();var e=!1;if(null!=t.settings&&(null!=t.settings.skin&&this.setSkin(t.settings.skin),null!=t.settings.close_button?this.enableTabCloseButton(window.dhx4.s2b(t.settings.close_button)):null!=t.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(t.settings.closeButton)),null!=t.settings.align&&this.setAlign(t.settings.align),"ajax"==t.settings.hrefmode&&(e=!0),"ajax-html"==t.settings.hrefmode&&(e=!0,this.conf.url_demand=!0)),null!=t.tabs)for(var i=0;i<t.tabs.length;i++){var n=t.tabs[i];void 0===n.id&&(n.id=window.dhx4.newId()),isNaN(parseInt(n.width))?n.width=null:n.width=parseInt(n.width),this.addTab(n.id,n.text||n.label||"",n.width,n.index,window.dhx4.s2b(n.selected)||window.dhx4.s2b(n.active),n.close),null!=n.content?this.cells(n.id).attachHTMLString(n.content):null!=n.href&&(1==this.conf.url_demand?this.conf.urls[n.id]={href:n.href,ajax:e}:this.cells(n.id).attachURL(n.href,e)),void 0!==n.enabled&&0==window.dhx4.s2b(n.enabled)?this.tabs(n.id).disable():void 0!==n.disabled&&1==window.dhx4.s2b(n.disabled)&&this.tabs(n.id).disable()}this.conf.initSeq=!1,"auto"==this.conf.arwMode&&this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(this.conf.lastActive)},this._xmlToObj=function(t){var e={settings:{},tabs:[]},i=t.getElementsByTagName("tabbar")[0];if(null!=i){for(var n in{skin:1,align:1,closeButton:1,hrefmode:1})null!=i.getAttribute(n)&&(e.settings[n]=i.getAttribute(n));for(var s=i.getElementsByTagName("tab"),o=0;o<s.length;o++){var l={text:s[o].firstChild.nodeValue||""};for(var n in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=s[o].getAttribute(n)&&(l[n]=s[o].getAttribute(n));var r=s[o].getElementsByTagName("content")[0];if(null!=r){l.content="";for(var a=0;a<r.childNodes.length;a++)l.content+=r.childNodes[a].nodeValue||""}e.tabs.push(l)}}return e},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});var o=window.dhx4.transDetect();return this.conf.transProp=o.transProp,this.conf.transEv=o.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,o=null,!1!==this.conf.transProp&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._callMainEvent=function(t,e){return this.callEvent(t,e)},window.dhx4._eventable(this),null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload),null!=this.conf.autoload.arrows_mode&&this.setArrowsMode(this.conf.autoload.arrows_mode),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var z=document.getElementsByTagName("div"),i=0;i<z.length;i++)if(-1!=z[i].className.indexOf("dhtmlxTabBar")){var conf={settings:{},tabs:[]},n=z[i],id=n.id;n.className="";for(var k=new Array,j=0;j<n.childNodes.length;j++)n.childNodes[j].tagName&&"!"!=n.childNodes[j].tagName&&(k[k.length]=n.childNodes[j]);var skin=n.getAttribute("skin");null!=skin&&(conf.settings.skin=skin);var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(conf.settings.align=align);for(var cont={},j=0;j<k.length;j++){var m=k[j],tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")},href=m.getAttribute("href");cont[m.id]=href?{href:href}:{cont:m},conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont)cont[a].href?(w.cells(a).attachURL(cont[a].href),cont[a].href=null):(w.cells(a).attachObject(cont[a].cont),"none"==cont[a].cont.style.display&&(cont[a].cont.style.display=""),cont[a].cont=null),cont[a]=null;var selId=n.getAttribute("select");if(null!=selId)w.tabs(selId).setActive();else if(null==w.getActiveTab()){var v=w._getFirstVisible();null!=v&&w.cells(v).setActive()}acs=n.getAttribute("oninit"),acs&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXSideBar(t){var e=this;this.conf={skin:t.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxsidebar")||"material",css:"dhxsidebar",width:t.width||200,scroll_size:12,scroll_mult:20,close_button:!1,icons_path:t.icons_path||"",selected:null,single_cell:void 0!==t.single_cell&&window.dhx4.s2b(t.single_cell),cell:null,header:window.dhx4.s2b(t.header),autohide:window.dhx4.s2b(t.autohide),animate_items:!0},this.setTemplate(t.template),window.dhtmlXCellTop.apply(this,[t.parent,null==t?null:t.offsets]),window.dhx4._eventable(this),1==window.navigator.msPointerEnabled?(this.conf.touch_ms=!0,this.conf.touch_start="MSPointerDown",this.conf.touch_end="MSPointerUp"):(this.conf.touch_ms=!1,this.conf.touch_start="touchstart",this.conf.touch_end="touchend"),this.side=document.createElement("DIV"),this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name,this.side.innerHTML="<div class='dhxsidebar_side_items'></div>",this.cont.appendChild(this.side),this.arw=document.createElement("DIV"),this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.arw.innerHTML="<div class='dhxsidebar_arrow dhxsidebar_arrow_left'><div class='dhxsidebar_arrow_image'></div></div><div class='dhxsidebar_arrow dhxsidebar_arrow_right'><div class='dhxsidebar_arrow_image'></div></div>",this.cont.appendChild(this.arw),1==this.conf.autohide&&(this.hideSide(),this.cont.className+=" dhxsidebar_autohide",this._doOnBodyClick=function(){1!=e.conf.clear_click?e.hideSide():e.conf.clear_click=!1},this._doOnEscDown=function(t){27==(t=t||event).keyCode&&(e.conf.clear_click=!1,e.hideSide())},"function"==typeof window.addEventListener?(window.addEventListener(this.conf.touch_start,this._doOnBodyClick,!1),window.addEventListener("click",this._doOnBodyClick,!1),window.addEventListener("keydown",this._doOnEscDown,!1)):(document.body.attachEvent("onclick",this._doOnBodyClick),document.body.attachEvent("onkeydown",this._doOnEscDown))),window.setTimeout(function(){null!=e&&null!=e.side&&(e.side.firstChild.style.top="0px")},1),this._doOnArwClick=function(t){"click"!=(t=t||event).type&&t.preventDefault&&t.preventDefault(),t.cancelBubble=!0;var i=t.target||t.srcElement;null!=i.className.match(/dhxsidebar_arrow_image/)&&(i=i.parentNode),null!=i.className.match(/dhxsidebar_arrow_left/)?e._scrollSide(-e.conf.scroll_size):null!=i.className.match(/dhxsidebar_arrow_right/)&&e._scrollSide(e.conf.scroll_size),i=null},"function"==typeof window.addEventListener?(this.arw.addEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.addEventListener("click",this._doOnArwClick,!1)):this.arw.attachEvent("onclick",this._doOnArwClick),this._doOnSideClick=function(t){var i=(t=t||event).target||t.srcElement,n=null,s=!1;for(e.conf.clear_click=!0,"touchstart"!=t.type&&"pointerdown"!=t.type&&"MSPointerDown"!=t.type||(t.preventDefault&&t.preventDefault(),null==this.className.match(/dhxsidebar_touch/gi)&&("touchstart"==t.type||"pointerdown"==t.type&&"touch"==t.pointerType)&&(this.className+=" dhxsidebar_touch"));null!=i&&null==n&&"pointerdown"!=t.type&&"MSPointerDown"!=t.type;)void 0!==i.className&&(null!=i.className.match(/^dhxsidebar_item/)&&void 0!==i._idd?n=i._idd:null!=i.className.match(/^dhxsidebar_bubble/)&&(s=!0,n=i.parentNode._idd)),i=i.parentNode;null!=n&&(0==s||1==s&&1==e.callEvent("onBubbleClick",[n,e.t[n].conf.bubble]))&&e._setItemActive(n,!0),i=null},"function"==typeof window.addEventListener?(this.side.addEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.addEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.addEventListener("mouseup",this._doOnSideClick,!1)):this.side.attachEvent("onclick",this._doOnSideClick),this.side.onmouseover=function(){this.className=this.className.replace(/\s*dhxsidebar_touch/gi,"")},this._doOnSideScroll=function(t){var i="mousewheel"==(t=t||event).type?-t.wheelDelta:t.deltaY;e._scrollSide(i/Math.abs(i)*3)},this._scrollSide=function(t){var e=parseInt(this.side.firstChild.style.top||0)-t*this.conf.scroll_mult;e+this.side.firstChild.offsetHeight<this.side.clientHeight&&(e=this.side.clientHeight-this.side.firstChild.offsetHeight),e>0&&(e=0),this.side.firstChild.style.top=e+"px"},"function"==typeof window.addEventListener?this.side.addEventListener("wheel",this._doOnSideScroll,!1):this.side.attachEvent("onmousewheel",this._doOnSideScroll),this.t={},this.s={},this._adjustCell=function(t,e){if(1==this.conf.single_cell||null!=t){var i=1==this.conf.autohide?0:this.conf.width,n=this.cont.offsetWidth-i,s=0,o=this.cont.offsetHeight;1==this.conf.single_cell?1==e&&this.conf.cell._setSize(i,s,n,o):(t!=this.conf.selected&&(s=-5e3,this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.zIndex=0),this.t[t].cell._setSize(i,s,n,o))}};var i=window.dhx4.transDetect();return this.conf.transProp=i.transProp,this.conf.transEv=i.transEv,this.conf.transValue="all 0.1s",this._doOnTrEnd=function(t){var i=this._idd;if(null!=e.t[i]){var n=e.t[i],s=n.conf.transActvId;"hide"==n.conf.transMode?1==n.conf.remove?e._removeItem(i):(n.item.style[n.conf.transProp]="",1!=e.conf.single_cell&&(n.cell.cell.style.visibility="hidden",n.cell.cell.style.top="-5000px"),n.conf.transActv=!1):"show"==n.conf.transMode&&(n.item.style[n.conf.transProp]="",n.item.style.visibility="visible",n.conf.transMode=null,n.conf.transActv=!1),null!=s?e._setItemActive(s):e._checkHeight(),n=null}},this._initObj=function(t){this.clearAll(),null!=t.items&&this.addItem(t.items)},this._xmlToObj=function(t){var e=[],i=t.getElementsByTagName("sidebar");if(null!=i&&null!=i[0])for(var n=i[0].getElementsByTagName("item"),s=0;s<n.length;s++){for(var o={},l=0;l<n[s].attributes.length;l++)o[n[s].attributes[l].nodeName]=n[s].attributes[l].nodeValue;e.push(o)}return{items:e}},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","sidebar",{struct:!0}),this.unload=function(){this.conf.unloading=!0,"function"==typeof window.addEventListener?this.side.removeEventListener("wheel",this._doOnSideScroll,!1):this.side.detachEvent("onmousewheel",this._doOnSideScroll),1==this.conf.autohide&&("function"==typeof window.addEventListener?(window.removeEventListener("click",this._doOnBodyClick,!1),window.removeEventListener("keydown",this._doOnEscDown,!1)):(document.body.detachEvent("onclick",this._doOnBodyClick),document.body.detachEvent("onkeydown",this._doOnEscDown))),"function"==typeof this._sideCoverDetach&&this._sideCoverDetach(),this.clearAll(),this.s=this.t=null,"function"==typeof window.addEventListener?(this.arw.removeEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.removeEventListener("click",this._doOnArwClick,!1)):this.arw.detachEvent("onclick",this._doOnArwClick),this.arw.parentNode.removeChild(this.arw),this.arw=null,"function"==typeof window.addEventListener?(this.side.removeEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.removeEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.removeEventListener("click",this._doOnSideClick,!1)):this.side.detachEvent("onclick",this._doOnSideClick),this.side.onmouseover=null,this.side.parentNode.removeChild(this.side),this.side=null,this._unloadTop(),1==this.conf.single_cell&&(this.conf.cell._unload(),this.conf.cell=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear");for(var t in this)this[t]=null;e=null},1==this.conf.single_cell&&(this.conf.cell=new dhtmlXSideBarCell("master",this),this.cont.appendChild(this.conf.cell.cell),this._cells_native=this.cells,this.cells=function(t){return this.conf.cell._idd=t,this.conf.cell}),this.setSizes(),null!=t.items?this._initObj(t):null!=t.json?this.loadStruct(t.json,t.onload):null!=t.xml&&this.loadStruct(t.xml,t.onload),this}function dhtmlXCarousel(t,e,i){"string"==typeof t||"object"==typeof t&&void 0!==t.tagName?t={parent:"string"==typeof t?document.getElementById(t):t,effect:e,skin:i,delete_conf:!0}:void 0!==t&&null!=t||(t={}),this.conf={skin:t.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcarousel")||"material",css:"dhxcarousel",items_count:0,selected:-1,item_width:Number(t.item_width)||"auto",item_height:Number(t.item_height)||"auto",ofs_item:Number(t.offset_item)||1,ofs_left:Number(t.offset_left)||0,ofs_top:Number(t.offset_top)||0,buttons:void 0===t.buttons||window.dhx4.s2b(t.buttons),drops:!1,keys:void 0===t.keys||window.dhx4.s2b(t.keys),key_data:{left:37,right:39},touch_scroll:void 0===t.touch_scroll||window.dhx4.s2b(t.touch_scroll),arw:["&#9668;","&#9658;"]},this.conf.autowidth="auto"==this.conf.item_width,this.conf.autoheight="auto"==this.conf.item_height;var n=window.dhx4.transDetect();if(this.conf.transProp=n.transProp,this.conf.transEv=n.transEv,this.conf.anim_type=t.effect||"slide",1==this.ef[this.conf.anim_type]){var s=this["_"+this.conf.anim_type+"_init"]();if(!1===s&&(this.conf.anim_type="slide",s=this["_"+this.conf.anim_type+"_init"]()),"object"==typeof s)for(var o in s)void 0===this.conf[o]&&(this.conf[o]=s[o])}this.conf.anim_f=this["_"+this.conf.anim_type+"_f"]();var l=this;if(window.dhtmlXCellTop.apply(this,[t.parent,t.offsets]),this.area=document.createElement("DIV"),this.area.className="dhxcarousel_area",this.cont.appendChild(this.area),"function"==typeof window.addEventListener&&1==l.conf.touch_scroll&&(this._doOnTouchStart=function(t){1!=window.dhx4.dnd._mTouch(t)&&1!=l.conf.animating&&(t.preventDefault&&t.preventDefault(),l.area.className+=" dhxcarousel_area_dnd",l.conf.touch_conf={t:(new Date).getTime(),dx:null,dy:null},null!=t.type.match(/^touch/)?(l.conf.touch_conf.id=t.touches[0].identifier,l.conf.touch_conf.x=t.touches[0].clientX,l.conf.touch_conf.y=t.touches[0].clientY):(l.area.style.touchAction=l.area.style.msTouchAction="none",l.conf.touch_conf.x=t.clientX,l.conf.touch_conf.y=t.clientY),window.addEventListener(window.dhx4.dnd.evs.move,l._doOnTouchMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,l._doOnTouchEnd,!1))},this._doOnTouchMove=function(t){},this._doOnTouchEnd=function(t){if(null!=t.type.match(/^touch/))for(var e=0,i=0;i<t.changedTouches.length;i++)t.changedTouches[i].identifier==l.conf.touch_conf.id&&(e=l.conf.touch_conf.x-t.changedTouches[i].clientX);else e=l.conf.touch_conf.x-t.clientX;if(window.removeEventListener(window.dhx4.dnd.evs.move,l._doOnTouchMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,l._doOnTouchEnd,!1),l.area.className=l.area.className.replace(/\s*dhxcarousel_area_dnd$/,""),!(0==e||(new Date).getTime()-l.conf.touch_conf.t>400)){var n=e/Math.abs(e);l._animateStart(n)}},this.area.addEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)),this.cdata={},this.ind={},this.addCell=function(t,e){this.conf.items_count++,-1==this.conf.selected&&(this.conf.selected=0),this.setSizes(),this._checkControls(),void 0===e||null==e?e=this.conf.items_count-1:e<0?e=0:e>this.conf.items_count-1&&(e=this.conf.items_count-1);for(var i in this.cdata)this.cdata[i].index>=e&&(this.cdata[i].index++,this.ind[this.cdata[i].index]=i,this._adjustCell(i));for(null==t&&(t=String(window.dhx4.newId()));null!=this.cdata[t];)t=String(window.dhx4.newId());var n=new dhtmlXCarouselCell(t,this);return null!=this.area.childNodes[e]?this.area.insertBefore(n.cell,this.area.childNodes[e]):this.area.appendChild(n.cell),this.cdata[t]={index:e,cell:n},this.ind[e]=t,this._adjustCell(t),this._addBar(),this._setBarIndex(this.conf.selected),n=null,this[this.conf.anim_f.cell_added](t),t},this._removeCell=function(t){var e=this.cdata[t].index;if(this.cdata[t].cell._unload(),this.cdata[t].index=this.cdata[t].cell=null,this.cdata[t]=null,delete this.cdata[t],delete this.ind[e],this.conf.items_count--,1!=this.conf.unloading){this.ind={};for(var i in this.cdata)this.cdata[i].index>e&&this.cdata[i].index--,this.ind[this.cdata[i].index]=i;var n=!1;this.conf.selected>e?this.conf.selected--:this.conf.selected==e&&(this.conf.selected=Math.min(this.conf.selected,this.conf.items_count-1),n=!0),this._removeBar(!1),this._setBarIndex(this.conf.selected),1==n&&this.conf.selected>=0&&this[this.conf.anim_f.update_selected](this.ind[this.conf.selected]),this.setSizes(),this._checkControls()}},this.setSizes=function(){this._adjustCont();var t={};this.area.style.height=this.cont.offsetHeight-this.controls.offsetHeight+"px",this.conf.width=this.conf.autowidth?this.cont.offsetWidth-2*this.conf.ofs_left:this.conf.item_width,this.conf.height=this.conf.autoheight?this.area.offsetHeight-2*this.conf.ofs_top:this.conf.item_height,this.conf.top=Math.max(0,this.conf.autoheight?this.conf.ofs_top:Math.floor((this.area.offsetHeight-this.conf.height)/2)),this.area.style.width=this[this.conf.anim_f.detect_aw]()*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item+"px",this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)+"px";for(var e in this.cdata){var i={};for(var n in this.cdata[e].cell.conf.size)i[n]=this.cdata[e].cell.conf.size[n];1==this.conf.autowidth&&(i.w=this.conf.width,i.x=this[this.conf.anim_f.detect_x](e)),1==this.conf.autoheight&&(i.h=this.conf.height),t[e]=i}if(this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)-(this.conf.width+this.conf.ofs_item)*this.conf.selected+"px",this._adjustControls(),1!=this.conf.autoheight){this.conf.top=Math.max(0,Math.floor(this.area.offsetHeight-this.conf.height)/2);for(var e in t)t[e].y=this.conf.top}for(var e in t)this.cdata[e].cell._setSize(t[e].x,t[e].y,t[e].w,t[e].h);this.callEvent("_onSetSizes",[])},this._adjustCell=function(t){this.cdata[t].cell._setSize(this[this.conf.anim_f.detect_x](t),this.conf.top,this.conf.width,this.conf.height)},this._animateStart=function(t,e){this.conf.selected<=0&&t<0||this.conf.selected>=this.conf.items_count-1&&t>0||1!=this.conf.animating&&(this.conf.animating=!0,this[this.conf.anim_f.prepare](t,e))},this._animateTransEnd=function(t){l[l.conf.anim_f.end](t||event,this)},this._animateEnd=function(t){this.conf.selected=this.conf.selected+t,this._checkControls(),this._setBarIndex(this.conf.selected),this.callEvent("onSelect",[this.ind[this.conf.selected]]),this.conf.animating=!1},this._initControls(),this.setCellSize=function(t,e){this.conf.item_width=null==t?"auto":t,this.conf.item_height=null==e?"auto":e,this.setSizes()},this.setOffset=function(t,e,i){null!=t&&(this.conf.ofs_left=t),null!=e&&(this.conf.ofs_top=e),null!=i&&(this.conf.ofs_item=i),this.setSizes()},this.enableHotKeys=function(t){this.conf.keys=window.dhx4.s2b(t)},this.goFirst=function(){0!=this.conf.selected&&this._animateStart(-this.conf.selected)},this.goLast=function(){this.conf.selected!=this.conf.items_count-1&&this._animateStart(this.conf.items_count-1-this.conf.selected)},this.goNext=function(){this._animateStart(1)},this.goPrev=function(){this._animateStart(-1)},this.getActiveIndex=function(){return this.conf.selected},this.getActiveId=function(){return this.ind[this.conf.selected]},this.getActiveCell=function(){var t=this.getActiveId();return null!=t?this.cdata[t].cell:null},this.unload=function(){this.conf.unloading=!0,"function"==typeof window.addEventListener?(window.removeEventListener("keydown",this._doOnWinKeyDown,!1),null!=this._doOnTouchStart&&this.area.removeEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)):document.body.detachEvent("onkeydown",this._doOnWinKeyDown);for(var t in this.cdata)this._removeCell(t);this.cdata[t]=null,this.area.parentNode.removeChild(this.area),this.area=null,this._unloadControls(),this._unloadTop(),window.dhx4._eventable(this,"clear");for(var t in this)this[t]=null;l=null},window.dhx4._eventable(this),this._callMainEvent=function(t,e){this.callEvent(t,e)},this.conf.ev_coverclick=this.attachEvent("_cellCoverClick",function(t){var e=t-this.conf.selected;1==Math.abs(e)&&this._animateStart(e)}),this._doOnWinKeyDown=function(t){if(t=t||event,1==l.conf.keys&&1==t.ctrlKey&&1!=t.shiftKey&&1!=t.altKey){var e=t.keyCode,i=l.conf.key_data;e!=i.left&&e!=i.right||(t.preventDefault?t.preventDefault():t.returnValue=!1,l._animateStart(e==i.left?-1:1))}},"function"==typeof window.addEventListener?window.addEventListener("keydown",this._doOnWinKeyDown,!1):document.body.attachEvent("onkeydown",this._doOnWinKeyDown),1==t.delete_conf){for(var o in t)t[o]=null;t=null}return this}function dhtmlXWindows(t){var e=this,i={};if(void 0!==t)for(var n in t)i[n]=t[n];t=null,this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:!1,vp_of_auto:"auto"==i.vp_overflow,vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,fr_cover:navigator.userAgent.indexOf("MSIE 6.0")>=0};var s=window.dhx4.transDetect();if(this.conf.tr={prop:s.transProp,ev:s.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"},i.viewport?null!=i.viewport.object?this.attachViewportTo(i.viewport.object):null!=i.viewport.left&&null!=i.viewport.top&&null!=i.viewport.width&&null!=i.viewport.height?this.setViewport(i.viewport.left,i.viewport.top,i.viewport.width,i.viewport.height,i.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body),this.w={},this.createWindow=function(t,e,i,n,s){var o={};if(1==arguments.length&&"object"==typeof t)o=t;else for(o.id=t,o.left=e,o.top=i,o.width=n,o.height=s,void 0!==o.id&&null!=o.id||(o.id=window.dhx4.newId());null!=this.w[o.id];)o.id=window.dhx4.newId();null==o.left&&(o.left=0),null==o.top&&(o.top=0),o.move=(null==o.move||0!=window.dhx4.s2b(o.move))&&(null==o.deny_move||1!=window.dhx4.s2b(o.deny_move)),o.park=(null==o.park||0!=window.dhx4.s2b(o.park))&&(null==o.deny_park||1!=window.dhx4.s2b(o.deny_park)),o.resize=(null==o.resize||0!=window.dhx4.s2b(o.resize))&&(null==o.deny_resize||1!=window.dhx4.s2b(o.deny_resize)),o.keep_in_viewport=null!=o.keep_in_viewport&&window.dhx4.s2b(o.keep_in_viewport),o.modal=null!=o.modal&&window.dhx4.s2b(o.modal),o.center=null!=o.center&&window.dhx4.s2b(o.center),o.text=null!=o.text?o.text:null!=o.caption?o.caption:"dhtmlxWindow",o.header=!(null!=o.header&&0==window.dhx4.s2b(o.header));var l=document.createElement("DIV");l.className="dhxwin_active",this.vp.appendChild(l),l._isWindow=!0,l._idd=o.id;var r=document.createElement("DIV");r.className="dhxwin_hdr",r.style.zIndex=0,r.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+o.text+"</div></div><div class='dhxwin_btns'></div>",l.appendChild(r),r.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},r.oncontextmenu=function(t){return t=t||event,t.cancelBubble=!0,!1},r._isWinHdr=!0,r.firstChild._isWinIcon=!0;var a=document.createElement("DIV");a.className="dhxwin_brd",l.appendChild(a);var h=document.createElement("DIV");h.className="dhxwin_fr_cover",h.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>",l.appendChild(h),this.w[o.id]={win:l,hdr:r,brd:a,fr_cover:h,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:o.text,keep_in_vp:o.keep_in_viewport,allow_move:o.move,allow_park:o.park,allow_resize:o.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var d={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}};for(var c in d){var u=new dhtmlXWindowsButton(this,o.id,c,d[c].title,!1);0==d[c].visible&&u.hide(),r.lastChild.appendChild(u.button),this.w[o.id].b[c]=u,u=null}this._winAdjustTitle(o.id),this.w[o.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[o.id].conf.z_id);var p=new dhtmlXWindowsCell(o.id,this);return this.w[o.id].win.insertBefore(p.cell,h),this.w[o.id].cell=p,"function"==typeof window.addEventListener?(this.w[o.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[o.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[o.id].win.addEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),this.w[o.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(this.w[o.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[o.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[o.id].win.attachEvent("ondblclick",this._winOnMouseDown)),this._winInitFRM(o.id),this._winSetPosition(o.id,o.left,o.top),this._winSetSize(o.id,o.width,o.height),this._winMakeActive(o.id),1==o.center&&this.w[o.id].cell.center(),1==o.modal&&this.w[o.id].cell.setModal(!0),0==o.header&&this.w[o.id].cell.hideHeader(),f=l=r=a=h=p=null,this.w[o.id].cell},this._winOnMouseDown=function(t){var i=(t=t||event).target||t.srcElement,n={press_type:t.type};if("MSPointerDown"==t.type||"pointerdown"==t.type)e.conf.ev_skip=!0;else if(1==e.conf.ev_skip)return e.conf.ev_skip=!1,void(i=null);for(;null!=i&&1!=i._isWindow;)void 0!==i.className&&null==n.mode&&(void 0!==i._buttonName?(n.mode="button",n.button_name=i._buttonName):1==i._isWinHdr?n.mode="hdr":1==i._isWinIcon&&(n.mode="icon")),i=i.parentNode;null==n.mode&&(n.mode="win"),n.id=null!=i&&1==i._isWindow?i._idd:null,i=null,null!=n.id&&null!=e.w[n.id]&&e.callEvent("_winMouseDown",[t,n])},this._winOnParkTrans=function(t){t.stopPropagation&&t.stopPropagation();var i=e.w[this._idd];"opacity"==t.propertyName&&e._winCellClearOpacity(this._idd),"height"==t.propertyName&&"park"==i.conf.tr_mode&&"park"==i.conf.tr_mode&&(i.win.style[e.conf.tr.prop]="",i.conf.parked?(i.hdr.style.zIndex=3,e._callMainEvent("onParkUp",this._idd)):(e._winAdjustCell(this._idd),e._callMainEvent("onParkDown",this._idd),i.conf.keep_in_vp&&e._winAdjustPosition(this._idd,i.conf.x,i.conf.y))),i=null},this.unload=function(){this.conf.unloading=!0,this._dndInitModule&&this._dndUnloadModule();for(var t in this.w)this._winClose(t);this.w=null,null!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu(),window.dhx4._eventable(this,"clear"),this.attachViewportTo(null);for(var t in this.conf)this.conf[t]=null,delete this.conf[t];for(var t in this)this[t]=null;e=t=null},window.dhx4._eventable(this),this.attachEvent("_winMouseDown",this._winMouseDownHandler),this._dndInitModule&&this._dndInitModule(),null!=i.wins)for(var o=0;o<i.wins.length;o++){var l=i.wins[o];this.createWindow(l)}return i=null,this}function dhtmlXWindowsCell(t,e){dhtmlXCellObject.apply(this,[t,"_wins"]),this.wins=e,this.cell._winId=t,this.conf.skin=this.wins.conf.skin,this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize(),window.dhx4._eventable(this.cell,"clear"),this.cell._winId=null,this.wins=null,this.setText=null,this.getText=null,this.allowMove=null,this.denyMove=null,this.isMovable=null,this.allowResize=null,this.denyResize=null,this.isResizable=null,this.maximize=null,this.minimize=null,this.isMaximized=null,this.setPosition=null,this.getPosition=null,this.adjustPosition=null,this.park=null,this.isParked=null,this.allowPark=null,this.denyPark=null,this.isParkable=null,this.show=null,this.hide=null,this.isHidden=null,this.stick=null,this.unstick=null,this.isSticked=null,this.setDimension=null,this.getDimension=null,this.setMinDimension=null,this.getMinDimension=null,this.setMaxDimension=null,this.getMaxDimension=null,this.keepInViewport=null,this.center=null,this.centerOnScreen=null,this.bringToTop=null,this.bringToBottom=null,this.isOnTop=null,this.isOnBottom=null,this.showHeader=null,this.hideHeader=null,this.setModal=null,this.isModal=null,this.close=null,this._adjustByCont=null,this.button=null,this.addUserButton=null,this.removeUserButton=null,n=null}),this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)}),this.attachEvent("_onContentMouseDown",function(t,e){this.wins.callEvent("_winMouseDown",[e,{id:t,mode:"win"}])}),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this.conf.tr={};for(var i in this.wins.conf.tr)this.conf.tr[i]=this.wins.conf.tr[i];this.conf.tr.prop,this._initResize&&this._initResize(),window.dhx4._eventable(this.cell);var n=this;return this.cell.attachEvent("_setCellSize",function(t,e){var i=n.wins.w[this._winId].conf.w-n.conf.size.w,s=n.wins.w[this._winId].conf.h-n.conf.size.h;n.setDimension(t+i,e+s)}),this}function dataProcessor(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhx4._eventable(this),this.connector_init&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"),this}function eXcell_roch(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"}}function eXcell_filter(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){this.setCValue(t+":{{1+1}}",t)}}if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=J.type(t);return"function"!==i&&!J.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t,e,i){if(J.isFunction(e))return J.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return J.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ot.test(e))return J.filter(e,t,i);e=J.filter(e,t)}return J.grep(t,function(t){return J.inArray(t,e)>=0!==i})}function s(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function o(){rt.addEventListener?(rt.removeEventListener("DOMContentLoaded",l,!1),t.removeEventListener("load",l,!1)):(rt.detachEvent("onreadystatechange",l),t.detachEvent("onload",l))}function l(){(rt.addEventListener||"load"===event.type||"complete"===rt.readyState)&&(o(),J.ready())}function r(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(gt,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:mt.test(i)?J.parseJSON(i):i)}catch(t){}J.data(t,e,i)}else i=void 0}return i}function a(t){var e;for(e in t)if(("data"!==e||!J.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(J.acceptData(t)){var s,o,l=J.expando,r=t.nodeType,a=r?J.cache:t,h=r?t[l]:t[l]&&l;if(h&&a[h]&&(n||a[h].data)||void 0!==i||"string"!=typeof e)return h||(h=r?t[l]=F.pop()||J.guid++:l),a[h]||(a[h]=r?{}:{toJSON:J.noop}),("object"==typeof e||"function"==typeof e)&&(n?a[h]=J.extend(a[h],e):a[h].data=J.extend(a[h].data,e)),o=a[h],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[J.camelCase(e)]=i),"string"==typeof e?null==(s=o[e])&&(s=o[J.camelCase(e)]):s=o,s}}function d(t,e,i){if(J.acceptData(t)){var n,s,o=t.nodeType,l=o?J.cache:t,r=o?t[J.expando]:J.expando;if(l[r]){if(e&&(n=i?l[r]:l[r].data)){J.isArray(e)?e=e.concat(J.map(e,J.camelCase)):e in n?e=[e]:(e=J.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!a(n):!J.isEmptyObject(n))return}(i||(delete l[r].data,a(l[r])))&&(o?J.cleanData([t],!0):K.deleteExpando||l!=l.window?delete l[r]:l[r]=null)}}}function c(){return!0}function u(){return!1}function f(){try{return rt.activeElement}catch(t){}}function p(t){var e=Tt.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function _(t,e){var i,n,s=0,o=typeof t.getElementsByTagName!==_t?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==_t?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[s]);s++)!e||J.nodeName(n,e)?o.push(n):J.merge(o,_(n,e));return void 0===e||e&&J.nodeName(t,e)?J.merge([t],o):o}function m(t){wt.test(t.type)&&(t.defaultChecked=t.checked)}function g(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==J.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Ht.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function y(t,e){for(var i,n=0;null!=(i=t[n]);n++)J._data(i,"globalEval",!e||J._data(e[n],"globalEval"))}function x(t,e){if(1===e.nodeType&&J.hasData(t)){var i,n,s,o=J._data(t),l=J._data(e,o),r=o.events;if(r){delete l.handle,l.events={};for(i in r)for(n=0,s=r[i].length;s>n;n++)J.event.add(e,i,r[i][n])}l.data&&(l.data=J.extend({},l.data))}}function w(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!K.noCloneEvent&&e[J.expando]){s=J._data(e);for(n in s.events)J.removeEvent(e,n,s.handle);e.removeAttribute(J.expando)}"script"===i&&e.text!==t.text?(v(e).text=t.text,b(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),K.html5Clone&&t.innerHTML&&!J.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&wt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function C(e,i){var n,s=J(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:J.css(s[0],"display");return s.detach(),o}function N(t){var e=rt,i=Vt[t];return i||("none"!==(i=C(t,e))&&i||(zt=(zt||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),(e=(zt[0].contentWindow||zt[0].contentDocument).document).write(),e.close(),i=C(t,e),zt.detach()),Vt[t]=i),i}function k(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function I(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=ne.length;s--;)if((e=ne[s]+i)in t)return e;return n}function S(t,e){for(var i,n,s,o=[],l=0,r=t.length;r>l;l++)(n=t[l]).style&&(o[l]=J._data(n,"olddisplay"),i=n.style.display,e?(o[l]||"none"!==i||(n.style.display=""),""===n.style.display&&yt(n)&&(o[l]=J._data(n,"olddisplay",N(n.nodeName)))):(s=yt(n),(i&&"none"!==i||!s)&&J._data(n,"olddisplay",s?i:J.css(n,"display"))));for(l=0;r>l;l++)(n=t[l]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[l]||"":"none"));return t}function T(t,e,i){var n=Zt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function E(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,l=0;4>o;o+=2)"margin"===i&&(l+=J.css(t,i+bt[o],!0,s)),n?("content"===i&&(l-=J.css(t,"padding"+bt[o],!0,s)),"margin"!==i&&(l-=J.css(t,"border"+bt[o]+"Width",!0,s))):(l+=J.css(t,"padding"+bt[o],!0,s),"padding"!==i&&(l+=J.css(t,"border"+bt[o]+"Width",!0,s)));return l}function O(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=Wt(t),l=K.boxSizing&&"border-box"===J.css(t,"boxSizing",!1,o);if(0>=s||null==s){if((0>(s=Ut(t,e,o))||null==s)&&(s=t.style[e]),qt.test(s))return s;n=l&&(K.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+E(t,e,i||(l?"border":"content"),n,o)+"px"}function j(t,e,i,n,s){return new j.prototype.init(t,e,i,n,s)}function A(){return setTimeout(function(){se=void 0}),se=J.now()}function M(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=bt[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function D(t,e,i){for(var n,s=(de[e]||[]).concat(de["*"]),o=0,l=s.length;l>o;o++)if(n=s[o].call(i,e,t))return n}function L(t,e,i){var n,s,o=0,l=he.length,r=J.Deferred().always(function(){delete a.elem}),a=function(){if(s)return!1;for(var e=se||A(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),o=0,l=h.tweens.length;l>o;o++)h.tweens[o].run(n);return r.notifyWith(t,[h,n,i]),1>n&&l?i:(r.resolveWith(t,[h]),!1)},h=r.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:se||A(),duration:i.duration,tweens:[],createTween:function(e,i){var n=J.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)h.tweens[i].run(1);return e?r.resolveWith(t,[h,e]):r.rejectWith(t,[h,e]),this}}),d=h.props;for(function(t,e){var i,n,s,o,l;for(i in t)if(n=J.camelCase(i),s=e[n],o=t[i],J.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),(l=J.cssHooks[n])&&"expand"in l){o=l.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}(d,h.opts.specialEasing);l>o;o++)if(n=he[o].call(h,t,d,h.opts))return n;return J.map(d,D,h),J.isFunction(h.opts.start)&&h.opts.start.call(t,h),J.fx.timer(J.extend(a,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function X(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(ct)||[];if(J.isFunction(i))for(;n=o[s++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function P(t,e,i,n){function s(r){var a;return o[r]=!0,J.each(t[r]||[],function(t,r){var h=r(e,i,n);return"string"!=typeof h||l||o[h]?l?!(a=h):void 0:(e.dataTypes.unshift(h),s(h),!1)}),a}var o={},l=t===Me;return s(e.dataTypes[0])||!o["*"]&&s("*")}function B(t,e){var i,n,s=J.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&J.extend(!0,t,i),t}function H(t,e,i,n){var s;if(J.isArray(e))J.each(e,function(e,s){i||Xe.test(t)?n(t,s):H(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==J.type(e))n(t,e);else for(s in e)H(t+"["+s+"]",e[s],i,n)}function R(){try{return new t.XMLHttpRequest}catch(t){}}function $(t){return J.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var F=[],z=F.slice,V=F.concat,W=F.push,U=F.indexOf,G={},q=G.toString,Y=G.hasOwnProperty,K={},J=function(t,e){return new J.fn.init(t,e)},Q=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Z=/^-ms-/,tt=/-([\da-z])/gi,et=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:"1.11.2",constructor:J,selector:"",length:0,toArray:function(){return z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:z.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:F.sort,splice:F.splice},J.extend=J.fn.extend=function(){var t,e,i,n,s,o,l=arguments[0]||{},r=1,a=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[r]||{},r++),"object"==typeof l||J.isFunction(l)||(l={}),r===a&&(l=this,r--);a>r;r++)if(null!=(s=arguments[r]))for(n in s)t=l[n],i=s[n],l!==i&&(h&&i&&(J.isPlainObject(i)||(e=J.isArray(i)))?(e?(e=!1,o=t&&J.isArray(t)?t:[]):o=t&&J.isPlainObject(t)?t:{},l[n]=J.extend(h,o,i)):void 0!==i&&(l[n]=i));return l},J.extend({expando:"jQuery"+("1.11.2"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray||function(t){return"array"===J.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==J.type(t)||t.nodeType||J.isWindow(t))return!1;try{if(t.constructor&&!Y.call(t,"constructor")&&!Y.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(K.ownLast)for(e in t)return Y.call(t,e);for(e in t);return void 0===e||Y.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?G[q.call(t)]||"object":typeof t},globalEval:function(e){e&&J.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(Z,"ms-").replace(tt,et)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s=0,o=t.length,l=i(t);if(n){if(l)for(;o>s&&!1!==e.apply(t[s],n);s++);else for(s in t)if(!1===e.apply(t[s],n))break}else if(l)for(;o>s&&!1!==e.call(t[s],s,t[s]);s++);else for(s in t)if(!1===e.call(t[s],s,t[s]))break;return t},trim:function(t){return null==t?"":(t+"").replace(Q,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?J.merge(n,"string"==typeof t?[t]:t):W.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(U)return U.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;)t[s++]=e[n++];if(i!=i)for(;void 0!==e[n];)t[s++]=e[n++];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,o=t.length,l=!i;o>s;s++)!e(t[s],s)!==l&&n.push(t[s]);return n},map:function(t,e,n){var s,o=0,l=t.length,r=[];if(i(t))for(;l>o;o++)null!=(s=e(t[o],o,n))&&r.push(s);else for(o in t)null!=(s=e(t[o],o,n))&&r.push(s);return V.apply([],r)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(s=t[e],e=t,t=s),J.isFunction(t)?(i=z.call(arguments,2),n=function(){return t.apply(e||this,i.concat(z.call(arguments)))},n.guid=t.guid=t.guid||J.guid++,n):void 0},now:function(){return+new Date},support:K}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()});var it=function(t){function e(t,e,i,n){var s,o,l,r,a,h,c,f,p,_;if((e?e.ownerDocument||e:B)!==O&&E(e),e=e||O,i=i||[],r=e.nodeType,"string"!=typeof t||!t||1!==r&&9!==r&&11!==r)return i;if(!n&&A){if(11!==r&&(s=mt.exec(t)))if(l=s[1]){if(9===r){if(!(o=e.getElementById(l))||!o.parentNode)return i;if(o.id===l)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(l))&&X(e,o)&&o.id===l)return i.push(o),i}else{if(s[2])return K.apply(i,e.getElementsByTagName(t)),i;if((l=s[3])&&b.getElementsByClassName)return K.apply(i,e.getElementsByClassName(l)),i}if(b.qsa&&(!M||!M.test(t))){if(f=c=P,p=e,_=1!==r&&t,1===r&&"object"!==e.nodeName.toLowerCase()){for(h=C(t),(c=e.getAttribute("id"))?f=c.replace(vt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",a=h.length;a--;)h[a]=f+u(h[a]);p=gt.test(t)&&d(e.parentNode)||e,_=h.join(",")}if(_)try{return K.apply(i,p.querySelectorAll(_)),i}catch(t){}finally{c||e.removeAttribute("id")}}}return k(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>y.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[P]=!0,t}function s(t){var e=O.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)y.attrHandle[i[n]]=e}function l(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||W)-(~t.sourceIndex||W);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function r(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function a(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function h(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),l=o.length;l--;)i[s=o[l]]&&(i[s]=!(n[s]=i[s]))})})}function d(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function u(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=R++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,l){var r,a,h=[H,o];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(a=e[P]||(e[P]={}),(r=a[n])&&r[0]===H&&r[1]===o)return h[2]=r[2];if(a[n]=h,h[2]=t(e,i,l))return!0}}}function p(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function _(t,e,i,n,s){for(var o,l=[],r=0,a=t.length,h=null!=e;a>r;r++)(o=t[r])&&(!i||i(o,n,s))&&(l.push(o),h&&e.push(r));return l}function m(t,i,s,o,l,r){return o&&!o[P]&&(o=m(o)),l&&!l[P]&&(l=m(l,r)),n(function(n,r,a,h){var d,c,u,f=[],p=[],m=r.length,g=n||function(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}(i||"*",a.nodeType?[a]:a,[]),v=!t||!n&&i?g:_(g,f,t,a,h),b=s?l||(n?t:m||o)?[]:r:v;if(s&&s(v,b,a,h),o)for(d=_(b,p),o(d,[],a,h),c=d.length;c--;)(u=d[c])&&(b[p[c]]=!(v[p[c]]=u));if(n){if(l||t){if(l){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(v[c]=u);l(null,b=[],d,h)}for(c=b.length;c--;)(u=b[c])&&(d=l?Q(n,u):f[c])>-1&&(n[d]=!(r[d]=u))}}else b=_(b===r?b.splice(m,b.length):b),l?l(null,r,b,h):K.apply(r,b)})}function g(t){for(var e,i,n,s=t.length,o=y.relative[t[0].type],l=o||y.relative[" "],r=o?1:0,a=f(function(t){return t===e},l,!0),h=f(function(t){return Q(e,t)>-1},l,!0),d=[function(t,i,n){var s=!o&&(n||i!==I)||((e=i).nodeType?a(t,i,n):h(t,i,n));return e=null,s}];s>r;r++)if(i=y.relative[t[r].type])d=[f(p(d),i)];else{if((i=y.filter[t[r].type].apply(null,t[r].matches))[P]){for(n=++r;s>n&&!y.relative[t[n].type];n++);return m(r>1&&p(d),r>1&&u(t.slice(0,r-1).concat({value:" "===t[r-2].type?"*":""})).replace(lt,"$1"),i,n>r&&g(t.slice(r,n)),s>n&&g(t=t.slice(n)),s>n&&u(t))}d.push(i)}return p(d)}var v,b,y,x,w,C,N,k,I,S,T,E,O,j,A,M,D,L,X,P="sizzle"+1*new Date,B=t.document,H=0,R=0,$=i(),F=i(),z=i(),V=function(t,e){return t===e&&(T=!0),0},W=1<<31,U={}.hasOwnProperty,G=[],q=G.pop,Y=G.push,K=G.push,J=G.slice,Q=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=et.replace("w","w#"),nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+tt+"*\\]",st=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",ot=new RegExp(tt+"+","g"),lt=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),rt=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ht=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),dt=new RegExp(st),ct=new RegExp("^"+it+"$"),ut={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et.replace("w","w*")+")"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,pt=/^h\d$/i,_t=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),yt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},xt=function(){E()};try{K.apply(G=J.call(B.childNodes),B.childNodes),G[B.childNodes.length].nodeType}catch(t){K={apply:G.length?function(t,e){Y.apply(t,J.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},w=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:B;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,j=n.documentElement,(i=n.defaultView)&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",xt,!1):i.attachEvent&&i.attachEvent("onunload",xt)),A=!w(n),b.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=_t.test(n.getElementsByClassName),b.getById=s(function(t){return j.appendChild(t).id=P,!n.getElementsByName||!n.getElementsByName(P).length}),b.getById?(y.find.ID=function(t,e){if(void 0!==e.getElementById&&A){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},y.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){return t.getAttribute("id")===e}}):(delete y.find.ID,y.filter.ID=function(t){var e=t.replace(bt,yt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),y.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},y.find.CLASS=b.getElementsByClassName&&function(t,e){return A?e.getElementsByClassName(t):void 0},D=[],M=[],(b.qsa=_t.test(n.querySelectorAll))&&(s(function(t){j.appendChild(t).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||M.push("\\["+tt+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+P+"-]").length||M.push("~="),t.querySelectorAll(":checked").length||M.push(":checked"),t.querySelectorAll("a#"+P+"+*").length||M.push(".#.+[+~]")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&M.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(b.matchesSelector=_t.test(L=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&s(function(t){b.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),D.push("!=",st)}),M=M.length&&new RegExp(M.join("|")),D=D.length&&new RegExp(D.join("|")),e=_t.test(j.compareDocumentPosition),X=e||_t.test(j.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return T=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===B&&X(B,t)?-1:e===n||e.ownerDocument===B&&X(B,e)?1:S?Q(S,t)-Q(S,e):0:4&i?-1:1)}:function(t,e){if(t===e)return T=!0,0;var i,s=0,o=t.parentNode,r=e.parentNode,a=[t],h=[e];if(!o||!r)return t===n?-1:e===n?1:o?-1:r?1:S?Q(S,t)-Q(S,e):0;if(o===r)return l(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;a[s]===h[s];)s++;return s?l(a[s],h[s]):a[s]===B?-1:h[s]===B?1:0},n):O},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==O&&E(t),i=i.replace(ht,"='$1']"),!(!b.matchesSelector||!A||D&&D.test(i)||M&&M.test(i)))try{var n=L.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return e(i,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&E(t),X(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&E(t);var i=y.attrHandle[e.toLowerCase()],n=i&&U.call(y.attrHandle,e.toLowerCase())?i(t,e,!A):void 0;return void 0!==n?n:b.attributes||!A?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(T=!b.detectDuplicates,S=!b.sortStable&&t.slice(0),t.sort(V),T){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return S=null,t},x=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=x(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=x(e);return i},(y=e.selectors={cacheLength:50,createPseudo:n,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,yt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,yt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&dt.test(i)&&(e=C(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,yt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(ot," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),l="last"!==t.slice(-4),r="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,a){var h,d,c,u,f,p,_=o!==l?"nextSibling":"previousSibling",m=e.parentNode,g=r&&e.nodeName.toLowerCase(),v=!a&&!r;if(m){if(o){for(;_;){for(c=e;c=c[_];)if(r?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;p=_="only"===t&&!p&&"nextSibling"}return!0}if(p=[l?m.firstChild:m.lastChild],l&&v){for(f=(h=(d=m[P]||(m[P]={}))[t]||[])[0]===H&&h[1],u=h[0]===H&&h[2],c=f&&m.childNodes[f];c=++f&&c&&c[_]||(u=f=0)||p.pop();)if(1===c.nodeType&&++u&&c===e){d[t]=[H,f,u];break}}else if(v&&(h=(e[P]||(e[P]={}))[t])&&h[0]===H)u=h[1];else for(;(c=++f&&c&&c[_]||(u=f=0)||p.pop())&&((r?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++u||(v&&((c[P]||(c[P]={}))[t]=[H,u]),c!==e)););return(u-=s)===n||u%n==0&&u/n>=0}}},PSEUDO:function(t,i){var s,o=y.pseudos[t]||y.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[P]?o(i):o.length>1?(s=[t,t,"",i],y.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),l=s.length;l--;)n=Q(t,s[l]),t[n]=!(e[n]=s[l])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=N(t.replace(lt,"$1"));return s[P]?n(function(t,e,i,n){for(var o,l=s(t,null,n,[]),r=t.length;r--;)(o=l[r])&&(t[r]=!(e[r]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(bt,yt),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:n(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,yt).toLowerCase(),function(e){var i;do{if(i=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===j},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!y.pseudos.empty(t)},header:function(t){return pt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,i){return[0>i?i+e:i]}),even:h(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:h(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:h(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:h(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=y.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[v]=r(v);for(v in{submit:!0,reset:!0})y.pseudos[v]=a(v);return c.prototype=y.filters=y.pseudos,y.setFilters=new c,C=e.tokenize=function(t,i){var n,s,o,l,r,a,h,d=F[t+" "];if(d)return i?0:d.slice(0);for(r=t,a=[],h=y.preFilter;r;){(!n||(s=rt.exec(r)))&&(s&&(r=r.slice(s[0].length)||r),a.push(o=[])),n=!1,(s=at.exec(r))&&(n=s.shift(),o.push({value:n,type:s[0].replace(lt," ")}),r=r.slice(n.length));for(l in y.filter)!(s=ut[l].exec(r))||h[l]&&!(s=h[l](s))||(n=s.shift(),o.push({value:n,type:l,matches:s}),r=r.slice(n.length));if(!n)break}return i?r.length:r?e.error(t):F(t,a).slice(0)},N=e.compile=function(t,i){var s,o=[],l=[],r=z[t+" "];if(!r){for(i||(i=C(t)),s=i.length;s--;)(r=g(i[s]))[P]?o.push(r):l.push(r);(r=z(t,function(t,i){var s=i.length>0,o=t.length>0,l=function(n,l,r,a,h){var d,c,u,f=0,p="0",m=n&&[],g=[],v=I,b=n||o&&y.find.TAG("*",h),x=H+=null==v?1:Math.random()||.1,w=b.length;for(h&&(I=l!==O&&l);p!==w&&null!=(d=b[p]);p++){if(o&&d){for(c=0;u=t[c++];)if(u(d,l,r)){a.push(d);break}h&&(H=x)}s&&((d=!u&&d)&&f--,n&&m.push(d))}if(f+=p,s&&p!==f){for(c=0;u=i[c++];)u(m,g,l,r);if(n){if(f>0)for(;p--;)m[p]||g[p]||(g[p]=q.call(a));g=_(g)}K.apply(a,g),h&&!n&&g.length>0&&f+i.length>1&&e.uniqueSort(a)}return h&&(H=x,I=v),m};return s?n(l):l}(l,o))).selector=t}return r},k=e.select=function(t,e,i,n){var s,o,l,r,a,h="function"==typeof t&&t,c=!n&&C(t=h.selector||t);if(i=i||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(l=o[0]).type&&b.getById&&9===e.nodeType&&A&&y.relative[o[1].type]){if(!(e=(y.find.ID(l.matches[0].replace(bt,yt),e)||[])[0]))return i;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=ut.needsContext.test(t)?0:o.length;s--&&(l=o[s],!y.relative[r=l.type]);)if((a=y.find[r])&&(n=a(l.matches[0].replace(bt,yt),gt.test(o[0].type)&&d(e.parentNode)||e))){if(o.splice(s,1),!(t=n.length&&u(o)))return K.apply(i,n),i;break}}return(h||N(t,c))(n,e,!A,i,gt.test(t)&&d(e.parentNode)||e),i},b.sortStable=P.split("").sort(V).join("")===P,b.detectDuplicates=!!T,E(),b.sortDetached=s(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(Z,function(t,e,i){var n;return i?void 0:!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);J.find=it,J.expr=it.selectors,J.expr[":"]=J.expr.pseudos,J.unique=it.uniqueSort,J.text=it.getText,J.isXMLDoc=it.isXML,J.contains=it.contains;var nt=J.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^.[^:#\[\.,]*$/;J.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?J.find.matchesSelector(n,t)?[n]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;s>e;e++)if(J.contains(n[e],this))return!0}));for(e=0;s>e;e++)J.find(t,n[e],i);return i=this.pushStack(s>1?J.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&nt.test(t)?J(t):t||[],!1).length}});var lt,rt=t.document,at=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(J.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:at.exec(t))||!i[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:rt,!0)),st.test(i[1])&&J.isPlainObject(e))for(i in e)J.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((n=rt.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return lt.find(t);this.length=1,this[0]=n}return this.context=rt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?void 0!==lt.ready?lt.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))}).prototype=J.fn,lt=J(rt);var ht=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,i){for(var n=[],s=t[e];s&&9!==s.nodeType&&(void 0===i||1!==s.nodeType||!J(s).is(i));)1===s.nodeType&&n.push(s),s=s[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),J.fn.extend({has:function(t){var e,i=J(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(J.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],l=nt.test(t)||"string"!=typeof t?J(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(l?l.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(t){return t?"string"==typeof t?J.inArray(this[0],J(t)):J.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,i){return J.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,i){return J.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return J.dir(t,"previousSibling",i)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return J.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(i,n){var s=J.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=J.filter(n,s)),this.length>1&&(dt[t]||(s=J.unique(s)),ht.test(t)&&(s=s.reverse())),this.pushStack(s)}});var ct=/\S+/g,ut={};J.Callbacks=function(t){var e,i,n,s,o,l,r=[],a=!(t="string"==typeof t?ut[t]||function(t){var e=ut[t]={};return J.each(t.match(ct)||[],function(t,i){e[i]=!0}),e}(t):J.extend({},t)).once&&[],h=function(c){for(i=t.memory&&c,n=!0,o=l||0,l=0,s=r.length,e=!0;r&&s>o;o++)if(!1===r[o].apply(c[0],c[1])&&t.stopOnFalse){i=!1;break}e=!1,r&&(a?a.length&&h(a.shift()):i?r=[]:d.disable())},d={add:function(){if(r){var n=r.length;!function e(i){J.each(i,function(i,n){var s=J.type(n);"function"===s?t.unique&&d.has(n)||r.push(n):n&&n.length&&"string"!==s&&e(n)})}(arguments),e?s=r.length:i&&(l=n,h(i))}return this},remove:function(){return r&&J.each(arguments,function(t,i){for(var n;(n=J.inArray(i,r,n))>-1;)r.splice(n,1),e&&(s>=n&&s--,o>=n&&o--)}),this},has:function(t){return t?J.inArray(t,r)>-1:!(!r||!r.length)},empty:function(){return r=[],s=0,this},disable:function(){return r=a=i=void 0,this},disabled:function(){return!r},lock:function(){return a=void 0,i||d.disable(),this},locked:function(){return!a},fireWith:function(t,i){return!r||n&&!a||(i=i||[],i=[t,i.slice?i.slice():i],e?a.push(i):h(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(i){J.each(e,function(e,o){var l=J.isFunction(t[e])&&t[e];s[o[1]](function(){var t=l&&l.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,l?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,n):n}},s={};return n.pipe=n.then,J.each(e,function(t,o){var l=o[2],r=o[3];n[o[1]]=l.add,r&&l.add(function(){i=r},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=l.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=z.call(arguments),l=o.length,r=1!==l||t&&J.isFunction(t.promise)?l:0,a=1===r?t:J.Deferred(),h=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?z.call(arguments):s,n===e?a.notifyWith(i,n):--r||a.resolveWith(i,n)}};if(l>1)for(e=new Array(l),i=new Array(l),n=new Array(l);l>s;s++)o[s]&&J.isFunction(o[s].promise)?o[s].promise().done(h(s,n,o)).fail(a.reject).progress(h(s,i,e)):--r;return r||a.resolveWith(n,o),a.promise()}});var ft;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){if(!0===t?!--J.readyWait:!J.isReady){if(!rt.body)return setTimeout(J.ready);J.isReady=!0,!0!==t&&--J.readyWait>0||(ft.resolveWith(rt,[J]),J.fn.triggerHandler&&(J(rt).triggerHandler("ready"),J(rt).off("ready")))}}}),J.ready.promise=function(e){if(!ft)if(ft=J.Deferred(),"complete"===rt.readyState)setTimeout(J.ready);else if(rt.addEventListener)rt.addEventListener("DOMContentLoaded",l,!1),t.addEventListener("load",l,!1);else{rt.attachEvent("onreadystatechange",l),t.attachEvent("onload",l);var i=!1;try{i=null==t.frameElement&&rt.documentElement}catch(t){}i&&i.doScroll&&function t(){if(!J.isReady){try{i.doScroll("left")}catch(e){return setTimeout(t,50)}o(),J.ready()}}()}return ft.promise(e)};var pt,_t="undefined";for(pt in J(K))break;K.ownLast="0"!==pt,K.inlineBlockNeedsLayout=!1,J(function(){var t,e,i,n;(i=rt.getElementsByTagName("body")[0])&&i.style&&(e=rt.createElement("div"),n=rt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==_t&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",K.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=rt.createElement("div");if(null==K.deleteExpando){K.deleteExpando=!0;try{delete t.test}catch(t){K.deleteExpando=!1}}t=null}(),J.acceptData=function(t){var e=J.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return(1===i||9===i)&&(!e||!0!==e&&t.getAttribute("classid")===e)};var mt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,gt=/([A-Z])/g;J.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?J.cache[t[J.expando]]:t[J.expando])&&!a(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return d(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return d(t,e,!0)}}),J.fn.extend({data:function(t,e){var i,n,s,o=this[0],l=o&&o.attributes;if(void 0===t){if(this.length&&(s=J.data(o),1===o.nodeType&&!J._data(o,"parsedAttrs"))){for(i=l.length;i--;)l[i]&&0===(n=l[i].name).indexOf("data-")&&(n=J.camelCase(n.slice(5)),r(o,n,s[n]));J._data(o,"parsedAttrs",!0)}return s}return"object"==typeof t?this.each(function(){J.data(this,t)}):arguments.length>1?this.each(function(){J.data(this,t,e)}):o?r(o,t,J.data(o,t)):void 0},removeData:function(t){return this.each(function(){J.removeData(this,t)})}}),J.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=J._data(t,e),i&&(!n||J.isArray(i)?n=J._data(t,e,J.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=J.queue(t,e),n=i.length,s=i.shift(),o=J._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,function(){J.dequeue(t,e)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return J._data(t,i)||J._data(t,i,{empty:J.Callbacks("once memory").add(function(){J._removeData(t,e+"queue"),J._removeData(t,i)})})}}),J.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?J.queue(this[0],t):void 0===e?this:this.each(function(){var i=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=J.Deferred(),o=this,l=this.length,r=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";l--;)(i=J._data(o[l],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),s.promise(e)}});var vt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bt=["Top","Right","Bottom","Left"],yt=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},xt=J.access=function(t,e,i,n,s,o,l){var r=0,a=t.length,h=null==i;if("object"===J.type(i)){s=!0;for(r in i)J.access(t,e,r,i[r],!0,o,l)}else if(void 0!==n&&(s=!0,J.isFunction(n)||(l=!0),h&&(l?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(J(t),i)})),e))for(;a>r;r++)e(t[r],i,l?n:n.call(t[r],r,e(t[r],i)));return s?t:h?e.call(t):a?e(t[0],i):o},wt=/^(?:checkbox|radio)$/i;!function(){var t=rt.createElement("input"),e=rt.createElement("div"),i=rt.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",K.leadingWhitespace=3===e.firstChild.nodeType,K.tbody=!e.getElementsByTagName("tbody").length,K.htmlSerialize=!!e.getElementsByTagName("link").length,K.html5Clone="<:nav></:nav>"!==rt.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),K.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",K.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,K.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){K.noCloneEvent=!1}),e.cloneNode(!0).click()),null==K.deleteExpando){K.deleteExpando=!0;try{delete e.test}catch(t){K.deleteExpando=!1}}}(),function(){var e,i,n=rt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(K[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),K[e+"Bubbles"]=!1===n.attributes[i].expando);n=null}();var Ct=/^(?:input|select|textarea)$/i,Nt=/^key/,kt=/^(?:mouse|pointer|contextmenu)|click/,It=/^(?:focusinfocus|focusoutblur)$/,St=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,i,n,s){var o,l,r,a,h,d,c,u,f,p,_,m=J._data(t);if(m){for(i.handler&&(a=i,i=a.handler,s=a.selector),i.guid||(i.guid=J.guid++),(l=m.events)||(l=m.events={}),(d=m.handle)||(d=m.handle=function(t){return typeof J===_t||t&&J.event.triggered===t.type?void 0:J.event.dispatch.apply(d.elem,arguments)},d.elem=t),r=(e=(e||"").match(ct)||[""]).length;r--;)o=St.exec(e[r])||[],f=_=o[1],p=(o[2]||"").split(".").sort(),f&&(h=J.event.special[f]||{},f=(s?h.delegateType:h.bindType)||f,h=J.event.special[f]||{},c=J.extend({type:f,origType:_,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&J.expr.match.needsContext.test(s),namespace:p.join(".")},a),(u=l[f])||(u=l[f]=[],u.delegateCount=0,h.setup&&!1!==h.setup.call(t,n,p,d)||(t.addEventListener?t.addEventListener(f,d,!1):t.attachEvent&&t.attachEvent("on"+f,d))),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,c):u.push(c),J.event.global[f]=!0);t=null}},remove:function(t,e,i,n,s){var o,l,r,a,h,d,c,u,f,p,_,m=J.hasData(t)&&J._data(t);if(m&&(d=m.events)){for(h=(e=(e||"").match(ct)||[""]).length;h--;)if(r=St.exec(e[h])||[],f=_=r[1],p=(r[2]||"").split(".").sort(),f){for(c=J.event.special[f]||{},u=d[f=(n?c.delegateType:c.bindType)||f]||[],r=r[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=u.length;o--;)l=u[o],!s&&_!==l.origType||i&&i.guid!==l.guid||r&&!r.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(u.splice(o,1),l.selector&&u.delegateCount--,c.remove&&c.remove.call(t,l));a&&!u.length&&(c.teardown&&!1!==c.teardown.call(t,p,m.handle)||J.removeEvent(t,f,m.handle),delete d[f])}else for(f in d)J.event.remove(t,f+e[h],i,n,!0);J.isEmptyObject(d)&&(delete m.handle,J._removeData(t,"events"))}},trigger:function(e,i,n,s){var o,l,r,a,h,d,c,u=[n||rt],f=Y.call(e,"type")?e.type:e,p=Y.call(e,"namespace")?e.namespace.split("."):[];if(r=d=n=n||rt,3!==n.nodeType&&8!==n.nodeType&&!It.test(f+J.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[J.expando]?e:new J.Event(f,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:J.makeArray(i,[e]),h=J.event.special[f]||{},s||!h.trigger||!1!==h.trigger.apply(n,i))){if(!s&&!h.noBubble&&!J.isWindow(n)){for(a=h.delegateType||f,It.test(a+f)||(r=r.parentNode);r;r=r.parentNode)u.push(r),d=r;d===(n.ownerDocument||rt)&&u.push(d.defaultView||d.parentWindow||t)}for(c=0;(r=u[c++])&&!e.isPropagationStopped();)e.type=c>1?a:h.bindType||f,(o=(J._data(r,"events")||{})[e.type]&&J._data(r,"handle"))&&o.apply(r,i),(o=l&&r[l])&&o.apply&&J.acceptData(r)&&(e.result=o.apply(r,i),!1===e.result&&e.preventDefault());if(e.type=f,!s&&!e.isDefaultPrevented()&&(!h._default||!1===h._default.apply(u.pop(),i))&&J.acceptData(n)&&l&&n[f]&&!J.isWindow(n)){(d=n[l])&&(n[l]=null),J.event.triggered=f;try{n[f]()}catch(t){}J.event.triggered=void 0,d&&(n[l]=d)}return e.result}},dispatch:function(t){t=J.event.fix(t);var e,i,n,s,o,l=[],r=z.call(arguments),a=(J._data(this,"events")||{})[t.type]||[],h=J.event.special[t.type]||{};if(r[0]=t,t.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,t)){for(l=J.event.handlers.call(this,t,a),e=0;(s=l[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,o=0;(n=s.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,void 0!==(i=((J.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,r))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,l=[],r=e.delegateCount,a=t.target;if(r&&a.nodeType&&(!t.button||"click"!==t.type))for(;a!=this;a=a.parentNode||this)if(1===a.nodeType&&(!0!==a.disabled||"click"!==t.type)){for(s=[],o=0;r>o;o++)n=e[o],i=n.selector+" ",void 0===s[i]&&(s[i]=n.needsContext?J(i,this).index(a)>=0:J.find(i,this,null,[a]).length),s[i]&&s.push(n);s.length&&l.push({elem:a,handlers:s})}return r<e.length&&l.push({elem:this,handlers:e.slice(r)}),l},fix:function(t){if(t[J.expando])return t;var e,i,n,s=t.type,o=t,l=this.fixHooks[s];for(l||(this.fixHooks[s]=l=kt.test(s)?this.mouseHooks:Nt.test(s)?this.keyHooks:{}),n=l.props?this.props.concat(l.props):this.props,t=new J.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||rt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,l.filter?l.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button,l=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||rt,s=n.documentElement,i=n.body,t.pageX=e.clientX+(s&&s.scrollLeft||i&&i.scrollLeft||0)-(s&&s.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||i&&i.scrollTop||0)-(s&&s.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&l&&(t.relatedTarget=l===t.target?e.toElement:l),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return J.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=J.extend(new J.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?J.event.trigger(s,null,e):J.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=rt.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===_t&&(t[n]=null),t.detachEvent(n,i))},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?c:u):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,s=t.handleObj;return(!n||n!==this&&!J.contains(this,n))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),K.submitBubbles||(J.event.special.submit={setup:function(){return!J.nodeName(this,"form")&&void J.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=J.nodeName(e,"input")||J.nodeName(e,"button")?e.form:void 0;i&&!J._data(i,"submitBubbles")&&(J.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),J._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&J.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return!J.nodeName(this,"form")&&void J.event.remove(this,"._submit")}}),K.changeBubbles||(J.event.special.change={setup:function(){return Ct.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(J.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),J.event.simulate("change",this,t,!0)})),!1):void J.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ct.test(e.nodeName)&&!J._data(e,"changeBubbles")&&(J.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||J.event.simulate("change",this.parentNode,t,!0)}),J._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return J.event.remove(this,"._change"),!Ct.test(this.nodeName)}}),K.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=J._data(n,e);s||n.addEventListener(t,i,!0),J._data(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=J._data(n,e)-1;s?J._data(n,e,s):(n.removeEventListener(t,i,!0),J._removeData(n,e))}}}),J.fn.extend({on:function(t,e,i,n,s){var o,l;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=u;else if(!n)return this;return 1===s&&(l=n,n=function(t){return J().off(t),l.apply(this,arguments)},n.guid=l.guid||(l.guid=J.guid++)),this.each(function(){J.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,J(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(!1===e||"function"==typeof e)&&(i=e,e=void 0),!1===i&&(i=u),this.each(function(){J.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?J.event.trigger(t,e,i,!0):void 0}});var Tt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Et=/ jQuery\d+="(?:null|\d+)"/g,Ot=new RegExp("<(?:"+Tt+")[\\s/>]","i"),jt=/^\s+/,At=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mt=/<([\w:]+)/,Dt=/<tbody/i,Lt=/<|&#?\w+;/,Xt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^$|\/(?:java|ecma)script/i,Ht=/^true\/(.*)/,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,$t={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:K.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ft=p(rt).appendChild(rt.createElement("div"));$t.optgroup=$t.option,$t.tbody=$t.tfoot=$t.colgroup=$t.caption=$t.thead,$t.th=$t.td,J.extend({clone:function(t,e,i){var n,s,o,l,r,a=J.contains(t.ownerDocument,t);if(K.html5Clone||J.isXMLDoc(t)||!Ot.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Ft.innerHTML=t.outerHTML,Ft.removeChild(o=Ft.firstChild)),!(K.noCloneEvent&&K.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(n=_(o),r=_(t),l=0;null!=(s=r[l]);++l)n[l]&&w(s,n[l]);if(e)if(i)for(r=r||_(t),n=n||_(o),l=0;null!=(s=r[l]);l++)x(s,n[l]);else x(t,o);return(n=_(o,"script")).length>0&&y(n,!a&&_(t,"script")),n=r=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,l,r,a,h,d,c=t.length,u=p(e),f=[],g=0;c>g;g++)if((o=t[g])||0===o)if("object"===J.type(o))J.merge(f,o.nodeType?[o]:o);else if(Lt.test(o)){for(r=r||u.appendChild(e.createElement("div")),a=(Mt.exec(o)||["",""])[1].toLowerCase(),d=$t[a]||$t._default,r.innerHTML=d[1]+o.replace(At,"<$1></$2>")+d[2],s=d[0];s--;)r=r.lastChild;if(!K.leadingWhitespace&&jt.test(o)&&f.push(e.createTextNode(jt.exec(o)[0])),!K.tbody)for(s=(o="table"!==a||Dt.test(o)?"<table>"!==d[1]||Dt.test(o)?0:r:r.firstChild)&&o.childNodes.length;s--;)J.nodeName(h=o.childNodes[s],"tbody")&&!h.childNodes.length&&o.removeChild(h);for(J.merge(f,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=u.lastChild}else f.push(e.createTextNode(o));for(r&&u.removeChild(r),K.appendChecked||J.grep(_(f,"input"),m),g=0;o=f[g++];)if((!n||-1===J.inArray(o,n))&&(l=J.contains(o.ownerDocument,o),r=_(u.appendChild(o),"script"),l&&y(r),i))for(s=0;o=r[s++];)Bt.test(o.type||"")&&i.push(o);return r=null,u},cleanData:function(t,e){for(var i,n,s,o,l=0,r=J.expando,a=J.cache,h=K.deleteExpando,d=J.event.special;null!=(i=t[l]);l++)if((e||J.acceptData(i))&&(s=i[r],o=s&&a[s])){if(o.events)for(n in o.events)d[n]?J.event.remove(i,n):J.removeEvent(i,n,o.handle);a[s]&&(delete a[s],h?delete i[r]:typeof i.removeAttribute!==_t?i.removeAttribute(r):i[r]=null,F.push(s))}}}),J.fn.extend({text:function(t){return xt(this,function(t){return void 0===t?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||rt).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){g(this,t).appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=g(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?J.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||J.cleanData(_(i)),i.parentNode&&(e&&J.contains(i.ownerDocument,i)&&y(_(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&J.cleanData(_(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&J.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return xt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Et,""):void 0;if(!("string"!=typeof t||Xt.test(t)||!K.htmlSerialize&&Ot.test(t)||!K.leadingWhitespace&&jt.test(t)||$t[(Mt.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(At,"<$1></$2>");try{for(;n>i;i++)1===(e=this[i]||{}).nodeType&&(J.cleanData(_(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(_(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=V.apply([],t);var i,n,s,o,l,r,a=0,h=this.length,d=this,c=h-1,u=t[0],f=J.isFunction(u);if(f||h>1&&"string"==typeof u&&!K.checkClone&&Pt.test(u))return this.each(function(i){var n=d.eq(i);f&&(t[0]=u.call(this,i,n.html())),n.domManip(t,e)});if(h&&(r=J.buildFragment(t,this[0].ownerDocument,!1,this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(s=(o=J.map(_(r,"script"),v)).length;h>a;a++)n=r,a!==c&&(n=J.clone(n,!0,!0),s&&J.merge(o,_(n,"script"))),e.call(this[a],n,a);if(s)for(l=o[o.length-1].ownerDocument,J.map(o,b),a=0;s>a;a++)n=o[a],Bt.test(n.type||"")&&!J._data(n,"globalEval")&&J.contains(l,n)&&(n.src?J._evalUrl&&J._evalUrl(n.src):J.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Rt,"")));r=i=null}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var i,n=0,s=[],o=J(t),l=o.length-1;l>=n;n++)i=n===l?this:this.clone(!0),J(o[n])[e](i),W.apply(s,i.get());return this.pushStack(s)}});var zt,Vt={};!function(){var t;K.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return(i=rt.getElementsByTagName("body")[0])&&i.style?(e=rt.createElement("div"),n=rt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==_t&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(rt.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var Wt,Ut,Gt=/^margin/,qt=new RegExp("^("+vt+")(?!px)[a-z%]+$","i"),Yt=/^(top|right|bottom|left)$/;t.getComputedStyle?(Wt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},Ut=function(t,e,i){var n,s,o,l,r=t.style;return i=i||Wt(t),l=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==l||J.contains(t.ownerDocument,t)||(l=J.style(t,e)),qt.test(l)&&Gt.test(e)&&(n=r.width,s=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=l,l=i.width,r.width=n,r.minWidth=s,r.maxWidth=o)),void 0===l?l:l+""}):rt.documentElement.currentStyle&&(Wt=function(t){return t.currentStyle},Ut=function(t,e,i){var n,s,o,l,r=t.style;return i=i||Wt(t),null==(l=i?i[e]:void 0)&&r&&r[e]&&(l=r[e]),qt.test(l)&&!Yt.test(e)&&(n=r.left,s=t.runtimeStyle,(o=s&&s.left)&&(s.left=t.currentStyle.left),r.left="fontSize"===e?"1em":l,l=r.pixelLeft+"px",r.left=n,o&&(s.left=o)),void 0===l?l:l+""||"auto"}),function(){function e(){var e,i,n,s;(i=rt.getElementsByTagName("body")[0])&&i.style&&(e=rt.createElement("div"),n=rt.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=l=!1,a=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,l="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,s=e.appendChild(rt.createElement("div")),s.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",s.style.marginRight=s.style.width="0",e.style.width="1px",a=!parseFloat((t.getComputedStyle(s,null)||{}).marginRight),e.removeChild(s)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=e.getElementsByTagName("td"),s[0].style.cssText="margin:0;border:0;padding:0;display:none",(r=0===s[0].offsetHeight)&&(s[0].style.display="",s[1].style.display="none",r=0===s[0].offsetHeight),i.removeChild(n))}var i,n,s,o,l,r,a;(i=rt.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(n=(s=i.getElementsByTagName("a")[0])&&s.style)&&(n.cssText="float:left;opacity:.5",K.opacity="0.5"===n.opacity,K.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===i.style.backgroundClip,K.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,J.extend(K,{reliableHiddenOffsets:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==l&&e(),l},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==a&&e(),a}}))}(),J.swap=function(t,e,i,n){var s,o,l={};for(o in e)l[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=l[o];return s};var Kt=/alpha\([^)]*\)/i,Jt=/opacity\s*=\s*([^)]*)/,Qt=/^(none|table(?!-c[ea]).+)/,Zt=new RegExp("^("+vt+")(.*)$","i"),te=new RegExp("^([+-])=("+vt+")","i"),ee={position:"absolute",visibility:"hidden",display:"block"},ie={letterSpacing:"0",fontWeight:"400"},ne=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Ut(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:K.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,l,r=J.camelCase(e),a=t.style;if(e=J.cssProps[r]||(J.cssProps[r]=I(a,r)),l=J.cssHooks[e]||J.cssHooks[r],void 0===i)return l&&"get"in l&&void 0!==(s=l.get(t,!1,n))?s:a[e];if("string"===(o=typeof i)&&(s=te.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(J.css(t,e)),o="number"),null!=i&&i==i&&("number"!==o||J.cssNumber[r]||(i+="px"),K.clearCloneStyle||""!==i||0!==e.indexOf("background")||(a[e]="inherit"),!(l&&"set"in l&&void 0===(i=l.set(t,i,n)))))try{a[e]=i}catch(t){}}},css:function(t,e,i,n){var s,o,l,r=J.camelCase(e);return e=J.cssProps[r]||(J.cssProps[r]=I(t.style,r)),(l=J.cssHooks[e]||J.cssHooks[r])&&"get"in l&&(o=l.get(t,!0,i)),void 0===o&&(o=Ut(t,e,n)),"normal"===o&&e in ie&&(o=ie[e]),""===i||i?(s=parseFloat(o),!0===i||J.isNumeric(s)?s||0:o):o}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,i,n){return i?Qt.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,ee,function(){return O(t,e,n)}):O(t,e,n):void 0},set:function(t,i,n){var s=n&&Wt(t);return T(0,i,n?E(t,e,n,K.boxSizing&&"border-box"===J.css(t,"boxSizing",!1,s),s):0)}}}),K.opacity||(J.cssHooks.opacity={get:function(t,e){return Jt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=J.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===J.trim(o.replace(Kt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=Kt.test(o)?o.replace(Kt,s):o+" "+s)}}),J.cssHooks.marginRight=k(K.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},Ut,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+bt[n]+e]=o[n]||o[n-2]||o[0];return s}},Gt.test(t)||(J.cssHooks[t+e].set=T)}),J.fn.extend({css:function(t,e){return xt(this,function(t,e,i){var n,s,o={},l=0;if(J.isArray(e)){for(n=Wt(t),s=e.length;s>l;l++)o[e[l]]=J.css(t,e[l],!1,n);return o}return void 0!==i?J.style(t,e,i):J.css(t,e)},t,e,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){yt(this)?J(this).show():J(this).hide()})}}),J.Tween=j,(j.prototype={constructor:j,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[i]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,i=j.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):j.propHooks._default.set(this),this}}).init.prototype=j.prototype,(j.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=j.prototype.init,J.fx.step={};var se,oe,le=/^(?:toggle|show|hide)$/,re=new RegExp("^(?:([+-])=|)("+vt+")([a-z%]*)$","i"),ae=/queueHooks$/,he=[function(t,e,i){var n,s,o,l,r,a,h,d=this,c={},u=t.style,f=t.nodeType&&yt(t),p=J._data(t,"fxshow");i.queue||(null==(r=J._queueHooks(t,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,J.queue(t,"fx").length||r.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===("none"===(h=J.css(t,"display"))?J._data(t,"olddisplay")||N(t.nodeName):h)&&"none"===J.css(t,"float")&&(K.inlineBlockNeedsLayout&&"inline"!==N(t.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",K.shrinkWrapBlocks()||d.always(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],le.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!p||void 0===p[n])continue;f=!0}c[n]=p&&p[n]||J.style(t,n)}else h=void 0;if(J.isEmptyObject(c))"inline"===("none"===h?N(t.nodeName):h)&&(u.display=h);else{p?"hidden"in p&&(f=p.hidden):p=J._data(t,"fxshow",{}),o&&(p.hidden=!f),f?J(t).show():d.done(function(){J(t).hide()}),d.done(function(){var e;J._removeData(t,"fxshow");for(e in c)J.style(t,e,c[e])});for(n in c)l=D(f?p[n]:0,n,d),n in p||(p[n]=l.start,f&&(l.end=l.start,l.start="width"===n||"height"===n?1:0))}}],de={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=re.exec(e),o=s&&s[3]||(J.cssNumber[t]?"":"px"),l=(J.cssNumber[t]||"px"!==o&&+n)&&re.exec(J.css(i.elem,t)),r=1,a=20;if(l&&l[3]!==o){o=o||l[3],s=s||[],l=+n||1;do{r=r||".5",l/=r,J.style(i.elem,t,l+o)}while(r!==(r=i.cur()/n)&&1!==r&&--a)}return s&&(l=i.start=+l||+n||0,i.unit=o,i.end=s[1]?l+(s[1]+1)*s[2]:+s[2]),i}]};J.Animation=J.extend(L,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],de[i]=de[i]||[],de[i].unshift(e)},prefilter:function(t,e){e?he.unshift(t):he.push(t)}}),J.speed=function(t,e,i){var n=t&&"object"==typeof t?J.extend({},t):{complete:i||!i&&e||J.isFunction(t)&&t,duration:t,easing:i&&e||e&&!J.isFunction(e)&&e};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(t,e,i,n){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=J.isEmptyObject(t),o=J.speed(e,i,n),l=function(){var e=L(this,J.extend({},t),o);(s||J._data(this,"finish"))&&e.stop(!0)};return l.finish=l,s||!1===o.queue?this.each(l):this.queue(o.queue,l)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=J.timers,l=J._data(this);if(s)l[s]&&l[s].stop&&n(l[s]);else for(s in l)l[s]&&l[s].stop&&ae.test(s)&&n(l[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&J.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=J._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=J.timers,l=n?n.length:0;for(i.finish=!0,J.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;l>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),J.each(["toggle","show","hide"],function(t,e){var i=J.fn[e];J.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(M(e,!0),t,n,s)}}),J.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),J.timers=[],J.fx.tick=function(){var t,e=J.timers,i=0;for(se=J.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||J.fx.stop(),se=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){oe||(oe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(oe),oe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,s;(e=rt.createElement("div")).setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],s=(i=rt.createElement("select")).appendChild(rt.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",K.getSetAttribute="t"!==e.className,K.style=/top/.test(n.getAttribute("style")),K.hrefNormalized="/a"===n.getAttribute("href"),K.checkOn=!!t.value,K.optSelected=s.selected,K.enctype=!!rt.createElement("form").enctype,i.disabled=!0,K.optDisabled=!s.disabled,(t=rt.createElement("input")).setAttribute("value",""),K.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),K.radioValue="t"===t.value}();var ce=/\r/g;J.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=J.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,J(this).val()):t)?s="":"number"==typeof s?s+="":J.isArray(s)&&(s=J.map(s,function(t){return null==t?"":t+""})),(e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=J.valHooks[s.type]||J.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(ce,""):null==i?"":i:void 0}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,l=o?null:[],r=o?s+1:n.length,a=0>s?r:o?s:0;r>a;a++)if(!(!(i=n[a]).selected&&a!==s||(K.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(e=J(i).val(),o)return e;l.push(e)}return l},set:function(t,e){for(var i,n,s=t.options,o=J.makeArray(e),l=s.length;l--;)if(n=s[l],J.inArray(J.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(t){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),s}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},K.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ue,fe,pe=J.expr.attrHandle,_e=/^(?:checked|selected)$/i,me=K.getSetAttribute,ge=K.input;J.fn.extend({attr:function(t,e){return xt(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===_t?J.prop(t,e,i):(1===o&&J.isXMLDoc(t)||(e=e.toLowerCase(),n=J.attrHooks[e]||(J.expr.match.bool.test(e)?fe:ue)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:null==(s=J.find.attr(t,e))?void 0:s:null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void J.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(ct);if(o&&1===t.nodeType)for(;i=o[s++];)n=J.propFix[i]||i,J.expr.match.bool.test(i)?ge&&me||!_e.test(i)?t[n]=!1:t[J.camelCase("default-"+i)]=t[n]=!1:J.attr(t,i,""),t.removeAttribute(me?i:n)},attrHooks:{type:{set:function(t,e){if(!K.radioValue&&"radio"===e&&J.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),fe={set:function(t,e,i){return!1===e?J.removeAttr(t,i):ge&&me||!_e.test(i)?t.setAttribute(!me&&J.propFix[i]||i,i):t[J.camelCase("default-"+i)]=t[i]=!0,i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var i=pe[e]||J.find.attr;pe[e]=ge&&me||!_e.test(e)?function(t,e,n){var s,o;return n||(o=pe[e],pe[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,pe[e]=o),s}:function(t,e,i){return i?void 0:t[J.camelCase("default-"+e)]?e.toLowerCase():null}}),ge&&me||(J.attrHooks.value={set:function(t,e,i){return J.nodeName(t,"input")?void(t.defaultValue=e):ue&&ue.set(t,e,i)}}),me||(ue={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},pe.id=pe.name=pe.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},J.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:ue.set},J.attrHooks.contenteditable={set:function(t,e,i){ue.set(t,""!==e&&e,i)}},J.each(["width","height"],function(t,e){J.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),K.style||(J.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var ve=/^(?:input|select|textarea|button|object)$/i,be=/^(?:a|area)$/i;J.fn.extend({prop:function(t,e){return xt(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return t=J.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),J.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,s,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return(1!==o||!J.isXMLDoc(t))&&(e=J.propFix[e]||e,s=J.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=J.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||be.test(t.nodeName)&&t.href?0:-1}}}}),K.hrefNormalized||J.each(["href","src"],function(t,e){J.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),K.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this}),K.enctype||(J.propFix.enctype="encoding");var ye=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,i,n,s,o,l,r=0,a=this.length,h="string"==typeof t&&t;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(ct)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ye," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");l=J.trim(n),i.className!==l&&(i.className=l)}return this},removeClass:function(t){var e,i,n,s,o,l,r=0,a=this.length,h=0===arguments.length||"string"==typeof t&&t;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(h)for(e=(t||"").match(ct)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ye," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");l=t?J.trim(n):"",i.className!==l&&(i.className=l)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(i){J(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=J(this),o=t.match(ct)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===_t||"boolean"===i)&&(this.className&&J._data(this,"__className__",this.className),this.className=this.className||!1===t?"":J._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ye," ").indexOf(e)>=0)return!0;return!1}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var xe=J.now(),we=/\?/,Ce=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;J.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,s=J.trim(e+"");return s&&!J.trim(s.replace(Ce,function(t,e,s,o){return i&&e&&(n=0),0===n?t:(i=s||e,n+=!o-!s,"")}))?Function("return "+s)():J.error("Invalid JSON: "+e)},J.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(t){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||J.error("Invalid XML: "+e),i};var Ne,ke,Ie=/#.*$/,Se=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ee=/^(?:GET|HEAD)$/,Oe=/^\/\//,je=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ae={},Me={},De="*/".concat("*");try{ke=location.href}catch(t){(ke=rt.createElement("a")).href="",ke=ke.href}Ne=je.exec(ke.toLowerCase())||[],J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ke,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ne[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":De,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,J.ajaxSettings),e):B(J.ajaxSettings,t)},ajaxPrefilter:X(Ae),ajaxTransport:X(Me),ajax:function(t,e){function i(t,e,i,n){var s,d,g,v,y,w=e;2!==b&&(b=2,r&&clearTimeout(r),h=void 0,l=n||"",x.readyState=t>0?4:0,s=t>=200&&300>t||304===t,i&&(v=function(t,e,i){for(var n,s,o,l,r=t.contents,a=t.dataTypes;"*"===a[0];)a.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(l in r)if(r[l]&&r[l].test(s)){a.unshift(l);break}if(a[0]in i)o=a[0];else{for(l in i){if(!a[0]||t.converters[l+" "+a[0]]){o=l;break}n||(n=l)}o=o||n}return o?(o!==a[0]&&a.unshift(o),i[o]):void 0}(c,x,i)),v=function(t,e,i,n){var s,o,l,r,a,h={},d=t.dataTypes.slice();if(d[1])for(l in t.converters)h[l.toLowerCase()]=t.converters[l];for(o=d.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!a&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a=o,o=d.shift())if("*"===o)o=a;else if("*"!==a&&a!==o){if(!(l=h[a+" "+o]||h["* "+o]))for(s in h)if((r=s.split(" "))[1]===o&&(l=h[a+" "+r[0]]||h["* "+r[0]])){!0===l?l=h[s]:!0!==h[s]&&(o=r[0],d.unshift(r[1]));break}if(!0!==l)if(l&&t.throws)e=l(e);else try{e=l(e)}catch(t){return{state:"parsererror",error:l?t:"No conversion from "+a+" to "+o}}}return{state:"success",data:e}}(c,v,x,s),s?(c.ifModified&&((y=x.getResponseHeader("Last-Modified"))&&(J.lastModified[o]=y),(y=x.getResponseHeader("etag"))&&(J.etag[o]=y)),204===t||"HEAD"===c.type?w="nocontent":304===t?w="notmodified":(w=v.state,d=v.data,g=v.error,s=!g)):(g=w,(t||!w)&&(w="error",0>t&&(t=0))),x.status=t,x.statusText=(e||w)+"",s?p.resolveWith(u,[d,w,x]):p.rejectWith(u,[x,w,g]),x.statusCode(m),m=void 0,a&&f.trigger(s?"ajaxSuccess":"ajaxError",[x,c,s?d:g]),_.fireWith(u,[x,w]),a&&(f.trigger("ajaxComplete",[x,c]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,l,r,a,h,d,c=J.ajaxSetup({},e),u=c.context||c,f=c.context&&(u.nodeType||u.jquery)?J(u):J.event,p=J.Deferred(),_=J.Callbacks("once memory"),m=c.statusCode||{},g={},v={},b=0,y="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!d)for(d={};e=Te.exec(l);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?l:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=v[i]=v[i]||t,g[t]=e),this},overrideMimeType:function(t){return b||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||y;return h&&h.abort(e),i(0,e),this}};if(p.promise(x).complete=_.add,x.success=x.done,x.error=x.fail,c.url=((t||c.url||ke)+"").replace(Ie,"").replace(Oe,Ne[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=J.trim(c.dataType||"*").toLowerCase().match(ct)||[""],null==c.crossDomain&&(n=je.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Ne[1]&&n[2]===Ne[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ne[3]||("http:"===Ne[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=J.param(c.data,c.traditional)),P(Ae,c,e,x),2===b)return x;(a=J.event&&c.global)&&0==J.active++&&J.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Ee.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(we.test(o)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=Se.test(o)?o.replace(Se,"$1_="+xe++):o+(we.test(o)?"&":"?")+"_="+xe++)),c.ifModified&&(J.lastModified[o]&&x.setRequestHeader("If-Modified-Since",J.lastModified[o]),J.etag[o]&&x.setRequestHeader("If-None-Match",J.etag[o])),(c.data&&c.hasContent&&!1!==c.contentType||e.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+De+"; q=0.01":""):c.accepts["*"]);for(s in c.headers)x.setRequestHeader(s,c.headers[s]);if(c.beforeSend&&(!1===c.beforeSend.call(u,x,c)||2===b))return x.abort();y="abort";for(s in{success:1,error:1,complete:1})x[s](c[s]);if(h=P(Me,c,e,x)){x.readyState=1,a&&f.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},c.timeout));try{b=1,h.send(g,i)}catch(t){if(!(2>b))throw t;i(-1,t)}}else i(-1,"No Transport");return x},getJSON:function(t,e,i){return J.get(t,e,i,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,i,n,s){return J.isFunction(i)&&(s=s||n,n=i,i=void 0),J.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},J.fn.extend({wrapAll:function(t){if(J.isFunction(t))return this.each(function(e){J(this).wrapAll(t.call(this,e))});if(this[0]){var e=J(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(i){J(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!K.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||J.css(t,"display"))},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var Le=/%20/g,Xe=/\[\]$/,Pe=/\r?\n/g,Be=/^(?:submit|button|image|reset|file)$/i,He=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var i,n=[],s=function(t,e){e=J.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){s(this.name,this.value)});else for(i in t)H(i,t[i],e,s);return n.join("&").replace(Le,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&He.test(this.nodeName)&&!Be.test(t)&&(this.checked||!wt.test(t))}).map(function(t,e){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:i.replace(Pe,"\r\n")}}).get()}}),J.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&R()||function(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}()}:R;var Re=0,$e={},Fe=J.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in $e)$e[t](void 0,!0)}),K.cors=!!Fe&&"withCredentials"in Fe,(Fe=K.ajax=!!Fe)&&J.ajaxTransport(function(t){if(!t.crossDomain||K.cors){var e;return{send:function(i,n){var s,o=t.xhr(),l=++Re;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)void 0!==i[s]&&o.setRequestHeader(s,i[s]+"");o.send(t.hasContent&&t.data||null),e=function(i,s){var r,a,h;if(e&&(s||4===o.readyState))if(delete $e[l],e=void 0,o.onreadystatechange=J.noop,s)4!==o.readyState&&o.abort();else{h={},r=o.status,"string"==typeof o.responseText&&(h.text=o.responseText);try{a=o.statusText}catch(t){a=""}r||!t.isLocal||t.crossDomain?1223===r&&(r=204):r=h.text?200:404}h&&n(r,a,h,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=$e[l]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=rt.head||J("head")[0]||rt.documentElement;return{send:function(n,s){(e=rt.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||s(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ze=[],Ve=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||J.expando+"_"+xe++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,l,r=!1!==e.jsonp&&(Ve.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ve.test(e.data)&&"data");return r||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Ve,"$1"+s):!1!==e.jsonp&&(e.url+=(we.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return l||J.error(s+" was not called"),l[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){l=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,ze.push(s)),l&&J.isFunction(o)&&o(l[0]),l=o=void 0}),"script"):void 0}),J.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||rt;var n=st.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=J.buildFragment([t],e,s),s&&s.length&&J(s).remove(),J.merge([],n.childNodes))};var We=J.fn.load;J.fn.load=function(t,e,i){if("string"!=typeof t&&We)return We.apply(this,arguments);var n,s,o,l=this,r=t.indexOf(" ");return r>=0&&(n=J.trim(t.slice(r,t.length)),t=t.slice(0,r)),J.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),l.length>0&&J.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){s=arguments,l.html(n?J("<div>").append(J.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){l.each(i,s||[t.responseText,e,t])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var Ue=t.document.documentElement;J.offset={setOffset:function(t,e,i){var n,s,o,l,r,a,h=J.css(t,"position"),d=J(t),c={};"static"===h&&(t.style.position="relative"),r=d.offset(),o=J.css(t,"top"),a=J.css(t,"left"),("absolute"===h||"fixed"===h)&&J.inArray("auto",[o,a])>-1?(n=d.position(),l=n.top,s=n.left):(l=parseFloat(o)||0,s=parseFloat(a)||0),J.isFunction(e)&&(e=e.call(t,i,r)),null!=e.top&&(c.top=e.top-r.top+l),null!=e.left&&(c.left=e.left-r.left+s),"using"in e?e.using.call(t,c):d.css(c)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},s=this[0],o=s&&s.ownerDocument;return o?(e=o.documentElement,J.contains(e,s)?(typeof s.getBoundingClientRect!==_t&&(n=s.getBoundingClientRect()),i=$(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===J.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(i=t.offset()),i.top+=J.css(t[0],"borderTopWidth",!0),i.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-J.css(n,"marginTop",!0),left:e.left-i.left-J.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ue;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||Ue})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);J.fn[t]=function(n){return xt(this,function(t,n,s){var o=$(t);return void 0===s?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?J(o).scrollLeft():s,i?s:J(o).scrollTop()):t[n]=s)},t,n,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=k(K.pixelPosition,function(t,i){return i?(i=Ut(t,e),qt.test(i)?J(t).position()[e]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){J.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),l=i||(!0===n||!0===s?"margin":"border");return xt(this,function(e,i,n){var s;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?J.css(e,i,l):J.style(e,i,n,l)},e,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Ge=t.jQuery,qe=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=qe),e&&t.jQuery===J&&(t.jQuery=Ge),J},typeof e===_t&&(t.jQuery=t.$=J),J}),function(t,e){function i(e,i){var s,o,l,r=e.nodeName.toLowerCase();return"area"===r?(s=e.parentNode,o=s.name,!(!e.href||!o||"map"!==s.nodeName.toLowerCase())&&(!!(l=t("img[usemap=#"+o+"]")[0])&&n(l))):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,s=t(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(s,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),l={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?l["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,s){return"number"!=typeof e?l["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,s)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(t){}s(e)},t.widget=function(e,i,n){var s,o,l,r,a={},h=e.split(".")[0];e=e.split(".")[1],s=h+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[h]=t[h]||{},o=t[h][e],l=t[h][e]=function(t,e){if(!this._createWidget)return new l(t,e);arguments.length&&this._createWidget(t,e)},t.extend(l,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(r=new i).options=t.widget.extend({},r.options),t.each(n,function(e,n){t.isFunction(n)?a[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}():a[e]=n}),l.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},a,{constructor:l,namespace:h,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,l,i._proto)}),delete o._childConstructors):i._childConstructors.push(l),t.widget.bridge(e,l)},t.widget.extend=function(e){for(var i,s,o=n.call(arguments,1),l=0,r=o.length;l<r;l++)for(i in o[l])s=o[l][i],o[l].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var l="string"==typeof o,r=n.call(arguments,1),a=this;return o=!l&&r.length?t.widget.extend.apply(null,[o].concat(r)):o,l?this.each(function(){var i,n=t.data(this,s);return n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r))!==n&&void 0!==i?(a=i&&i.jquery?a.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():t.data(this,s,new i(o,this))}),a}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,o,l=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(l={},n=e.split("."),e=n.shift(),n.length){for(s=l[e]=t.widget.extend({},this.options[e]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];l[e]=i}return this._setOptions(l),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,l){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof l?o[l]:l).apply(o,arguments)}"string"!=typeof l&&(r.guid=l.guid=l.guid||r.guid||t.guid++);var a=n.match(/^(\w+)\s*(.*)$/),h=a[1]+o.eventNamespace,d=a[2];d?s.delegate(d,h,r):i.bind(h,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,l=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(l)&&!1===l.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var l,r=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),l=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),l&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t,e){var i=!1;t(document).mouseup(function(){i=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!i){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),i=!0,!0))}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var s,o=Math.max,l=Math.abs,r=Math.round,a=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==s)return s;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),e=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),s=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]);return{element:i,isWindow:n,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var s,u,p,_,m,g,v=t(e.of),b=t.position.getWithinInfo(e.within),y=t.position.getScrollInfo(b),x=(e.collision||"flip").split(" "),w={};return g=function(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(v),v[0].preventDefault&&(e.at="left top"),u=g.width,p=g.height,_=g.offset,m=t.extend({},_),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",t=d.exec(n[0]),i=d.exec(n[1]),w[this]=[t?t[0]:0,i?i[0]:0],e[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?m.left+=u:"center"===e.at[0]&&(m.left+=u/2),"bottom"===e.at[1]?m.top+=p:"center"===e.at[1]&&(m.top+=p/2),s=i(w.at,u,p),m.left+=s[0],m.top+=s[1],this.each(function(){var a,h,d=t(this),c=d.outerWidth(),f=d.outerHeight(),g=n(this,"marginLeft"),C=n(this,"marginTop"),N=c+g+n(this,"marginRight")+y.width,k=f+C+n(this,"marginBottom")+y.height,I=t.extend({},m),S=i(w.my,d.outerWidth(),d.outerHeight());"right"===e.my[0]?I.left-=c:"center"===e.my[0]&&(I.left-=c/2),"bottom"===e.my[1]?I.top-=f:"center"===e.my[1]&&(I.top-=f/2),I.left+=S[0],I.top+=S[1],t.support.offsetFractions||(I.left=r(I.left),I.top=r(I.top)),a={marginLeft:g,marginTop:C},t.each(["left","top"],function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](I,{targetWidth:u,targetHeight:p,elemWidth:c,elemHeight:f,collisionPosition:a,collisionWidth:N,collisionHeight:k,offset:[s[0]+S[0],s[1]+S[1]],my:e.my,at:e.at,within:b,elem:d})}),e.using&&(h=function(t){var i=_.left-I.left,n=i+u-c,s=_.top-I.top,r=s+p-f,a={target:{element:v,left:_.left,top:_.top,width:u,height:p},element:{element:d,left:I.left,top:I.top,width:c,height:f},horizontal:n<0?"left":i>0?"right":"center",vertical:r<0?"top":s>0?"bottom":"middle"};u<c&&l(i+n)<u&&(a.horizontal="center"),p<f&&l(s+r)<p&&(a.vertical="middle"),o(l(i),l(n))>o(l(s),l(r))?a.important="horizontal":a.important="vertical",e.using.call(this,t,a)}),d.offset(t.extend(I,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,l=n.width,r=t.left-e.collisionPosition.marginLeft,a=s-r,h=r+e.collisionWidth-l-s;e.collisionWidth>l?a>0&&h<=0?(i=t.left+a+e.collisionWidth-l-s,t.left+=a-i):t.left=h>0&&a<=0?s:a>h?s+l-e.collisionWidth:s:a>0?t.left+=a:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,l=e.within.height,r=t.top-e.collisionPosition.marginTop,a=s-r,h=r+e.collisionHeight-l-s;e.collisionHeight>l?a>0&&h<=0?(i=t.top+a+e.collisionHeight-l-s,t.top+=a-i):t.top=h>0&&a<=0?s:a>h?s+l-e.collisionHeight:s:a>0?t.top+=a:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,r=s.width,a=s.isWindow?s.scrollLeft:s.offset.left,h=t.left-e.collisionPosition.marginLeft,d=h-a,c=h+e.collisionWidth-r-a,u="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];d<0?((i=t.left+u+f+p+e.collisionWidth-r-o)<0||i<l(d))&&(t.left+=u+f+p):c>0&&((n=t.left-e.collisionPosition.marginLeft+u+f+p-a)>0||l(n)<c)&&(t.left+=u+f+p)},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,r=s.height,a=s.isWindow?s.scrollTop:s.offset.top,h=t.top-e.collisionPosition.marginTop,d=h-a,c=h+e.collisionHeight-r-a,u="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];d<0?(n=t.top+u+f+p+e.collisionHeight-r-o,t.top+u+f+p>d&&(n<0||n<l(d))&&(t.top+=u+f+p)):c>0&&(i=t.top-e.collisionPosition.marginTop+u+f+p-a,t.top+u+f+p>c&&(i>0||l(i)<c)&&(t.top+=u+f+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,o,l=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(l?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)e.style[o]=n[o];e.appendChild(r),(i=l||document.documentElement).insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=t(r).offset().left,t.support.offsetFractions=s>10&&s<11,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t,e){var i=0,n={},s={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var e=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),e.collapsible||!1!==e.active&&null!=e.active||(e.active=0),this._processPanels(),e.active<0&&(e.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():t(),content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)):this._activate(e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,n=this.headers.length,s=this.headers.index(e.target),o=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(t(e.target).attr("tabIndex",-1),t(o).attr("tabIndex",0),o.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e=this.options;this._processPanels(),!1===e.active&&!0===e.collapsible||!this.headers.length?(e.active=!1,this.active=t()):!1===e.active?this._activate(0):this.active.length&&!t.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(e.active=!1,this.active=t()):this._activate(Math.max(0,e.active-1)):e.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var e,n=this.options,s=n.heightStyle,o=this.element.parent(),l=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(e){var i=t(this),n=i.attr("id"),s=i.next(),o=s.attr("id");n||(n=l+"-header-"+e,i.attr("id",n)),o||(o=l+"-panel-"+e,s.attr("id",o)),i.attr("aria-controls",o),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(e=o.height(),this.element.siblings(":visible").each(function(){var i=t(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(e-=i.outerHeight(!0))}),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={keydown:"_keydown"};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget),o=s[0]===n[0],l=o&&i.collapsible,r=l?t():s.next(),a={oldHeader:n,oldPanel:n.next(),newHeader:l?t():s,newPanel:r};e.preventDefault(),o&&!i.collapsible||!1===this._trigger("beforeActivate",e,a)||(i.active=!l&&this.headers.index(s),this.active=o?t():s,this._toggle(a),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,n=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,e):(n.hide(),i.show(),this._toggleComplete(e)),n.attr({"aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(t,e,i){var o,l,r,a=this,h=0,d=t.length&&(!e.length||t.index()<e.index()),c=this.options.animate||{},u=d&&c.down||c,f=function(){a._toggleComplete(i)};return"number"==typeof u&&(r=u),"string"==typeof u&&(l=u),l=l||u.easing||c.easing,r=r||u.duration||c.duration,e.length?t.length?(o=t.show().outerHeight(),e.animate(n,{duration:r,easing:l,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(s,{duration:r,easing:l,complete:f,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?h+=i.now:"content"!==a.options.heightStyle&&(i.now=Math.round(o-e.outerHeight()-h),h=0)}})):e.animate(n,r,l,f):t.animate(s,r,l,f)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}})}(jQuery),function(t,e){t.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,l="input"===s;this.isMultiLine=!!o||!l&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||l?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){if(n)return n=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t,e){var i,n="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},l=function(e){var i=e.name,n=e.form,s=t([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?t(n).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),s};t.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,s=this.options,r="checkbox"===this.type||"radio"===this.type,a=r?"":"ui-state-active";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===i&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||t(this).removeClass(a)}).bind("click"+this.eventNamespace,function(t){s.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){e.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled)return!1;t(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var i=e.element[0];l(i).not(i).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(s.disabled)return!1;t(this).addClass("ui-state-active"),i=this,e.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(s.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(s.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" ui-state-active "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return this.element.prop("disabled",!!e),void(e&&this.buttonElement.removeClass("ui-state-focus"));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(s),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,o=n.primary&&n.secondary,l=[];n.primary||n.secondary?(this.options.text&&l.push("ui-button-text-icon"+(o?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(l.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):l.push("ui-button-text-only"),e.addClass(l.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),t.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t,e){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(i,"mouseout",function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){t.datepicker._isDisabledDatepicker(o.inline?e.parent()[0]:o.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))})}function s(e,i){t.extend(e,i);for(var n in i)null==i[n]&&(e[n]=i[n]);return e}t.extend(t.ui,{datepicker:{version:"1.10.4"}});var o,l="datepicker";t.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return s(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var n,s,o;s="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(o=this._newInst(t(e),s)).settings=t.extend({},i||{}),"input"===n?this._connectDatepicker(e,o):s&&this._inlineDatepicker(e,o)},_newInst:function(e,i){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var n=t(e);i.append=t([]),i.trigger=t([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),t.data(e,l,i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var n,s,o,l=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),l&&(i.append=t("<span class='"+this._appendClass+"'>"+l+"</span>"),e[r?"before":"after"](i.append)),e.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(s=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:s,title:s}):s)),e[r?"before":"after"](i.trigger),i.trigger.click(function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,n,s,o=new Date(2009,11,20),l=this._get(t,"dateFormat");l.match(/[DM]/)&&(e=function(t){for(i=0,n=0,s=0;s<t.length;s++)t[s].length>i&&(i=t[s].length,n=s);return n},o.setMonth(e(this._get(t,l.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,l.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var n=t(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),t.data(e,l,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,n,o,r){var a,h,d,c,u,f=this._dialogInst;return f||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),t("body").append(this._dialogInput),(f=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},t.data(this._dialogInput[0],l,f)),s(f.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(f,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(h=document.documentElement.clientWidth,d=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+c,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],l,f),this},_destroyDatepicker:function(e){var i,n=t(e),s=t.data(e,l);n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,l),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,l);s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,n,s=t(e),o=t.data(e,l);s.hasClass(this.markerClassName)&&("input"===(i=e.nodeName.toLowerCase())?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,l)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,n){var o,l,r,a,h=this._getInst(e);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null;o=i||{},"string"==typeof i&&((o={})[i]=n),h&&(this._curInst===h&&this._hideDatepicker(),l=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),a=this._getMinMaxDate(h,"max"),s(h.settings,o),null!==r&&void 0!==o.dateFormat&&void 0===o.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==a&&void 0!==o.dateFormat&&void 0===o.maxDate&&(h.settings.maxDate=this._formatDate(h,a)),"disabled"in o&&(o.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,l),this._updateAlternate(h),this._updateDatepicker(h))},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,n,s,o=t.datepicker._getInst(e.target),l=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),l=!1;break;case 13:return(s=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv))[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,s[0]),(i=t.datepicker._get(o,"onSelect"))?(n=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),l=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),l=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),l=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),l=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),l=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),l=e.ctrlKey||e.metaKey;break;default:l=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):l=!1;l&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,n,s=t.datepicker._getInst(e.target);if(t.datepicker._get(s,"constrainInput"))return i=t.datepicker._possibleChars(t.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(e){var i=t.datepicker._getInst(e.target);if(i.input.val()!==i.lastVal)try{t.datepicker.parseDate(t.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,t.datepicker._getFormatConfig(i))&&(t.datepicker._setDateFromField(i),t.datepicker._updateAlternate(i),t.datepicker._updateDatepicker(i))}catch(t){}return!0},_showDatepicker:function(e){if("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var i,n,o,l,r,a,h;i=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==i&&(t.datepicker._curInst.dpDiv.stop(!0,!0),i&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),!1!==(o=(n=t.datepicker._get(i,"beforeShow"))?n.apply(e,[e,i]):{})&&(s(i.settings,o),i.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(i),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),l=!1,t(e).parents().each(function(){return!(l|="fixed"===t(this).css("position"))}),r={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(i),r=t.datepicker._checkOffset(i,r,l),i.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":l?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(a=t.datepicker._get(i,"showAnim"),h=t.datepicker._get(i,"duration"),i.dpDiv.zIndex(t(e).zIndex()+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[a]?i.dpDiv.show(a,t.datepicker._get(i,"showOptions"),h):i.dpDiv[a||"show"](a?h:null),t.datepicker._shouldFocusInput(i)&&i.input.focus(),t.datepicker._curInst=i))}},_updateDatepicker:function(e){this.maxRows=4,o=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(e),s=n[1];e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,n){var s=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),l=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(n?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?s-l:0,i.left-=n&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=n&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>a&&a>s?Math.abs(i.left+s-a):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,n=this._getInst(e),s=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[s?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,n,s,o,r=this._curInst;!r||e&&r!==t.data(e,l)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),s=function(){t.datepicker._tidyDialog(r)},t.effects&&(t.effects.effect[i]||t.effects[i])?r.dpDiv.hide(i,t.datepicker._get(r,"showOptions"),n,s):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,(o=this._get(r,"onClose"))&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),n=t.datepicker._getInst(i[0]);(i[0].id===t.datepicker._mainDivId||0!==i.parents("#"+t.datepicker._mainDivId).length||i.hasClass(t.datepicker.markerClassName)||i.closest("."+t.datepicker._triggerClass).length||!t.datepicker._datepickerShowing||t.datepicker._inDialog&&t.blockUI)&&(!i.hasClass(t.datepicker.markerClassName)||t.datepicker._curInst===n)||t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,n){var s=t(e),o=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var i,n=t(e),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(e,i,n){var s=t(e),o=this._getInst(s[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(s)},_selectDay:function(e,i,n,s){var o,l=t(e);t(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(l[0])||((o=this._getInst(l[0])).selectedDay=o.currentDay=t("a",s).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var n,s=t(e),o=this._getInst(s[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var i,n,s,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e)),t(o).each(function(){t(this).val(s)}))},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,n){if(null==e||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var s,o,l,r,a=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),c=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,p=(n?n.monthNames:null)||this._defaults.monthNames,_=-1,m=-1,g=-1,v=-1,b=!1,y=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},x=function(t){var e=y(t),n="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=i.substring(a).match(s);if(!o)throw"Missing number at position "+a;return a+=o[0].length,parseInt(o[0],10)},w=function(e,n,s){var o=-1,l=t.map(y(e)?s:n,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(l,function(t,e){var n=e[1];if(i.substr(a,n.length).toLowerCase()===n.toLowerCase())return o=e[0],a+=n.length,!1}),-1!==o)return o+1;throw"Unknown name at position "+a},C=function(){if(i.charAt(a)!==e.charAt(s))throw"Unexpected literal at position "+a;a++};for(s=0;s<e.length;s++)if(b)"'"!==e.charAt(s)||y("'")?C():b=!1;else switch(e.charAt(s)){case"d":g=x("d");break;case"D":w("D",c,u);break;case"o":v=x("o");break;case"m":m=x("m");break;case"M":m=w("M",f,p);break;case"y":_=x("y");break;case"@":_=(r=new Date(x("@"))).getFullYear(),m=r.getMonth()+1,g=r.getDate();break;case"!":_=(r=new Date((x("!")-this._ticksTo1970)/1e4)).getFullYear(),m=r.getMonth()+1,g=r.getDate();break;case"'":y("'")?C():b=!0;break;default:C()}if(a<i.length&&(l=i.substr(a),!/^\s+/.test(l)))throw"Extra/unparsed characters found in date: "+l;if(-1===_?_=(new Date).getFullYear():_<100&&(_+=(new Date).getFullYear()-(new Date).getFullYear()%100+(_<=d?0:-100)),v>-1)for(m=1,g=v;;){if(o=this._getDaysInMonth(_,m-1),g<=o)break;m++,g-=o}if((r=this._daylightSavingAdjust(new Date(_,m-1,g))).getFullYear()!==_||r.getMonth()+1!==m||r.getDate()!==g)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,a=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},h=function(t,e,i){var n=""+e;if(a(t))for(;n.length<i;)n="0"+n;return n},d=function(t,e,i,n){return a(t)?n[e]:i[e]},c="",u=!1;if(e)for(n=0;n<t.length;n++)if(u)"'"!==t.charAt(n)||a("'")?c+=t.charAt(n):u=!1;else switch(t.charAt(n)){case"d":c+=h("d",e.getDate(),2);break;case"D":c+=d("D",e.getDay(),s,o);break;case"o":c+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=h("m",e.getMonth()+1,2);break;case"M":c+=d("M",e.getMonth(),l,r);break;case"y":c+=a("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":u=!0;break;default:c+=t.charAt(n)}return c},_possibleChars:function(t){var e,i="",n=!1,s=function(i){var n=e+1<t.length&&t.charAt(e+1)===i;return n&&e++,n};for(e=0;e<t.length;e++)if(n)"'"!==t.charAt(e)||s("'")?i+=t.charAt(e):n=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),n=t.lastVal=t.input?t.input.val():null,s=this._getDefaultDate(t),o=s,l=this._getFormatConfig(t);try{o=this.parseDate(i,n,l)||s}catch(t){n=e?"":n}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=n?o.getDate():0,t.currentMonth=n?o.getMonth():0,t.currentYear=n?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,n){var s=null==i||""===i?n:"string"==typeof i?function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(t){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,s=n.getFullYear(),o=n.getMonth(),l=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=r.exec(i);a;){switch(a[2]||"d"){case"d":case"D":l+=parseInt(a[1],10);break;case"w":case"W":l+=7*parseInt(a[1],10);break;case"m":case"M":o+=parseInt(a[1],10),l=Math.min(l,t.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(a[1],10),l=Math.min(l,t.datepicker._getDaysInMonth(s,o))}a=r.exec(i)}return new Date(s,o,l)}(i):"number"==typeof i?isNaN(i)?n:function(t){var e=new Date;return e.setDate(e.getDate()+t),e}(i):new Date(i.getTime());return(s=s&&"Invalid Date"===s.toString()?n:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var n=!e,s=t.selectedMonth,o=t.selectedYear,l=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=l.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=l.getMonth(),t.drawYear=t.selectedYear=t.currentYear=l.getFullYear(),s===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(n?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(n,-i,"M")},next:function(){t.datepicker._adjustDate(n,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(n)},selectDay:function(){return t.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(n,this,"Y"),!1}};t(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,n,s,o,l,r,a,h,d,c,u,f,p,_,m,g,v,b,y,x,w,C,N,k,I,S,T,E,O,j,A,M,D,L,X,P,B,H,R=new Date,$=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),F=this._get(t,"isRTL"),z=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),W=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),G=this._get(t,"showCurrentAtPos"),q=this._get(t,"stepMonths"),Y=1!==U[0]||1!==U[1],K=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-G,tt=t.drawYear;if(Z<0&&(Z+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=J&&e<J?J:e;this._daylightSavingAdjust(new Date(tt,Z,1))>e;)--Z<0&&(Z=11,tt--);for(t.drawMonth=Z,t.drawYear=tt,i=this._get(t,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(tt,Z-q,1)),this._getFormatConfig(t)):i,n=this._canAdjustMonth(t,-1,tt,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+i+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"e":"w")+"'>"+i+"</span></a>",s=this._get(t,"nextText"),s=W?this.formatDate(s,this._daylightSavingAdjust(new Date(tt,Z+q,1)),this._getFormatConfig(t)):s,o=this._canAdjustMonth(t,1,tt,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+s+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(F?"w":"e")+"'>"+s+"</span></a>",l=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?K:$,l=W?this.formatDate(l,r,this._getFormatConfig(t)):l,a=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(F?a:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+l+"</button>":"")+(F?"":a)+"</div>":"",d=parseInt(this._get(t,"firstDay"),10),d=isNaN(d)?0:d,c=this._get(t,"showWeek"),u=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),_=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),g=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",w=0;w<U[0];w++){for(C="",this.maxRows=4,N=0;N<U[1];N++){if(k=this._daylightSavingAdjust(new Date(tt,Z,t.selectedDay)),I=" ui-corner-all",S="",Y){if(S+="<div class='ui-datepicker-group",U[1]>1)switch(N){case 0:S+=" ui-datepicker-group-first",I=" ui-corner-"+(F?"right":"left");break;case U[1]-1:S+=" ui-datepicker-group-last",I=" ui-corner-"+(F?"left":"right");break;default:S+=" ui-datepicker-group-middle",I=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===w?F?o:n:"")+(/all|right/.test(I)&&0===w?F?n:o:"")+this._generateMonthYearHeader(t,Z,tt,J,Q,w>0||N>0,p,_)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=c?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",x=0;x<7;x++)E=(x+d)%7,T+="<th"+((x+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[E]+"'>"+f[E]+"</span></th>";for(S+=T+"</tr></thead><tbody>",O=this._getDaysInMonth(tt,Z),tt===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,O)),j=(this._getFirstDayOfMonth(tt,Z)-d+7)%7,A=Math.ceil((j+O)/7),M=Y&&this.maxRows>A?this.maxRows:A,this.maxRows=M,D=this._daylightSavingAdjust(new Date(tt,Z,1-j)),L=0;L<M;L++){for(S+="<tr>",X=c?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(D)+"</td>":"",x=0;x<7;x++)P=m?m.apply(t.input?t.input[0]:null,[D]):[!0,""],H=(B=D.getMonth()!==Z)&&!v||!P[0]||J&&D<J||Q&&D>Q,X+="<td class='"+((x+d+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(D.getTime()===k.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===D.getTime()&&b.getTime()===k.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!g?"":" "+P[1]+(D.getTime()===K.getTime()?" "+this._currentClass:"")+(D.getTime()===$.getTime()?" ui-datepicker-today":""))+"'"+(B&&!g||!P[2]?"":" title='"+P[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+D.getMonth()+"' data-year='"+D.getFullYear()+"'")+">"+(B&&!g?"&#xa0;":H?"<span class='ui-state-default'>"+D.getDate()+"</span>":"<a class='ui-state-default"+(D.getTime()===$.getTime()?" ui-state-highlight":"")+(D.getTime()===K.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+"' href='#'>"+D.getDate()+"</a>")+"</td>",D.setDate(D.getDate()+1),D=this._daylightSavingAdjust(D);S+=X+"</tr>"}++Z>11&&(Z=0,tt++),C+=S+="</tbody></table>"+(Y?"</div>"+(U[0]>0&&N===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=C}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,n,s,o,l,r){var a,h,d,c,u,f,p,_,m=this._get(t,"changeMonth"),g=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+l[e]+"</span>";else{for(a=n&&n.getFullYear()===i,h=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!a||d>=n.getMonth())&&(!h||d<=s.getMonth())&&(y+="<option value='"+d+"'"+(d===e?" selected='selected'":"")+">"+r[d]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&g?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!g)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(c=this._get(t,"yearRange").split(":"),u=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?u+parseInt(t,10):parseInt(t,10);return isNaN(e)?u:e})(c[0]),_=Math.max(p,f(c[1]||"")),p=n?Math.max(p,n.getFullYear()):p,_=s?Math.min(_,s.getFullYear()):_,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=_;p++)t.yearshtml+="<option value='"+p+"'"+(p===i?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&g?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var n=t.drawYear+("Y"===i?e:0),s=t.drawMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(n,s))+("D"===i?e:0),l=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(n,s,o)));t.selectedDay=l.getDate(),t.drawMonth=t.selectedMonth=l.getMonth(),t.drawYear=t.selectedYear=l.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),n=this._getMinMaxDate(t,"max"),s=i&&e<i?i:e;return n&&s>n?n:s},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,n){var s=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,n+(e<0?e:s[0]*s[1]),1));return e<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,n,s=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),l=null,r=null,a=this._get(t,"yearRange");return a&&(i=a.split(":"),n=(new Date).getFullYear(),l=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(l+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||e.getTime()>=s.getTime())&&(!o||e.getTime()<=o.getTime())&&(!l||e.getFullYear()>=l)&&(!r||e.getFullYear()<=r)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,n){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var s=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(n,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),s,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).mousedown(t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new i,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.10.4"}(jQuery),function(t,e){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var i,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e)){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{(i=this.document[0].activeElement)&&"body"!==i.nodeName.toLowerCase()&&t(i).blur()}catch(t){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!e&&this._trigger("focus",t),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function i(){var e=this.document[0].activeElement;this.uiDialog[0]===e||t.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===t.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");e.target!==s[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(s.focus(1),e.preventDefault()):(n.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(i)||t.isArray(i)&&!i.length?this.uiDialog.removeClass("ui-dialog-buttons"):(t.each(i,function(i,n){var s,o;n=t.isFunction(n)?{click:n,text:i}:n,n=t.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(e.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,t("<button></button>",n).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){t(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,e(s))},drag:function(t,n){i._trigger("drag",t,e(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var i=this,n=this.options,s=n.resizable,o=this.uiDialog.css("position"),l="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:l,start:function(n,s){t(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,e(s))},resize:function(t,n){i._trigger("resize",t,e(n))},stop:function(s,o){n.height=t(this).height(),n.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(e){var s=this,o=!1,l={};t.each(e,function(t,e){s._setOption(t,e),t in i&&(o=!0),t in n&&(l[t]=e)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",l)},_setOption:function(t,e){var i,n,s=this.uiDialog;"dialogClass"===t&&s.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((i=s.is(":data(ui-draggable)"))&&!e&&s.draggable("destroy"),!i&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((n=s.is(":data(ui-resizable)"))&&!e&&s.resizable("destroy"),n&&"string"==typeof e&&s.resizable("option","handles",e),n||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),e=Math.max(0,n.minHeight-t),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none","auto"===n.height?this.element.css({minHeight:e,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!t(e.target).closest(".ui-dialog").length||!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,i=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){e._allowInteraction(n)||(n.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,!1!==t.uiBackCompat&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(n=i.split?i.split(" "):[i[0],i[1]]).length&&(n[1]=n[0]),t.each(["left","top"],function(t,e){+n[t]===n[t]&&(s[t]=n[t],n[t]=e)}),i={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),i=t.extend({},t.ui.dialog.prototype.options.position,i)):i=t.ui.dialog.prototype.options.position,(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),e||this.uiDialog.hide()}})}(jQuery),function(t,e){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!t.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1)},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(n=(i=t(s.containment))[0])&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i)):this.containment=s.containment:this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,s,o,l=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(a=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(a=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),l.grid&&(s=l.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-l.grid[1]:s+l.grid[1]:s,o=l.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX,a=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-l.grid[0]:o+l.grid[0]:o)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),s=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var n=t(this).data("ui-draggable"),s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i){var n=t(this).data("ui-draggable"),s=this;t.each(n.sortables,function(){var o=!1,l=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==l&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(l.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),!1!==s&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,s,o,l,r,a,h,d,c,u,f=t(this).data("ui-draggable"),p=f.options,_=p.snapTolerance,m=i.offset.left,g=m+f.helperProportions.width,v=i.offset.top,b=v+f.helperProportions.height;for(c=f.snapElements.length-1;c>=0;c--)a=(r=f.snapElements[c].left)+f.snapElements[c].width,d=(h=f.snapElements[c].top)+f.snapElements[c].height,g<r-_||m>a+_||b<h-_||v>d+_||!t.contains(f.snapElements[c].item.ownerDocument,f.snapElements[c].item)?(f.snapElements[c].snapping&&f.options.snap.release&&f.options.snap.release.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[c].item})),f.snapElements[c].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(h-b)<=_,s=Math.abs(d-v)<=_,o=Math.abs(r-g)<=_,l=Math.abs(a-m)<=_,n&&(i.position.top=f._convertPositionTo("relative",{top:h-f.helperProportions.height,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:r-f.helperProportions.width}).left-f.margins.left),l&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a}).left-f.margins.left)),u=n||s||o||l,"outer"!==p.snapMode&&(n=Math.abs(h-v)<=_,s=Math.abs(d-b)<=_,o=Math.abs(r-m)<=_,l=Math.abs(a-g)<=_,n&&(i.position.top=f._convertPositionTo("relative",{top:h,left:0}).top-f.margins.top),s&&(i.position.top=f._convertPositionTo("relative",{top:d-f.helperProportions.height,left:0}).top-f.margins.top),o&&(i.position.left=f._convertPositionTo("relative",{top:0,left:r}).left-f.margins.left),l&&(i.position.left=f._convertPositionTo("relative",{top:0,left:a-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[c].snapping&&(n||s||o||l||u)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,e,t.extend(f._uiHash(),{snapItem:f.snapElements[c].item})),f.snapElements[c].snapping=n||s||o||l||u)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&t<e+i}t.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return e||(e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});e=arguments[0]},t.ui.ddmanager.droppables[i.scope]=t.ui.ddmanager.droppables[i.scope]||[],t.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];e<i.length;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance))return s=!0,!1}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,e,n){if(!e.offset)return!1;var s,o,l=(t.positionAbs||t.position.absolute).left,r=(t.positionAbs||t.position.absolute).top,a=l+t.helperProportions.width,h=r+t.helperProportions.height,d=e.offset.left,c=e.offset.top,u=d+e.proportions().width,f=c+e.proportions().height;switch(n){case"fit":return d<=l&&a<=u&&c<=r&&h<=f;case"intersect":return d<l+t.helperProportions.width/2&&a-t.helperProportions.width/2<u&&c<r+t.helperProportions.height/2&&h-t.helperProportions.height/2<f;case"pointer":return s=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,o=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,i(o,c,e.proportions().height)&&i(s,d,e.proportions().width);case"touch":return(r>=c&&r<=f||h>=c&&h<=f||r<c&&h>f)&&(l>=d&&l<=u||a>=d&&a<=u||l<d&&a>u);default:return!1}},t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,s,o=t.ui.ddmanager.droppables[e.options.scope]||[],l=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<o.length;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(s=0;s<r.length;s++)if(r[s]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===l&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,o,l=t.ui.intersect(e,this,this.options.tolerance),r=!l&&this.isover?"isout":l&&!this.isover?"isover":null;r&&(this.options.greedy&&(s=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===s})).length&&((n=t.data(o[0],"ui-droppable")).greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t,e){t.effects={effect:{}},function(t,e){function i(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function n(e){var i=a(),n=i._rgba=[];return e=e.toLowerCase(),f(r,function(t,s){var o,l=s.re.exec(e),r=l&&s.parse(l),a=s.space||"rgba";if(r)return o=i[a](r),i[h[a].cache]=o[h[a].cache],n=i._rgba=o._rgba,!1}),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),i):o[e]}function s(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var o,l=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],a=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=a.support={},u=t("<p>")[0],f=t.each;u.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=u.style.backgroundColor.indexOf("rgba")>-1,f(h,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),a.fn=t.extend(a.prototype,{parse:function(e,s,l,r){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(s),s=void 0);var d=this,c=t.type(e),u=this._rgba=[];return void 0!==s&&(e=[e,s,l,r],c="array"),"string"===c?this.parse(n(e)||o._default):"array"===c?(f(h.rgba.props,function(t,n){u[n.idx]=i(e[n.idx],n)}),this):"object"===c?(f(h,e instanceof a?function(t,i){e[i.cache]&&(d[i.cache]=e[i.cache].slice())}:function(n,s){var o=s.cache;f(s.props,function(t,n){if(!d[o]&&s.to){if("alpha"===t||null==e[t])return;d[o]=s.to(d._rgba)}d[o][n.idx]=i(e[t],n,!0)}),d[o]&&t.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,s.from&&(d._rgba=s.from(d[o])))}),this):void 0},is:function(t){var e=a(t),i=!0,n=this;return f(h,function(t,s){var o,l=e[s.cache];return l&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],f(s.props,function(t,e){if(null!=l[e.idx])return i=l[e.idx]===o[e.idx]})),i}),i},_space:function(){var t=[],e=this;return f(h,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var n=a(t),s=n._space(),o=h[s],l=0===this.alpha()?a("transparent"):this,r=l[o.cache]||o.to(l._rgba),c=r.slice();return n=n[o.cache],f(o.props,function(t,s){var o=s.idx,l=r[o],a=n[o],h=d[s.type]||{};null!==a&&(null===l?c[o]=a:(h.mod&&(a-l>h.mod/2?l+=h.mod:l-a>h.mod/2&&(l-=h.mod)),c[o]=i((a-l)*e+l,s)))}),this[s](c)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=a(e)._rgba;return a(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),a.fn.parse.prototype=a.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,l=t[3],r=Math.max(n,s,o),a=Math.min(n,s,o),h=r-a,d=r+a,c=.5*d;return e=a===r?0:n===r?60*(s-o)/h+360:s===r?60*(o-n)/h+120:60*(n-s)/h+240,i=0===h?0:c<=.5?h/d:h/(2-d),[Math.round(e)%360,i,c,null==l?1:l]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],o=t[3],l=n<=.5?n*(1+i):n+i-n*i,r=2*n-l;return[Math.round(255*s(r,l,e+1/3)),Math.round(255*s(r,l,e)),Math.round(255*s(r,l,e-1/3)),o]},f(h,function(e,n){var s=n.props,o=n.cache,r=n.to,h=n.from;a.fn[e]=function(e){if(r&&!this[o]&&(this[o]=r(this._rgba)),void 0===e)return this[o].slice();var n,l=t.type(e),d="array"===l||"object"===l?e:arguments,c=this[o].slice();return f(s,function(t,e){var n=d["object"===l?t:e.idx];null==n&&(n=c[e.idx]),c[e.idx]=i(n,e)}),h?(n=a(h(c)),n[o]=c,n):a(c)},f(s,function(i,n){a.fn[i]||(a.fn[i]=function(s){var o,r=t.type(s),a="alpha"===i?this._hsla?"hsla":"rgba":e,h=this[a](),d=h[n.idx];return"undefined"===r?d:("function"===r&&(s=s.call(this,d),r=t.type(s)),null==s&&n.empty?this:("string"===r&&(o=l.exec(s))&&(s=d+parseFloat(o[2])*("+"===o[1]?1:-1)),h[n.idx]=s,this[a](h)))})})}),a.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,s){var o,l,r="";if("transparent"!==s&&("string"!==t.type(s)||(o=n(s)))){if(s=a(o||s),!c.rgba&&1!==s._rgba[3]){for(l="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&l&&l.style;)try{r=t.css(l,"backgroundColor"),l=l.parentNode}catch(t){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{e.style[i]=s}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=a(e.elem,i),e.end=a(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},a.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function e(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,o={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)"string"==typeof s[i=s[n]]&&(o[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(o[i]=s[i]);return o}var i=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(s,o,l,r){var a=t.speed(o,l,r);return this.queue(function(){var o,l=t(this),r=l.attr("class")||"",h=a.children?l.find("*").addBack():l;h=h.map(function(){return{el:t(this),start:e(this)}}),(o=function(){t.each(i,function(t,e){s[e]&&l[e+"Class"](s[e])})})(),h=h.map(function(){return this.end=e(this.el[0]),this.diff=function(e,i){var s,o,l={};for(s in i)o=i[s],e[s]!==o&&(n[s]||!t.fx.step[s]&&isNaN(parseFloat(o))||(l[s]=o));return l}(this.start,this.end),this}),l.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),n=t.extend({},a,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),a.complete.call(l[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,o){return n?t.effects.animateClass.call(this,{add:i},n,s,o):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,o){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,o):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,o,l){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,l):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,o)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function e(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function i(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||("string"==typeof e&&!t.effects.effect[e]||(!!t.isFunction(e)||"object"==typeof e&&!e.effect))}t.extend(t.effects,{version:"1.10.4",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){var i,n;for(n=0;n<e.length;n++)null!==e[n]&&(void 0===(i=t.data("ui-effects-"+e[n]))&&(i=""),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(t){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function i(e){function i(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=n.complete,r=n.mode;(s.is(":hidden")?"hide"===r:"show"===r)?(s[r](),i()):l.call(s[0],n,i)}var n=e.apply(this,arguments),s=n.mode,o=n.queue,l=t.effects.effect[n.effect];return t.fx.off||!l?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===o?this.each(i):this.queue(o||"fx",i)},show:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(n){if(i(n))return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(n){if(i(n)||"boolean"==typeof n)return t.apply(this,arguments);var s=e.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t,e){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;t.effects.effect.blind=function(e,s){var o,l,r,a=t(this),h=["position","top","bottom","left","right","height","width"],d=t.effects.setMode(a,e.mode||"hide"),c=e.direction||"up",u=i.test(c),f=u?"height":"width",p=u?"top":"left",_=n.test(c),m={},g="show"===d;a.parent().is(".ui-effects-wrapper")?t.effects.save(a.parent(),h):t.effects.save(a,h),a.show(),l=(o=t.effects.createWrapper(a).css({overflow:"hidden"}))[f](),r=parseFloat(o.css(p))||0,m[f]=g?l:0,_||(a.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),m[p]=g?r:l+r),g&&(o.css(f,0),_||o.css(p,r+l)),o.animate(m,{duration:e.duration,easing:e.easing,queue:!1,complete:function(){"hide"===d&&a.hide(),t.effects.restore(a,h),t.effects.removeWrapper(a),s()}})}}(jQuery),function(t,e){t.effects.effect.bounce=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","height","width"],a=t.effects.setMode(l,e.mode||"effect"),h="hide"===a,d="show"===a,c=e.direction||"up",u=e.distance,f=e.times||5,p=2*f+(d||h?1:0),_=e.duration/p,m=e.easing,g="up"===c||"down"===c?"top":"left",v="up"===c||"left"===c,b=l.queue(),y=b.length;for((d||h)&&r.push("opacity"),t.effects.save(l,r),l.show(),t.effects.createWrapper(l),u||(u=l["top"===g?"outerHeight":"outerWidth"]()/3),d&&((o={opacity:1})[g]=0,l.css("opacity",0).css(g,v?2*-u:2*u).animate(o,_,m)),h&&(u/=Math.pow(2,f-1)),(o={})[g]=0,n=0;n<f;n++)(s={})[g]=(v?"-=":"+=")+u,l.animate(s,_,m).animate(o,_,m),u=h?2*u:u/2;h&&((s={opacity:0})[g]=(v?"-=":"+=")+u,l.animate(s,_,m)),l.queue(function(){h&&l.hide(),t.effects.restore(l,r),t.effects.removeWrapper(l),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,p+1))),l.dequeue()}}(jQuery),function(t,e){t.effects.effect.clip=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","height","width"],a="show"===t.effects.setMode(l,e.mode||"hide"),h="vertical"===(e.direction||"vertical"),d=h?"height":"width",c=h?"top":"left",u={};t.effects.save(l,r),l.show(),n=t.effects.createWrapper(l).css({overflow:"hidden"}),o=(s="IMG"===l[0].tagName?n:l)[d](),a&&(s.css(d,0),s.css(c,o/2)),u[d]=a?o:0,u[c]=a?0:o/2,s.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){a||l.hide(),t.effects.restore(l,r),t.effects.removeWrapper(l),i()}})}}(jQuery),function(t,e){t.effects.effect.drop=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","opacity","height","width"],l=t.effects.setMode(s,e.mode||"hide"),r="show"===l,a=e.direction||"left",h="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a?"pos":"neg",c={opacity:r?1:0};t.effects.save(s,o),s.show(),t.effects.createWrapper(s),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(h,"pos"===d?-n:n),c[h]=(r?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t,e){t.effects.effect.explode=function(e,i){function n(){g.push(this),g.length===d*c&&function(){u.css({visibility:"visible"}),t(g).remove(),f||u.hide();i()}()}var s,o,l,r,a,h,d=e.pieces?Math.round(Math.sqrt(e.pieces)):3,c=d,u=t(this),f="show"===t.effects.setMode(u,e.mode||"hide"),p=u.show().css("visibility","hidden").offset(),_=Math.ceil(u.outerWidth()/c),m=Math.ceil(u.outerHeight()/d),g=[];for(s=0;s<d;s++)for(r=p.top+s*m,h=s-(d-1)/2,o=0;o<c;o++)l=p.left+o*_,a=o-(c-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*_,top:-s*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:_,height:m,left:l+(f?a*_:0),top:r+(f?h*m:0),opacity:f?0:1}).animate({left:l+(f?0:a*_),top:r+(f?0:h*m),opacity:f?1:0},e.duration||500,e.easing,n)}}(jQuery),function(t,e){t.effects.effect.fade=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t,e){t.effects.effect.fold=function(e,i){var n,s,o=t(this),l=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(o,e.mode||"hide"),a="show"===r,h="hide"===r,d=e.size||15,c=/([0-9]+)%/.exec(d),u=!!e.horizFirst,f=a!==u,p=f?["width","height"]:["height","width"],_=e.duration/2,m={},g={};t.effects.save(o,l),o.show(),n=t.effects.createWrapper(o).css({overflow:"hidden"}),s=f?[n.width(),n.height()]:[n.height(),n.width()],c&&(d=parseInt(c[1],10)/100*s[h?0:1]),a&&n.css(u?{height:0,width:d}:{height:d,width:0}),m[p[0]]=a?s[0]:d,g[p[1]]=a?s[1]:0,n.animate(m,_,e.easing).animate(g,_,e.easing,function(){h&&o.hide(),t.effects.restore(o,l),t.effects.removeWrapper(o),i()})}}(jQuery),function(t,e){t.effects.effect.highlight=function(e,i){var n=t(this),s=["backgroundImage","backgroundColor","opacity"],o=t.effects.setMode(n,e.mode||"show"),l={backgroundColor:n.css("backgroundColor")};"hide"===o&&(l.opacity=0),t.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(l,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,s),i()}})}}(jQuery),function(t,e){t.effects.effect.pulsate=function(e,i){var n,s=t(this),o=t.effects.setMode(s,e.mode||"show"),l="show"===o,r="hide"===o,a=l||"hide"===o,h=2*(e.times||5)+(a?1:0),d=e.duration/h,c=0,u=s.queue(),f=u.length;for(!l&&s.is(":visible")||(s.css("opacity",0).show(),c=1),n=1;n<h;n++)s.animate({opacity:c},d,e.easing),c=1-c;s.animate({opacity:c},d,e.easing),s.queue(function(){r&&s.hide(),i()}),f>1&&u.splice.apply(u,[1,0].concat(u.splice(f,h+1))),s.dequeue()}}(jQuery),function(t,e){t.effects.effect.puff=function(e,i){var n=t(this),s=t.effects.setMode(n,e.mode||"hide"),o="hide"===s,l=parseInt(e.percent,10)||150,r=l/100,a={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?l:100,from:o?a:{height:a.height*r,width:a.width*r,outerHeight:a.outerHeight*r,outerWidth:a.outerWidth*r}}),n.effect(e)},t.effects.effect.scale=function(e,i){var n=t(this),s=t.extend(!0,{},e),o=t.effects.setMode(n,e.mode||"effect"),l=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===o?0:100),r=e.direction||"both",a=e.origin,h={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d="horizontal"!==r?l/100:1,c="vertical"!==r?l/100:1;s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=a||["middle","center"],s.restore=!0),s.from=e.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:h),s.to={height:h.height*d,width:h.width*c,outerHeight:h.outerHeight*d,outerWidth:h.outerWidth*c},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},t.effects.effect.size=function(e,i){var n,s,o,l=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],h=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=t.effects.setMode(l,e.mode||"effect"),f=e.restore||"effect"!==u,p=e.scale||"both",_=e.origin||["middle","center"],m=l.css("position"),g=f?r:["position","top","bottom","left","right","overflow","opacity"],v={height:0,width:0,outerHeight:0,outerWidth:0};"show"===u&&l.show(),n={height:l.height(),width:l.width(),outerHeight:l.outerHeight(),outerWidth:l.outerWidth()},"toggle"===e.mode&&"show"===u?(l.from=e.to||v,l.to=e.from||n):(l.from=e.from||("show"===u?v:n),l.to=e.to||("hide"===u?v:n)),o={from:{y:l.from.height/n.height,x:l.from.width/n.width},to:{y:l.to.height/n.height,x:l.to.width/n.width}},"box"!==p&&"both"!==p||(o.from.y!==o.to.y&&(g=g.concat(d),l.from=t.effects.setTransition(l,d,o.from.y,l.from),l.to=t.effects.setTransition(l,d,o.to.y,l.to)),o.from.x!==o.to.x&&(g=g.concat(c),l.from=t.effects.setTransition(l,c,o.from.x,l.from),l.to=t.effects.setTransition(l,c,o.to.x,l.to))),"content"!==p&&"both"!==p||o.from.y!==o.to.y&&(g=g.concat(h).concat(a),l.from=t.effects.setTransition(l,h,o.from.y,l.from),l.to=t.effects.setTransition(l,h,o.to.y,l.to)),t.effects.save(l,g),l.show(),t.effects.createWrapper(l),l.css("overflow","hidden").css(l.from),_&&(s=t.effects.getBaseline(_,n),l.from.top=(n.outerHeight-l.outerHeight())*s.y,l.from.left=(n.outerWidth-l.outerWidth())*s.x,l.to.top=(n.outerHeight-l.to.outerHeight)*s.y,l.to.left=(n.outerWidth-l.to.outerWidth)*s.x),l.css(l.from),"content"!==p&&"both"!==p||(d=d.concat(["marginTop","marginBottom"]).concat(h),c=c.concat(["marginLeft","marginRight"]),a=r.concat(d).concat(c),l.find("*[width]").each(function(){var i=t(this),n=i.height(),s=i.width(),l=i.outerHeight(),r=i.outerWidth();f&&t.effects.save(i,a),i.from={height:n*o.from.y,width:s*o.from.x,outerHeight:l*o.from.y,outerWidth:r*o.from.x},i.to={height:n*o.to.y,width:s*o.to.x,outerHeight:n*o.to.y,outerWidth:s*o.to.x},o.from.y!==o.to.y&&(i.from=t.effects.setTransition(i,d,o.from.y,i.from),i.to=t.effects.setTransition(i,d,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=t.effects.setTransition(i,c,o.from.x,i.from),i.to=t.effects.setTransition(i,c,o.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,a)})})),l.animate(l.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===l.to.opacity&&l.css("opacity",l.from.opacity),"hide"===u&&l.hide(),t.effects.restore(l,g),f||("static"===m?l.css({position:"relative",top:l.to.top,left:l.to.left}):t.each(["top","left"],function(t,e){l.css(e,function(e,i){var n=parseInt(i,10),s=t?l.to.left:l.to.top;return"auto"===i?s+"px":n+s+"px"})})),t.effects.removeWrapper(l),i()}})}}(jQuery),function(t,e){t.effects.effect.shake=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(s,e.mode||"effect"),r=e.direction||"left",a=e.distance||20,h=e.times||3,d=2*h+1,c=Math.round(e.duration/d),u="up"===r||"down"===r?"top":"left",f="up"===r||"left"===r,p={},_={},m={},g=s.queue(),v=g.length;for(t.effects.save(s,o),s.show(),t.effects.createWrapper(s),p[u]=(f?"-=":"+=")+a,_[u]=(f?"+=":"-=")+2*a,m[u]=(f?"-=":"+=")+2*a,s.animate(p,c,e.easing),n=1;n<h;n++)s.animate(_,c,e.easing).animate(m,c,e.easing);s.animate(_,c,e.easing).animate(p,c/2,e.easing).queue(function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}),v>1&&g.splice.apply(g,[1,0].concat(g.splice(v,d+1))),s.dequeue()}}(jQuery),function(t,e){t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],l=t.effects.setMode(s,e.mode||"show"),r="show"===l,a=e.direction||"left",h="up"===a||"down"===a?"top":"left",d="up"===a||"left"===a,c={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(h,d?isNaN(n)?"-"+n:-n:n),c[h]=(r?d?"+=":"-=":d?"-=":"+=")+n,s.animate(c,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===l&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery),function(t,e){t.effects.effect.transfer=function(e,i){var n=t(this),s=t(e.to),o="fixed"===s.css("position"),l=t("body"),r=o?l.scrollTop():0,a=o?l.scrollLeft():0,h=s.offset(),d={top:h.top-r,left:h.left-a,height:s.innerHeight(),width:s.innerWidth()},c=n.offset(),u=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:c.top-r,left:c.left-a,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,e.duration,e.easing,function(){u.remove(),i()})}}(jQuery),function(t,e){t.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,l,r,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",o=String.fromCharCode(e.keyCode),l=!1,clearTimeout(this.filterTimer),o===s?l=!0:o=s+o,r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),(n=l&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(o=String.fromCharCode(e.keyCode),r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),s=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",n.attr("id"))}),(e=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=e.children(".ui-menu")).length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,l,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),l=this.activeMenu.height(),r=e.height(),s<0?this.activeMenu.scrollTop(o+s):s+r>l&&this.activeMenu.scrollTop(o+s-l+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n-s<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var i,n,s;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=t(this)).offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})}(jQuery),function(t,e){function i(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,n,s,o=this,l=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)n=t.trim(e[i]),(s=t("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:l.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=s&&s[1]?s[1]:"se")}),l.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){l.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var n,s,o,l=this.options,r=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=i(this.helper.css("left")),s=i(this.helper.css("top")),l.containment&&(n+=t(l.containment).scrollLeft()||0,s+=t(l.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof l.aspectRatio?l.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n=this.helper,s={},o=this.originalMousePosition,l=this.axis,r=this.position.top,a=this.position.left,h=this.size.width,d=this.size.height,c=e.pageX-o.left||0,u=e.pageY-o.top||0,f=this._change[l];return!!f&&(i=f.apply(this,[e,c,u]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(s.top=this.position.top+"px"),this.position.left!==a&&(s.left=this.position.left+"px"),this.size.width!==h&&(s.width=this.size.width+"px"),this.size.height!==d&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,l,r,a,h=this.options;return this._helper&&(s=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&t.ui.hasScroll(i[0],"left")?0:this.sizeDiff.height,o=n?0:this.sizeDiff.width,l={width:this.helper.width()-o,height:this.helper.height()-s},r=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,a=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(t.extend(l,{top:a,left:r})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,s,o,l,r=this.options;l={minWidth:n(r.minWidth)?r.minWidth:0,maxWidth:n(r.maxWidth)?r.maxWidth:1/0,minHeight:n(r.minHeight)?r.minHeight:0,maxHeight:n(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=l.minHeight*this.aspectRatio,s=l.minWidth/this.aspectRatio,i=l.maxHeight*this.aspectRatio,o=l.maxWidth/this.aspectRatio,e>l.minWidth&&(l.minWidth=e),s>l.minHeight&&(l.minHeight=s),i<l.maxWidth&&(l.maxWidth=i),o<l.maxHeight&&(l.maxHeight=o)),this._vBoundaries=l},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,l=n(t.width)&&e.minWidth&&e.minWidth>t.width,r=n(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return l&&(t.width=e.minWidth),r&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),l&&d&&(t.left=a-e.minWidth),s&&d&&(t.left=a-e.maxWidth),r&&c&&(t.top=h-e.minHeight),o&&c&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,s,o=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),l=o&&t.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,a={width:i.size.width-r,height:i.size.height-l},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(a,d&&h?{top:d,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,n,s,o,l,r,a,h=t(this).data("ui-resizable"),d=h.options,c=h.element,u=d.containment,f=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;f&&(h.containerElement=t(f),/document/.test(u)||u===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),n=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){n[t]=i(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-n[3],width:e.innerWidth()-n[1]},s=h.containerOffset,o=h.containerSize.height,l=h.containerSize.width,r=t.ui.hasScroll(f,"left")?f.scrollWidth:l,a=t.ui.hasScroll(f)?f.scrollHeight:o,h.parentData={element:f,left:s.left,top:s.top,width:r,height:a}))},resize:function(e){var i,n,s,o,l=t(this).data("ui-resizable"),r=l.options,a=l.containerOffset,h=l.position,d=l._aspectRatio||e.shiftKey,c={top:0,left:0},u=l.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(c=a),h.left<(l._helper?a.left:0)&&(l.size.width=l.size.width+(l._helper?l.position.left-a.left:l.position.left-c.left),d&&(l.size.height=l.size.width/l.aspectRatio),l.position.left=r.helper?a.left:0),h.top<(l._helper?a.top:0)&&(l.size.height=l.size.height+(l._helper?l.position.top-a.top:l.position.top),d&&(l.size.width=l.size.height*l.aspectRatio),l.position.top=l._helper?a.top:0),l.offset.left=l.parentData.left+l.position.left,l.offset.top=l.parentData.top+l.position.top,i=Math.abs((l._helper,l.offset.left-c.left+l.sizeDiff.width)),n=Math.abs((l._helper?l.offset.top-c.top:l.offset.top-a.top)+l.sizeDiff.height),s=l.containerElement.get(0)===l.element.parent().get(0),o=/relative|absolute/.test(l.containerElement.css("position")),s&&o&&(i-=Math.abs(l.parentData.left)),i+l.size.width>=l.parentData.width&&(l.size.width=l.parentData.width-i,d&&(l.size.height=l.size.width/l.aspectRatio)),n+l.size.height>=l.parentData.height&&(l.size.height=l.parentData.height-n,d&&(l.size.width=l.size.height*l.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,l=t(e.helper),r=l.offset(),a=l.outerWidth()-e.sizeDiff.width,h=l.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:a,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-s.left-n.left,width:a,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable").options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):t.each(e.alsoResize,function(t){i(t)})},resize:function(e,i){var n=t(this).data("ui-resizable"),s=n.options,o=n.originalSize,l=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-l.top||0,left:n.position.left-l.left||0},a=function(e,n){t(e).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},l=n&&n.length?n:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(l,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?a(s.alsoResize):t.each(s.alsoResize,function(t,e){a(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,n=e.size,s=e.originalSize,o=e.originalPosition,l=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,a=r[0]||1,h=r[1]||1,d=Math.round((n.width-s.width)/a)*a,c=Math.round((n.height-s.height)/h)*h,u=s.width+d,f=s.height+c,p=i.maxWidth&&i.maxWidth<u,_=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>u,g=i.minHeight&&i.minHeight>f;i.grid=r,m&&(u+=a),g&&(f+=h),p&&(u-=a),_&&(f-=h),/^(se|s|e)$/.test(l)?(e.size.width=u,e.size.height=f):/^(ne)$/.test(l)?(e.size.width=u,e.size.height=f,e.position.top=o.top-c):/^(sw)$/.test(l)?(e.size.width=u,e.size.height=f,e.position.left=o.left-d):(f-h>0?(e.size.height=f,e.position.top=o.top-c):(e.size.height=h,e.position.top=o.top+s.height-h),u-a>0?(e.size.width=u,e.position.left=o.left-d):(e.size.width=a,e.position.left=o.left+s.width-a))}})}(jQuery),function(t,e){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=t(i.options.filter,i.element[0])).addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");if(s)return n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,o=this.opos[0],l=this.opos[1],r=e.pageX,a=e.pageY;return o>r&&(i=r,r=o,o=i),l>a&&(i=a,a=l,l=i),this.helper.css({left:o,top:l,width:r-o,height:a-l}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?h=!(i.left>r||i.right<o||i.top>a||i.bottom<l):"fit"===s.tolerance&&(h=i.left>o&&i.right<r&&i.top>l&&i.bottom<a),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t,e){t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),e=s.length;e<i;e++)o.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=s.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,n,s,o,l,r,a,h=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(n-h.values(e));(s>i||s===i&&(e===h._lastChangedValue||h.values(e)===d.min))&&(s=i,o=t(this),l=e)}),!1!==this._start(e,l)&&(this._mouseSliding=!0,this._handleIndex=l,o.addClass("ui-state-active").focus(),r=o.offset(),a=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=a?{left:0,top:0}:{left:e.pageX-r.left-o.width()/2,top:e.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,l,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,n,s,o;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/e)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>n||1===e&&i<n)&&(i=n),i!==this.values(e)&&((s=this.values())[e]=i,o=this._trigger("slide",t,{handle:this.handles[e],value:i,values:s}),n=this.values(e?0:1),!1!==o&&this.values(e,i))):i!==this.value()&&!1!==(o=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var n,s,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch("range"===e&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<s;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,n;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,o,l=this.options.range,r=this.options,a=this,h=!this._animateOff&&r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(a.values(n)-a._valueMin())/(a._valueMax()-a._valueMin())*100,d["horizontal"===a.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](d,r.animate),!0===a.options.range&&("horizontal"===a.orientation?(0===n&&a.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===n&&a.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===n&&a.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&a.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](d,r.animate),"min"===l&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===l&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===l&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===l&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,n,s,o=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),!1===this._start(e,o)))return}switch(s=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(o):this.value(),e.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(e,o,n)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t,e){function i(t,e,i){return t>e&&t<e+i}function n(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var n=null,s=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,o.widgetName+"-item")===o)return n=t(this),!1}),t.data(e.target,o.widgetName+"-item")===o&&(n=t(e.target)),!!n&&(!(this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,i,n){var s,o,l=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),l.containment&&this._setContainment(),l.cursor&&"auto"!==l.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",l.cursor),this.storedStylesheet=t("<style>*{ cursor: "+l.cursor+" !important; }</style>").appendTo(o)),l.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",l.opacity)),l.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",l.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!l.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,o,l=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<l.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+l.scrollSpeed:e.pageY-this.overflowOffset.top<l.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-l.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<l.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+l.scrollSpeed:e.pageX-this.overflowOffset.left<l.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-l.scrollSpeed)):(e.pageY-t(document).scrollTop()<l.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-l.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<l.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+l.scrollSpeed)),e.pageX-t(document).scrollLeft()<l.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-l.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<l.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+l.scrollSpeed))),!1!==r&&t.ui.ddmanager&&!l.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===s||t.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],s))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),o=this.options.axis,l={};o&&"x"!==o||(l.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(l.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(l,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=t.left,l=o+t.width,r=t.top,a=r+t.height,h=this.offset.click.top,d=this.offset.click.left,c="x"===this.options.axis||n+h>r&&n+h<a,u="y"===this.options.axis||e+d>o&&e+d<l,f=c&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<l&&r<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var e="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=e&&n,o=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection();return!!s&&(this.floating?l&&"right"===l||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(t){var e=i(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=i(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var n,s,o,l,r=[],a=[],h=this._connectWith();if(h&&e)for(n=h.length-1;n>=0;n--)for(s=(o=t(h[n])).length-1;s>=0;s--)(l=t.data(o[s],this.widgetFullName))&&l!==this&&!l.options.disabled&&a.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,o,l,r,a,h,d=this.items,c=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(n=(s=t(u[i])).length-1;n>=0;n--)(o=t.data(s[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(c.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=c.length-1;i>=0;i--)for(l=c[i][1],n=0,h=(r=c[i][0]).length;n<h;n++)(a=t(r[n])).data(this.widgetName+"-item",l),d.push({item:a,instance:l,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,o;for(i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),o=s.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(s)}):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){i&&!n.forcePlaceholderSize||(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var s,o,l,r,a,h,d,c,u,f,p=null,_=null;for(s=this.containers.length-1;s>=0;s--)if(!t.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(p&&t.contains(this.containers[s].element[0],p.element[0]))continue;p=this.containers[s],_=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",e,this._uiHash(this)),this.containers[s].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[_].containerCache.over||(this.containers[_]._trigger("over",e,this._uiHash(this)),this.containers[_].containerCache.over=1);else{for(l=1e4,r=null,a=(f=p.floating||n(this.currentItem))?"left":"top",h=f?"width":"height",d=this.positionAbs[a]+this.offset.click[a],o=this.items.length-1;o>=0;o--)t.contains(this.containers[_].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(f&&!i(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height)||(c=this.items[o].item.offset()[a],u=!1,Math.abs(c-d)>Math.abs(c+this.items[o][h]-d)&&(u=!0,c+=this.items[o][h]),Math.abs(c-d)<l&&(l=Math.abs(c-d),r=this.items[o],this.direction=u?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[_])return;r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[_].element,!0),this._trigger("change",e,this._uiHash()),this.containers[_]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[_],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[_]._trigger("over",e,this._uiHash(this)),this.containers[_].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,o=e.pageX,l=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(l=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(l=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((l-this.originalPageY)/s.grid[1])*s.grid[1],l=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/s.grid[0])*s.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){function i(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}this.reverting=!1;var n,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||s.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<s.length;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<s.length;n++)s[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,n){var s=i.attr(n);void 0!==s&&s.length&&(e[n]=s)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,n=t.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,i.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,n=this.options;return e=null!==n.min?n.min:0,i=t-e,i=Math.round(i/n.step)*n.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==n.max&&t>n.max?n.max:null!==n.min&&t<n.min?n.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,t)},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(t){return(t=t.cloneNode(!1)).hash.length>1&&decodeURIComponent(t.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var n=0,s=/#.*$/;t.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var e=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===e&&(n&&this.tabs.each(function(i,s){if(t(s).attr("aria-controls")===n)return e=i,!1}),null===e&&(e=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==e&&-1!==e||(e=!!this.tabs.length&&0)),!1!==e&&-1===(e=this.tabs.index(this.tabs.eq(e)))&&(e=!i&&0),!i&&!1===e&&this.anchors.length&&(e=0),e},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:s=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}e.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function n(){return e>s&&(e=0),e<0&&(e=s),e}for(var s=this.tabs.length-1;-1!==t.inArray(n(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+ ++n},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(n,s){var o,l,r,a=t(s).uniqueId().attr("id"),h=t(s).closest("li"),d=h.attr("aria-controls");i(s)?(o=s.hash,l=e.element.find(e._sanitizeSelector(o))):(o="#"+(r=e._tabId(h)),(l=e.element.find(o)).length||(l=e._createPanel(r)).insertAfter(e.panels[n-1]||e.tablist),l.attr("aria-live","polite")),l.length&&(e.panels=e.panels.add(l)),d&&h.data("ui-tabs-aria-controls",d),h.attr({"aria-controls":o.substring(1),"aria-labelledby":a}),l.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,n=0;i=this.tabs[n];n++)!0===e||-1!==t.inArray(n,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,n=this.element.parent();"fill"===e?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),n=e.css("position");"absolute"!==n&&"fixed"!==n&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,n=this.active,s=t(e.currentTarget).closest("li"),o=s[0]===n[0],l=o&&i.collapsible,r=l?t():this._getPanelForTab(s),a=n.length?this._getPanelForTab(n):t(),h={oldTab:n,oldPanel:a,newTab:l?t():s,newPanel:r};e.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",e,h)||(i.active=!l&&this.tabs.index(s),this.active=o?t():s,this.xhr&&this.xhr.abort(),a.length||r.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(s),e),this._toggle(e,h))},_toggle:function(e,i){function n(){o.running=!1,o._trigger("activate",e,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),l.length&&o.options.show?o._show(l,o.options.show,n):(l.show(),n())}var o=this,l=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),s()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),l.length&&r.length?i.oldTab.attr("tabIndex",-1):l.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),l.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,n=this._findActive(e);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(e){var i=this.options.disabled;!1!==i&&(void 0===e?i=!1:(e=this._getIndex(e),i=t.isArray(i)?t.map(i,function(t){return t!==e?t:null}):t.map(this.tabs,function(t,i){return i!==e?i:null})),this._setupDisabled(i))},disable:function(e){var i=this.options.disabled;if(!0!==i){if(void 0===e)i=!0;else{if(e=this._getIndex(e),-1!==t.inArray(e,i))return;i=t.isArray(i)?t.merge([e],i).sort():[e]}this._setupDisabled(i)}},load:function(e,n){e=this._getIndex(e);var s=this,o=this.tabs.eq(e),l=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),a={tab:o,panel:r};i(l[0])||(this.xhr=t.ajax(this._ajaxSettings(l,n,a)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),s._trigger("load",n,a)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(e,i,n){var s=this;return{url:e.attr("href"),beforeSend:function(e,o){return s._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:o},n))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(t){var e=0;t.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var n=this;if("disabled"===e)return this[i?"_disable":"_enable"](),void(this.options[e]=i);this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){n._updateContent(e)})},_disable:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,n=t(e?e.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&n.parents().each(function(){var e,n=t(this);n.data("ui-tooltip-open")&&((e=t.Event("blur")).target=e.currentTarget=this,i.close(e,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,e))},_updateContent:function(t,e){var i,n=this.options.content,s=this,o=e?e.type:null;if("string"==typeof n)return this._open(e,t,n);(i=n.call(t[0],function(i){t.data("ui-tooltip-open")&&s._delay(function(){e&&(e.type=o),this._open(e,t,i)})}))&&this._open(e,t,i)},_open:function(e,i,n){function s(t){a.of=t,o.is(":hidden")||o.position(a)}var o,l,r,a=t.extend({},this.options.position);n&&((o=this._find(i)).length?o.find(".ui-tooltip-content").html(n):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),function(e,i){var n=(e.attr("aria-describedby")||"").split(/\s+/);n.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(n.join(" ")))}(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:s}),s(e)):o.position(t.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(s(a.of),clearInterval(r))},t.fx.interval)),this._trigger("open",e,{tooltip:o}),l={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var n=t.Event(e);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(o)}},e&&"mouseover"!==e.type||(l.mouseleave="close"),e&&"focusin"!==e.type||(l.focusout="close"),this._on(!0,i,l)))},close:function(e){var i=this,n=t(e?e.currentTarget:this.element),s=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),function(e){var i=e.data("ui-tooltip-id"),n=(e.attr("aria-describedby")||"").split(/\s+/),s=t.inArray(i,n);-1!==s&&n.splice(s,1),e.removeData("ui-tooltip-id"),(n=t.trim(n.join(" ")))?e.attr("aria-describedby",n):e.removeAttr("aria-describedby")}(n),s.stop(!0),this._hide(s,this.options.hide,function(){i._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,n){t(n.element).attr("title",n.title),delete i.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:s}),this.closing=!1)},_tooltip:function(i){var n="ui-tooltip-"+e++,s=t("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[n]=i,s},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,n){var s=t.Event("blur");s.target=s.currentTarget=n[0],e.close(s,!0),t("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(t){function e(t){return o.raw?t:encodeURIComponent(t)}function i(t){return o.raw?t:decodeURIComponent(t)}function n(e,i){var n=o.raw?e:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(s," ")),o.json?JSON.parse(t):t}catch(t){}}(e);return t.isFunction(i)?i(n):n}var s=/\+/g,o=t.cookie=function(s,l,r){if(arguments.length>1&&!t.isFunction(l)){if("number"==typeof(r=t.extend({},o.defaults,r)).expires){var a=r.expires,h=r.expires=new Date;h.setTime(+h+864e5*a)}return document.cookie=[e(s),"=",function(t){return e(o.json?JSON.stringify(t):String(t))}(l),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var d=s?void 0:{},c=document.cookie?document.cookie.split("; "):[],u=0,f=c.length;u<f;u++){var p=c[u].split("="),_=i(p.shift()),m=p.join("=");if(s&&s===_){d=n(m,l);break}s||void 0===(m=n(m))||(d[_]=m)}return d};o.defaults={},t.removeCookie=function(e,i){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),function(t){var e={init:function(e){var n={color:t(this).css("background-color"),reach:20,speed:1e3,pause:0,glow:!0,repeat:!0,onHover:!1,border:!0};return 0==n.border&&(n.color=rgba(0,0,0,0)),t(this).css({"-moz-outline-radius":t(this).css("border-top-left-radius"),"-webkit-outline-radius":t(this).css("border-top-left-radius"),"outline-radius":t(this).css("border-top-left-radius")}),e&&t.extend(n,e),n.color=t("<div style='background:"+n.color+"'></div>").css("background-color"),!0!==n.repeat&&!isNaN(n.repeat)&&n.repeat>0&&(n.repeat-=1),this.each(function(){n.onHover?t(this).bind("mouseover",function(){i(n,this,0)}).bind("mouseout",function(){t(this).pulsate("destroy")}):i(n,this,0)})},destroy:function(){return this.each(function(){clearTimeout(this.timer),t(this).css("outline",0)})}},i=function(e,s,o){e.color&&e.color.indexOf("#")>-1&&(e.color=function(){var t=this.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}var n=[];for(i=1;i<7;i+=2)n.push(parseInt("0x"+t.slice(i,i+2)));return"RGB("+n.join(",")+")"}return t}.call(e.color));var l=e.reach,r=(l-(o=o>l?0:o))/l,a=e.color.split(","),h="rgba("+a[0].split("(")[1]+","+a[1]+","+a[2].split(")")[0]+","+r+")",d={outline:"2px solid "+h};0==e.border&&(d.outline="2px solid rgba(0, 0, 0, 0)"),e.glow?(d["box-shadow"]="0px 0px "+parseInt(o/1.5)+"px "+h,0==e.border&&(d["box-shadow"]="0px 0px "+parseInt(2*o)+"px "+h),userAgent=(navigator||{}).userAgent||"",/(chrome)[ \/]([\w.]+)/.test(userAgent.toLowerCase())&&(d["outline-offset"]=o+"px",d["outline-radius"]="100 px")):d["outline-offset"]=o+"px",t(s).css(d);s.timer&&clearTimeout(s.timer),s.timer=setTimeout(function(){if(o>=l&&!e.repeat)return t(s).pulsate("destroy"),!1;if(o>=l&&!0!==e.repeat&&!isNaN(e.repeat)&&e.repeat>0)e.repeat=e.repeat-1;else if(e.pause&&o>=l)return n(e,s,o+1),!1;i(e,s,o+1)},e.speed/l)},n=function(t,e,n){innerfunc=function(){i(t,e,n)},e.timer=setTimeout(innerfunc,t.pause)};t.fn.pulsate=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void t.error("Method "+i+" does not exist on jQuery.pulsate"):e.init.apply(this,arguments)}}(jQuery),function(e){e.fn.extend({slimScroll:function(i){var n=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);return this.each(function(){function s(t){if(h){var i=0;(t=t||window.event).wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3),e(t.target||t.srcTarget||t.srcElement).closest("."+n.wrapperClass).is(v.parent())&&o(i,!0),t.preventDefault&&!g&&t.preventDefault(),g||(t.returnValue=!1)}}function o(t,e,i){g=!1;var s=t,o=v.outerHeight()-y.outerHeight();e&&(s=parseInt(y.css("top"))+t*parseInt(n.wheelStep)/100*y.outerHeight(),s=Math.min(Math.max(s,0),o),s=0<t?Math.ceil(s):Math.floor(s),y.css({top:s+"px"})),s=(_=parseInt(y.css("top"))/(v.outerHeight()-y.outerHeight()))*(v[0].scrollHeight-v.outerHeight()),i&&(s=t,t=s/v[0].scrollHeight*v.outerHeight(),t=Math.min(Math.max(t,0),o),y.css({top:t+"px"})),v.scrollTop(s),v.trigger("slimscrolling",~~s),r(),a()}function l(){p=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),30),y.css({height:p+"px"});var t=p==v.outerHeight()?"none":"block";y.css({display:t})}function r(){l(),clearTimeout(u),_==~~_?(g=n.allowPageScroll,m!=_&&v.trigger("slimscroll",0==~~_?"top":"bottom")):g=!1,m=_,p>=v.outerHeight()?g=!0:(y.stop(!0,!0).fadeIn("fast"),n.railVisible&&x.stop(!0,!0).fadeIn("fast"))}function a(){n.alwaysVisible||(u=setTimeout(function(){n.disableFadeOut&&h||d||c||(y.fadeOut("slow"),x.fadeOut("slow"))},1e3))}var h,d,c,u,f,p,_,m,g=!1,v=e(this);if(v.parent().hasClass(n.wrapperClass)){var b=v.scrollTop(),y=v.parent().find("."+n.barClass),x=v.parent().find("."+n.railClass);if(l(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){v.parent().css("height","auto"),v.css("height","auto");var w=v.parent().parent().height();v.parent().css("height",w),v.css("height",w)}if("scrollTo"in i)b=parseInt(n.scrollTo);else if("scrollBy"in i)b+=parseInt(n.scrollBy);else if("destroy"in i)return y.remove(),x.remove(),void v.unwrap();o(b,!1,!0)}}else if(!(e.isPlainObject(i)&&"destroy"in i)){n.height="auto"==n.height?v.parent().height():n.height,b=e("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),v.css({overflow:"hidden",width:n.width,height:n.height});x=e("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.railBorderRadius,background:n.railColor,opacity:n.railOpacity,zIndex:90}),y=e("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.borderRadius,BorderRadius:n.borderRadius,MozBorderRadius:n.borderRadius,WebkitBorderRadius:n.borderRadius,zIndex:99}),w="right"==n.position?{right:n.distance}:{left:n.distance};x.css(w),y.css(w),v.wrap(b),v.parent().append(y),v.parent().append(x),n.railDraggable&&y.bind("mousedown",function(i){var n=e(document);return c=!0,t=parseFloat(y.css("top")),pageY=i.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,y.css("top",currTop),o(0,y.position().top,!1)}),n.bind("mouseup.slimscroll",function(t){c=!1,a(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),x.hover(function(){r()},function(){a()}),y.hover(function(){d=!0},function(){d=!1}),v.hover(function(){h=!0,r(),a()},function(){h=!1,a()}),v.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(f=t.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(t){g||t.originalEvent.preventDefault(),t.originalEvent.touches.length&&(o((f-t.originalEvent.touches[0].pageY)/n.touchScrollStep,!0),f=t.originalEvent.touches[0].pageY)}),l(),"bottom"===n.start?(y.css({top:v.outerHeight()-y.outerHeight()}),o(0,!0)):"top"!==n.start&&(o(e(n.start).position().top,null,!0),n.alwaysVisible||y.hide()),function(){"Microsoft Internet Explorer"==navigator.appName&&"8."==navigator.appVersion.match(/8./i)&&window.addEventListener?document.attachEvent("onmousewheel",s):(this.addEventListener("DOMMouseScroll",s,!1),this.addEventListener("mousewheel",s,!1))}()}}),this}}),e.fn.extend({slimscroll:e.fn.slimScroll})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){l.detach().trigger("closed.bs.alert").remove()}var s=t(this),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var l=t(o);e&&e.preventDefault(),l.length||(l=s.closest(".alert")),l.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(l.removeClass("in"),t.support.transition&&l.hasClass("fade")?l.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),s=n.data("bs.alert");s||n.data("bs.alert",s=new i(this)),"string"==typeof e&&s[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),o="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,o)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.2",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[s]()),setTimeout(t.proxy(function(){n[s](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),l="string"==typeof e?e:o.slide;s||n.data("bs.carousel",s=new i(this,o)),"number"==typeof e?s.to(e):l?s[l]():o.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var n=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var s=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,s),l=this.interval,r="next"==e?"left":"right",a=this;if(o.hasClass("active"))return this.sliding=!1;var h=o[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,l&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(o)]);c&&c.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,s.addClass(r),o.addClass(r),s.one("bsTransitionEnd",function(){o.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(u)),l&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var s=function(i){var n,s=t(this),o=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var l=t.extend({},o.data(),s.data()),r=s.attr("data-slide-to");r&&(l.interval=!1),e.call(o,l),r&&o.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&o.toggle&&"show"==e&&(o.toggle=!1),s||i.data("bs.collapse",s=new n(this,o)),"string"==typeof e&&s[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.2",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"))&&e.transitioning)){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var l=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[l](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[l](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var a=t.camelCase(["scroll",l].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[l](this.$element[0][a])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var s=t(n);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=t(this);s.attr("data-target")||n.preventDefault();var o=e(s),l=o.data("bs.collapse")?"toggle":t.extend({},s.data(),{trigger:this});i.call(o,l)})}(jQuery),function(t){"use strict";function e(e){e&&3===e.which||(t(n).remove(),t(s).each(function(){var n=t(this),s=i(n),o={relatedTarget:this};s.hasClass("open")&&(s.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.2",o.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var o=i(s),l=o.hasClass("open");if(e(),!l){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},o.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var o=i(n),l=o.hasClass("open");if(!l&&27!=e.which||l&&27==e.which)return 27==e.which&&o.find(s).trigger("focus"),n.trigger("click");var r=" li:not(.divider):visible a",a=o.find('[role="menu"]'+r+', [role="listbox"]'+r);if(a.length){var h=a.index(e.target);38==e.which&&h>0&&h--,40==e.which&&h<a.length-1&&h++,~h||(h=0),a.eq(h).trigger("focus")}}}};var l=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new o(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=l,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),o=s.data("bs.modal"),l=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data("bs.modal",o=new i(this,l)),"string"==typeof e?o[e](n):l.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var s=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.options.backdrop&&n.adjustBackdrop(),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});s?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var l=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",l).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):l()}else e&&e()},i.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},i.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),l=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,l,this)})}(jQuery),function(t){"use strict";var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.VERSION="3.3.2",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var l=s[o];if("click"==l)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=l){var r="hover"==l?"mouseenter":"focusin",a="hover"==l?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},e.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},e.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},e.prototype.show=function(){var i=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var s=this,o=this.tip(),l=this.getUID(this.type);this.setContent(),o.attr("id",l),this.$element.attr("aria-describedby",l),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,h=a.test(r);h&&(r=r.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var d=this.getPosition(),c=o[0].offsetWidth,u=o[0].offsetHeight;if(h){var f=r,p=this.options.container?t(this.options.container):this.$element.parent(),_=this.getPosition(p);r="bottom"==r&&d.bottom+u>_.bottom?"top":"top"==r&&d.top-u<_.top?"bottom":"right"==r&&d.right+c>_.width?"left":"left"==r&&d.left-c<_.left?"right":r,o.removeClass(f).addClass(r)}var m=this.getCalculatedOffset(r,d,c,u);this.applyPlacement(m,r);var g=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(e.TRANSITION_DURATION):g()}},e.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,l=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(l)&&(l=0),isNaN(r)&&(r=0),e.top=e.top+l,e.left=e.left+r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var a=n[0].offsetWidth,h=n[0].offsetHeight;"top"==i&&h!=o&&(e.top=e.top+o-h);var d=this.getViewportAdjustedDelta(i,e,a,h);d.left?e.left+=d.left:e.top+=d.top;var c=/top|bottom/.test(i),u=c?2*d.left-s+a:2*d.top-o+h,f=c?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(u,n[0][f],c)},e.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(i){function n(){"in"!=s.hoverState&&o.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),i&&i()}var s=this,o=this.tip(),l=t.Event("hide.bs."+this.type);return this.$element.trigger(l),l.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(e.TRANSITION_DURATION):n(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var o=n?{top:0,left:0}:e.offset(),l={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,l,r,o)},e.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,l=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-o-l.scroll,a=e.top+o-l.scroll+n;r<l.top?s.top=l.top-r:a>l.top+l.height&&(s.top=l.top+l.height-a)}else{var h=e.left-o,d=e.left+o+i;h<l.left?s.left=l.left-h:d>l.width&&(s.left=l.left+l.width-d)}return s},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),o="object"==typeof i&&i;(s||"destroy"!=i)&&(s||n.data("bs.tooltip",s=new e(this,o)),"string"==typeof i&&s[i]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.2",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),s=n.data("bs.popover"),o="object"==typeof i&&i;(s||"destroy"!=i)&&(s||n.data("bs.popover",s=new e(this,o)),"string"==typeof i&&s[i]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(i,n){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),o="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,o)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),s=n.data("target")||n.attr("href"),o=/^#./.test(s)&&t(s);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,l=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return l!=(t=o[o.length-1])&&this.activate(t);if(l&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)l!=o[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),l=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(o),e.trigger(l),!l.isDefaultPrevented()&&!o.isDefaultPrevented()){var r=t(n);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,n,s){function o(){l.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var l=n.find("> .active"),r=s&&t.support.transition&&(l.length&&l.hasClass("fade")||!!n.find("> .fade").length);l.length&&r?l.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),l.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),o="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.2",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var s=this.$target.scrollTop(),o=this.$element.offset(),l=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s&&"top";if("bottom"==this.affixed)return null!=i?!(s+this.unpin<=o.top)&&"bottom":!(t-n>=s+l)&&"bottom";var r=null==this.affixed,a=r?s:o.top;return null!=i&&i>=s?"top":null!=n&&a+(r?l:e)>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,s=n.top,o=n.bottom,l=t("body").height();"object"!=typeof n&&(o=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var r=this.getState(l,e,s,o);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var a="affix"+(r?"-"+r:""),h=t.Event(a+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:l-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(t,e,i,n){"use strict";function s(e,i){this.options=t.extend({},l,i),this._defaults=l,this._name=o,this.$element=t(e),this.init()}var o="menuButton",l={propertyName:"value"};s.prototype={constructor:s,init:function(){this.toggle()},toggle:function(t,e){"show"===this.$element.data("dropdown")?this.hideMenu():this.showMenu()},showMenu:function(){this.$element.data("dropdown","show"),this.$element.find("ul").show(),this.$element.find(".button:first").addClass("is-active")},hideMenu:function(){this.$element.data("dropdown","hide"),this.$element.find("ul").hide(),this.$element.find(".button:first").removeClass("is-active")}},t.fn[o]=function(e){return this.each(function(){t.data(this,"plugin_"+o)?t.data(this,"plugin_"+o).toggle():t.data(this,"plugin_"+o,new s(this,e))})},t(i).on("click",function(e){t.each(t("[data-buttons=dropdown]"),function(i,n){t(e.target.offsetParent)[0]!=t(this)[0]&&t.data(this,"plugin_"+o)&&(t.data(this,"plugin_"+o).hideMenu(),t(this).find("ul").hide())})}),t(i).on("click","[data-buttons=dropdown]",function(e){t(e.currentTarget).menuButton()}),t(i).on("click","[data-buttons=dropdown] > a",function(t){t.preventDefault()})}(jQuery,window,document),function(){"use strict";if(!window.addEventListener){var t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){this.onreadystatechange||(this.onreadystatechange=function(){4===this.readyState&&this.onload&&this.onload()}),t.apply(this,arguments)},Object.create=function(){var t=function(){};return function(e){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=typeof e)throw TypeError("Argument must be an object");t.prototype=e;var i=new t;return t.prototype=null,i}}(),"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="".__proto__===String.prototype?function(t){return t.__proto__}:function(t){return t.constructor.prototype}),!window.addEventListener&&function(t,e,i,n,s,o,l){t[n]=e[n]=i[n]=function(t,e){var i=this;if(l.unshift([i,t,e,function(t){t.currentTarget=i,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||i,e.call(i,t)}]),"load"===t&&this.tagName&&"SCRIPT"===this.tagName){var n=l[0][3];this.onreadystatechange=function(t){"loaded"!==this.readyState&&"complete"!==this.readyState||n.call(this,{type:"load"})}}else this.attachEvent("on"+t,l[0][3])},t[s]=e[s]=i[s]=function(t,e){for(var i,n=0;i=l[n];++n)if(i[0]==this&&i[1]==t&&i[2]==e)return"load"===t&&this.tagName&&"SCRIPT"===this.tagName&&(this.onreadystatechange=null),this.detachEvent("on"+t,l.splice(n,1)[0][3])},t[o]=e[o]=i[o]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])}}(),function(t,e,i){function n(t){return function(){var e,i=arguments[0];for(e="["+(t?t+":":"")+i+"] http://errors.angularjs.org/1.3.10-local+sha.9cce263/"+(t?t+"/":"")+i,i=1;i<arguments.length;i++){e=e+(1==i?"?":"&")+"p"+(i-1)+"=";var n;e+=encodeURIComponent(n="function"==typeof(n=arguments[i])?n.toString().replace(/ \{[\s\S]*$/,""):void 0===n?"undefined":"string"!=typeof n?JSON.stringify(n):n)}return Error(e)}}function s(t){if(null==t||x(t))return!1;var e=t.length;return!(t.nodeType!==ki||!e)||(m(t)||vi(t)||0===e||"number"==typeof e&&0<e&&e-1 in t)}function o(t,e,i){var n,l;if(t)if(b(t))for(n in t)"prototype"==n||"length"==n||"name"==n||t.hasOwnProperty&&!t.hasOwnProperty(n)||e.call(i,t[n],n,t);else if(vi(t)||s(t)){var r="object"!=typeof t;for(n=0,l=t.length;n<l;n++)(r||n in t)&&e.call(i,t[n],n,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,i,t);else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t);return t}function l(t){return function(e,i){t(i,e)}}function r(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function a(t){for(var e=t.$$hashKey,i=1,n=arguments.length;i<n;i++){var s=arguments[i];if(s)for(var o=Object.keys(s),l=0,a=o.length;l<a;l++){var h=o[l];t[h]=s[h]}}return r(t,e),t}function h(t){return parseInt(t,10)}function d(){}function c(t){return t}function u(t){return function(){return t}}function f(t){return void 0===t}function p(t){return void 0!==t}function _(t){return null!==t&&"object"==typeof t}function m(t){return"string"==typeof t}function g(t){return"number"==typeof t}function v(t){return"[object Date]"===fi.call(t)}function b(t){return"function"==typeof t}function y(t){return"[object RegExp]"===fi.call(t)}function x(t){return t&&t.window===t}function w(t){return t&&t.$evalAsync&&t.$watch}function C(t){return"boolean"==typeof t}function N(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function k(t){return ri(t.nodeName||t[0]&&t[0].nodeName)}function I(t,e){var i=t.indexOf(e);return 0<=i&&t.splice(i,1),e}function S(t,e,i,n){if(x(t)||w(t))throw pi("cpws");if(e){if(t===e)throw pi("cpi");if(i=i||[],n=n||[],_(t)){var s=i.indexOf(t);if(-1!==s)return n[s];i.push(t),n.push(e)}if(vi(t))for(var l=e.length=0;l<t.length;l++)s=S(t[l],null,i,n),_(t[l])&&(i.push(t[l]),n.push(s)),e.push(s);else{var a=e.$$hashKey;vi(e)?e.length=0:o(e,function(t,i){delete e[i]});for(l in t)t.hasOwnProperty(l)&&(s=S(t[l],null,i,n),_(t[l])&&(i.push(t[l]),n.push(s)),e[l]=s);r(e,a)}}else(e=t)&&(vi(t)?e=S(t,[],i,n):v(t)?e=new Date(t.getTime()):y(t)?(e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex):_(t)&&(s=Object.create(Object.getPrototypeOf(t)),e=S(t,s,i,n)));return e}function T(t,e){if(vi(t)){e=e||[];for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}else if(_(t))for(i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function E(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,s=typeof t;if(s==typeof e&&"object"==s){if(!vi(t)){if(v(t))return!!v(e)&&E(t.getTime(),e.getTime());if(y(t)&&y(e))return t.toString()==e.toString();if(w(t)||w(e)||x(t)||x(e)||vi(e))return!1;s={};for(n in t)if("$"!==n.charAt(0)&&!b(t[n])){if(!E(t[n],e[n]))return!1;s[n]=!0}for(n in e)if(!s.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e[n]!==i&&!b(e[n]))return!1;return!0}if(!vi(e))return!1;if((s=t.length)==e.length){for(n=0;n<s;n++)if(!E(t[n],e[n]))return!1;return!0}}return!1}function O(t,e,i){return t.concat(di.call(e,i))}function j(t,e){var i=2<arguments.length?di.call(arguments,2):[];return!b(e)||e instanceof RegExp?e:i.length?function(){return arguments.length?e.apply(t,O(i,arguments,0)):e.apply(t,i)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function A(t,n){var s=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?s=i:x(n)?s="$WINDOW":n&&e===n?s="$DOCUMENT":w(n)&&(s="$SCOPE"),s}function M(t,e){return void 0===t?i:(g(e)||(e=e?2:null),JSON.stringify(t,A,e))}function D(t){return m(t)?JSON.parse(t):t}function L(t){t=ni(t).clone();try{t.empty()}catch(t){}var e=ni("<div>").append(t).html();try{return t[0].nodeType===Ii?ri(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+ri(e)})}catch(t){return ri(e)}}function X(t){try{return decodeURIComponent(t)}catch(t){}}function P(t){var e,i,n={};return o((t||"").split("&"),function(t){t&&(e=t.replace(/\+/g,"%20").split("="),i=X(e[0]),p(i)&&(t=!p(e[1])||X(e[1]),ai.call(n,i)?vi(n[i])?n[i].push(t):n[i]=[n[i],t]:n[i]=t))}),n}function B(t){var e=[];return o(t,function(t,i){vi(t)?o(t,function(t){e.push(R(i,!0)+(!0===t?"":"="+R(t,!0)))}):e.push(R(i,!0)+(!0===t?"":"="+R(t,!0)))}),e.length?e.join("&"):""}function H(t){return R(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function R(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function $(t,e){var i,n,s={};o(wi,function(e){e+="app",!i&&t.hasAttribute&&t.hasAttribute(e)&&(i=t,n=t.getAttribute(e))}),o(wi,function(e){e+="app";var s;!i&&(s=t.querySelector("["+e.replace(":","\\:")+"]"))&&(i=s,n=s.getAttribute(e))}),i&&(s.strictDi=null!==function(t,e){var i,n,s=wi.length;for(t=ni(t),n=0;n<s;++n)if(i=wi[n]+e,m(i=t.attr(i)))return i;return null}(i,"strict-di"),e(i,n?[n]:[],s))}function F(i,n,s){_(s)||(s={}),s=a({strictDi:!1},s);var l=function(){if((i=ni(i)).injector()){var t=i[0]===e?"document":L(i);throw pi("btstrpd",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}return(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",i)}]),s.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng"),(t=xt(n,s.strictDi)).invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,i,n){t.$apply(function(){e.data("$injector",n),i(e)(t)})}]),t},r=/^NG_ENABLE_DEBUG_INFO!/,h=/^NG_DEFER_BOOTSTRAP!/;if(t&&r.test(t.name)&&(s.debugInfoEnabled=!0,t.name=t.name.replace(r,"")),t&&!h.test(t.name))return l();t.name=t.name.replace(h,""),_i.resumeBootstrap=function(t){o(t,function(t){n.push(t)}),l()}}function z(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function V(t){if(!(t=_i.element(t).injector()))throw pi("test");return t.get("$$testability")}function W(t,e){return e=e||"_",t.replace(Ci,function(t,i){return(i?e:"")+t.toLowerCase()})}function U(t,e,i){if(!t)throw pi("areq",e||"?",i||"required");return t}function G(t,e,i){return i&&vi(t)&&(t=t[t.length-1]),U(b(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function q(t,e){if("hasOwnProperty"===t)throw pi("badname",e)}function Y(t,e,i){if(!e)return t;for(var n,s=t,o=(e=e.split(".")).length,l=0;l<o;l++)n=e[l],t&&(t=(s=t)[n]);return!i&&b(t)?j(s,t):t}function K(t){var e=t[0];t=t[t.length-1];var i=[e];do{if(!(e=e.nextSibling))break;i.push(e)}while(e!==t);return ni(i)}function J(){return Object.create(null)}function Q(t){return t.replace(Oi,function(t,e,i,n){return n?i.toUpperCase():i}).replace(ji,"Moz$1")}function Z(t){return(t=t.nodeType)===ki||!t||9===t}function tt(t,e){var i,n,s=e.createDocumentFragment(),l=[];if(Li.test(t)){for(i=i||s.appendChild(e.createElement("div")),n=(Xi.exec(t)||["",""])[1].toLowerCase(),n=Bi[n]||Bi._default,i.innerHTML=n[1]+t.replace(Pi,"<$1></$2>")+n[2],n=n[0];n--;)i=i.lastChild;l=O(l,i.childNodes),(i=s.firstChild).textContent=""}else l.push(e.createTextNode(t));return s.textContent="",s.innerHTML="",o(l,function(t){s.appendChild(t)}),s}function et(t){if(t instanceof et)return t;var i;if(m(t)&&(t=bi(t),i=!0),!(this instanceof et)){if(i&&"<"!=t.charAt(0))throw Mi("nosel");return new et(t)}if(i){i=e;var n;t=(n=Di.exec(t))?[i.createElement(n[1])]:(n=tt(t,i))?n.childNodes:[]}ct(this,t)}function it(t){return t.cloneNode(!0)}function nt(t,e){if(e||ot(t),t.querySelectorAll)for(var i=t.querySelectorAll("*"),n=0,s=i.length;n<s;n++)ot(i[n])}function st(t,e,i,n){if(p(n))throw Mi("offargs");var s=(n=lt(t))&&n.events,l=n&&n.handle;if(l)if(e)o(e.split(" "),function(e){if(p(i)){var n=s[e];if(I(n||[],i),n&&0<n.length)return}t.removeEventListener(e,l,!1),delete s[e]});else for(e in s)"$destroy"!==e&&t.removeEventListener(e,l,!1),delete s[e]}function ot(t,e){var n=t.ng339,s=n&&Ti[n];s&&(e?delete s.data[e]:(s.handle&&(s.events.$destroy&&s.handle({},"$destroy"),st(t)),delete Ti[n],t.ng339=i))}function lt(t,e){var n=(n=t.ng339)&&Ti[n];return e&&!n&&(t.ng339=n=++Ei,n=Ti[n]={events:{},data:{},handle:i}),n}function rt(t,e,i){if(Z(t)){var n=p(i),s=!n&&e&&!_(e),o=!e;if(t=(t=lt(t,!s))&&t.data,n)t[e]=i;else{if(o)return t;if(s)return t&&t[e];a(t,e)}}}function at(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function ht(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",bi((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+bi(e)+" "," ")))})}function dt(t,e){if(e&&t.setAttribute){var i=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=bi(t),-1===i.indexOf(" "+t+" ")&&(i+=t+" ")}),t.setAttribute("class",bi(i))}}function ct(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var i=e.length;if("number"==typeof i&&e.window!==e){if(i)for(var n=0;n<i;n++)t[t.length++]=e[n]}else t[t.length++]=e}}function ut(t,e){return ft(t,"$"+(e||"ngController")+"Controller")}function ft(t,e,n){for(9==t.nodeType&&(t=t.documentElement),e=vi(e)?e:[e];t;){for(var s=0,o=e.length;s<o;s++)if((n=ni.data(t,e[s]))!==i)return n;t=t.parentNode||11===t.nodeType&&t.host}}function pt(t){for(nt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function _t(t,e){e||nt(t);var i=t.parentNode;i&&i.removeChild(t)}function mt(t,e){var i=Ri[e.toLowerCase()];return i&&$i[k(t)]&&i}function gt(){this.$get=function(){return a(et,{hasClass:function(t,e){return t.attr&&(t=t[0]),at(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),dt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),ht(t,e)}})}}function vt(t,e){var i=t&&t.$$hashKey;return i?("function"==typeof i&&(i=t.$$hashKey()),i):(i=typeof t,i="function"==i||"object"==i&&null!==t?t.$$hashKey=i+":"+(e||function(){return++mi})():i+":"+t)}function bt(t,e){if(e){var i=0;this.nextUid=function(){return++i}}o(t,this.put,this)}function yt(t,e,i){var n;if("function"==typeof t){if(!(n=t.$inject)){if(n=[],t.length){if(e)throw m(i)&&i||(i=t.name||function(t){return(t=t.toString().replace(Ui,"").match(zi))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Gi("strictdi",i);o((e=(e=t.toString().replace(Ui,"")).match(zi))[1].split(Vi),function(t){t.replace(Wi,function(t,e,i){n.push(i)})})}t.$inject=n}}else vi(t)?(e=t.length-1,G(t[e],"fn"),n=t.slice(0,e)):G(t,"fn",!0);return n}function xt(t,e){function n(t){return function(e,i){if(!_(e))return t(e,i);o(e,l(t))}}function s(t,e){if(q(t,"service"),(b(e)||vi(e))&&(e=y.instantiate(e)),!e.$get)throw Gi("pget",t);return v[t+"Provider"]=e}function r(t,e,i){return s(t,{$get:!1!==i?function(t,e){return function(){var i=w.invoke(e,this);if(f(i))throw Gi("undef",t);return i}}(t,e):e})}function a(t){var e,i=[];return o(t,function(t){function n(t){var e,i;for(e=0,i=t.length;e<i;e++){var n=t[e],s=y.get(n[0]);s[n[1]].apply(s,n[2])}}if(!g.get(t)){g.put(t,!0);try{m(t)?(e=oi(t),i=i.concat(a(e.requires)).concat(e._runBlocks),n(e._invokeQueue),n(e._configBlocks)):b(t)?i.push(y.invoke(t)):vi(t)?i.push(y.invoke(t)):G(t,"module")}catch(e){throw vi(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Gi("modulerr",t,e.stack||e.message||e)}}}),i}function h(t,i){function n(e,n){if(t.hasOwnProperty(e)){if(t[e]===c)throw Gi("cdep",e+" <- "+p.join(" <- "));return t[e]}try{return p.unshift(e),t[e]=c,t[e]=i(e,n)}catch(i){throw t[e]===c&&delete t[e],i}finally{p.shift()}}function s(t,i,s,o){"string"==typeof s&&(o=s,s=null);var l,r,a,h=[],d=yt(t,e,o);for(r=0,l=d.length;r<l;r++){if("string"!=typeof(a=d[r]))throw Gi("itkn",a);h.push(s&&s.hasOwnProperty(a)?s[a]:n(a,o))}return vi(t)&&(t=t[l]),t.apply(i,h)}return{invoke:s,instantiate:function(t,e,i){var n=Object.create((vi(t)?t[t.length-1]:t).prototype);return t=s(t,n,e,i),_(t)||b(t)?t:n},get:n,annotate:yt,has:function(e){return v.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}e=!0===e;var c={},p=[],g=new bt([],!0),v={$provide:{provider:n(s),factory:n(r),service:n(function(t,e){return r(t,["$injector",function(t){return t.instantiate(e)}])}),value:n(function(t,e){return r(t,u(e),!1)}),constant:n(function(t,e){q(t,"constant"),v[t]=e,x[t]=e}),decorator:function(t,e){var i=y.get(t+"Provider"),n=i.$get;i.$get=function(){var t=w.invoke(n,i);return w.invoke(e,null,{$delegate:t})}}}},y=v.$injector=h(v,function(t,e){throw _i.isString(e)&&p.push(e),Gi("unpr",p.join(" <- "))}),x={},w=x.$injector=h(x,function(t,e){var n=y.get(t+"Provider",e);return w.invoke(n.$get,n,i,t)});return o(a(t),function(t){w.invoke(t||d)}),w}function wt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(i,n,s){function o(t){if(t){t.scrollIntoView();var e;b(e=l.yOffset)?e=e():N(e)?(e=e[0],e="fixed"!==i.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom):g(e)||(e=0),e&&(t=t.getBoundingClientRect().top,i.scrollBy(0,t-e))}else i.scrollTo(0,0)}function l(){var t,e=n.hash();e?(t=r.getElementById(e))?o(t):(t=function(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===k(t))return e=t,!0}),e}(r.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var r=i.document;return e&&s.$watch(function(){return n.hash()},function(e,i){e===i&&""===e||function(e,i){"complete"===(i=i||t).document.readyState?i.setTimeout(e):ni(i).on("load",e)}(function(){s.$evalAsync(l)})}),l}]}function Ct(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function Nt(t,e,n,s){function l(t){try{t.apply(null,di.call(arguments,1))}finally{if(0==--x)for(;w.length;)try{w.pop()()}catch(t){n.error(t)}}}function r(){a(),h()}function a(){E(k=f(k=t.history.state)?null:k,M)&&(k=M),M=k}function h(){S===u.url()&&I===k||(S=u.url(),I=k,o(j,function(t){t(u.url(),k)}))}function c(t){try{return decodeURIComponent(t)}catch(e){return t}}var u=this,p=e[0],_=t.location,g=t.history,v=t.setTimeout,b=t.clearTimeout,y={};u.isMock=!1;var x=0,w=[];u.$$completeOutstandingRequest=l,u.$$incOutstandingRequestCount=function(){x++},u.notifyWhenNoOutstandingRequests=function(t){o(N,function(t){t()}),0===x?t():w.push(t)};var C,N=[];u.addPollFn=function(t){return f(C)&&function(t,e){!function i(){o(N,function(t){t()}),C=e(i,t)}()}(100,v),N.push(t),t};var k,I,S=_.href,T=e.find("base"),O=null;a(),I=k,u.url=function(e,i,n){if(f(n)&&(n=null),_!==t.location&&(_=t.location),g!==t.history&&(g=t.history),e){var o=I===n;if(S===e&&(!s.history||o))return u;var l=S&&Yt(S)===Yt(e);return S=e,I=n,!s.history||l&&o?(l||(O=e),i?_.replace(e):l?(i=_,n=e.indexOf("#"),e=-1===n?"":e.substr(n+1),i.hash=e):_.href=e):(g[i?"replaceState":"pushState"](n,"",e),a(),I=k),u}return O||_.href.replace(/%27/g,"'")},u.state=function(){return k};var j=[],A=!1,M=null;u.onUrlChange=function(e){return A||(s.history&&ni(t).on("popstate",r),ni(t).on("hashchange",r),A=!0),j.push(e),e},u.$$checkUrlChange=h,u.baseHref=function(){var t=T.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var D={},L="",X=u.baseHref();u.cookies=function(t,e){var s,o,l,r;if(!t){if(p.cookie!==L)for(L=p.cookie,s=L.split("; "),D={},l=0;l<s.length;l++)o=s[l],0<(r=o.indexOf("="))&&(t=c(o.substring(0,r)),D[t]===i&&(D[t]=c(o.substring(r+1))));return D}e===i?p.cookie=encodeURIComponent(t)+"=;path="+X+";expires=Thu, 01 Jan 1970 00:00:00 GMT":m(e)&&4096<(s=(p.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path="+X).length+1)&&n.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+s+" > 4096 bytes)!")},u.defer=function(t,e){var i;return x++,i=v(function(){delete y[i],l(t)},e||0),y[i]=!0,i},u.defer.cancel=function(t){return!!y[t]&&(delete y[t],b(t),l(d),!0)}}function kt(){this.$get=["$window","$log","$sniffer","$document",function(t,e,i,n){return new Nt(t,n,e,i)}]}function It(){this.$get=function(){function t(t,i){function s(t){t!=u&&(p?p==t&&(p=t.n):p=t,o(t.n,t.p),o(t,u),u=t,u.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw n("$cacheFactory")("iid",t);var l=0,r=a({},i,{id:t}),h={},d=i&&i.capacity||Number.MAX_VALUE,c={},u=null,p=null;return e[t]={put:function(t,e){if(d<Number.MAX_VALUE){s(c[t]||(c[t]={key:t}))}if(!f(e))return t in h||l++,h[t]=e,l>d&&this.remove(p.key),e},get:function(t){if(d<Number.MAX_VALUE){var e=c[t];if(!e)return;s(e)}return h[t]},remove:function(t){if(d<Number.MAX_VALUE){var e=c[t];if(!e)return;e==u&&(u=e.p),e==p&&(p=e.n),o(e.n,e.p),delete c[t]}delete h[t],l--},removeAll:function(){h={},l=0,c={},u=p=null},destroy:function(){c=r=h=null,delete e[t]},info:function(){return a({},r,{size:l})}}}var e={};return t.info=function(){var t={};return o(e,function(e,i){t[i]=e.info()}),t},t.get=function(t){return e[t]},t}}function St(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Tt(t,n){var s={},r=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=function(t){var e={};t=t.split(",");var i;for(i=0;i<t.length;i++)e[t[i]]=!0;return e}("ngSrc,ngSrcset,src,srcset"),g=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function e(i,n){return q(i,"directive"),m(i)?(U(n,"directiveFactory"),s.hasOwnProperty(i)||(s[i]=[],t.factory(i+"Directive",["$injector","$exceptionHandler",function(t,e){var n=[];return o(s[i],function(s,l){try{var r=t.invoke(s);b(r)?r={compile:u(r)}:!r.compile&&r.link&&(r.compile=u(r.link)),r.priority=r.priority||0,r.index=l,r.name=r.name||i,r.require=r.require||r.controller&&r.name,r.restrict=r.restrict||"EA",_(r.scope)&&(r.$$isolateBindings=function(t,e){var i=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,n={};return o(t,function(t,s){var o=t.match(i);if(!o)throw Ki("iscp",e,s,t);n[s]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||s}}),n}(r.scope,r.name)),n.push(r)}catch(t){e(t)}}),n}])),s[i].push(n)):o(i,l(e)),this},this.aHrefSanitizationWhitelist=function(t){return p(t)?(n.aHrefSanitizationWhitelist(t),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return p(t)?(n.imgSrcSanitizationWhitelist(t),this):n.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(t){return p(t)?(y=t,this):y},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,n,l,u,p,x,C,N,S,T,O){function j(t,e){try{t.addClass(e)}catch(t){}}function A(t,e,i,n,s){t instanceof ni||(t=ni(t)),o(t,function(e,i){e.nodeType==Ii&&e.nodeValue.match(/\S+/)&&(t[i]=ni(e).wrap("<span></span>").parent()[0])});var l=M(t,e,t,i,n,s);A.$$addScopeClass(t);var r=null;return function(e,i,n){U(e,"scope");var s=(n=n||{}).parentBoundTranscludeFn,o=n.transcludeControllers;if(n=n.futureParentElement,s&&s.$$boundTransclude&&(s=s.$$boundTransclude),r||(r=(n=n&&n[0])&&"foreignobject"!==k(n)&&n.toString().match(/SVG/)?"svg":"html"),n="html"!==r?ni(G(r,ni("<div>").append(t).html())):i?Hi.clone.call(t):t,o)for(var a in o)n.data("$"+a+"Controller",o[a].instance);return A.$$addScopeInfo(n,e),i&&i(n,e),l&&l(e,n,n,s),n}}function M(t,e,n,s,o,l){for(var r,a,h,d,c,u=[],f=0;f<t.length;f++)r=new Q,(l=(a=X(t[f],[],r,0===f?s:i,o)).length?H(a,t[f],r,e,n,null,[],[],l):null)&&l.scope&&A.$$addScopeClass(r.$$element),r=l&&l.terminal||!(h=t[f].childNodes)||!h.length?null:M(h,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||r)&&(u.push(f,l,r),d=!0,c=c||l),l=null;return d?function(t,n,s,o){var l,r,a,h,d,f,p;if(c)for(p=Array(n.length),h=0;h<u.length;h+=3)l=u[h],p[l]=n[l];else p=n;for(h=0,d=u.length;h<d;)r=p[u[h++]],n=u[h++],l=u[h++],n?(n.scope?(a=t.$new(),A.$$addScopeInfo(ni(r),a)):a=t,f=n.transcludeOnThisElement?D(t,n.transclude,o,n.elementTranscludeOnThisElement):!n.templateOnThisElement&&o?o:!o&&e?D(t,e):null,n(l,a,r,s,f)):l&&l(t,r.childNodes,i,o)}:null}function D(t,e,i,n){return function(n,s,o,l,r){return n||(n=t.$new(!1,r),n.$$transcluded=!0),e(n,s,{parentBoundTranscludeFn:i,transcludeControllers:o,futureParentElement:l})}}function X(e,i,o,l,a){var d,c=o.$attr;switch(e.nodeType){case ki:$(i,Et(k(e)),"E",l,a);for(var u,p,_,g=e.attributes,b=0,y=g&&g.length;b<y;b++){var x=!1,w=!1;d=(u=g[b]).name,p=bi(u.value),u=Et(d),(_=nt.test(u))&&(d=d.replace(Ji,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var C=u.replace(/(Start|End)$/,"");(function(e){if(s.hasOwnProperty(e))for(var i=t.get(e+"Directive"),n=0,o=i.length;n<o;n++)if((e=i[n]).multiElement)return!0;return!1})(C)&&u===C+"Start"&&(x=d,w=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),c[u=Et(d.toLowerCase())]=d,!_&&o.hasOwnProperty(u)||(o[u]=p,mt(e,u)&&(o[u]=!0)),function(t,e,i,s,o){var l=function(t,e){if("srcdoc"==e)return S.HTML;var i=k(t);if("xlinkHref"==e||"form"==i&&"action"==e||"img"!=i&&("src"==e||"ngSrc"==e))return S.RESOURCE_URL}(t,s);o=f[s]||o;var r=n(i,!0,l,o);if(r){if("multiple"===s&&"select"===k(t))throw Ki("selmulti",L(t));e.push({priority:100,compile:function(){return{pre:function(t,e,a){if(e=a.$$observers||(a.$$observers={}),v.test(s))throw Ki("nodomevents");var h=a[s];h!==i&&(r=h&&n(h,!0,l,o),i=h),r&&(a[s]=r(t),(e[s]||(e[s]=[])).$$inter=!0,(a.$$observers&&a.$$observers[s].$$scope||t).$watch(r,function(t,e){"class"===s&&t!=e?a.$updateClass(t,e):a.$set(s,t)}))}}}})}}(e,i,p,u,_),$(i,u,"A",l,a,x,w)}if(e=e.className,m(e)&&""!==e)for(;d=h.exec(e);)u=Et(d[2]),$(i,u,"C",l,a)&&(o[u]=bi(d[3])),e=e.substr(d.index+d[0].length);break;case Ii:!function(t,e){var i=n(e,!0);i&&t.push({priority:0,compile:function(t){var e=!!(t=t.parent()).length;return e&&A.$$addBindingClass(t),function(t,n){var s=n.parent();e||A.$$addBindingClass(s),A.$$addBindingInfo(s,i.expressions),t.$watch(i,function(t){n[0].nodeValue=t})}}})}(i,e.nodeValue);break;case 8:try{(d=r.exec(e.nodeValue))&&(u=Et(d[1]),$(i,u,"M",l,a)&&(o[u]=bi(d[2])))}catch(t){}}return i.sort(z),i}function P(t,e,i){var n=[],s=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw Ki("uterdir",e,i);t.nodeType==ki&&(t.hasAttribute(e)&&s++,t.hasAttribute(i)&&s--),n.push(t),t=t.nextSibling}while(0<s);else n.push(t);return ni(n)}function B(t,e,i){return function(n,s,o,l,r){return s=P(s[0],e,i),t(n,s,o,l,r)}}function H(t,s,r,h,d,c,f,v,y){function C(t,e,i,n){t&&(i&&(t=B(t,i,n)),t.require=O.require,t.directiveName=$,(Z===O||O.$$isolateScope)&&(t=Y(t,{isolateScope:!0})),f.push(t)),e&&(i&&(e=B(e,i,n)),e.require=O.require,e.directiveName=$,(Z===O||O.$$isolateScope)&&(e=Y(e,{isolateScope:!0})),v.push(e))}function N(t,e,i,n){var s,l,r="data",a=!1,h=i;if(m(e)){if(l=e.match(g),e=e.substring(l[0].length),l[3]&&(l[1]?l[3]=null:l[1]=l[3]),"^"===l[1]?r="inheritedData":"^^"===l[1]&&(r="inheritedData",h=i.parent()),"?"===l[2]&&(a=!0),s=null,n&&"data"===r&&(s=n[e])&&(s=s.instance),!(s=s||h[r]("$"+e+"Controller"))&&!a)throw Ki("ctreq",e,t);return s||null}return vi(e)&&(s=[],o(e,function(e){s.push(N(t,e,i,n))})),s}function k(t,e,l,a,h){var d,c,u,_,m,g,b,y;if(s===l?(y=r,b=r.$$element):(b=ni(l),y=new Q(b,r)),Z&&(_=e.$new(!0)),h&&(g=function(t,e,n){var s;return w(t)||(n=e,e=t,t=i),lt&&(s=m),n||(n=lt?b.parent():b),h(t,e,s,n,k)},g.$$boundTransclude=h),J&&(T={},m={},o(J,function(t){var i={$scope:t===Z||t.$$isolateScope?_:e,$element:b,$attrs:y,$transclude:g};"@"==(u=t.controller)&&(u=y[t.name]),i=x(u,i,!0,t.controllerAs),m[t.name]=i,lt||b.data("$"+t.name+"Controller",i.instance),T[t.name]=i})),Z){A.$$addScopeInfo(b,_,!0,!(tt&&(tt===Z||tt===Z.$$originalDirective))),A.$$addScopeClass(b,!0),a=T&&T[Z.name];var C=_;a&&a.identifier&&!0===Z.bindToController&&(C=a.instance),o(_.$$isolateBindings=Z.$$isolateBindings,function(t,i){var s,o,l,r,a=t.attrName,h=t.optional;switch(t.mode){case"@":y.$observe(a,function(t){C[i]=t}),y.$$observers[a].$$scope=e,y[a]&&(C[i]=n(y[a])(e));break;case"=":if(h&&!y[a])break;o=p(y[a]),r=o.literal?E:function(t,e){return t===e||t!=t&&e!=e},l=o.assign||function(){throw s=C[i]=o(e),Ki("nonassign",y[a],Z.name)},s=C[i]=o(e),(h=function(t){return r(t,C[i])||(r(t,s)?l(e,t=C[i]):C[i]=t),s=t}).$stateful=!0,h=t.collection?e.$watchCollection(y[a],h):e.$watch(p(y[a],h),null,o.literal),_.$on("$destroy",h);break;case"&":o=p(y[a]),C[i]=function(t){return o(e,t)}}})}for(T&&(o(T,function(t){t()}),T=null),a=0,d=f.length;a<d;a++)c=f[a],K(c,c.isolateScope?_:e,b,y,c.require&&N(c.directiveName,c.require,b,m),g);var k=e;for(Z&&(Z.template||null===Z.templateUrl)&&(k=_),t&&t(k,l.childNodes,i,h),a=v.length-1;0<=a;a--)c=v[a],K(c,c.isolateScope?_:e,b,y,c.require&&N(c.directiveName,c.require,b,m),g)}y=y||{};for(var I,T,O,$,z,W,U=-Number.MAX_VALUE,J=y.controllerDirectives,Z=y.newIsolateScopeDirective,tt=y.templateDirective,nt=y.nonTlbTranscludeDirective,st=!1,ot=!1,lt=y.hasElementTranscludeDirective,rt=r.$$element=ni(s),at=h,ht=0,dt=t.length;ht<dt;ht++){var ct=(O=t[ht]).$$start,ut=O.$$end;if(ct&&(rt=P(s,ct,ut)),z=i,U>O.priority)break;if((z=O.scope)&&(O.templateUrl||(_(z)?(V("new/isolated scope",Z||I,O,rt),Z=O):V("new/isolated scope",Z,O,rt)),I=I||O),$=O.name,!O.templateUrl&&O.controller&&(z=O.controller,J=J||{},V("'"+$+"' controller",J[$],O,rt),J[$]=O),(z=O.transclude)&&(st=!0,O.$$tlb||(V("transclusion",nt,O,rt),nt=O),"element"==z?(lt=!0,U=O.priority,z=rt,rt=r.$$element=ni(e.createComment(" "+$+": "+r[$]+" ")),s=rt[0],q(d,di.call(z,0),s),at=A(z,h,U,c&&c.name,{nonTlbTranscludeDirective:nt})):(z=ni(it(s)).contents(),rt.empty(),at=A(z,h))),O.template)if(ot=!0,V("template",tt,O,rt),tt=O,z=b(O.template)?O.template(rt,r):O.template,z=et(z),O.replace){if(c=O,z=Li.test(z)?jt(G(O.templateNamespace,bi(z))):[],s=z[0],1!=z.length||s.nodeType!==ki)throw Ki("tplrt",$,"");q(d,rt,s),z=X(s,[],dt={$attr:{}});var ft=t.splice(ht+1,t.length-(ht+1));Z&&R(z),t=t.concat(z).concat(ft),F(r,dt),dt=t.length}else rt.html(z);if(O.templateUrl)ot=!0,V("template",tt,O,rt),tt=O,O.replace&&(c=O),k=function(t,e,i,n,s,l,r,h){var d,c,f=[],p=e[0],m=t.shift(),g=a({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=b(m.templateUrl)?m.templateUrl(e,i):m.templateUrl,y=m.templateNamespace;return e.empty(),u(S.getTrustedResourceUrl(v)).then(function(a){var u,b;if(a=et(a),m.replace){if(a=Li.test(a)?jt(G(y,bi(a))):[],u=a[0],1!=a.length||u.nodeType!==ki)throw Ki("tplrt",m.name,v);a={$attr:{}},q(n,e,u);var x=X(u,[],a);_(m.scope)&&R(x),t=x.concat(t),F(i,a)}else u=p,e.html(a);for(t.unshift(g),d=H(t,u,i,s,e,m,l,r,h),o(n,function(t,i){t==u&&(n[i]=e[0])}),c=M(e[0].childNodes,s);f.length;){a=f.shift(),b=f.shift();var w=f.shift(),C=f.shift();if(x=e[0],!a.$$destroyed){if(b!==p){var N=b.className;h.hasElementTranscludeDirective&&m.replace||(x=it(u)),q(w,ni(b),x),j(ni(x),N)}b=d.transcludeOnThisElement?D(a,d.transclude,C):C,d(c,a,x,n,b)}}f=null}),function(t,e,i,n,s){t=s,e.$$destroyed||(f?f.push(e,i,n,t):(d.transcludeOnThisElement&&(t=D(e,d.transclude,s)),d(c,e,i,n,t)))}}(t.splice(ht,t.length-ht),rt,r,d,st&&at,f,v,{controllerDirectives:J,newIsolateScopeDirective:Z,templateDirective:tt,nonTlbTranscludeDirective:nt}),dt=t.length;else if(O.compile)try{b(W=O.compile(rt,r,at))?C(null,W,ct,ut):W&&C(W.pre,W.post,ct,ut)}catch(t){l(t,L(rt))}O.terminal&&(k.terminal=!0,U=Math.max(U,O.priority))}return k.scope=I&&!0===I.scope,k.transcludeOnThisElement=st,k.elementTranscludeOnThisElement=lt,k.templateOnThisElement=ot,k.transclude=at,y.hasElementTranscludeDirective=lt,k}function R(t){for(var e=0,i=t.length;e<i;e++){var n,s=e;n=a(Object.create(t[e]),{$$isolateScope:!0}),t[s]=n}}function $(e,n,o,r,h,d,c){if(n===h)return null;if(h=null,s.hasOwnProperty(n))for(var u,f=0,p=(n=t.get(n+"Directive")).length;f<p;f++)try{if(u=n[f],(r===i||r>u.priority)&&-1!=u.restrict.indexOf(o)){if(d){var _={$$start:d,$$end:c};u=a(Object.create(u),_)}e.push(u),h=u}}catch(t){l(t)}return h}function F(t,e){var i=e.$attr,n=t.$attr,s=t.$$element;o(t,function(n,s){"$"!=s.charAt(0)&&(e[s]&&e[s]!==n&&(n+=("style"===s?";":" ")+e[s]),t.$set(s,n,!0,i[s]))}),o(e,function(e,o){"class"==o?(j(s,e),t.class=(t.class?t.class+" ":"")+e):"style"==o?(s.attr("style",s.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,n[o]=i[o])})}function z(t,e){var i=e.priority-t.priority;return 0!==i?i:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function V(t,e,i,n){if(e)throw Ki("multidir",e.name,i.name,t,L(n))}function G(t,i){switch(t=ri(t||"html")){case"svg":case"math":var n=e.createElement("div");return n.innerHTML="<"+t+">"+i+"</"+t+">",n.childNodes[0].childNodes;default:return i}}function q(t,i,n){var s,o,l=i[0],r=i.length,a=l.parentNode;if(t)for(s=0,o=t.length;s<o;s++)if(t[s]==l){t[s++]=n,o=s+r-1;for(var h=t.length;s<h;s++,o++)o<h?t[s]=t[o]:delete t[s];t.length-=r-1,t.context===l&&(t.context=n);break}for(a&&a.replaceChild(n,l),(t=e.createDocumentFragment()).appendChild(l),ni(n).data(ni(l).data()),si?(gi=!0,si.cleanData([l])):delete ni.cache[l[ni.expando]],l=1,r=i.length;l<r;l++)a=i[l],ni(a).remove(),t.appendChild(a),delete i[l];i[0]=n,i.length=1}function Y(t,e){return a(function(){return t.apply(null,arguments)},t,e)}function K(t,e,i,n,s,o){try{t(e,i,n,s,o)}catch(t){l(t,L(i))}}var Q=function(t,e){if(e){var i,n,s,o=Object.keys(e);for(i=0,n=o.length;i<n;i++)s=o[i],this[s]=e[s]}else this.$attr={};this.$$element=t};Q.prototype={$normalize:Et,$addClass:function(t){t&&0<t.length&&T.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&T.removeClass(this.$$element,t)},$updateClass:function(t,e){var i=Ot(t,e);i&&i.length&&T.addClass(this.$$element,i),(i=Ot(e,t))&&i.length&&T.removeClass(this.$$element,i)},$set:function(t,e,n,s){var r=mt(h=this.$$element[0],t),a=function(t,e){var i=t.nodeName;return("INPUT"===i||"TEXTAREA"===i)&&Fi[e]}(h,t),h=t;if(r?(this.$$element.prop(t,e),s=r):a&&(this[a]=e,h=a),this[t]=e,s?this.$attr[t]=s:(s=this.$attr[t])||(this.$attr[t]=s=W(t,"-")),"a"===(r=k(this.$$element))&&"href"===t||"img"===r&&"src"===t)this[t]=e=O(e,"src"===t);else if("img"===r&&"srcset"===t){r="",a=bi(e);for(var d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,c=(d=/\s/.test(a)?d:/(,)/,a=a.split(d),d=Math.floor(a.length/2),0);c<d;c++){var u=2*c;r=r+O(bi(a[u]),!0),r=r+" "+bi(a[u+1])}a=bi(a[2*c]).split(/\s/),r+=O(bi(a[0]),!0),2===a.length&&(r+=" "+bi(a[1])),this[t]=e=r}!1!==n&&(null===e||e===i?this.$$element.removeAttr(s):this.$$element.attr(s,e)),(t=this.$$observers)&&o(t[h],function(t){try{t(e)}catch(t){l(t)}})},$observe:function(t,e){var i=this,n=i.$$observers||(i.$$observers=J()),s=n[t]||(n[t]=[]);return s.push(e),C.$evalAsync(function(){!s.$$inter&&i.hasOwnProperty(t)&&e(i[t])}),function(){I(s,e)}}};var Z=n.startSymbol(),tt=n.endSymbol(),et="{{"==Z||"}}"==tt?c:function(t){return t.replace(/\{\{/g,Z).replace(/}}/g,tt)},nt=/^ngAttr[A-Z]/;return A.$$addBindingInfo=y?function(t,e){var i=t.data("$binding")||[];vi(e)?i=i.concat(e):i.push(e),t.data("$binding",i)}:d,A.$$addBindingClass=y?function(t){j(t,"ng-binding")}:d,A.$$addScopeInfo=y?function(t,e,i,n){t.data(i?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:d,A.$$addScopeClass=y?function(t,e){j(t,e?"ng-isolate-scope":"ng-scope")}:d,A}]}function Et(t){return Q(t.replace(Ji,""))}function Ot(t,e){var i="",n=t.split(/\s+/),s=e.split(/\s+/),o=0;t:for(;o<n.length;o++){for(var l=n[o],r=0;r<s.length;r++)if(l==s[r])continue t;i+=(0<i.length?" ":"")+l}return i}function jt(t){var e=(t=ni(t)).length;if(1>=e)return t;for(;e--;)8===t[e].nodeType&&ci.call(t,e,1);return t}function At(){var t={},e=!1,s=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,i){q(e,"controller"),_(e)?a(t,e):t[e]=i},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(o,l){function r(t,e,i,s){if(!t||!_(t.$scope))throw n("$controller")("noscp",s,e);t.$scope[e]=i}return function(n,h,d,c){var u,f,p;return d=!0===d,c&&m(c)&&(p=c),m(n)&&(c=n.match(s),f=c[1],p=p||c[3],n=t.hasOwnProperty(f)?t[f]:Y(h.$scope,f,!0)||(e?Y(l,f,!0):i),G(n,f,!0)),d?(d=(vi(n)?n[n.length-1]:n).prototype,u=Object.create(d),p&&r(h,p,u,f||n.name),a(function(){return o.invoke(n,u,h,f),u},{instance:u,identifier:p})):(u=o.instantiate(n,h,f),p&&r(h,p,u,f||n.name),u)}}]}function Mt(){this.$get=["$window",function(t){return ni(t.document)}]}function Dt(){this.$get=["$log",function(t){return function(e,i){t.error.apply(t,arguments)}}]}function Lt(t,e){if(m(t)){var i=t.replace(nn,"").trim();if(i){var n=e("Content-Type");(n=n&&0===n.indexOf(Qi))||(n=(n=i.match(tn))&&en[n[0]].test(i)),n&&(t=D(i))}}return t}function Xt(t){var e,i,n,s=J();return t?(o(t.split("\n"),function(t){n=t.indexOf(":"),e=ri(bi(t.substr(0,n))),i=bi(t.substr(n+1)),e&&(s[e]=s[e]?s[e]+", "+i:i)}),s):s}function Pt(t){var e=_(t)?t:i;return function(i){return e||(e=Xt(t)),i?(void 0===(i=e[ri(i)])&&(i=null),i):e}}function Bt(t,e,i,n){return b(n)?n(t,e,i):(o(n,function(n){t=n(t,e,i)}),t)}function Ht(){var t=this.defaults={transformResponse:[Lt],transformRequest:[function(t){return _(t)&&"[object File]"!==fi.call(t)&&"[object Blob]"!==fi.call(t)&&"[object FormData]"!==fi.call(t)?M(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:T(Zi),put:T(Zi),patch:T(Zi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},e=!1;this.useApplyAsync=function(t){return p(t)?(e=!!t,this):e};var s=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(l,r,h,d,c,u){function g(s){function h(t){var e=a({},t);return e.data=t.data?Bt(t.data,t.headers,t.status,u.transformResponse):t.data,200<=(t=t.status)&&300>t?e:c.reject(e)}if(!_i.isObject(s))throw n("$http")("badreq",s);var u=a({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse},s);u.headers=function(e){var i,n,s=t.headers,l=a({},e.headers);s=a({},s.common,s[ri(e.method)]);t:for(i in s){e=ri(i);for(n in l)if(ri(n)===e)continue t;l[i]=s[i]}return function(t){var e,i={};return o(t,function(t,n){b(t)?null!=(e=t())&&(i[n]=e):i[n]=t}),i}(l)}(s),u.method=hi(u.method);var m=[function(n){var s=n.headers,a=Bt(n.data,Pt(s),i,n.transformRequest);return f(a)&&o(s,function(t,e){"content-type"===ri(e)&&delete s[e]}),f(n.withCredentials)&&!f(t.withCredentials)&&(n.withCredentials=t.withCredentials),function(n,s){function a(t,e,i,s){(200<=(e=Math.max(e,0))&&300>e?w.resolve:w.reject)({data:t,status:e,headers:Pt(i),config:n,statusText:s})}function h(t){a(t.data,t.status,T(t.headers()),t.statusText)}function u(){var t=g.pendingRequests.indexOf(n);-1!==t&&g.pendingRequests.splice(t,1)}var m,x,w=c.defer(),C=w.promise,N=n.headers,k=function(t,e){if(!e)return t;var i=[];return function(t,e,i){for(var n=Object.keys(t).sort(),s=0;s<n.length;s++)e.call(i,t[n[s]],n[s])}(e,function(t,e){null===t||f(t)||(vi(t)||(t=[t]),o(t,function(t){_(t)&&(t=v(t)?t.toISOString():M(t)),i.push(R(e)+"="+R(t))}))}),0<i.length&&(t+=(-1==t.indexOf("?")?"?":"&")+i.join("&")),t}(n.url,n.params);return g.pendingRequests.push(n),C.then(u,u),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(m=_(n.cache)?n.cache:_(t.cache)?t.cache:y),m&&(x=m.get(k),p(x)?x&&b(x.then)?x.then(h,h):vi(x)?a(x[1],x[0],T(x[2]),x[3]):a(x,200,{},"OK"):m.put(k,C)),f(x)&&((x=Te(n.url)?r.cookies()[n.xsrfCookieName||t.xsrfCookieName]:i)&&(N[n.xsrfHeaderName||t.xsrfHeaderName]=x),l(n.method,k,s,function(t,i,n,s){function o(){a(i,t,n,s)}m&&(200<=t&&300>t?m.put(k,[t,i,Xt(n),s]):m.remove(k)),e?d.$applyAsync(o):(o(),d.$$phase||d.$apply())},N,n.timeout,n.withCredentials,n.responseType)),C}(n,a).then(h,h)},i],w=c.when(u);for(o(x,function(t){(t.request||t.requestError)&&m.unshift(t.request,t.requestError),(t.response||t.responseError)&&m.push(t.response,t.responseError)});m.length;){s=m.shift();var C=m.shift();w=w.then(s,C)}return w.success=function(t){return w.then(function(e){t(e.data,e.status,e.headers,u)}),w},w.error=function(t){return w.then(null,function(e){t(e.data,e.status,e.headers,u)}),w},w}var y=h("$http"),x=[];return o(s,function(t){x.unshift(m(t)?u.get(t):u.invoke(t))}),g.pendingRequests=[],function(t){o(arguments,function(t){g[t]=function(e,i){return g(a(i||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){o(arguments,function(t){g[t]=function(e,i,n){return g(a(n||{},{method:t,url:e,data:i}))}})}("post","put","patch"),g.defaults=t,g}]}function Rt(){return new t.XMLHttpRequest}function $t(){this.$get=["$browser","$window","$document",function(t,e,n){return function(t,e,n,s,l){return function(r,a,h,c,u,f,_,m){function g(){x&&x(),w&&w.abort()}function v(e,s,o,l,r){C!==i&&n.cancel(C),x=w=null,e(s,o,l,r),t.$$completeOutstandingRequest(d)}if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"==ri(r)){var y="_"+(s.counter++).toString(36);s[y]=function(t){s[y].data=t,s[y].called=!0};var x=function(t,e,i){var n=l.createElement("script"),o=null;return n.type="text/javascript",n.src=t,n.async=!0,o=function(t){n.removeEventListener("load",o,!1),n.removeEventListener("error",o,!1),l.body.removeChild(n),n=null;var r=-1,a="unknown";t&&("load"!==t.type||s[e].called||(t={type:"error"}),a=t.type,r="error"===t.type?404:200),i&&i(r,a)},n.addEventListener("load",o,!1),n.addEventListener("error",o,!1),l.body.appendChild(n),o}(a.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(t,e){v(c,t,s[y].data,"",e),s[y]=d})}else{var w=e();if(w.open(r,a,!0),o(u,function(t,e){p(t)&&w.setRequestHeader(e,t)}),w.onload=function(){var t=w.statusText||"",e="response"in w?w.response:w.responseText,i=1223===w.status?204:w.status;0===i&&(i=e?200:"file"==Se(a).protocol?404:0),v(c,i,e,w.getAllResponseHeaders(),t)},r=function(){v(c,-1,null,null,"")},w.onerror=r,w.onabort=r,_&&(w.withCredentials=!0),m)try{w.responseType=m}catch(t){if("json"!==m)throw t}w.send(h||null)}if(0<f)var C=n(g,f);else f&&b(f.then)&&f.then(g)}}(t,Rt,t.defer,e.angular.callbacks,n[0])}]}function Ft(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(i,n,s){function o(t){return"\\\\\\"+t}function l(o,l,u,_){function m(i){return i.replace(d,t).replace(c,e)}function g(t){try{var e=t;t=u?s.getTrusted(u,e):s.valueOf(e);var i;if(_&&!p(t))i=t;else if(null==t)i="";else{switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=M(t)}i=t}return i}catch(t){i=sn("interr",o,t.toString()),n(i)}}_=!!_;for(var v,y,x=0,w=[],C=[],N=o.length,k=[],I=[];x<N;){if(-1==(v=o.indexOf(t,x))||-1==(y=o.indexOf(e,v+r))){x!==N&&k.push(m(o.substring(x)));break}x!==v&&k.push(m(o.substring(x,v))),x=o.substring(v+r,y),w.push(x),C.push(i(x,g)),x=y+h,I.push(k.length),k.push("")}if(u&&1<k.length)throw sn("noconcat",o);if(!l||w.length){var S=function(t){for(var e=0,i=w.length;e<i;e++){if(_&&f(t[e]))return;k[I[e]]=t[e]}return k.join("")};return a(function(t){var e=0,i=w.length,s=Array(i);try{for(;e<i;e++)s[e]=C[e](t);return S(s)}catch(e){t=sn("interr",o,e.toString()),n(t)}},{exp:o,expressions:w,$$watchDelegate:function(t,e,i){var n;return t.$watchGroup(C,function(i,s){var o=S(i);b(e)&&e.call(this,o,i!==s?n:o,t),n=o},i)}})}}var r=t.length,h=e.length,d=new RegExp(t.replace(/./g,o),"g"),c=new RegExp(e.replace(/./g,o),"g");return l.startSymbol=function(){return t},l.endSymbol=function(){return e},l}]}function zt(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,i,n){function s(s,l,r,a){var h=e.setInterval,d=e.clearInterval,c=0,u=p(a)&&!a,f=(u?n:i).defer(),_=f.promise;return r=p(r)?r:0,_.then(null,null,s),_.$$intervalId=h(function(){f.notify(c++),0<r&&c>=r&&(f.resolve(c),d(_.$$intervalId),delete o[_.$$intervalId]),u||t.$apply()},l),o[_.$$intervalId]=f,_}var o={};return s.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},s}]}function Vt(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}function Wt(t){for(var e=(t=t.split("/")).length;e--;)t[e]=H(t[e]);return t.join("/")}function Ut(t,e){var i=Se(t);e.$$protocol=i.protocol,e.$$host=i.hostname,e.$$port=h(i.port)||ln[i.protocol]||null}function Gt(t,e){var i="/"!==t.charAt(0);i&&(t="/"+t);var n=Se(t);e.$$path=decodeURIComponent(i&&"/"===n.pathname.charAt(0)?n.pathname.substring(1):n.pathname),e.$$search=P(n.search),e.$$hash=decodeURIComponent(n.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function qt(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function Yt(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function Kt(t){return t.replace(/(#.+)|#$/,"$1")}function Jt(t){return t.substr(0,Yt(t).lastIndexOf("/")+1)}function Qt(t,e){this.$$html5=!0,e=e||"";var n=Jt(t);Ut(t,this),this.$$parse=function(t){var e=qt(n,t);if(!m(e))throw rn("ipthprfx",t,n);Gt(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=B(this.$$search),e=this.$$hash?"#"+H(this.$$hash):"";this.$$url=Wt(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=n+this.$$url.substr(1)},this.$$parseLinkUrl=function(s,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var l,r;return(l=qt(t,s))!==i?(r=l,r=(l=qt(e,l))!==i?n+(qt("/",l)||l):t+r):(l=qt(n,s))!==i?r=n+l:n==s+"/"&&(r=n),r&&this.$$parse(r),!!r}}function Zt(t,e){var i=Jt(t);Ut(t,this),this.$$parse=function(n){var s;"#"===(n=qt(t,n)||qt(i,n)).charAt(0)?(s=qt(e,n),f(s)&&(s=n)):s=this.$$html5?n:"",Gt(s,this),n=this.$$path;var o=/^\/[A-Z]:(\/.*)/;0===s.indexOf(t)&&(s=s.replace(t,"")),o.exec(s)||(n=(s=o.exec(n))?s[1]:n),this.$$path=n,this.$$compose()},this.$$compose=function(){var i=B(this.$$search),n=this.$$hash?"#"+H(this.$$hash):"";this.$$url=Wt(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e,i){return Yt(t)==Yt(e)&&(this.$$parse(e),!0)}}function te(t,e){this.$$html5=!0,Zt.apply(this,arguments);var i=Jt(t);this.$$parseLinkUrl=function(n,s){if(s&&"#"===s[0])return this.hash(s.slice(1)),!0;var o,l;return t==Yt(n)?o=n:(l=qt(i,n))?o=t+e+l:i===n+"/"&&(o=i),o&&this.$$parse(o),!!o},this.$$compose=function(){var i=B(this.$$search),n=this.$$hash?"#"+H(this.$$hash):"";this.$$url=Wt(this.$$path)+(i?"?"+i:"")+n,this.$$absUrl=t+e+this.$$url}}function ee(t){return function(){return this[t]}}function ie(t,e){return function(i){return f(i)?this[t]:(this[t]=e(i),this.$$compose(),this)}}function ne(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return p(e)?(t=e,this):t},this.html5Mode=function(t){return C(t)?(e.enabled=t,this):_(t)?(C(t.enabled)&&(e.enabled=t.enabled),C(t.requireBase)&&(e.requireBase=t.requireBase),C(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(i,n,s,o,l){function r(t,e,i){var s=h.url(),o=h.$$state;try{n.url(t,e,i),h.$$state=n.state()}catch(t){throw h.url(s),h.$$state=o,t}}function a(t,e){i.$broadcast("$locationChangeSuccess",h.absUrl(),t,h.$$state,e)}var h,d;d=n.baseHref();var c,u=n.url();if(e.enabled){if(!d&&e.requireBase)throw rn("nobase");c=u.substring(0,u.indexOf("/",u.indexOf("//")+2))+(d||"/"),d=s.history?Qt:te}else c=Yt(u),d=Zt;(h=new d(c,"#"+t)).$$parseLinkUrl(u,u),h.$$state=n.state();var f=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var s=ni(t.target);"a"!==k(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;var r=s.prop("href"),a=s.attr("href")||s.attr("xlink:href");_(r)&&"[object SVGAnimatedString]"===r.toString()&&(r=Se(r.animVal).href),f.test(r)||!r||s.attr("target")||t.isDefaultPrevented()||!h.$$parseLinkUrl(r,a)||(t.preventDefault(),h.absUrl()!=n.url()&&(i.$apply(),l.angular["ff-684208-preventDefault"]=!0))}}),h.absUrl()!=u&&n.url(h.absUrl(),!0);var p=!0;return n.onUrlChange(function(t,e){i.$evalAsync(function(){var n,s=h.absUrl(),o=h.$$state;h.$$parse(t),h.$$state=e,n=i.$broadcast("$locationChangeStart",t,s,e,o).defaultPrevented,h.absUrl()===t&&(n?(h.$$parse(s),h.$$state=o,r(s,!1,o)):(p=!1,a(s,o)))}),i.$$phase||i.$digest()}),i.$watch(function(){var t=Kt(n.url()),e=Kt(h.absUrl()),o=n.state(),l=h.$$replace,d=t!==e||h.$$html5&&s.history&&o!==h.$$state;(p||d)&&(p=!1,i.$evalAsync(function(){var e=h.absUrl(),n=i.$broadcast("$locationChangeStart",e,t,h.$$state,o).defaultPrevented;h.absUrl()===e&&(n?(h.$$parse(t),h.$$state=o):(d&&r(e,l,o===h.$$state?null:h.$$state),a(t,o)))})),h.$$replace=!1}),h}]}function se(){var t=!0,e=this;this.debugEnabled=function(e){return p(e)?(t=e,this):t},this.$get=["$window",function(i){function n(t){var e=i.console||{},n=e[t]||e.log||d;t=!1;try{t=!!n.apply}catch(t){}return t?function(){var t=[];return o(arguments,function(e){t.push(function(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}(e))}),n.apply(e,t)}:function(t,e){n(t,null==e?"":e)}}return{log:n("log"),info:n("info"),warn:n("warn"),error:n("error"),debug:function(){var i=n("debug");return function(){t&&i.apply(e,arguments)}}()}}]}function oe(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw hn("isecfld",e);return t}function le(t,e){if(t){if(t.constructor===t)throw hn("isecfn",e);if(t.window===t)throw hn("isecwindow",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw hn("isecdom",e);if(t===Object)throw hn("isecobj",e)}return t}function re(t){return t.constant}function ae(t,e,i,n,s){le(t,s),le(e,s),i=i.split(".");for(var o,l=0;1<i.length;l++){o=oe(i.shift(),s);var r=0===l&&e&&e[o]||t[o];r||(r={},t[o]=r),t=le(r,s)}return o=oe(i.shift(),s),le(t[o],s),t[o]=n}function he(t){return"constructor"==t}function de(t,e,n,s,o,l,r){oe(t,l),oe(e,l),oe(n,l),oe(s,l),oe(o,l);var a=function(t){return le(t,l)},h=r||he(t)?a:c,d=r||he(e)?a:c,u=r||he(n)?a:c,f=r||he(s)?a:c,p=r||he(o)?a:c;return function(l,r){var a=r&&r.hasOwnProperty(t)?r:l;return null==a?a:(a=h(a[t]),e?null==a?i:(a=d(a[e]),n?null==a?i:(a=u(a[n]),s?null==a?i:(a=f(a[s]),o?null==a?i:a=p(a[o]):a):a):a):a)}}function ce(t,e,n){var s=e.expensiveChecks,l=s?bn:vn,r=l[t];if(r)return r;var a=t.split("."),h=a.length;if(e.csp)r=6>h?de(a[0],a[1],a[2],a[3],a[4],n,s):function(t,e){var o,l=0;do{o=de(a[l++],a[l++],a[l++],a[l++],a[l++],n,s)(t,e),e=i,t=o}while(l<h);return o};else{var d="";s&&(d+="s = eso(s, fe);\nl = eso(l, fe);\n");var c=s;o(a,function(t,e){oe(t,n);var i=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+"."+t;(s||he(t))&&(i="eso("+i+", fe)",c=!0),d+="if(s == null) return undefined;\ns="+i+";\n"}),d+="return s;",(e=new Function("s","l","eso","fe",d)).toString=u(d),c&&(e=function(t,e){return function(i,n){return t(i,n,le,e)}}(e,n)),r=e}return r.sharedGetter=!0,r.assign=function(e,i,n){return ae(e,n,t,i,t)},l[t]=r}function ue(t){return b(t.valueOf)?t.valueOf():yn.call(t)}function fe(){var t=J(),e=J();this.$get=["$filter","$sniffer",function(i,n){function s(t,e){for(var i=0,n=t.length;i<n;i++){var o=t[i];o.constant||(o.inputs?s(o.inputs,e):-1===e.indexOf(o)&&e.push(o))}return e}function l(t,e){return null==t||null==e?t===e:("object"!=typeof t||"object"!=typeof(t=ue(t)))&&(t===e||t!=t&&e!=e)}function r(t,e,i,n){var o;if(1===(a=n.$$inputs||(n.$$inputs=s(n.inputs,[]))).length){var r=l,a=a[0];return t.$watch(function(t){var e=a(t);return l(e,r)||(o=n(t),r=e&&ue(e)),o},e,i)}for(var h=[],d=0,c=a.length;d<c;d++)h[d]=l;return t.$watch(function(t){for(var e=!1,i=0,s=a.length;i<s;i++){var r=a[i](t);(e||(e=!l(r,h[i])))&&(h[i]=r&&ue(r))}return e&&(o=n(t)),o},e,i)}function a(t,e,i,n){var s,o;return s=t.$watch(function(t){return n(t)},function(t,i,n){o=t,b(e)&&e.apply(this,arguments),p(t)&&n.$$postDigest(function(){p(o)&&s()})},i)}function h(t,e,i,n){function s(t){var e=!0;return o(t,function(t){p(t)||(e=!1)}),e}var l,r;return l=t.$watch(function(t){return n(t)},function(t,i,n){r=t,b(e)&&e.call(this,t,i,n),s(t)&&n.$$postDigest(function(){s(r)&&l()})},i)}function c(t,e,i,n){var s;return s=t.$watch(function(t){return n(t)},function(t,i,n){b(e)&&e.apply(this,arguments),s()},i)}function u(t,e){if(!e)return t;var i=(i=t.$$watchDelegate)!==h&&i!==a?function(i,n){var s=t(i,n);return e(s,i,n)}:function(i,n){var s=t(i,n),o=e(s,i,n);return p(s)?o:s};return t.$$watchDelegate&&t.$$watchDelegate!==r?i.$$watchDelegate=t.$$watchDelegate:e.$stateful||(i.$$watchDelegate=r,i.inputs=[t]),i}var f={csp:n.csp,expensiveChecks:!1},_={csp:n.csp,expensiveChecks:!0};return function(n,s,o){var l,p,m;switch(typeof n){case"string":m=n=n.trim();var g=o?e:t;return(l=g[m])||(":"===n.charAt(0)&&":"===n.charAt(1)&&(p=!0,n=n.substring(2)),o=o?_:f,l=new mn(o),(l=new gn(l,i,o).parse(n)).constant?l.$$watchDelegate=c:p?(l=function(t){var e=t;return t.sharedGetter&&(e=function(e,i){return t(e,i)},e.literal=t.literal,e.constant=t.constant,e.assign=t.assign),e}(l),l.$$watchDelegate=l.literal?h:a):l.inputs&&(l.$$watchDelegate=r),g[m]=l),u(l,s);case"function":return u(n,s);default:return u(d,s)}}}]}function pe(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return me(function(e){t.$evalAsync(e)},e)}]}function _e(){this.$get=["$browser","$exceptionHandler",function(t,e){return me(function(e){t.defer(e)},e)}]}function me(t,e){function s(){this.$$state={status:0}}function l(t,e){return function(i){e.call(t,i)}}function r(n){!n.processScheduled&&n.pending&&(n.processScheduled=!0,t(function(){var t,s,o;o=n.pending,n.processScheduled=!1,n.pending=i;for(var l=0,r=o.length;l<r;++l){s=o[l][0],t=o[l][n.status];try{b(t)?s.resolve(t(n.value)):1===n.status?s.resolve(n.value):s.reject(n.value)}catch(t){s.reject(t),e(t)}}}))}function a(){this.promise=new s,this.resolve=l(this,this.resolve),this.reject=l(this,this.reject),this.notify=l(this,this.notify)}var h=n("$q",TypeError);s.prototype={then:function(t,e,i){var n=new a;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,t,e,i]),0<this.$$state.status&&r(this.$$state),n.promise},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return c(e,!0,t)},function(e){return c(e,!1,t)},e)}},a.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(h("qcycle",t)):this.$$resolve(t))},$$resolve:function(t){var i,n;n=function(t,e,i){function n(e){return function(i){s||(s=!0,e.call(t,i))}}var s=!1;return[n(e),n(i)]}(this,this.$$resolve,this.$$reject);try{(_(t)||b(t))&&(i=t&&t.then),b(i)?(this.promise.$$state.status=-1,i.call(t,n[0],n[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,r(this.promise.$$state))}catch(t){n[1](t),e(t)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,r(this.promise.$$state)},notify:function(i){var n=this.promise.$$state.pending;0>=this.promise.$$state.status&&n&&n.length&&t(function(){for(var t,s,o=0,l=n.length;o<l;o++){s=n[o][0],t=n[o][3];try{s.notify(b(t)?t(i):i)}catch(t){e(t)}}})}};var d=function(t,e){var i=new a;return e?i.resolve(t):i.reject(t),i.promise},c=function(t,e,i){var n=null;try{b(i)&&(n=i())}catch(t){return d(t,!1)}return n&&b(n.then)?n.then(function(){return d(t,e)},function(t){return d(t,!1)}):d(t,e)},u=function(t,e,i,n){var s=new a;return s.resolve(t),s.promise.then(e,i,n)},f=function t(e){if(!b(e))throw h("norslvr",e);if(!(this instanceof t))return new t(e);var i=new a;return e(function(t){i.resolve(t)},function(t){i.reject(t)}),i.promise};return f.defer=function(){return new a},f.reject=function(t){var e=new a;return e.reject(t),e.promise},f.when=u,f.all=function(t){var e=new a,i=0,n=vi(t)?[]:{};return o(t,function(t,s){i++,u(t).then(function(t){n.hasOwnProperty(s)||(n[s]=t,--i||e.resolve(n))},function(t){n.hasOwnProperty(s)||e.reject(t)})}),0===i&&e.resolve(n),e.promise},f}function ge(){this.$get=["$window","$timeout",function(t,e){var i=t.requestAnimationFrame||t.webkitRequestAnimationFrame,n=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,s=!!i,o=s?function(t){var e=i(t);return function(){n(e)}}:function(t){var i=e(t,16.66,!1);return function(){e.cancel(i)}};return o.supported=s,o}]}function ve(){var t=10,e=n("$rootScope"),i=null,l=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(n,r,a,h){function c(){this.$id=++mi,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function u(t){if(v.$$phase)throw e("inprog",v.$$phase);v.$$phase=t}function p(t,e,i){do{t.$$listenerCount[i]-=e,0===t.$$listenerCount[i]&&delete t.$$listenerCount[i]}while(t=t.$parent)}function m(){}function g(){for(;w.length;)try{w.shift()()}catch(t){r(t)}l=null}c.prototype={constructor:c,$new:function(t,e){var i;return e=e||this,t?(i=new c,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++mi,this.$$ChildScope=null},this.$$ChildScope.prototype=this),i=new this.$$ChildScope),i.$parent=e,i.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=i,e.$$childTail=i):e.$$childHead=e.$$childTail=i,(t||e!=this)&&i.$on("$destroy",function(){i.$$destroyed=!0}),i},$watch:function(t,e,n){var s=a(t);if(s.$$watchDelegate)return s.$$watchDelegate(this,e,n,s);var o=this.$$watchers,l={fn:e,last:m,get:s,exp:t,eq:!!n};return i=null,b(e)||(l.fn=d),o||(o=this.$$watchers=[]),o.unshift(l),function(){I(o,l),i=null}},$watchGroup:function(t,e){function i(){a=!1,h?(h=!1,e(s,s,r)):e(s,n,r)}var n=Array(t.length),s=Array(t.length),l=[],r=this,a=!1,h=!0;if(!t.length){var d=!0;return r.$evalAsync(function(){d&&e(s,s,r)}),function(){d=!1}}return 1===t.length?this.$watch(t[0],function(t,i,o){s[0]=t,n[0]=i,e(s,t===i?s:n,o)}):(o(t,function(t,e){var o=r.$watch(t,function(t,o){s[e]=t,n[e]=o,a||(a=!0,r.$evalAsync(i))});l.push(o)}),function(){for(;l.length;)l.shift()()})},$watchCollection:function(t,e){function i(t){var e,i,l;if(!f(n=t)){if(_(n))if(s(n))for(o!==u&&(o=u,g=o.length=0,d++),t=n.length,g!==t&&(d++,o.length=g=t),e=0;e<t;e++)l=o[e],i=n[e],l!=l&&i!=i||l===i||(d++,o[e]=i);else{o!==p&&(o=p={},g=0,d++),t=0;for(e in n)n.hasOwnProperty(e)&&(t++,i=n[e],l=o[e],e in o?l!=l&&i!=i||l===i||(d++,o[e]=i):(g++,o[e]=i,d++));if(g>t)for(e in d++,o)n.hasOwnProperty(e)||(g--,delete o[e])}else o!==n&&(o=n,d++);return d}}i.$stateful=!0;var n,o,l,r=this,h=1<e.length,d=0,c=a(t,i),u=[],p={},m=!0,g=0;return this.$watch(c,function(){if(m?(m=!1,e(n,n,r)):e(n,l,r),h)if(_(n))if(s(n)){l=Array(n.length);for(var t=0;t<n.length;t++)l[t]=n[t]}else for(t in l={},n)ai.call(n,t)&&(l[t]=n[t]);else l=n})},$digest:function(){var n,s,o,a,d,c,f,p,_,w=t,C=[];u("$digest"),h.$$checkUrlChange(),this===v&&null!==l&&(h.defer.cancel(l),g()),i=null;do{for(c=!1,f=this;y.length;){try{(_=y.shift()).scope.$eval(_.expression,_.locals)}catch(t){r(t)}i=null}t:do{if(a=f.$$watchers)for(d=a.length;d--;)try{if(n=a[d])if((s=n.get(f))===(o=n.last)||(n.eq?E(s,o):"number"==typeof s&&"number"==typeof o&&isNaN(s)&&isNaN(o))){if(n===i){c=!1;break t}}else c=!0,i=n,n.last=n.eq?S(s,null):s,n.fn(s,o===m?s:o,f),5>w&&(p=4-w,C[p]||(C[p]=[]),C[p].push({msg:b(n.exp)?"fn: "+(n.exp.name||n.exp.toString()):n.exp,newVal:s,oldVal:o}))}catch(t){r(t)}if(!(a=f.$$childHead||f!==this&&f.$$nextSibling))for(;f!==this&&!(a=f.$$nextSibling);)f=f.$parent}while(f=a);if((c||y.length)&&!w--)throw v.$$phase=null,e("infdig",t,C)}while(c||y.length);for(v.$$phase=null;x.length;)try{x.shift()()}catch(t){r(t)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==v){for(var e in this.$$listenerCount)p(this,this.$$listenerCount[e],e);t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=d,this.$on=this.$watch=this.$watchGroup=function(){return d},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){v.$$phase||y.length||h.defer(function(){y.length&&v.$digest()}),y.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){x.push(t)},$apply:function(t){try{return u("$apply"),this.$eval(t)}catch(t){r(t)}finally{v.$$phase=null;try{v.$digest()}catch(t){throw r(t),t}}},$applyAsync:function(t){var e=this;t&&w.push(function(){e.$eval(t)}),null===l&&(l=h.defer(function(){v.$apply(g)}))},$on:function(t,e){var i=this.$$listeners[t];i||(this.$$listeners[t]=i=[]),i.push(e);var n=this;do{n.$$listenerCount[t]||(n.$$listenerCount[t]=0),n.$$listenerCount[t]++}while(n=n.$parent);var s=this;return function(){var n=i.indexOf(e);-1!==n&&(i[n]=null,p(s,1,t))}},$emit:function(t,e){var i,n,s,o=[],l=this,a=!1,h={name:t,targetScope:l,stopPropagation:function(){a=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},d=O([h],arguments,1);do{for(i=l.$$listeners[t]||o,h.currentScope=l,n=0,s=i.length;n<s;n++)if(i[n])try{i[n].apply(null,d)}catch(t){r(t)}else i.splice(n,1),n--,s--;if(a)return h.currentScope=null,h;l=l.$parent}while(l);return h.currentScope=null,h},$broadcast:function(t,e){var i=this,n=this,s={name:t,targetScope:this,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return s;for(var o,l,a=O([s],arguments,1);i=n;){for(s.currentScope=i,o=0,l=(n=i.$$listeners[t]||[]).length;o<l;o++)if(n[o])try{n[o].apply(null,a)}catch(t){r(t)}else n.splice(o,1),o--,l--;if(!(n=i.$$listenerCount[t]&&i.$$childHead||i!==this&&i.$$nextSibling))for(;i!==this&&!(n=i.$$nextSibling);)i=i.$parent}return s.currentScope=null,s}};var v=new c,y=v.$$asyncQueue=[],x=v.$$postDigestQueue=[],w=v.$$applyAsyncQueue=[];return v}]}function be(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return p(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return p(t)?(e=t,this):e},this.$get=function(){return function(i,n){var s,o=n?e:t;return""===(s=Se(i).href)||s.match(o)?i:"unsafe:"+s}}}function ye(t){var e=[];return p(t)&&o(t,function(t){e.push(function(t){if("self"===t)return t;if(m(t)){if(-1<t.indexOf("***"))throw xn("iwcard",t);return t=yi(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(y(t))return new RegExp("^"+t.source+"$");throw xn("imatcher")}(t))}),e}function xe(){this.SCE_CONTEXTS=wn;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=ye(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=ye(t)),e},this.$get=["$injector",function(n){function s(t,e){return"self"===t?Te(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var l=function(t){throw xn("unsafe")};n.has("$sanitize")&&(l=n.get("$sanitize"));var r=o(),a={};return a[wn.HTML]=o(r),a[wn.CSS]=o(r),a[wn.URL]=o(r),a[wn.JS]=o(r),a[wn.RESOURCE_URL]=o(a[wn.URL]),{trustAs:function(t,e){var n=a.hasOwnProperty(t)?a[t]:null;if(!n)throw xn("icontext",t,e);if(null===e||e===i||""===e)return e;if("string"!=typeof e)throw xn("itype",t);return new n(e)},getTrusted:function(n,o){if(null===o||o===i||""===o)return o;if((d=a.hasOwnProperty(n)?a[n]:null)&&o instanceof d)return o.$$unwrapTrustedValue();if(n===wn.RESOURCE_URL){var r,h,d=Se(o.toString()),c=!1;for(r=0,h=t.length;r<h;r++)if(s(t[r],d)){c=!0;break}if(c)for(r=0,h=e.length;r<h;r++)if(s(e[r],d)){c=!1;break}if(c)return o;throw xn("insecurl",o.toString())}if(n===wn.HTML)return l(o);throw xn("unsafe")},valueOf:function(t){return t instanceof r?t.$$unwrapTrustedValue():t}}}]}function we(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,i){if(t&&8>ii)throw xn("iequirks");var n=T(wn);n.isEnabled=function(){return t},n.trustAs=i.trustAs,n.getTrusted=i.getTrusted,n.valueOf=i.valueOf,t||(n.trustAs=n.getTrusted=function(t,e){return e},n.valueOf=c),n.parseAs=function(t,i){var s=e(i);return s.literal&&s.constant?s:e(i,function(e){return n.getTrusted(t,e)})};var s=n.parseAs,l=n.getTrusted,r=n.trustAs;return o(wn,function(t,e){var i=ri(e);n[Q("parse_as_"+i)]=function(e){return s(t,e)},n[Q("get_trusted_"+i)]=function(e){return l(t,e)},n[Q("trust_as_"+i)]=function(e){return r(t,e)}}),n}]}function Ce(){this.$get=["$window","$document",function(t,e){var i,n={},s=h((/android (\d+)/.exec(ri((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),l=e[0]||{},r=/^(Moz|webkit|ms)(?=[A-Z])/,a=l.body&&l.body.style,d=!1,c=!1;if(a){for(var u in a)if(d=r.exec(u)){i=(i=d[0]).substr(0,1).toUpperCase()+i.substr(1);break}i||(i="WebkitOpacity"in a&&"webkit"),d=!!("transition"in a||i+"Transition"in a),c=!!("animation"in a||i+"Animation"in a),!s||d&&c||(d=m(l.body.style.webkitTransition),c=m(l.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>s||o),hasEvent:function(t){if("input"===t&&11>=ii)return!1;if(f(n[t])){var e=l.createElement("div");n[t]="on"+t in e}return n[t]},csp:xi(),vendorPrefix:i,transitions:d,animations:c,android:s}}]}function Ne(){this.$get=["$templateCache","$http","$q",function(t,e,i){function n(s,o){n.totalPendingRequests++;var l=e.defaults&&e.defaults.transformResponse;return vi(l)?l=l.filter(function(t){return t!==Lt}):l===Lt&&(l=null),e.get(s,{cache:t,transformResponse:l}).then(function(t){return n.totalPendingRequests--,t.data},function(t){if(n.totalPendingRequests--,!o)throw Ki("tpload",s);return i.reject(t)})}return n.totalPendingRequests=0,n}]}function ke(){this.$get=["$rootScope","$browser","$location",function(t,e,i){return{findBindings:function(t,e,i){var n=[];return o(t=t.getElementsByClassName("ng-binding"),function(t){var s=_i.element(t).data("$binding");s&&o(s,function(s){i?new RegExp("(^|\\s)"+yi(e)+"(\\s|\\||$)").test(s)&&n.push(t):-1!=s.indexOf(e)&&n.push(t)})}),n},findModels:function(t,e,i){for(var n=["ng-","data-ng-","ng\\:"],s=0;s<n.length;++s){var o=t.querySelectorAll("["+n[s]+"model"+(i?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return i.url()},setLocation:function(e){e!==i.url()&&(i.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function Ie(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,i,n,s){function o(o,r,a){var h=p(a)&&!a,d=(h?n:i).defer(),c=d.promise;return r=e.defer(function(){try{d.resolve(o())}catch(t){d.reject(t),s(t)}finally{delete l[c.$$timeoutId]}h||t.$apply()},r),c.$$timeoutId=r,l[r]=d,c}var l={};return o.cancel=function(t){return!!(t&&t.$$timeoutId in l)&&(l[t.$$timeoutId].reject("canceled"),delete l[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},o}]}function Se(t){return ii&&(Cn.setAttribute("href",t),t=Cn.href),Cn.setAttribute("href",t),{href:Cn.href,protocol:Cn.protocol?Cn.protocol.replace(/:$/,""):"",host:Cn.host,search:Cn.search?Cn.search.replace(/^\?/,""):"",hash:Cn.hash?Cn.hash.replace(/^#/,""):"",hostname:Cn.hostname,port:Cn.port,pathname:"/"===Cn.pathname.charAt(0)?Cn.pathname:"/"+Cn.pathname}}function Te(t){return(t=m(t)?Se(t):t).protocol===Nn.protocol&&t.host===Nn.host}function Ee(){this.$get=u(t)}function Oe(t){function e(i,n){if(_(i)){var s={};return o(i,function(t,i){s[i]=e(i,t)}),s}return t.factory(i+"Filter",n)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",Me),e("date",$e),e("filter",je),e("json",Fe),e("limitTo",ze),e("lowercase",En),e("number",De),e("orderBy",Ve),e("uppercase",On)}function je(){return function(t,e,i){if(!vi(t))return t;var n;switch(typeof e){case"function":break;case"boolean":case"number":case"string":n=!0;case"object":e=function(t,e,i){var n=_(t)&&"$"in t;return!0===e?e=E:b(e)||(e=function(t,e){return!_(t)&&!_(e)&&(t=ri(""+t),e=ri(""+e),-1!==t.indexOf(e))}),function(s){return n&&!_(s)?Ae(s,t.$,e,!1):Ae(s,t,e,i)}}(e,i,n);break;default:return t}return t.filter(e)}}function Ae(t,e,i,n,s){var o=typeof t,l=typeof e;if("string"===l&&"!"===e.charAt(0))return!Ae(t,e.substring(1),i,n);if(vi(t))return t.some(function(t){return Ae(t,e,i,n)});switch(o){case"object":var r;if(n){for(r in t)if("$"!==r.charAt(0)&&Ae(t[r],e,i,!0))return!0;return!s&&Ae(t,e,i,!1)}if("object"===l){for(r in e)if(s=e[r],!b(s)&&(o="$"===r,!Ae(o?t:t[r],s,i,o,o)))return!1;return!0}return i(t,e);case"function":return!1;default:return i(t,e)}}function Me(t){var e=t.NUMBER_FORMATS;return function(t,i,n){return f(i)&&(i=e.CURRENCY_SYM),f(n)&&(n=e.PATTERNS[1].maxFrac),null==t?t:Le(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,n).replace(/\u00A4/g,i)}}function De(t){var e=t.NUMBER_FORMATS;return function(t,i){return null==t?t:Le(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,i)}}function Le(t,e,i,n,s){if(!isFinite(t)||_(t))return"";var o=0>t,l="",r=[],a=!1;if(-1!==(d=(t=Math.abs(t))+"").indexOf("e")){var h=d.match(/([\d\.]+)e(-?)(\d+)/);h&&"-"==h[2]&&h[3]>s+1?t=0:(l=d,a=!0)}if(a)0<s&&1>t&&(l=t.toFixed(s),t=parseFloat(l));else{d=(d.split(kn)[1]||"").length,f(s)&&(s=Math.min(Math.max(e.minFrac,d),e.maxFrac));a=(d=(""+(t=+(Math.round(+(t.toString()+"e"+s)).toString()+"e"+-s))).split(kn))[0];var d=d[1]||"",c=0,u=e.lgSize,p=e.gSize;if(a.length>=u+p)for(c=a.length-u,h=0;h<c;h++)0==(c-h)%p&&0!==h&&(l+=i),l+=a.charAt(h);for(h=c;h<a.length;h++)0==(a.length-h)%u&&0!==h&&(l+=i),l+=a.charAt(h);for(;d.length<s;)d+="0";s&&"0"!==s&&(l+=n+d.substr(0,s))}return 0===t&&(o=!1),r.push(o?e.negPre:e.posPre,l,o?e.negSuf:e.posSuf),r.join("")}function Xe(t,e,i){var n="";for(0>t&&(n="-",t=-t),t=""+t;t.length<e;)t="0"+t;return i&&(t=t.substr(t.length-e)),n+t}function Pe(t,e,i,n){return i=i||0,function(s){return s=s["get"+t](),(0<i||s>-i)&&(s+=i),0===s&&-12==i&&(s=12),Xe(s,e,n)}}function Be(t,e){return function(i,n){var s=i["get"+t]();return n[hi(e?"SHORT"+t:t)][s]}}function He(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function Re(t){return function(e){var i=He(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+i,e=1+Math.round(e/6048e5),Xe(e,t)}}function $e(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(i,n,s){var l,r,a="",d=[];if(n=n||"mediumDate",n=t.DATETIME_FORMATS[n]||n,m(i)&&(i=Tn.test(i)?h(i):function(t){var i;if(i=t.match(e)){t=new Date(0);var n=0,s=0,o=i[8]?t.setUTCFullYear:t.setFullYear,l=i[8]?t.setUTCHours:t.setHours;i[9]&&(n=h(i[9]+i[10]),s=h(i[9]+i[11])),o.call(t,h(i[1]),h(i[2])-1,h(i[3])),n=h(i[4]||0)-n,s=h(i[5]||0)-s,o=h(i[6]||0),i=Math.round(1e3*parseFloat("0."+(i[7]||0))),l.call(t,n,s,o,i)}return t}(i)),g(i)&&(i=new Date(i)),!v(i))return i;for(;n;)(r=Sn.exec(n))?(d=O(d,r,1),n=d.pop()):(d.push(n),n=null);return s&&"UTC"===s&&(i=new Date(i.getTime())).setMinutes(i.getMinutes()+i.getTimezoneOffset()),o(d,function(e){l=In[e],a+=l?l(i,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function Fe(){return function(t,e){return f(e)&&(e=2),M(t,e)}}function ze(){return function(t,e){return g(t)&&(t=t.toString()),vi(t)||m(t)?(e=1/0===Math.abs(Number(e))?Number(e):h(e))?0<e?t.slice(0,e):t.slice(e):m(t)?"":[]:t}}function Ve(t){return function(e,i,n){function o(t,e){return e?function(e,i){return t(i,e)}:t}function l(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function r(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),l(t))||"function"==typeof t.toString&&(t=t.toString(),l(t))?t:""}function a(t,e){var i=typeof t,n=typeof e;return i===n&&"object"===i&&(t=r(t),e=r(e)),i===n?("string"===i&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:t<e?-1:1):i<n?-1:1}return s(e)?(0===(i=vi(i)?i:[i]).length&&(i=["+"]),i=i.map(function(e){var i=!1,n=e||c;if(m(e)){if("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(i="-"==e.charAt(0),e=e.substring(1)),""===e)return o(a,i);if((n=t(e)).constant){var s=n();return o(function(t,e){return a(t[s],e[s])},i)}}return o(function(t,e){return a(n(t),n(e))},i)}),di.call(e).sort(o(function(t,e){for(var n=0;n<i.length;n++){var s=i[n](t,e);if(0!==s)return s}return 0},n))):e}}function We(t){return b(t)&&(t={link:t}),t.restrict=t.restrict||"AC",u(t)}function Ue(t,e,n,s,l){var r=this,a=[],h=r.$$parentForm=t.parent().controller("form")||Mn;r.$error={},r.$$success={},r.$pending=i,r.$name=l(e.name||e.ngForm||"")(n),r.$dirty=!1,r.$pristine=!0,r.$valid=!0,r.$invalid=!1,r.$submitted=!1,h.$addControl(r),r.$rollbackViewValue=function(){o(a,function(t){t.$rollbackViewValue()})},r.$commitViewValue=function(){o(a,function(t){t.$commitViewValue()})},r.$addControl=function(t){q(t.$name,"input"),a.push(t),t.$name&&(r[t.$name]=t)},r.$$renameControl=function(t,e){var i=t.$name;r[i]===t&&delete r[i],r[e]=t,t.$name=e},r.$removeControl=function(t){t.$name&&r[t.$name]===t&&delete r[t.$name],o(r.$pending,function(e,i){r.$setValidity(i,null,t)}),o(r.$error,function(e,i){r.$setValidity(i,null,t)}),I(a,t)},ti({ctrl:this,$element:t,set:function(t,e,i){var n=t[e];n?-1===n.indexOf(i)&&n.push(i):t[e]=[i]},unset:function(t,e,i){var n=t[e];n&&(I(n,i),0===n.length&&delete t[e])},parentForm:h,$animate:s}),r.$setDirty=function(){s.removeClass(t,ps),s.addClass(t,_s),r.$dirty=!0,r.$pristine=!1,h.$setDirty()},r.$setPristine=function(){s.setClass(t,ps,_s+" ng-submitted"),r.$dirty=!1,r.$pristine=!0,r.$submitted=!1,o(a,function(t){t.$setPristine()})},r.$setUntouched=function(){o(a,function(t){t.$setUntouched()})},r.$setSubmitted=function(){s.addClass(t,"ng-submitted"),r.$submitted=!0,h.$setSubmitted()}}function Ge(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function qe(t,e,i,n,s,o){var l=ri(e[0].type);if(!s.android){var r=!1;e.on("compositionstart",function(t){r=!0}),e.on("compositionend",function(){r=!1,a()})}var a=function(t){if(h&&(o.defer.cancel(h),h=null),!r){var s=e.val();t=t&&t.type,"password"===l||i.ngTrim&&"false"===i.ngTrim||(s=bi(s)),(n.$viewValue!==s||""===s&&n.$$hasNativeValidators)&&n.$setViewValue(s,t)}};if(s.hasEvent("input"))e.on("input",a);else{var h,d=function(t,e,i){h||(h=o.defer(function(){h=null,e&&e.value===i||a(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&19>e||37<=e&&40>=e||d(t,this,this.value)}),s.hasEvent("paste")&&e.on("paste cut",d)}e.on("change",a),n.$render=function(){e.val(n.$isEmpty(n.$viewValue)?"":n.$viewValue)}}function Ye(t,e){return function(i,n){var s,l;if(v(i))return i;if(m(i)){if('"'==i.charAt(0)&&'"'==i.charAt(i.length-1)&&(i=i.substring(1,i.length-1)),Pn.test(i))return new Date(i);if(t.lastIndex=0,s=t.exec(i))return s.shift(),l=n?{yyyy:n.getFullYear(),MM:n.getMonth()+1,dd:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds(),sss:n.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(s,function(t,i){i<e.length&&(l[e[i]]=+t)}),new Date(l.yyyy,l.MM-1,l.dd,l.HH,l.mm,l.ss||0,1e3*l.sss||0)}return NaN}}function Ke(t,e,n,s){return function(o,l,r,a,h,d,c){function u(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function _(t){return p(t)?v(t)?t:n(t):i}Je(o,l,r,a),qe(0,l,r,a,h,d);var m,g=a&&a.$options&&a.$options.timezone;if(a.$$parserName=t,a.$parsers.push(function(t){return a.$isEmpty(t)?null:e.test(t)?(t=n(t,m),"UTC"===g&&t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t):i}),a.$formatters.push(function(t){if(t&&!v(t))throw gs("datefmt",t);if(u(t)){if((m=t)&&"UTC"===g){var e=6e4*m.getTimezoneOffset();m=new Date(m.getTime()+e)}return c("date")(t,s,g)}return m=null,""}),p(r.min)||r.ngMin){var b;a.$validators.min=function(t){return!u(t)||f(b)||n(t)>=b},r.$observe("min",function(t){b=_(t),a.$validate()})}if(p(r.max)||r.ngMax){var y;a.$validators.max=function(t){return!u(t)||f(y)||n(t)<=y},r.$observe("max",function(t){y=_(t),a.$validate()})}}}function Je(t,e,n,s){(s.$$hasNativeValidators=_(e[0].validity))&&s.$parsers.push(function(t){var n=e.prop("validity")||{};return n.badInput&&!n.typeMismatch?i:t})}function Qe(t,e,i,s,o){if(p(s)){if(!(t=t(s)).constant)throw n("ngModel")("constexpr",i,s);return t(e)}return o}function Ze(t,e){return t="ngClass"+t,["$animate",function(i){function n(t,e){var i=[],n=0;t:for(;n<t.length;n++){for(var s=t[n],o=0;o<e.length;o++)if(s==e[o])continue t;i.push(s)}return i}function s(t){if(!vi(t)){if(m(t))return t.split(" ");if(_(t)){var e=[];return o(t,function(t,i){t&&(e=e.concat(i.split(" ")))}),e}}return t}return{restrict:"AC",link:function(l,r,a){function h(t,e){var i=r.data("$classCounts")||{},n=[];return o(t,function(t){(0<e||i[t])&&(i[t]=(i[t]||0)+e,i[t]===+(0<e)&&n.push(t))}),r.data("$classCounts",i),n.join(" ")}function d(t){if(!0===e||l.$index%2===e){var o=s(t||[]);if(c){if(!E(t,c)){var d=s(c);u=n(o,d),o=n(d,o),u=h(u,1),o=h(o,-1);u&&u.length&&i.addClass(r,u),o&&o.length&&i.removeClass(r,o)}}else{var u=h(o,1);a.$addClass(u)}}c=T(t)}var c;l.$watch(a[t],d,!0),a.$observe("class",function(e){d(l.$eval(a[t]))}),"ngClass"!==t&&l.$watch("$index",function(i,n){var o=1&i;if(o!==(1&n)){var r=s(l.$eval(a[t]));o===e?(o=h(r,1),a.$addClass(o)):(o=h(r,-1),a.$removeClass(o))}})}}}]}function ti(t){function e(t,e){e&&!l[t]?(d.addClass(o,t),l[t]=!0):!e&&l[t]&&(d.removeClass(o,t),l[t]=!1)}function n(t,i){t=t?"-"+W(t,"-"):"",e(us+t,!0===i),e(fs+t,!1===i)}var s=t.ctrl,o=t.$element,l={},r=t.set,a=t.unset,h=t.parentForm,d=t.$animate;l[fs]=!(l[us]=o.hasClass(us)),s.$setValidity=function(t,o,l){o===i?(s.$pending||(s.$pending={}),r(s.$pending,t,l)):(s.$pending&&a(s.$pending,t,l),ei(s.$pending)&&(s.$pending=i)),C(o)?o?(a(s.$error,t,l),r(s.$$success,t,l)):(r(s.$error,t,l),a(s.$$success,t,l)):(a(s.$error,t,l),a(s.$$success,t,l)),s.$pending?(e(ms,!0),s.$valid=s.$invalid=i,n("",null)):(e(ms,!1),s.$valid=ei(s.$error),s.$invalid=!s.$valid,n("",s.$valid)),n(t,o=s.$pending&&s.$pending[t]?i:!s.$error[t]&&(!!s.$$success[t]||null)),h.$setValidity(t,o,s)}}function ei(t){if(t)for(var e in t)return!1;return!0}var ii,ni,si,oi,li=/^\/(.+)\/([a-z]*)$/,ri=function(t){return m(t)?t.toLowerCase():t},ai=Object.prototype.hasOwnProperty,hi=function(t){return m(t)?t.toUpperCase():t},di=[].slice,ci=[].splice,ui=[].push,fi=Object.prototype.toString,pi=n("ng"),_i=t.angular||(t.angular={}),mi=0;ii=e.documentMode,d.$inject=[],c.$inject=[];var gi,vi=Array.isArray,bi=function(t){return m(t)?t.trim():t},yi=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},xi=function(){if(p(xi.isActive_))return xi.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(e){t=!0}return xi.isActive_=t},wi=["ng-","data-ng-","ng:","x-ng-"],Ci=/[A-Z]/g,Ni=!1,ki=1,Ii=3,Si={full:"1.3.9",major:1,minor:3,dot:9,codeName:"snapshot"};et.expando="ng339";var Ti=et.cache={},Ei=1;et._data=function(t){return this.cache[t[this.expando]]||{}};var Oi=/([\:\-\_]+(.))/g,ji=/^moz([A-Z])/,Ai={mouseleave:"mouseout",mouseenter:"mouseover"},Mi=n("jqLite"),Di=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Li=/<|&#?\w+;/,Xi=/<([\w:]+)/,Pi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bi.optgroup=Bi.option,Bi.tbody=Bi.tfoot=Bi.colgroup=Bi.caption=Bi.thead,Bi.th=Bi.td;var Hi=et.prototype={ready:function(i){function n(){s||(s=!0,i())}var s=!1;"complete"===e.readyState?setTimeout(n):(this.on("DOMContentLoaded",n),et(t).on("load",n))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return ni(0<=t?this[t]:this[this.length+t])},length:0,push:ui,sort:[].sort,splice:[].splice},Ri={};o("multiple selected checked disabled readOnly required open".split(" "),function(t){Ri[ri(t)]=t});var $i={};o("input select option textarea button form details".split(" "),function(t){$i[t]=!0});var Fi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:rt,removeData:ot},function(t,e){et[e]=t}),o({data:rt,inheritedData:ft,scope:function(t){return ni.data(t,"$scope")||ft(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return ni.data(t,"$isolateScope")||ni.data(t,"$isolateScopeNoTemplate")},controller:ut,injector:function(t){return ft(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:at,css:function(t,e,i){if(e=Q(e),!p(i))return t.style[e];t.style[e]=i},attr:function(t,e,n){var s=ri(e);if(Ri[s]){if(!p(n))return t[e]||(t.attributes.getNamedItem(e)||d).specified?s:i;n?(t[e]=!0,t.setAttribute(e,s)):(t[e]=!1,t.removeAttribute(s))}else if(p(n))t.setAttribute(e,n);else if(t.getAttribute)return null===(t=t.getAttribute(e,2))?i:t},prop:function(t,e,i){if(!p(i))return t[e];t[e]=i},text:function(){function t(t,e){if(f(e)){var i=t.nodeType;return i===ki||i===Ii?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(f(e)){if(t.multiple&&"select"===k(t)){var i=[];return o(t.options,function(t){t.selected&&i.push(t.value||t.text)}),0===i.length?null:i}return t.value}t.value=e},html:function(t,e){if(f(e))return t.innerHTML;nt(t,!0),t.innerHTML=e},empty:pt},function(t,e){et.prototype[e]=function(e,n){var s,o,l=this.length;if(t!==pt&&(2==t.length&&t!==at&&t!==ut?e:n)===i){if(_(e)){for(s=0;s<l;s++)if(t===rt)t(this[s],e);else for(o in e)t(this[s],o,e[o]);return this}for(l=(s=t.$dv)===i?Math.min(l,1):l,o=0;o<l;o++){var r=t(this[o],e,n);s=s?s+r:r}return s}for(s=0;s<l;s++)t(this[s],e,n);return this}}),o({removeData:ot,on:function t(e,i,n,s){if(p(s))throw Mi("onargs");if(Z(e)){s=(l=lt(e,!0)).events;var o=l.handle;o||(o=l.handle=function(t,e){var i=function(i,n){i.isDefaultPrevented=function(){return i.defaultPrevented};var s=e[n||i.type],o=s?s.length:0;if(o){if(f(i.immediatePropagationStopped)){var l=i.stopImmediatePropagation;i.stopImmediatePropagation=function(){i.immediatePropagationStopped=!0,i.stopPropagation&&i.stopPropagation(),l&&l.call(i)}}i.isImmediatePropagationStopped=function(){return!0===i.immediatePropagationStopped},1<o&&(s=T(s));for(var r=0;r<o;r++)i.isImmediatePropagationStopped()||s[r].call(t,i)}};return i.elem=t,i}(e,s));for(var l,r=(l=0<=i.indexOf(" ")?i.split(" "):[i]).length;r--;){var a=s[i=l[r]];a||(s[i]=[],"mouseenter"===i||"mouseleave"===i?t(e,Ai[i],function(t){var e=t.relatedTarget;e&&(e===this||this.contains(e))||o(t,i)}):"$destroy"!==i&&e.addEventListener(i,o,!1),a=s[i]),a.push(n)}}},off:st,one:function(t,e,i){(t=ni(t)).on(e,function n(){t.off(e,i),t.off(e,n)}),t.on(e,i)},replaceWith:function(t,e){var i,n=t.parentNode;nt(t),o(new et(e),function(e){i?n.insertBefore(e,i.nextSibling):n.replaceChild(e,t),i=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===ki&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){if((i=t.nodeType)===ki||11===i)for(var i=0,n=(e=new et(e)).length;i<n;i++)t.appendChild(e[i])},prepend:function(t,e){if(t.nodeType===ki){var i=t.firstChild;o(new et(e),function(e){t.insertBefore(e,i)})}},wrap:function(t,e){e=ni(e).eq(0).clone()[0];var i=t.parentNode;i&&i.replaceChild(e,t),e.appendChild(t)},remove:_t,detach:function(t){_t(t,!0)},after:function(t,e){for(var i=t,n=t.parentNode,s=0,o=(e=new et(e)).length;s<o;s++){var l=e[s];n.insertBefore(l,i.nextSibling),i=l}},addClass:dt,removeClass:ht,toggleClass:function(t,e,i){e&&o(e.split(" "),function(e){var n=i;f(n)&&(n=!at(t,e)),(n?dt:ht)(t,e)})},parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:it,triggerHandler:function(t,e,i){var n,s,l=e.type||e,r=lt(t);(r=(r=r&&r.events)&&r[l])&&(n={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:d,type:l,target:t},e.type&&(n=a(n,e)),e=T(r),s=i?[n].concat(i):[n],o(e,function(e){n.isImmediatePropagationStopped()||e.apply(t,s)}))}},function(t,e){et.prototype[e]=function(e,i,n){for(var s,o=0,l=this.length;o<l;o++)f(s)?(s=t(this[o],e,i,n),p(s)&&(s=ni(s))):ct(s,t(this[o],e,i,n));return p(s)?s:this},et.prototype.bind=et.prototype.on,et.prototype.unbind=et.prototype.off}),bt.prototype={put:function(t,e){this[vt(t,this.nextUid)]=e},get:function(t){return this[vt(t,this.nextUid)]},remove:function(t){var e=this[t=vt(t,this.nextUid)];return delete this[t],e}};var zi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Vi=/,/,Wi=/^\s*(_?)(\S+?)\1\s*$/,Ui=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gi=n("$injector");xt.$$annotate=yt;var qi=n("$animate"),Yi=["$provide",function(t){this.$$selectors={},this.register=function(e,i){var n=e+"-animation";if(e&&"."!=e.charAt(0))throw qi("notcsel",e);this.$$selectors[e.substr(1)]=n,t.factory(n,i)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(t,e,i){function n(t,e,i){for(var n=0,s=e.length;n<s;++n)t[e[n]]=i}function s(){return r||(r=t.defer(),e(function(){r.resolve(),r=null})),r.promise}function l(t,e){if(_i.isObject(e)){var i=a(e.from||{},e.to||{});t.css(i)}}var r;return{animate:function(t,e,i){return l(t,{from:e,to:i}),s()},enter:function(t,e,i,n){return l(t,n),i?i.after(t):e.prepend(t),s()},leave:function(t,e){return t.remove(),s()},move:function(t,e,i,n){return this.enter(t,e,i,n)},addClass:function(t,e,i){return this.setClass(t,e,[],i)},$$addClassImmediately:function(t,e,i){return t=ni(t),e=m(e)?e:vi(e)?e.join(" "):"",o(t,function(t){dt(t,e)}),l(t,i),s()},removeClass:function(t,e,i){return this.setClass(t,[],e,i)},$$removeClassImmediately:function(t,e,i){return t=ni(t),e=m(e)?e:vi(e)?e.join(" "):"",o(t,function(t){ht(t,e)}),l(t,i),s()},setClass:function(e,s,l,r){var a=this,h=!1,d=(e=ni(e)).data("$$animateClasses");return d?r&&d.options&&(d.options=_i.extend(d.options||{},r)):(d={classes:{},options:r},h=!0),r=d.classes,s=vi(s)?s:s.split(" "),l=vi(l)?l:l.split(" "),n(r,s,!0),n(r,l,!1),h&&(d.promise=function(e){var n,s=t.defer();return s.promise.$$cancelFn=function(){n&&n()},i.$$postDigest(function(){n=e(function(){s.resolve()})}),s.promise}(function(t){var i=e.data("$$animateClasses");if(e.removeData("$$animateClasses"),i){var n=function(t,e){var i=[],n=[],s=J();return o((t.attr("class")||"").split(/\s+/),function(t){s[t]=!0}),o(e,function(t,e){var o=s[e];!1===t&&o?n.push(e):!0!==t||o||i.push(e)}),0<i.length+n.length&&[i.length?i:null,n.length?n:null]}(e,i.classes);n&&a.$$setClassImmediately(e,n[0],n[1],i.options)}t()}),e.data("$$animateClasses",d)),d.promise},$$setClassImmediately:function(t,e,i,n){return e&&this.$$addClassImmediately(t,e),i&&this.$$removeClassImmediately(t,i),l(t,n),s()},enabled:d,cancel:d}}]}],Ki=n("$compile");Tt.$inject=["$provide","$$sanitizeUriProvider"];var Ji=/^((?:x|data)[\:\-_])/i,Qi="application/json",Zi={"Content-Type":Qi+";charset=utf-8"},tn=/^\[|^\{(?!\{)/,en={"[":/]$/,"{":/}$/},nn=/^\)\]\}',?\n/,sn=n("$interpolate"),on=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ln={http:80,https:443,ftp:21},rn=n("$location"),an={$$html5:!1,$$replace:!1,absUrl:ee("$$absUrl"),url:function(t){if(f(t))return this.$$url;var e=on.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:ee("$$protocol"),host:ee("$$host"),port:ee("$$port"),path:ie("$$path",function(t){return"/"==(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(m(t)||g(t))t=t.toString(),this.$$search=P(t);else{if(!_(t))throw rn("isrcharg");o(t=S(t,{}),function(e,i){null==e&&delete t[i]}),this.$$search=t}break;default:f(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:ie("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([te,Zt,Qt],function(t){t.prototype=Object.create(an),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==Qt||!this.$$html5)throw rn("nostate");return this.$$state=f(e)?null:e,this}});var hn=n("$parse"),dn=Function.prototype.call,cn=Function.prototype.apply,un=Function.prototype.bind,fn=J();o({null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:function(){}},function(t,e){t.constant=t.literal=t.sharedGetter=!0,fn[e]=t}),fn.this=function(t){return t},fn.this.sharedGetter=!0;var pn=a(J(),{"+":function(t,e,n,s){return n=n(t,e),s=s(t,e),p(n)?p(s)?n+s:n:p(s)?s:i},"-":function(t,e,i,n){return i=i(t,e),n=n(t,e),(p(i)?i:0)-(p(n)?n:0)},"*":function(t,e,i,n){return i(t,e)*n(t,e)},"/":function(t,e,i,n){return i(t,e)/n(t,e)},"%":function(t,e,i,n){return i(t,e)%n(t,e)},"===":function(t,e,i,n){return i(t,e)===n(t,e)},"!==":function(t,e,i,n){return i(t,e)!==n(t,e)},"==":function(t,e,i,n){return i(t,e)==n(t,e)},"!=":function(t,e,i,n){return i(t,e)!=n(t,e)},"<":function(t,e,i,n){return i(t,e)<n(t,e)},">":function(t,e,i,n){return i(t,e)>n(t,e)},"<=":function(t,e,i,n){return i(t,e)<=n(t,e)},">=":function(t,e,i,n){return i(t,e)>=n(t,e)},"&&":function(t,e,i,n){return i(t,e)&&n(t,e)},"||":function(t,e,i,n){return i(t,e)||n(t,e)},"!":function(t,e,i){return!i(t,e)},"=":!0,"|":!0}),_n={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},mn=function(t){this.options=t};mn.prototype={constructor:mn,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;)if('"'===(t=this.text.charAt(this.index))||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var e=t+this.peek(),i=e+this.peek(2),n=pn[e],s=pn[i];pn[t]||n||s?(t=s?i:n?e:t,this.tokens.push({index:this.index,text:t,operator:!0}),this.index+=t.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){return t=t||1,this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(t){return"0"<=t&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||" "===t},isIdent:function(t){return"a"<=t&&"z">=t||"A"<=t&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,i){throw i=i||this.index,e=p(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,i)+"]":" "+i,hn("lexerr",t,e,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var i=ri(this.text.charAt(this.index));if("."==i||this.isNumber(i))t+=i;else{var n=this.peek();if("e"==i&&this.isExpOperator(n))t+=i;else if(this.isExpOperator(i)&&n&&this.isNumber(n)&&"e"==t.charAt(t.length-1))t+=i;else{if(!this.isExpOperator(i)||n&&this.isNumber(n)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var i="",n=t,s=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);n=n+o;if(s)"u"===o?((s=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,i+=String.fromCharCode(parseInt(s,16))):i+=_n[o]||o,s=!1;else if("\\"===o)s=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:n,constant:!0,value:i});i+=o}this.index++}this.throwError("Unterminated quote",e)}};var gn=function(t,e,i){this.lexer=t,this.$filter=e,this.options=i};gn.ZERO=a(function(){return 0},{sharedGetter:!0,constant:!0}),gn.prototype={constructor:gn,parse:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.statements(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.peek().identifier&&this.peek().text in fn?t=fn[this.consume().text]:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e,i;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,i),i=null):"["===e.text?(i=t,t=this.objectIndex(t)):"."===e.text?(i=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw hn("syntax",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw hn("ueoe",this.text);return this.tokens[0]},peek:function(t,e,i,n){return this.peekAhead(0,t,e,i,n)},peekAhead:function(t,e,i,n,s){if(this.tokens.length>t){var o=(t=this.tokens[t]).text;if(o===e||o===i||o===n||o===s||!(e||i||n||s))return t}return!1},expect:function(t,e,i,n){return!!(t=this.peek(t,e,i,n))&&(this.tokens.shift(),t)},consume:function(t){if(0===this.tokens.length)throw hn("ueoe",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},unaryFn:function(t,e){var i=pn[t];return a(function(t,n){return i(t,n,e)},{constant:e.constant,inputs:[e]})},binaryFn:function(t,e,i,n){var s=pn[e];return a(function(e,n){return s(e,n,t,i)},{constant:t.constant&&i.constant,inputs:!n&&[t,i]})},identifier:function(){for(var t=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)t+=this.consume().text+this.consume().text;return ce(t,this.options,this.text)},constant:function(){var t=this.consume().value;return a(function(){return t},{constant:!0,literal:!0})},statements:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.filterChain()),!this.expect(";"))return 1===t.length?t[0]:function(e,i){for(var n,s=0,o=t.length;s<o;s++)n=t[s](e,i);return n}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},filter:function(t){var e,n,s=this.$filter(this.consume().text);if(this.peek(":"))for(e=[],n=[];this.expect(":");)e.push(this.expression());var o=[t].concat(e||[]);return a(function(o,l){var r=t(o,l);if(n){for(n[0]=r,r=e.length;r--;)n[r+1]=e[r](o,l);return s.apply(i,n)}return s(r)},{constant:!s.$stateful&&o.every(re),inputs:!s.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var t,e,i=this.ternary();return(e=this.expect("="))?(i.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),t=this.ternary(),a(function(e,n){return i.assign(e,t(e,n),n)},{inputs:[i,t]})):i},ternary:function(){var t,e=this.logicalOR();if(this.expect("?")&&(t=this.assignment(),this.consume(":"))){var i=this.assignment();return a(function(n,s){return e(n,s)?t(n,s):i(n,s)},{constant:e.constant&&t.constant&&i.constant})}return e},logicalOR:function(){for(var t,e=this.logicalAND();t=this.expect("||");)e=this.binaryFn(e,t.text,this.logicalAND(),!0);return e},logicalAND:function(){for(var t,e=this.equality();t=this.expect("&&");)e=this.binaryFn(e,t.text,this.equality(),!0);return e},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=this.binaryFn(e,t.text,this.relational());return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=this.binaryFn(e,t.text,this.additive());return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.text,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.text,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn(gn.ZERO,t.text,this.unary()):(t=this.expect("!"))?this.unaryFn(t.text,this.unary()):this.primary()},fieldAccess:function(t){var e=this.identifier();return a(function(n,s,o){return null==(n=o||t(n,s))?i:e(n)},{assign:function(i,n,s){var o=t(i,s);return o||t.assign(i,o={},s),e.assign(o,n)}})},objectIndex:function(t){var e=this.text,n=this.expression();return this.consume("]"),a(function(s,o){var l=t(s,o),r=n(s,o);return oe(r,e),l?le(l[r],e):i},{assign:function(i,s,o){var l=oe(n(i,o),e),r=le(t(i,o),e);return r||t.assign(i,r={},o),r[l]=s}})},functionCall:function(t,e){var n=[];if(")"!==this.peekToken().text)do{n.push(this.expression())}while(this.expect(","));this.consume(")");var s=this.text,o=n.length?[]:null;return function(l,r){var a=e?e(l,r):p(e)?i:l,h=t(l,r,a)||d;if(o)for(var c=n.length;c--;)o[c]=le(n[c](l,r),s);if(le(a,s),h){if(h.constructor===h)throw hn("isecfn",s);if(h===dn||h===cn||h===un)throw hn("isecff",s)}return a=h.apply?h.apply(a,o||[]):h(o[0],o[1],o[2],o[3],o[4]),le(a,s)}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),a(function(e,i){for(var n=[],s=0,o=t.length;s<o;s++)n.push(t[s](e,i));return n},{literal:!0,constant:t.every(re),inputs:t})},object:function(){var t=[],e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var i=this.consume();i.constant?t.push(i.value):i.identifier?t.push(i.text):this.throwError("invalid key",i),this.consume(":"),e.push(this.expression())}while(this.expect(","));return this.consume("}"),a(function(i,n){for(var s={},o=0,l=e.length;o<l;o++)s[t[o]]=e[o](i,n);return s},{literal:!0,constant:e.every(re),inputs:e})}};var vn=J(),bn=J(),yn=Object.prototype.valueOf,xn=n("$sce"),wn={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Cn=(Ki=n("$compile"),e.createElement("a")),Nn=Se(t.location.href);Oe.$inject=["$provide"],Me.$inject=["$locale"],De.$inject=["$locale"];var kn=".",In={yyyy:Pe("FullYear",4),yy:Pe("FullYear",2,0,!0),y:Pe("FullYear",1),MMMM:Be("Month"),MMM:Be("Month",!0),MM:Pe("Month",2,1),M:Pe("Month",1,1),dd:Pe("Date",2),d:Pe("Date",1),HH:Pe("Hours",2),H:Pe("Hours",1),hh:Pe("Hours",2,-12),h:Pe("Hours",1,-12),mm:Pe("Minutes",2),m:Pe("Minutes",1),ss:Pe("Seconds",2),s:Pe("Seconds",1),sss:Pe("Milliseconds",3),EEEE:Be("Day"),EEE:Be("Day",!0),a:function(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]},Z:function(t){return t=-1*t.getTimezoneOffset(),t=(0<=t?"+":"")+(Xe(Math[0<t?"floor":"ceil"](t/60),2)+Xe(Math.abs(t%60),2))},ww:Re(2),w:Re(1)},Sn=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Tn=/^\-?\d+$/;$e.$inject=["$locale"];var En=u(ri),On=u(hi);Ve.$inject=["$parse"];var jn=u({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref&&!e.name)return function(t,e){var i="[object SVGAnimatedString]"===fi.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(i)||t.preventDefault()})}}}),An={};o(Ri,function(t,e){if("multiple"!=t){var i=Et("ng-"+e);An[i]=function(){return{restrict:"A",priority:100,link:function(t,n,s){t.$watch(s[i],function(t){s.$set(e,!!t)})}}}}}),o(Fi,function(t,e){An[e]=function(){return{priority:100,link:function(t,i,n){"ngPattern"===e&&"/"==n.ngPattern.charAt(0)&&(i=n.ngPattern.match(li))?n.$set("ngPattern",new RegExp(i[1],i[2])):t.$watch(n[e],function(t){n.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=Et("ng-"+t);An[e]=function(){return{priority:99,link:function(i,n,s){var o=t,l=t;"href"===t&&"[object SVGAnimatedString]"===fi.call(n.prop("href"))&&(l="xlinkHref",s.$attr[l]="xlink:href",o=null),s.$observe(e,function(e){e?(s.$set(l,e),ii&&o&&n.prop(o,s[l])):"href"===t&&s.$set(l,null)})}}}});var Mn={$addControl:d,$$renameControl:function(t,e){t.$name=e},$removeControl:d,$setValidity:d,$setDirty:d,$setPristine:d,$setSubmitted:d};Ue.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Dn=function(t){return["$timeout",function(e){return{name:"form",restrict:t?"EAC":"E",controller:Ue,compile:function(t){return t.addClass(ps).addClass(us),{pre:function(t,n,s,o){if(!("action"in s)){var l=function(e){t.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",l,!1),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",l,!1)},0,!1)})}var r=o.$$parentForm,h=o.$name;h&&(ae(t,null,h,o,h),s.$observe(s.name?"name":"ngForm",function(e){h!==e&&(ae(t,null,h,i,h),h=e,ae(t,null,h,o,h),r.$$renameControl(o,h))})),n.on("$destroy",function(){r.$removeControl(o),h&&ae(t,null,h,i,h),a(o,Mn)})}}}}}]},Ln=Dn(),Xn=Dn(!0),Pn=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Bn=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Hn=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Rn=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,$n=/^(\d{4})-(\d{2})-(\d{2})$/,Fn=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,zn=/^(\d{4})-W(\d\d)$/,Vn=/^(\d{4})-(\d\d)$/,Wn=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Un={text:function(t,e,i,n,s,o){qe(0,e,i,n,s,o),Ge(n)},date:Ke("date",$n,Ye($n,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Ke("datetimelocal",Fn,Ye(Fn,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:Ke("time",Wn,Ye(Wn,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Ke("week",zn,function(t,e){if(v(t))return t;if(m(t)){zn.lastIndex=0;var i=zn.exec(t);if(i){var n=+i[1],s=+i[2],o=i=0,l=0,r=0,a=He(n);s=7*(s-1);return e&&(i=e.getHours(),o=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds()),new Date(n,0,a.getDate()+s,i,o,l,r)}}return NaN},"yyyy-Www"),month:Ke("month",Vn,Ye(Vn,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,s,o,l){if(Je(0,e,0,s),qe(0,e,n,s,o,l),s.$$parserName="number",s.$parsers.push(function(t){return s.$isEmpty(t)?null:Rn.test(t)?parseFloat(t):i}),s.$formatters.push(function(t){if(!s.$isEmpty(t)){if(!g(t))throw gs("numfmt",t);t=t.toString()}return t}),n.min||n.ngMin){var r;s.$validators.min=function(t){return s.$isEmpty(t)||f(r)||t>=r},n.$observe("min",function(t){p(t)&&!g(t)&&(t=parseFloat(t,10)),r=g(t)&&!isNaN(t)?t:i,s.$validate()})}if(n.max||n.ngMax){var a;s.$validators.max=function(t){return s.$isEmpty(t)||f(a)||t<=a},n.$observe("max",function(t){p(t)&&!g(t)&&(t=parseFloat(t,10)),a=g(t)&&!isNaN(t)?t:i,s.$validate()})}},url:function(t,e,i,n,s,o){qe(0,e,i,n,s,o),Ge(n),n.$$parserName="url",n.$validators.url=function(t,e){var i=t||e;return n.$isEmpty(i)||Bn.test(i)}},email:function(t,e,i,n,s,o){qe(0,e,i,n,s,o),Ge(n),n.$$parserName="email",n.$validators.email=function(t,e){var i=t||e;return n.$isEmpty(i)||Hn.test(i)}},radio:function(t,e,i,n){f(i.name)&&e.attr("name",++mi),e.on("click",function(t){e[0].checked&&n.$setViewValue(i.value,t&&t.type)}),n.$render=function(){e[0].checked=i.value==n.$viewValue},i.$observe("value",n.$render)},checkbox:function(t,e,i,n,s,o,l,r){var a=Qe(r,t,"ngTrueValue",i.ngTrueValue,!0),h=Qe(r,t,"ngFalseValue",i.ngFalseValue,!1);e.on("click",function(t){n.$setViewValue(e[0].checked,t&&t.type)}),n.$render=function(){e[0].checked=n.$viewValue},n.$isEmpty=function(t){return!1===t},n.$formatters.push(function(t){return E(t,a)}),n.$parsers.push(function(t){return t?a:h})},hidden:d,button:d,submit:d,reset:d,file:d},Gn=["$browser","$sniffer","$filter","$parse",function(t,e,i,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(s,o,l,r){r[0]&&(Un[ri(l.type)]||Un.text)(s,o,l,r[0],e,t,i,n)}}}}],qn=/^(true|false|\d+)$/,Yn=function(){return{restrict:"A",priority:100,compile:function(t,e){return qn.test(e.ngValue)?function(t,e,i){i.$set("value",t.$eval(i.ngValue))}:function(t,e,i){t.$watch(i.ngValue,function(t){i.$set("value",t)})}}}},Kn=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,s){t.$$addBindingInfo(n,s.ngBind),n=n[0],e.$watch(s.ngBind,function(t){n.textContent=t===i?"":t})}}}}],Jn=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,s,o){n=t(s.attr(o.$attr.ngBindTemplate)),e.$$addBindingInfo(s,n.expressions),s=s[0],o.$observe("ngBindTemplate",function(t){s.textContent=t===i?"":t})}}}}],Qn=["$sce","$parse","$compile",function(t,e,i){return{restrict:"A",compile:function(n,s){var o=e(s.ngBindHtml),l=e(s.ngBindHtml,function(t){return(t||"").toString()});return i.$$addBindingClass(n),function(e,n,s){i.$$addBindingInfo(n,s.ngBindHtml),e.$watch(l,function(){n.html(t.getTrustedHtml(o(e))||"")})}}}}],Zn=u({restrict:"A",require:"ngModel",link:function(t,e,i,n){n.$viewChangeListeners.push(function(){t.$eval(i.ngChange)})}}),ts=Ze("",!0),es=Ze("Odd",0),is=Ze("Even",1),ns=We({compile:function(t,e){e.$set("ngCloak",i),t.removeClass("ng-cloak")}}),ss=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],os={},ls={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Et("ng-"+t);os[e]=["$parse","$rootScope",function(i,n){return{restrict:"A",compile:function(s,o){var l=i(o[e],null,!0);return function(e,i){i.on(t,function(i){var s=function(){l(e,{$event:i})};ls[t]&&n.$$phase?e.$evalAsync(s):e.$apply(s)})}}}}]});var rs=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(i,n,s,o,l){var r,a,h;i.$watch(s.ngIf,function(i){i?a||l(function(i,o){a=o,i[i.length++]=e.createComment(" end ngIf: "+s.ngIf+" "),r={clone:i},t.enter(i,n.parent(),n)}):(h&&(h.remove(),h=null),a&&(a.$destroy(),a=null),r&&(h=K(r.clone),t.leave(h).then(function(){h=null}),r=null))})}}}],as=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,i,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_i.noop,compile:function(s,o){var l=o.ngInclude||o.src,r=o.onload||"",a=o.autoscroll;return function(s,o,h,d,c){var u,f,_,m=0,g=function(){f&&(f.remove(),f=null),u&&(u.$destroy(),u=null),_&&(i.leave(_).then(function(){f=null}),f=_,_=null)};s.$watch(n.parseAsResourceUrl(l),function(n){var l=function(){!p(a)||a&&!s.$eval(a)||e()},h=++m;n?(t(n,!0).then(function(t){if(h===m){var e=s.$new();d.template=t,t=c(e,function(t){g(),i.enter(t,null,o).then(l)}),_=t,(u=e).$emit("$includeContentLoaded",n),s.$eval(r)}},function(){h===m&&(g(),s.$emit("$includeContentError",n))}),s.$emit("$includeContentRequested",n)):(g(),d.template=null)})}}}}],hs=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(i,n,s,o){/SVG/.test(n[0].toString())?(n.empty(),t(tt(o.template,e).childNodes)(i,function(t){n.append(t)},{futureParentElement:n})):(n.html(o.template),t(n.contents())(i))}}}],ds=We({priority:450,compile:function(){return{pre:function(t,e,i){t.$eval(i.ngInit)}}}}),cs=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,s){var l=e.attr(n.$attr.ngList)||", ",r="false"!==n.ngTrim,a=r?bi(l):l;s.$parsers.push(function(t){if(!f(t)){var e=[];return t&&o(t.split(a),function(t){t&&e.push(r?bi(t):t)}),e}}),s.$formatters.push(function(t){return vi(t)?t.join(l):i}),s.$isEmpty=function(t){return!t||!t.length}}}},us="ng-valid",fs="ng-invalid",ps="ng-pristine",_s="ng-dirty",ms="ng-pending",gs=new n("ngModel"),vs=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,n,s,l,r,a,h,c,u){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=i,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=i,this.$name=u(n.name||"",!1)(t);var _=l(n.ngModel),m=_.assign,v=_,y=m,x=null,w=this;this.$$setOptions=function(t){if((w.$options=t)&&t.getterSetter){var e=l(n.ngModel+"()"),i=l(n.ngModel+"($$$p)");v=function(t){var i=_(t);return b(i)&&(i=e(t)),i},y=function(t,e){b(_(t))?i(t,{$$$p:w.$modelValue}):m(t,w.$modelValue)}}else if(!_.assign)throw gs("nonassign",n.ngModel,L(s))},this.$render=d,this.$isEmpty=function(t){return f(t)||""===t||null===t||t!=t};var C=s.inheritedData("$formController")||Mn,N=0;ti({ctrl:this,$element:s,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:C,$animate:r}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,r.removeClass(s,_s),r.addClass(s,ps)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,r.removeClass(s,ps),r.addClass(s,_s),C.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,r.setClass(s,"ng-untouched","ng-touched")},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,r.setClass(s,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){a.cancel(x),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!g(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$rawModelValue,e=w.$valid,n=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$runValidators(!w.$error[w.$$parserName||"parse"]&&i,t,w.$$lastCommittedViewValue,function(o){s||e===o||(w.$modelValue=o?t:i,w.$modelValue!==n&&w.$$writeModelToScope())})}},this.$$runValidators=function(t,e,n,s){function l(t,e){a===N&&w.$setValidity(t,e)}function r(t){a===N&&s(t)}var a=++N;!function(t){var e=w.$$parserName||"parse";if(t===i)l(e,null);else if(l(e,t),!t)return o(w.$validators,function(t,e){l(e,null)}),o(w.$asyncValidators,function(t,e){l(e,null)}),!1;return!0}(t)?r(!1):function(){var t=!0;return o(w.$validators,function(i,s){var o=i(e,n);t=t&&o,l(s,o)}),!!t||(o(w.$asyncValidators,function(t,e){l(e,null)}),!1)}()?function(){var t=[],s=!0;o(w.$asyncValidators,function(o,r){var a=o(e,n);if(!a||!b(a.then))throw gs("$asyncValidators",a);l(r,i),t.push(a.then(function(){l(r,!0)},function(t){s=!1,l(r,!1)}))}),t.length?c.all(t).then(function(){r(s)},d):r(!0)}():r(!1)},this.$commitViewValue=function(){var t=w.$viewValue;a.cancel(x),(w.$$lastCommittedViewValue!==t||""===t&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=t,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=w.$$lastCommittedViewValue,n=!f(e)||i;if(n)for(var s=0;s<w.$parsers.length;s++)if(e=w.$parsers[s](e),f(e)){n=!1;break}g(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=v(t));var o=w.$modelValue,l=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,l&&(w.$modelValue=e,w.$modelValue!==o&&w.$$writeModelToScope()),w.$$runValidators(n,e,w.$$lastCommittedViewValue,function(t){l||(w.$modelValue=t?e:i,w.$modelValue!==o&&w.$$writeModelToScope())})},this.$$writeModelToScope=function(){y(t,w.$modelValue),o(w.$viewChangeListeners,function(t){try{t()}catch(t){e(t)}})},this.$setViewValue=function(t,e){w.$viewValue=t,w.$options&&!w.$options.updateOnDefault||w.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var i=0,n=w.$options;n&&p(n.debounce)&&(n=n.debounce,g(n)?i=n:g(n[e])?i=n[e]:g(n.default)&&(i=n.default)),a.cancel(x),i?x=a(function(){w.$commitViewValue()},i):h.$$phase?w.$commitViewValue():t.$apply(function(){w.$commitViewValue()})},t.$watch(function(){var e=v(t);if(e!==w.$modelValue){w.$modelValue=w.$$rawModelValue=e;for(var n=w.$formatters,s=n.length,o=e;s--;)o=n[s](o);w.$viewValue!==o&&(w.$viewValue=w.$$lastCommittedViewValue=o,w.$render(),w.$$runValidators(i,e,o,d))}return e})}],bs=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:vs,priority:1,compile:function(e){return e.addClass(ps).addClass("ng-untouched").addClass(us),{pre:function(t,e,i,n){var s=n[0],o=n[1]||Mn;s.$$setOptions(n[2]&&n[2].$options),o.$addControl(s),i.$observe("name",function(t){s.$name!==t&&o.$$renameControl(s,t)}),t.$on("$destroy",function(){o.$removeControl(s)})},post:function(e,i,n,s){var o=s[0];o.$options&&o.$options.updateOn&&i.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),i.on("blur",function(i){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],ys=/(\s+|^)default(\s+|$)/,xs=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=t.$eval(e.ngModelOptions),this.$options.updateOn!==i?(this.$options.updateOnDefault=!1,this.$options.updateOn=bi(this.$options.updateOn.replace(ys,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ws=We({terminal:!0,priority:1e3}),Cs=["$locale","$interpolate",function(t,e){var i=/{}/g,n=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(s,l,r){function a(t){l.text(t||"")}var h,d=r.count,c=r.$attr.when&&l.attr(r.$attr.when),u=r.offset||0,f=s.$eval(c)||{},p={},_=(c=e.startSymbol(),e.endSymbol()),m=c+d+"-"+u+_,g=_i.noop;o(r,function(t,e){var i=n.exec(e);i&&(i=(i[1]?"-":"")+ri(i[2]),f[i]=l.attr(r.$attr[e]))}),o(f,function(t,n){p[n]=e(t.replace(i,m))}),s.$watch(d,function(e){e=parseFloat(e);var i=isNaN(e);i||e in f||(e=t.pluralCat(e-u)),e===h||i&&isNaN(h)||(g(),g=s.$watch(p[e],a),h=e)})}}}],Ns=["$parse","$animate",function(t,l){var r=n("ngRepeat"),a=function(t,e,i,n,s,o,l){t[i]=n,s&&(t[s]=o),t.$index=e,t.$first=0===e,t.$last=e===l-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(n,h){var d=h.ngRepeat,c=e.createComment(" end ngRepeat: "+d+" ");if(!(u=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/)))throw r("iexp",d);var u,f=u[1],p=u[2],_=u[3],m=u[4];if(!(u=f.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw r("iidexp",f);var g=u[3]||u[1],v=u[2];if(_&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(_)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(_)))throw r("badident",_);var b,y,x,w,C={$id:vt};return m?b=t(m):(x=function(t,e){return vt(e)},w=function(t){return t}),function(t,e,n,h,u){b&&(y=function(e,i,n){return v&&(C[v]=e),C[g]=i,C.$index=n,b(t,C)});var f=J();t.$watchCollection(p,function(n){var h,p,m,b,C,N,k,I,S,T,E=e[0],O=J();if(_&&(t[_]=n),s(n))I=n,p=y||x;else{p=y||w,I=[];for(T in n)n.hasOwnProperty(T)&&"$"!=T.charAt(0)&&I.push(T);I.sort()}for(b=I.length,T=Array(b),h=0;h<b;h++)if(C=n===I?h:I[h],N=n[C],k=p(C,N,h),f[k])S=f[k],delete f[k],O[k]=S,T[h]=S;else{if(O[k])throw o(T,function(t){t&&t.scope&&(f[t.id]=t)}),r("dupes",d,k,N);T[h]={id:k,scope:i,clone:i},O[k]=!0}for(m in f){if(S=f[m],k=K(S.clone),l.leave(k),k[0].parentNode)for(h=0,p=k.length;h<p;h++)k[h].$$NG_REMOVED=!0;S.scope.$destroy()}for(h=0;h<b;h++)if(C=n===I?h:I[h],N=n[C],(S=T[h]).scope){m=E;do{m=m.nextSibling}while(m&&m.$$NG_REMOVED);S.clone[0]!=m&&l.move(K(S.clone),null,ni(E)),E=S.clone[S.clone.length-1],a(S.scope,h,g,N,v,C,b)}else u(function(t,e){S.scope=e;var i=c.cloneNode(!1);t[t.length++]=i,l.enter(t,null,ni(E)),E=i,S.clone=t,O[S.id]=S,a(S.scope,h,g,N,v,C,b)});f=O})}}}}],ks=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngShow,function(e){t[e?"removeClass":"addClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Is=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,i,n){e.$watch(n.ngHide,function(e){t[e?"addClass":"removeClass"](i,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ss=We(function(t,e,i){t.$watchCollection(i.ngStyle,function(t,i){i&&t!==i&&o(i,function(t,i){e.css(i,"")}),t&&e.css(t)})}),Ts=["$animate",function(t){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(i,n,s,l){var r=[],a=[],h=[],d=[],c=function(t,e){return function(){t.splice(e,1)}};i.$watch(s.ngSwitch||s.on,function(i){var n,s;for(n=0,s=h.length;n<s;++n)t.cancel(h[n]);for(n=h.length=0,s=d.length;n<s;++n){var u=K(a[n].clone);d[n].$destroy(),(h[n]=t.leave(u)).then(c(h,n))}a.length=0,d.length=0,(r=l.cases["!"+i]||l.cases["?"])&&o(r,function(i){i.transclude(function(n,s){d.push(s);var o=i.element;n[n.length++]=e.createComment(" end ngSwitchWhen: "),a.push({clone:n}),t.enter(n,o.parent(),o)})})})}}}],Es=We({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,s){n.cases["!"+i.ngSwitchWhen]=n.cases["!"+i.ngSwitchWhen]||[],n.cases["!"+i.ngSwitchWhen].push({transclude:s,element:e})}}),Os=We({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,i,n,s){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:s,element:e})}}),js=We({restrict:"EAC",link:function(t,e,i,s,o){if(!o)throw n("ngTransclude")("orphan",L(e));o(function(t){e.empty(),e.append(t)})}}),As=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,i){"text/ng-template"==i.type&&t.put(i.id,e[0].text)}}}],Ms=n("ngOptions"),Ds=u({restrict:"A",terminal:!0}),Ls=["$compile","$parse",function(t,n){var s=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,l={$setViewValue:d};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,i){var n,s=this,o={},r=l;s.databound=i.ngModel,s.init=function(t,e,i){r=t,n=i},s.addOption=function(e,i){q(e,'"option value"'),o[e]=!0,r.$viewValue==e&&(t.val(e),n.parent()&&n.remove()),i&&i[0].hasAttribute("selected")&&(i[0].selected=!0)},s.removeOption=function(t){this.hasOption(t)&&(delete o[t],r.$viewValue===t&&this.renderUnknownOption(t))},s.renderUnknownOption=function(e){e="? "+vt(e)+" ?",n.val(e),t.prepend(n),t.val(e),n.prop("selected",!0)},s.hasOption=function(t){return o.hasOwnProperty(t)},e.$on("$destroy",function(){s.renderUnknownOption=d})}],link:function(l,r,a,h){if(h[1]){var d=h[0];h=h[1];var c,u=a.multiple,_=a.ngOptions,m=!1,g=!1,v=ni(e.createElement("option")),b=ni(e.createElement("optgroup")),y=v.clone();a=0;for(var x=r.children(),w=x.length;a<w;a++)if(""===x[a].value){c=m=x.eq(a);break}d.init(h,m,y),u&&(h.$isEmpty=function(t){return!t||0===t.length}),_?function(e,l,r){function a(t,i,n){return A[w]=n,k&&(A[k]=i),t(e,A)}function h(){g||(e.$$postDigest(f),g=!0)}function c(t,e,i){t[e]=t[e]||0,t[e]+=i?1:-1}function f(){g=!1;var t,i,n,s,h,f={"":[]},_=[""];n=r.$viewValue,s=T(e)||[];var y,w,C,M,D=k?Object.keys(s).sort():s,L={};h=function(t){var e;if(u)if(E&&vi(t)){e=new bt([]);for(var i=0;i<t.length;i++)e.put(a(E,null,t[i]),!0)}else e=new bt(t);else E&&(t=a(E,null,t));return function(i,n){var s;return s=E||N||S,u?p(e.remove(a(s,i,n))):t===a(s,i,n)}}(n);var X,P,B=!1;for(O={},M=0;C=D.length,M<C;M++)y=M,k&&"$"===(y=D[M]).charAt(0)||(w=s[y],(i=f[t=a(I,y,w)||""])||(i=f[t]=[],_.push(t)),t=h(y,w),B=B||t,w=p(w=a(x,y,w))?w:"",P=E?E(e,A):k?D[M]:M,E&&(O[P]=y),i.push({id:P,label:w,selected:t}));for(u||(m||null===n?f[""].unshift({id:"",label:"",selected:!B}):B||f[""].unshift({id:"?",label:"",selected:!0})),y=0,D=_.length;y<D;y++){for(i=f[t=_[y]],j.length<=y?(n={element:b.clone().attr("label",t),label:i.label},s=[n],j.push(s),l.append(n.element)):(s=j[y],(n=s[0]).label!=t&&n.element.attr("label",n.label=t)),B=null,M=0,C=i.length;M<C;M++)t=i[M],(h=s[M+1])?(B=h.element,h.label!==t.label&&(c(L,h.label,!1),c(L,t.label,!0),B.text(h.label=t.label),B.prop("label",h.label)),h.id!==t.id&&B.val(h.id=t.id),B[0].selected!==t.selected&&(B.prop("selected",h.selected=t.selected),ii&&B.prop("selected",h.selected))):(""===t.id&&m?X=m:(X=v.clone()).val(t.id).prop("selected",t.selected).attr("selected",t.selected).prop("label",t.label).text(t.label),s.push(h={element:X,label:t.label,id:t.id,selected:t.selected}),c(L,t.label,!0),B?B.after(X):n.element.append(X),B=X);for(M++;s.length>M;)t=s.pop(),c(L,t.label,!1),t.element.remove()}for(;j.length>y;){for(i=j.pop(),M=1;M<i.length;++M)c(L,i[M].label,!1);i[0].element.remove()}o(L,function(t,e){0<t?d.addOption(e):0>t&&d.removeOption(e)})}var y;if(!(y=_.match(s)))throw Ms("iexp",_,L(l));var x=n(y[2]||y[1]),w=y[4]||y[6],C=/ as /.test(y[0])&&y[1],N=C?n(C):null,k=y[5],I=n(y[3]||""),S=n(y[2]?y[1]:w),T=n(y[7]),E=y[8]?n(y[8]):null,O={},j=[[{element:l,label:""}]],A={};m&&(t(m)(e),m.removeClass("ng-scope"),m.remove()),l.empty(),l.on("change",function(){e.$apply(function(){var t,n=T(e)||[];if(u)t=[],o(l.val(),function(e){e=E?O[e]:e,t.push("?"===e?i:""===e?null:a(N||S,e,n[e]))});else{var s=E?O[l.val()]:l.val();t="?"===s?i:""===s?null:a(N||S,s,n[s])}r.$setViewValue(t),f()})}),r.$render=f,e.$watchCollection(T,h),e.$watchCollection(function(){var t,i=T(e);if(i&&vi(i)){t=Array(i.length);for(var n=0,s=i.length;n<s;n++)t[n]=a(x,n,i[n])}else if(i)for(n in t={},i)i.hasOwnProperty(n)&&(t[n]=a(x,n,i[n]));return t},h),u&&e.$watchCollection(function(){return r.$modelValue},h)}(l,r,h):u?function(t,e,i){var n;i.$render=function(){var t=new bt(i.$viewValue);o(e.find("option"),function(e){e.selected=p(t.get(e.value))})},t.$watch(function(){E(n,i.$viewValue)||(n=T(i.$viewValue),i.$render())}),e.on("change",function(){t.$apply(function(){var t=[];o(e.find("option"),function(e){e.selected&&t.push(e.value)}),i.$setViewValue(t)})})}(l,r,h):function(t,e,i,n){i.$render=function(){var t=i.$viewValue;n.hasOption(t)?(y.parent()&&y.remove(),e.val(t),""===t&&c.prop("selected",!0)):f(t)&&c?e.val(""):n.renderUnknownOption(t)},e.on("change",function(){t.$apply(function(){y.parent()&&y.remove(),i.$setViewValue(e.val())})})}(l,r,h,d)}}}}],Xs=["$interpolate",function(t){var e={addOption:d,removeOption:d};return{restrict:"E",priority:100,compile:function(i,n){if(f(n.value)){var s=t(i.text(),!0);s||n.$set("value",i.text())}return function(t,i,n){var o=i.parent(),l=o.data("$selectController")||o.parent().data("$selectController");l&&l.databound||(l=e),s?t.$watch(s,function(t,e){n.$set("value",t),e!==t&&l.removeOption(e),l.addOption(t,i)}):l.addOption(n.value,i),i.on("$destroy",function(){l.removeOption(n.value)})}}}}],Ps=u({restrict:"E",terminal:!1}),Bs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,n){n&&(i.required=!0,n.$validators.required=function(t,e){return!i.required||!n.$isEmpty(e)},i.$observe("required",function(){n.$validate()}))}}},Hs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,s,o){if(o){var l,r=s.ngPattern||s.pattern;s.$observe("pattern",function(t){if(m(t)&&0<t.length&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw n("ngPattern")("noregexp",r,t,L(e));l=t||i,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||f(l)||l.test(t)}}}}},Rs=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,n){if(n){var s=-1;i.$observe("maxlength",function(t){t=h(t),s=isNaN(t)?-1:t,n.$validate()}),n.$validators.maxlength=function(t,e){return 0>s||n.$isEmpty(t)||e.length<=s}}}}},$s=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,n){if(n){var s=0;i.$observe("minlength",function(t){s=h(t)||0,n.$validate()}),n.$validators.minlength=function(t,e){return n.$isEmpty(e)||e.length>=s}}}}};t.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(function(){var e;Ni||((si=t.jQuery)&&si.fn.on?(ni=si,a(si.fn,{scope:Hi.scope,isolateScope:Hi.isolateScope,controller:Hi.controller,injector:Hi.injector,inheritedData:Hi.inheritedData}),e=si.cleanData,si.cleanData=function(t){var i;if(gi)gi=!1;else for(var n,s=0;null!=(n=t[s]);s++)(i=si._data(n,"events"))&&i.$destroy&&si(n).triggerHandler("$destroy");e(t)}):ni=et,_i.element=ni,Ni=!0)}(),function(e){a(e,{bootstrap:F,copy:S,extend:a,equals:E,element:ni,forEach:o,injector:xt,noop:d,bind:j,toJson:M,fromJson:D,identity:c,isUndefined:f,isDefined:p,isString:m,isFunction:b,isObject:_,isNumber:g,isElement:N,isArray:vi,version:Si,isDate:v,lowercase:ri,uppercase:hi,callbacks:{counter:0},getTestability:V,$$minErr:n,$$csp:xi,reloadWithDebugInfo:z}),oi=function(t){function e(t,e,i){return t[e]||(t[e]=i())}var i=n("$injector"),s=n("ng");return t=e(t,"angular",Object),t.$$minErr=t.$$minErr||n,e(t,"module",function(){var t={};return function(n,o,l){if("hasOwnProperty"===n)throw s("badname","module");return o&&t.hasOwnProperty(n)&&(t[n]=null),e(t,n,function(){function t(t,i,n,s){return s||(s=e),function(){return s[n||"push"]([t,i,arguments]),h}}if(!o)throw i("nomod",n);var e=[],s=[],r=[],a=t("$injector","invoke","push",s),h={_invokeQueue:e,_configBlocks:s,_runBlocks:r,requires:o,name:n,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:a,run:function(t){return r.push(t),this}};return l&&a(l),h})}})}(t);try{oi("ngLocale")}catch(t){oi("ngLocale",[]).provider("$locale",Vt)}oi("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:be}),t.provider("$compile",Tt).directive({a:jn,input:Gn,textarea:Gn,form:Ln,script:As,select:Ls,style:Ps,option:Xs,ngBind:Kn,ngBindHtml:Qn,ngBindTemplate:Jn,ngClass:ts,ngClassEven:is,ngClassOdd:es,ngCloak:ns,ngController:ss,ngForm:Xn,ngHide:Is,ngIf:rs,ngInclude:as,ngInit:ds,ngNonBindable:ws,ngPluralize:Cs,ngRepeat:Ns,ngShow:ks,ngStyle:Ss,ngSwitch:Ts,ngSwitchWhen:Es,ngSwitchDefault:Os,ngOptions:Ds,ngTransclude:js,ngModel:bs,ngList:cs,ngChange:Zn,pattern:Hs,ngPattern:Hs,required:Bs,ngRequired:Bs,minlength:$s,ngMinlength:$s,maxlength:Rs,ngMaxlength:Rs,ngValue:Yn,ngModelOptions:xs}).directive({ngInclude:hs}).directive(An).directive(os),t.provider({$anchorScroll:wt,$animate:Yi,$browser:kt,$cacheFactory:It,$controller:At,$document:Mt,$exceptionHandler:Dt,$filter:Oe,$interpolate:Ft,$interval:zt,$http:Ht,$httpBackend:$t,$location:ne,$log:se,$parse:fe,$rootScope:ve,$q:pe,$$q:_e,$sce:we,$sceDelegate:xe,$sniffer:Ce,$templateCache:St,$templateRequest:Ne,$$testability:ke,$timeout:Ie,$window:Ee,$$rAF:ge,$$asyncCallback:Ct,$$jqLite:gt})}])}(_i),ni(e).ready(function(){$(e,F)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(){function t(t,e,i){i=(i||0)-1;for(var n=t?t.length:0;++i<n;)if(t[i]===e)return i;return-1}function e(e,i){var n=typeof i;if(e=e.l,"boolean"==n||null==i)return e[i]?0:-1;"number"!=n&&"string"!=n&&(n="object");var s="number"==n?i:g+i;return e=(e=e[n])&&e[s],"object"==n?e&&-1<t(e,i)?0:-1:e?0:-1}function i(t){var e=this.l,i=typeof t;if("boolean"==i||null==t)e[t]=!0;else{"number"!=i&&"string"!=i&&(i="object");var n="number"==i?t:g+t;e=e[i]||(e[i]={});"object"==i?(e[n]||(e[n]=[])).push(t):e[n]=!0}}function n(t){return t.charCodeAt(0)}function s(t,e){for(var i=t.m,n=e.m,s=-1,o=i.length;++s<o;){var l=i[s],r=n[s];if(l!==r){if(l>r||void 0===l)return 1;if(l<r||void 0===r)return-1}}return t.n-e.n}function o(t){var e=-1,n=t.length,s=t[0],o=t[n/2|0],l=t[n-1];if(s&&"object"==typeof s&&o&&"object"==typeof o&&l&&"object"==typeof l)return!1;for((s=a()).false=s.null=s.true=s.undefined=!1,(o=a()).k=t,o.l=s,o.push=i;++e<n;)o.push(t[e]);return o}function l(t){return"\\"+U[t]}function r(){return p.pop()||[]}function a(){return _.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function h(t){t.length=0,p.length<b&&p.push(t)}function d(t){var e=t.l;e&&d(e),t.k=t.l=t.m=t.object=t.number=t.string=t.o=null,_.length<b&&_.push(t)}function c(t,e,i){e||(e=0),void 0===i&&(i=t?t.length:0);var n=-1;i=i-e||0;for(var s=Array(0>i?0:i);++n<i;)s[n]=t[e+n];return s}function u(i){function p(t,e,i){if(!t||!W[typeof t])return t;e=e&&void 0===i?e:Z(e,i,3);for(var n=-1,s=W[typeof t]&&De(t),o=s?s.length:0;++n<o&&(i=s[n],!1!==e(t[i],i,t)););return t}function _(t,e,i){var n;if(!t||!W[typeof t])return t;e=e&&void 0===i?e:Z(e,i,3);for(n in t)if(!1===e(t[n],n,t))break;return t}function b(t,e,i){var n,s=t,o=s;if(!s)return o;for(var l=arguments,r=0,a="number"==typeof i?2:l.length;++r<a;)if((s=l[r])&&W[typeof s])for(var h=-1,d=W[typeof s]&&De(s),c=d?d.length:0;++h<c;)n=d[h],void 0===o[n]&&(o[n]=s[n]);return o}function U(t,e,i){var n,s=t,o=s;if(!s)return o;var l=arguments,r=0,a="number"==typeof i?2:l.length;if(3<a&&"function"==typeof l[a-2])var h=Z(l[--a-1],l[a--],2);else 2<a&&"function"==typeof l[a-1]&&(h=l[--a]);for(;++r<a;)if((s=l[r])&&W[typeof s])for(var d=-1,c=W[typeof s]&&De(s),u=c?c.length:0;++d<u;)n=c[d],o[n]=h?h(o[n],s[n]):s[n];return o}function q(t){return t&&"object"==typeof t&&!Me(t)&&_e.call(t,"__wrapped__")?t:new Y(t)}function Y(t,e){this.__chain__=!!e,this.__wrapped__=t}function K(t,e,i,n,s){if(i){var o=i(t);if(void 0!==o)return o}if(!bt(t))return t;var l=ae.call(t);if(!F[l])return t;var a=Oe[l];switch(l){case L:case X:return new a(+t);case B:case $:return new a(t);case R:return o=a(t.source,k.exec(t)),o.lastIndex=t.lastIndex,o}if(l=Me(t),e){var d=!n;n||(n=r()),s||(s=r());for(var u=n.length;u--;)if(n[u]==t)return s[u];o=l?a(t.length):{}}else o=l?c(t):U({},t);return l&&(_e.call(t,"index")&&(o.index=t.index),_e.call(t,"input")&&(o.input=t.input)),e?(n.push(t),s.push(o),(l?St:p)(t,function(t,l){o[l]=K(t,e,i,n,s)}),d&&(h(n),h(s)),o):o}function J(t){return bt(t)?xe(t):{}}function Z(t,e,i){if("function"!=typeof t)return Vt;if(void 0===e||!("prototype"in t))return t;var n=t.__bindData__;if(void 0===n&&(je.funcNames&&(n=!t.name),!(n=n||!je.funcDecomp))){var s=fe.call(t);je.funcNames||(n=!I.test(s)),n||(n=O.test(s),Ae(t,n))}if(!1===n||!0!==n&&1&n[1])return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)};case 4:return function(i,n,s,o){return t.call(e,i,n,s,o)}}return Ft(t,e)}function tt(t){function e(){var t=a?l:this;if(s){var p=c(s);me.apply(p,arguments)}return(o||d)&&(p||(p=c(arguments)),o&&me.apply(p,o),d&&p.length<r)?(n|=16,tt([i,u?n:-4&n,p,null,l,r])):(p||(p=arguments),h&&(i=t[f]),this instanceof e?(t=J(i.prototype),p=i.apply(t,p),bt(p)?p:t):i.apply(t,p))}var i=t[0],n=t[1],s=t[2],o=t[3],l=t[4],r=t[5],a=1&n,h=2&n,d=4&n,u=8&n,f=i;return Ae(e,t),e}function et(i,n){var s=-1,l=dt(),r=i?i.length:0,a=r>=v&&l===t,h=[];if(a){var c=o(n);c?(l=e,n=c):a=!1}for(;++s<r;)c=i[s],0>l(n,c)&&h.push(c);return a&&d(n),h}function it(t,e,i,n){n=(n||0)-1;for(var s=t?t.length:0,o=[];++n<s;){var l=t[n];if(l&&"object"==typeof l&&"number"==typeof l.length&&(Me(l)||pt(l))){e||(l=it(l,e,i));var r=-1,a=l.length,h=o.length;for(o.length+=a;++r<a;)o[h++]=l[r]}else i||o.push(l)}return o}function nt(t,e,i,n,s,o){if(i){if(void 0!==(f=i(t,e)))return!!f}if(t===e)return 0!==t||1/t==1/e;if(t==t&&!(t&&W[typeof t]||e&&W[typeof e]))return!1;if(null==t||null==e)return t===e;var l=ae.call(t),a=ae.call(e);if(l==M&&(l=H),a==M&&(a=H),l!=a)return!1;switch(l){case L:case X:return+t==+e;case B:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case R:case $:return t==ne(e)}if(!(a=l==D)){var d=_e.call(t,"__wrapped__"),c=_e.call(e,"__wrapped__");if(d||c)return nt(d?t.__wrapped__:t,c?e.__wrapped__:e,i,n,s,o);if(l!=H)return!1;if(l=t.constructor,d=e.constructor,l!=d&&!(vt(l)&&l instanceof l&&vt(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}for(l=!s,s||(s=r()),o||(o=r()),d=s.length;d--;)if(s[d]==t)return o[d]==e;var u=0,f=!0;if(s.push(t),o.push(e),a){if(d=t.length,u=e.length,(f=u==d)||n)for(;u--;)if(a=d,c=e[u],n)for(;a--&&!(f=nt(t[a],c,i,n,s,o)););else if(!(f=nt(t[u],c,i,n,s,o)))break}else _(e,function(e,l,r){return _e.call(r,l)?(u++,f=_e.call(t,l)&&nt(t[l],e,i,n,s,o)):void 0}),f&&!n&&_(t,function(t,e,i){return _e.call(i,e)?f=-1<--u:void 0});return s.pop(),o.pop(),l&&(h(s),h(o)),f}function st(t,e,i,n,s){(Me(e)?St:p)(e,function(e,o){var l,r,a=e,h=t[o];if(e&&((r=Me(e))||He(e))){for(a=n.length;a--;)if(l=n[a]==e){h=s[a];break}if(!l){var d;i&&(a=i(h,e),d=void 0!==a)&&(h=a),d||(h=r?Me(h)?h:[]:He(h)?h:{}),n.push(e),s.push(h),d||st(h,e,i,n,s)}}else i&&void 0===(a=i(h,e))&&(a=e),void 0!==a&&(h=a);t[o]=h})}function ot(t,e){return t+ue(Ee()*(e-t+1))}function lt(i,n,s){var l=-1,a=dt(),c=i?i.length:0,u=[],f=!n&&c>=v&&a===t,p=s||f?r():u;for(f&&(p=o(p),a=e);++l<c;){var _=i[l],m=s?s(_,l,i):_;(n?!l||p[p.length-1]!==m:0>a(p,m))&&((s||f)&&p.push(m),u.push(_))}return f?(h(p.k),d(p)):s&&h(p),u}function rt(t){return function(e,i,n){var s={};i=q.createCallback(i,n,3),n=-1;var o=e?e.length:0;if("number"==typeof o)for(;++n<o;){var l=e[n];t(s,l,i(l,n,e),e)}else p(e,function(e,n,o){t(s,e,i(e,n,o),o)});return s}}function at(t,e,i,n,s,o){var l=1&e,r=4&e,a=16&e,h=32&e;if(!(2&e||vt(t)))throw new se;a&&!i.length&&(e&=-17,a=i=!1),h&&!n.length&&(e&=-33,h=n=!1);var d=t&&t.__bindData__;return d&&!0!==d?((d=c(d))[2]&&(d[2]=c(d[2])),d[3]&&(d[3]=c(d[3])),!l||1&d[1]||(d[4]=s),!l&&1&d[1]&&(e|=8),!r||4&d[1]||(d[5]=o),a&&me.apply(d[2]||(d[2]=[]),i),h&&be.apply(d[3]||(d[3]=[]),n),d[1]|=e,at.apply(null,d)):(1==e||17===e?function(t){function e(){if(n){var t=c(n);me.apply(t,arguments)}if(this instanceof e){var o=J(i.prototype);return bt(t=i.apply(o,t||arguments))?t:o}return i.apply(s,t||arguments)}var i=t[0],n=t[2],s=t[4];return Ae(e,t),e}:tt)([t,e,i,n,s,o])}function ht(t){return Le[t]}function dt(){var e=(e=q.indexOf)===Xt?t:e;return e}function ct(t){return"function"==typeof t&&he.test(t)}function ut(t){var e,i;return!!(t&&ae.call(t)==H&&(e=t.constructor,!vt(e)||e instanceof e))&&(_(t,function(t,e){i=e}),void 0===i||_e.call(t,i))}function ft(t){return Xe[t]}function pt(t){return t&&"object"==typeof t&&"number"==typeof t.length&&ae.call(t)==M||!1}function _t(t,e,i){var n=De(t),s=n.length;for(e=Z(e,i,3);s--&&(i=n[s],!1!==e(t[i],i,t)););return t}function mt(t){var e=[];return _(t,function(t,i){vt(t)&&e.push(i)}),e.sort()}function gt(t){for(var e=-1,i=De(t),n=i.length,s={};++e<n;){var o=i[e];s[t[o]]=o}return s}function vt(t){return"function"==typeof t}function bt(t){return!(!t||!W[typeof t])}function yt(t){return"number"==typeof t||t&&"object"==typeof t&&ae.call(t)==B||!1}function xt(t){return"string"==typeof t||t&&"object"==typeof t&&ae.call(t)==$||!1}function wt(t){for(var e=-1,i=De(t),n=i.length,s=Yt(n);++e<n;)s[e]=t[i[e]];return s}function Ct(t,e,i){var n=-1,s=dt(),o=t?t.length:0,l=!1;return i=(0>i?Ie(0,o+i):i)||0,Me(t)?l=-1<s(t,e,i):"number"==typeof o?l=-1<(xt(t)?t.indexOf(e,i):s(t,e,i)):p(t,function(t){return++n<i?void 0:!(l=t===e)}),l}function Nt(t,e,i){var n=!0;e=q.createCallback(e,i,3),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s&&(n=!!e(t[i],i,t)););else p(t,function(t,i,s){return n=!!e(t,i,s)});return n}function kt(t,e,i){var n=[];e=q.createCallback(e,i,3),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s;){var o=t[i];e(o,i,t)&&n.push(o)}else p(t,function(t,i,s){e(t,i,s)&&n.push(t)});return n}function It(t,e,i){e=q.createCallback(e,i,3),i=-1;var n=t?t.length:0;if("number"!=typeof n){var s;return p(t,function(t,i,n){return e(t,i,n)?(s=t,!1):void 0}),s}for(;++i<n;){var o=t[i];if(e(o,i,t))return o}}function St(t,e,i){var n=-1,s=t?t.length:0;if(e=e&&void 0===i?e:Z(e,i,3),"number"==typeof s)for(;++n<s&&!1!==e(t[n],n,t););else p(t,e);return t}function Tt(t,e,i){var n=t?t.length:0;if(e=e&&void 0===i?e:Z(e,i,3),"number"==typeof n)for(;n--&&!1!==e(t[n],n,t););else{var s=De(t);n=s.length;p(t,function(t,i,o){return i=s?s[--n]:--n,e(o[i],i,o)})}return t}function Et(t,e,i){var n=-1,s=t?t.length:0;if(e=q.createCallback(e,i,3),"number"==typeof s)for(var o=Yt(s);++n<s;)o[n]=e(t[n],n,t);else o=[],p(t,function(t,i,s){o[++n]=e(t,i,s)});return o}function Ot(t,e,i){var s=-1/0,o=s;if("function"!=typeof e&&i&&i[e]===t&&(e=null),null==e&&Me(t)){i=-1;for(var l=t.length;++i<l;){var r=t[i];r>o&&(o=r)}}else e=null==e&&xt(t)?n:q.createCallback(e,i,3),St(t,function(t,i,n){(i=e(t,i,n))>s&&(s=i,o=t)});return o}function jt(t,e,i,n){if(!t)return i;var s=3>arguments.length;e=q.createCallback(e,n,4);var o=-1,l=t.length;if("number"==typeof l)for(s&&(i=t[++o]);++o<l;)i=e(i,t[o],o,t);else p(t,function(t,n,o){i=s?(s=!1,t):e(i,t,n,o)});return i}function At(t,e,i,n){var s=3>arguments.length;return e=q.createCallback(e,n,4),Tt(t,function(t,n,o){i=s?(s=!1,t):e(i,t,n,o)}),i}function Mt(t){var e=-1,i=t?t.length:0,n=Yt("number"==typeof i?i:0);return St(t,function(t){var i=ot(0,++e);n[e]=n[i],n[i]=t}),n}function Dt(t,e,i){var n;e=q.createCallback(e,i,3),i=-1;var s=t?t.length:0;if("number"==typeof s)for(;++i<s&&!(n=e(t[i],i,t)););else p(t,function(t,i,s){return!(n=e(t,i,s))});return!!n}function Lt(t,e,i){var n=0,s=t?t.length:0;if("number"!=typeof e&&null!=e){var o=-1;for(e=q.createCallback(e,i,3);++o<s&&e(t[o],o,t);)n++}else if(null==(n=e)||i)return t?t[0]:f;return c(t,0,Se(Ie(0,n),s))}function Xt(e,i,n){if("number"==typeof n){var s=e?e.length:0;n=0>n?Ie(0,s+n):n||0}else if(n)return n=Bt(e,i),e[n]===i?n:-1;return t(e,i,n)}function Pt(t,e,i){if("number"!=typeof e&&null!=e){var n=0,s=-1,o=t?t.length:0;for(e=q.createCallback(e,i,3);++s<o&&e(t[s],s,t);)n++}else n=null==e||i?1:Ie(0,e);return c(t,n)}function Bt(t,e,i,n){var s=0,o=t?t.length:s;for(e=(i=i?q.createCallback(i,n,1):Vt)(e);s<o;)n=s+o>>>1,i(t[n])<e?s=n+1:o=n;return s}function Ht(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=i&&(i=q.createCallback(i,n,3)),lt(t,e,i)}function Rt(){for(var t=1<arguments.length?arguments:arguments[0],e=-1,i=t?Ot(ze(t,"length")):0,n=Yt(0>i?0:i);++e<i;)n[e]=ze(t,e);return n}function $t(t,e){var i=-1,n=t?t.length:0,s={};for(e||!n||Me(t[0])||(e=[]);++i<n;){var o=t[i];e?s[o]=e[i]:o&&(s[o[0]]=o[1])}return s}function Ft(t,e){return 2<arguments.length?at(t,17,c(arguments,2),null,e):at(t,1,null,null,e)}function zt(t,e,i){function n(){d&&ce(d),l=d=c=f,(_||p!==e)&&(u=Ve(),r=t.apply(h,o),d||l||(o=h=null))}function s(){var i=e-(Ve()-a);0<i?d=ge(s,i):(l&&ce(l),i=c,l=d=c=f,i&&(u=Ve(),r=t.apply(h,o),d||l||(o=h=null)))}var o,l,r,a,h,d,c,u=0,p=!1,_=!0;if(!vt(t))throw new se;if(e=Ie(0,e)||0,!0===i){var m=!0;_=!1}else bt(i)&&(m=i.leading,p="maxWait"in i&&(Ie(e,i.maxWait)||0),_="trailing"in i?i.trailing:_);return function(){if(o=arguments,a=Ve(),h=this,c=_&&(d||!m),!1===p)var i=m&&!d;else{l||m||(u=a);var f=p-(a-u),g=0>=f;g?(l&&(l=ce(l)),u=a,r=t.apply(h,o)):l||(l=ge(n,f))}return g&&d?d=ce(d):d||e===p||(d=ge(s,e)),i&&(g=!0,r=t.apply(h,o)),!g||d||l||(o=h=null),r}}function Vt(t){return t}function Wt(t,e,i){var n=!0,s=e&&mt(e);e&&(i||s.length)||(null==i&&(i=e),o=Y,e=t,t=q,s=mt(e)),!1===i?n=!1:bt(i)&&"chain"in i&&(n=i.chain);var o=t,l=vt(o);St(s,function(i){var s=t[i]=e[i];l&&(o.prototype[i]=function(){var e=this.__chain__,i=this.__wrapped__,l=[i];if(me.apply(l,arguments),l=s.apply(t,l),n||e){if(i===l&&bt(l))return this;(l=new o(l)).__chain__=e}return l})})}function Ut(){}function Gt(t){return function(e){return e[t]}}function qt(){return this.__wrapped__}var Yt=(i=i?Q.defaults(G.Object(),i,Q.pick(G,A)):G).Array,Kt=i.Boolean,Jt=i.Date,Qt=i.Function,Zt=i.Math,te=i.Number,ee=i.Object,ie=i.RegExp,ne=i.String,se=i.TypeError,oe=[],le=ee.prototype,re=i._,ae=le.toString,he=ie("^"+ne(ae).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),de=Zt.ceil,ce=i.clearTimeout,ue=Zt.floor,fe=Qt.prototype.toString,pe=ct(pe=ee.getPrototypeOf)&&pe,_e=le.hasOwnProperty,me=oe.push,ge=i.setTimeout,ve=oe.splice,be=oe.unshift,ye=function(){try{var t={},e=ct(e=ee.defineProperty)&&e,i=e(t,t,t)&&e}catch(t){}return i}(),xe=ct(xe=ee.create)&&xe,we=ct(we=Yt.isArray)&&we,Ce=i.isFinite,Ne=i.isNaN,ke=ct(ke=ee.keys)&&ke,Ie=Zt.max,Se=Zt.min,Te=i.parseInt,Ee=Zt.random,Oe={};Oe[D]=Yt,Oe[L]=Kt,Oe[X]=Jt,Oe[P]=Qt,Oe[H]=ee,Oe[B]=te,Oe[R]=ie,Oe[$]=ne,Y.prototype=q.prototype;var je=q.support={};je.funcDecomp=!ct(i.a)&&O.test(u),je.funcNames="string"==typeof Qt.name,q.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:S,variable:"",imports:{_:q}},xe||(J=function(){function t(){}return function(e){if(bt(e)){t.prototype=e;var n=new t;t.prototype=null}return n||i.Object()}}());var Ae=ye?function(t,e){V.value=e,ye(t,"__bindData__",V)}:Ut,Me=we||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&ae.call(t)==D||!1},De=ke?function(t){return bt(t)?ke(t):[]}:function(t){var e,i=[];if(!t||!W[typeof t])return i;for(e in t)_e.call(t,e)&&i.push(e);return i},Le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xe=gt(Le),Pe=ie("("+De(Xe).join("|")+")","g"),Be=ie("["+De(Le).join("")+"]","g"),He=pe?function(t){if(!t||ae.call(t)!=H)return!1;var e=t.valueOf,i=ct(e)&&(i=pe(e))&&pe(i);return i?t==i||pe(t)==i:ut(t)}:ut,Re=rt(function(t,e,i){_e.call(t,i)?t[i]++:t[i]=1}),$e=rt(function(t,e,i){(_e.call(t,i)?t[i]:t[i]=[]).push(e)}),Fe=rt(function(t,e,i){t[i]=e}),ze=Et,Ve=ct(Ve=Jt.now)&&Ve||function(){return(new Jt).getTime()},We=8==Te(y+"08")?Te:function(t,e){return Te(xt(t)?t.replace(T,""):t,e||0)};return q.after=function(t,e){if(!vt(e))throw new se;return function(){return 1>--t?e.apply(this,arguments):void 0}},q.assign=U,q.at=function(t){for(var e=-1,i=it(n=arguments,!0,!1,1),n=n[2]&&n[2][n[1]]===t?1:i.length,s=Yt(n);++e<n;)s[e]=t[i[e]];return s},q.bind=Ft,q.bindAll=function(t){for(var e=1<arguments.length?it(arguments,!0,!1,1):mt(t),i=-1,n=e.length;++i<n;){var s=e[i];t[s]=at(t[s],1,null,null,t)}return t},q.bindKey=function(t,e){return 2<arguments.length?at(e,19,c(arguments,2),null,t):at(e,3,null,null,t)},q.chain=function(t){return t=new Y(t),t.__chain__=!0,t},q.compact=function(t){for(var e=-1,i=t?t.length:0,n=[];++e<i;){var s=t[e];s&&n.push(s)}return n},q.compose=function(){for(var t=arguments,e=t.length;e--;)if(!vt(t[e]))throw new se;return function(){for(var e=arguments,i=t.length;i--;)e=[t[i].apply(this,e)];return e[0]}},q.constant=function(t){return function(){return t}},q.countBy=Re,q.create=function(t,e){var i=J(t);return e?U(i,e):i},q.createCallback=function(t,e,i){var n=typeof t;if(null==t||"function"==n)return Z(t,e,i);if("object"!=n)return Gt(t);var s=De(t),o=s[0],l=t[o];return 1!=s.length||l!=l||bt(l)?function(e){for(var i=s.length,n=!1;i--&&(n=nt(e[s[i]],t[s[i]],null,!0)););return n}:function(t){return t=t[o],l===t&&(0!==l||1/l==1/t)}},q.curry=function(t,e){return e="number"==typeof e?e:+e||t.length,at(t,4,null,null,null,e)},q.debounce=zt,q.defaults=b,q.defer=function(t){if(!vt(t))throw new se;var e=c(arguments,1);return ge(function(){t.apply(f,e)},1)},q.delay=function(t,e){if(!vt(t))throw new se;var i=c(arguments,2);return ge(function(){t.apply(f,i)},e)},q.difference=function(t){return et(t,it(arguments,!0,!0,1))},q.filter=kt,q.flatten=function(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=i&&(t=Et(t,i,n)),it(t,e)},q.forEach=St,q.forEachRight=Tt,q.forIn=_,q.forInRight=function(t,e,i){var n=[];_(t,function(t,e){n.push(e,t)});var s=n.length;for(e=Z(e,i,3);s--&&!1!==e(n[s--],n[s],t););return t},q.forOwn=p,q.forOwnRight=_t,q.functions=mt,q.groupBy=$e,q.indexBy=Fe,q.initial=function(t,e,i){var n=0,s=t?t.length:0;if("number"!=typeof e&&null!=e){var o=s;for(e=q.createCallback(e,i,3);o--&&e(t[o],o,t);)n++}else n=null==e||i?1:e||n;return c(t,0,Se(Ie(0,s-n),s))},q.intersection=function(){for(var i=[],n=-1,s=arguments.length,l=r(),a=dt(),c=a===t,u=r();++n<s;){var f=arguments[n];(Me(f)||pt(f))&&(i.push(f),l.push(c&&f.length>=v&&o(n?i[n]:u)))}var p=-1,_=(c=i[0])?c.length:0,m=[];t:for(;++p<_;){var g=l[0];f=c[p];if(0>(g?e(g,f):a(u,f))){for(n=s,(g||u).push(f);--n;)if(0>((g=l[n])?e(g,f):a(i[n],f)))continue t;m.push(f)}}for(;s--;)(g=l[s])&&d(g);return h(l),h(u),m},q.invert=gt,q.invoke=function(t,e){var i=c(arguments,2),n=-1,s="function"==typeof e,o=t?t.length:0,l=Yt("number"==typeof o?o:0);return St(t,function(t){l[++n]=(s?e:t[e]).apply(t,i)}),l},q.keys=De,q.map=Et,q.mapValues=function(t,e,i){var n={};return e=q.createCallback(e,i,3),p(t,function(t,i,s){n[i]=e(t,i,s)}),n},q.max=Ot,q.memoize=function(t,e){function i(){var n=i.cache,s=e?e.apply(this,arguments):g+arguments[0];return _e.call(n,s)?n[s]:n[s]=t.apply(this,arguments)}if(!vt(t))throw new se;return i.cache={},i},q.merge=function(t){var e=arguments,i=2;if(!bt(t))return t;if("number"!=typeof e[2]&&(i=e.length),3<i&&"function"==typeof e[i-2])var n=Z(e[--i-1],e[i--],2);else 2<i&&"function"==typeof e[i-1]&&(n=e[--i]);e=c(arguments,1,i);for(var s=-1,o=r(),l=r();++s<i;)st(t,e[s],n,o,l);return h(o),h(l),t},q.min=function(t,e,i){var s=1/0,o=s;if("function"!=typeof e&&i&&i[e]===t&&(e=null),null==e&&Me(t)){i=-1;for(var l=t.length;++i<l;){var r=t[i];r<o&&(o=r)}}else e=null==e&&xt(t)?n:q.createCallback(e,i,3),St(t,function(t,i,n){(i=e(t,i,n))<s&&(s=i,o=t)});return o},q.omit=function(t,e,i){var n={};if("function"!=typeof e){var s=[];_(t,function(t,e){s.push(e)});for(var o=-1,l=(s=et(s,it(arguments,!0,!1,1))).length;++o<l;){var r=s[o];n[r]=t[r]}}else e=q.createCallback(e,i,3),_(t,function(t,i,s){e(t,i,s)||(n[i]=t)});return n},q.once=function(t){var e,i;if(!vt(t))throw new se;return function(){return e?i:(e=!0,i=t.apply(this,arguments),t=null,i)}},q.pairs=function(t){for(var e=-1,i=De(t),n=i.length,s=Yt(n);++e<n;){var o=i[e];s[e]=[o,t[o]]}return s},q.partial=function(t){return at(t,16,c(arguments,1))},q.partialRight=function(t){return at(t,32,null,c(arguments,1))},q.pick=function(t,e,i){var n={};if("function"!=typeof e)for(var s=-1,o=it(arguments,!0,!1,1),l=bt(t)?o.length:0;++s<l;){var r=o[s];r in t&&(n[r]=t[r])}else e=q.createCallback(e,i,3),_(t,function(t,i,s){e(t,i,s)&&(n[i]=t)});return n},q.pluck=ze,q.property=Gt,q.pull=function(t){for(var e=arguments,i=0,n=e.length,s=t?t.length:0;++i<n;)for(var o=-1,l=e[i];++o<s;)t[o]===l&&(ve.call(t,o--,1),s--);return t},q.range=function(t,e,i){t=+t||0,i="number"==typeof i?i:+i||1,null==e&&(e=t,t=0);var n=-1;e=Ie(0,de((e-t)/(i||1)));for(var s=Yt(e);++n<e;)s[n]=t,t+=i;return s},q.reject=function(t,e,i){return e=q.createCallback(e,i,3),kt(t,function(t,i,n){return!e(t,i,n)})},q.remove=function(t,e,i){var n=-1,s=t?t.length:0,o=[];for(e=q.createCallback(e,i,3);++n<s;)i=t[n],e(i,n,t)&&(o.push(i),ve.call(t,n--,1),s--);return o},q.rest=Pt,q.shuffle=Mt,q.sortBy=function(t,e,i){var n=-1,o=Me(e),l=t?t.length:0,c=Yt("number"==typeof l?l:0);for(o||(e=q.createCallback(e,i,3)),St(t,function(t,i,s){var l=c[++n]=a();o?l.m=Et(e,function(e){return t[e]}):(l.m=r())[0]=e(t,i,s),l.n=n,l.o=t}),l=c.length,c.sort(s);l--;)t=c[l],c[l]=t.o,o||h(t.m),d(t);return c},q.tap=function(t,e){return e(t),t},q.throttle=function(t,e,i){var n=!0,s=!0;if(!vt(t))throw new se;return!1===i?n=!1:bt(i)&&(n="leading"in i?i.leading:n,s="trailing"in i?i.trailing:s),z.leading=n,z.maxWait=e,z.trailing=s,zt(t,e,z)},q.times=function(t,e,i){t=-1<(t=+t)?t:0;var n=-1,s=Yt(t);for(e=Z(e,i,1);++n<t;)s[n]=e(n);return s},q.toArray=function(t){return t&&"number"==typeof t.length?c(t):wt(t)},q.transform=function(t,e,i,n){var s=Me(t);if(null==i)if(s)i=[];else{var o=t&&t.constructor;i=J(o&&o.prototype)}return e&&(e=q.createCallback(e,n,4),(s?St:p)(t,function(t,n,s){return e(i,t,n,s)})),i},q.union=function(){return lt(it(arguments,!0,!0))},q.uniq=Ht,q.values=wt,q.where=kt,q.without=function(t){return et(t,c(arguments,1))},q.wrap=function(t,e){return at(e,16,[t])},q.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Me(i)||pt(i))var n=n?lt(et(n,i).concat(et(i,n))):i}return n||[]},q.zip=Rt,q.zipObject=$t,q.collect=Et,q.drop=Pt,q.each=St,q.eachRight=Tt,q.extend=U,q.methods=mt,q.object=$t,q.select=kt,q.tail=Pt,q.unique=Ht,q.unzip=Rt,Wt(q),q.clone=function(t,e,i,n){return"boolean"!=typeof e&&null!=e&&(n=i,i=e,e=!1),K(t,e,"function"==typeof i&&Z(i,n,1))},q.cloneDeep=function(t,e,i){return K(t,!0,"function"==typeof e&&Z(e,i,1))},q.contains=Ct,q.escape=function(t){return null==t?"":ne(t).replace(Be,ht)},q.every=Nt,q.find=It,q.findIndex=function(t,e,i){var n=-1,s=t?t.length:0;for(e=q.createCallback(e,i,3);++n<s;)if(e(t[n],n,t))return n;return-1},q.findKey=function(t,e,i){var n;return e=q.createCallback(e,i,3),p(t,function(t,i,s){return e(t,i,s)?(n=i,!1):void 0}),n},q.findLast=function(t,e,i){var n;return e=q.createCallback(e,i,3),Tt(t,function(t,i,s){return e(t,i,s)?(n=t,!1):void 0}),n},q.findLastIndex=function(t,e,i){var n=t?t.length:0;for(e=q.createCallback(e,i,3);n--;)if(e(t[n],n,t))return n;return-1},q.findLastKey=function(t,e,i){var n;return e=q.createCallback(e,i,3),_t(t,function(t,i,s){return e(t,i,s)?(n=i,!1):void 0}),n},q.has=function(t,e){return!!t&&_e.call(t,e)},q.identity=Vt,q.indexOf=Xt,q.isArguments=pt,q.isArray=Me,q.isBoolean=function(t){return!0===t||!1===t||t&&"object"==typeof t&&ae.call(t)==L||!1},q.isDate=function(t){return t&&"object"==typeof t&&ae.call(t)==X||!1},q.isElement=function(t){return t&&1===t.nodeType||!1},q.isEmpty=function(t){var e=!0;if(!t)return e;var i=ae.call(t),n=t.length;return i==D||i==$||i==M||i==H&&"number"==typeof n&&vt(t.splice)?!n:(p(t,function(){return e=!1}),e)},q.isEqual=function(t,e,i,n){return nt(t,e,"function"==typeof i&&Z(i,n,2))},q.isFinite=function(t){return Ce(t)&&!Ne(parseFloat(t))},q.isFunction=vt,q.isNaN=function(t){return yt(t)&&t!=+t},q.isNull=function(t){return null===t},q.isNumber=yt,q.isObject=bt,q.isPlainObject=He,q.isRegExp=function(t){return t&&"object"==typeof t&&ae.call(t)==R||!1},q.isString=xt,q.isUndefined=function(t){return void 0===t},q.lastIndexOf=function(t,e,i){var n=t?t.length:0;for("number"==typeof i&&(n=(0>i?Ie(0,n+i):Se(i,n-1))+1);n--;)if(t[n]===e)return n;return-1},q.mixin=Wt,q.noConflict=function(){return i._=re,this},q.noop=Ut,q.now=Ve,q.parseInt=We,q.random=function(t,e,i){var n=null==t,s=null==e;return null==i&&("boolean"==typeof t&&s?(i=t,t=1):s||"boolean"!=typeof e||(i=e,s=!0)),n&&s&&(e=1),t=+t||0,s?(e=t,t=0):e=+e||0,i||t%1||e%1?(i=Ee(),Se(t+i*(e-t+parseFloat("1e-"+((i+"").length-1))),e)):ot(t,e)},q.reduce=jt,q.reduceRight=At,q.result=function(t,e){if(t){var i=t[e];return vt(i)?t[e]():i}},q.runInContext=u,q.size=function(t){var e=t?t.length:0;return"number"==typeof e?e:De(t).length},q.some=Dt,q.sortedIndex=Bt,q.template=function(t,e,i){var n=q.templateSettings;t=ne(t||"");var s,o=b({},(i=b({},i,n)).imports,n.imports),r=(n=De(o),o=wt(o),0),a=i.interpolate||E,h="__p+='";a=ie((i.escape||E).source+"|"+a.source+"|"+(a===S?N:E).source+"|"+(i.evaluate||E).source+"|$","g");t.replace(a,function(e,i,n,o,a,d){return n||(n=o),h+=t.slice(r,d).replace(j,l),i&&(h+="'+__e("+i+")+'"),a&&(s=!0,h+="';"+a+";\n__p+='"),n&&(h+="'+((__t=("+n+"))==null?'':__t)+'"),r=d+e.length,e}),h+="';",(a=i=i.variable)||(i="obj",h="with("+i+"){"+h+"}"),h=(s?h.replace(x,""):h).replace(w,"$1").replace(C,"$1;"),h="function("+i+"){"+(a?"":i+"||("+i+"={});")+"var __t,__p='',__e=_.escape"+(s?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+h+"return __p}";try{var d=Qt(n,"return "+h).apply(f,o)}catch(t){throw t.source=h,t}return e?d(e):(d.source=h,d)},q.unescape=function(t){return null==t?"":ne(t).replace(Pe,ft)},q.uniqueId=function(t){var e=++m;return ne(null==t?"":t)+e},q.all=Nt,q.any=Dt,q.detect=It,q.findWhere=It,q.foldl=jt,q.foldr=At,q.include=Ct,q.inject=jt,Wt(function(){var t={};return p(q,function(e,i){q.prototype[i]||(t[i]=e)}),t}(),!1),q.first=Lt,q.last=function(t,e,i){var n=0,s=t?t.length:0;if("number"!=typeof e&&null!=e){var o=s;for(e=q.createCallback(e,i,3);o--&&e(t[o],o,t);)n++}else if(null==(n=e)||i)return t?t[s-1]:f;return c(t,Ie(0,s-n))},q.sample=function(t,e,i){return t&&"number"!=typeof t.length&&(t=wt(t)),null==e||i?t?t[ot(0,t.length-1)]:f:(t=Mt(t),t.length=Se(Ie(0,e),t.length),t)},q.take=Lt,q.head=Lt,p(q,function(t,e){var i="sample"!==e;q.prototype[e]||(q.prototype[e]=function(e,n){var s=this.__chain__,o=t(this.__wrapped__,e,n);return s||null!=e&&(!n||i&&"function"==typeof e)?new Y(o,s):o})}),q.VERSION="2.4.1",q.prototype.chain=function(){return this.__chain__=!0,this},q.prototype.toString=function(){return ne(this.__wrapped__)},q.prototype.value=qt,q.prototype.valueOf=qt,St(["join","pop","shift"],function(t){var e=oe[t];q.prototype[t]=function(){var t=this.__chain__,i=e.apply(this.__wrapped__,arguments);return t?new Y(i,t):i}}),St(["push","reverse","sort","unshift"],function(t){var e=oe[t];q.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),St(["concat","slice","splice"],function(t){var e=oe[t];q.prototype[t]=function(){return new Y(e.apply(this.__wrapped__,arguments),this.__chain__)}}),q}var f,p=[],_=[],m=0,g=+new Date+"",v=75,b=40,y=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",x=/\b__p\+='';/g,w=/\b(__p\+=)''\+/g,C=/(__e\(.*?\)|\b__t\))\+'';/g,N=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,k=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,S=/<%=([\s\S]+?)%>/g,T=RegExp("^["+y+"]*0+(?=.$)"),E=/($^)/,O=/\bthis\b/,j=/['\n\r\t\u2028\u2029\\]/g,A="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),M="[object Arguments]",D="[object Array]",L="[object Boolean]",X="[object Date]",P="[object Function]",B="[object Number]",H="[object Object]",R="[object RegExp]",$="[object String]",F={};F[P]=!1,F[M]=F[D]=F[L]=F[X]=F[B]=F[H]=F[R]=F[$]=!0;var z={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},W={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},U={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=W[typeof window]&&window||this,q=W[typeof exports]&&exports&&!exports.nodeType&&exports,Y=W[typeof module]&&module&&!module.nodeType&&module,K=Y&&Y.exports===q&&q,J=W[typeof global]&&global;!J||J.global!==J&&J.window!==J||(G=J);var Q=u();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(G._=Q,define(function(){return Q})):q&&Y?K?(Y.exports=Q)._=Q:q._=Q:G._=Q}.call(this),angular.module("restangular",[]).provider("Restangular",function(){var t={};t.init=function(t,e){t.configuration=e;var i=["get","head","options","trace","getlist"];e.isSafe=function(t){return _.contains(i,t.toLowerCase())};var n=/^https?:\/\//i;e.isAbsoluteUrl=function(t){return _.isUndefined(e.absoluteUrl)||_.isNull(e.absoluteUrl)?t&&n.test(t):e.absoluteUrl},e.absoluteUrl=!!_.isUndefined(e.absoluteUrl)||e.absoluteUrl,t.setSelfLinkAbsoluteUrl=function(t){e.absoluteUrl=t},e.baseUrl=_.isUndefined(e.baseUrl)?"":e.baseUrl,t.setBaseUrl=function(t){return e.baseUrl=/\/$/.test(t)?t.substring(0,t.length-1):t,this},e.extraFields=e.extraFields||[],t.setExtraFields=function(t){return e.extraFields=t,this},e.defaultHttpFields=e.defaultHttpFields||{},t.setDefaultHttpFields=function(t){return e.defaultHttpFields=t,this},e.withHttpValues=function(t,i){return _.defaults(i,t,e.defaultHttpFields)},e.encodeIds=!!_.isUndefined(e.encodeIds)||e.encodeIds,t.setEncodeIds=function(t){e.encodeIds=t},e.defaultRequestParams=e.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},t.setDefaultRequestParams=function(t,i){var n=[],s=i||t;return _.isUndefined(i)?n.push("common"):_.isArray(t)?n=t:n.push(t),_.each(n,function(t){e.defaultRequestParams[t]=s}),this},t.requestParams=e.defaultRequestParams,e.defaultHeaders=e.defaultHeaders||{},t.setDefaultHeaders=function(i){return e.defaultHeaders=i,t.defaultHeaders=e.defaultHeaders,this},t.defaultHeaders=e.defaultHeaders,e.methodOverriders=e.methodOverriders||[],t.setMethodOverriders=function(t){var i=_.extend([],t);return e.isOverridenMethod("delete",i)&&i.push("remove"),e.methodOverriders=i,this},e.jsonp=!_.isUndefined(e.jsonp)&&e.jsonp,t.setJsonp=function(t){e.jsonp=t},e.isOverridenMethod=function(t,i){var n=i||e.methodOverriders;return!_.isUndefined(_.find(n,function(e){return e.toLowerCase()===t.toLowerCase()}))},e.urlCreator=e.urlCreator||"path",t.setUrlCreator=function(t){if(!_.has(e.urlCreatorFactory,t))throw new Error("URL Path selected isn't valid");return e.urlCreator=t,this},e.restangularFields=e.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save"},t.setRestangularFields=function(t){return e.restangularFields=_.extend(e.restangularFields,t),this},e.isRestangularized=function(t){return!!t[e.restangularFields.one]||!!t[e.restangularFields.all]},e.setFieldToElem=function(t,e,i){var n=t.split("."),s=e;return _.each(_.initial(n),function(t){s[t]={},s=s[t]}),s[_.last(n)]=i,this},e.getFieldFromElem=function(t,e){var i=t.split("."),n=e;return _.each(i,function(t){n&&(n=n[t])}),angular.copy(n)},e.setIdToElem=function(t,i){return e.setFieldToElem(e.restangularFields.id,t,i),this},e.getIdFromElem=function(t){return e.getFieldFromElem(e.restangularFields.id,t)},e.isValidId=function(t){return""!==t&&!_.isUndefined(t)&&!_.isNull(t)},e.setUrlToElem=function(t,i){return e.setFieldToElem(e.restangularFields.selfLink,t,i),this},e.getUrlFromElem=function(t){return e.getFieldFromElem(e.restangularFields.selfLink,t)},e.useCannonicalId=!_.isUndefined(e.useCannonicalId)&&e.useCannonicalId,t.setUseCannonicalId=function(t){return e.useCannonicalId=t,this},e.getCannonicalIdFromElem=function(t){var i=t[e.restangularFields.cannonicalId];return e.isValidId(i)?i:e.getIdFromElem(t)},e.responseInterceptors=e.responseInterceptors||[],e.defaultResponseInterceptor=function(t){return t},e.responseExtractor=function(t,i,n,s,o,l){var r=angular.copy(e.responseInterceptors);r.push(e.defaultResponseInterceptor);var a=t;return _.each(r,function(t){a=t(a,i,n,s,o,l)}),a},t.addResponseInterceptor=function(t){return e.responseInterceptors.push(t),this},t.setResponseInterceptor=t.addResponseInterceptor,t.setResponseExtractor=t.addResponseInterceptor,e.requestInterceptors=e.requestInterceptors||[],e.defaultInterceptor=function(t,e,i,n,s,o,l){return{element:t,headers:s,params:o,httpConfig:l}},e.fullRequestInterceptor=function(t,i,n,s,o,l,r){var a=angular.copy(e.requestInterceptors),h=e.defaultInterceptor(t,i,n,s,o,l,r);return _.reduce(a,function(t,e){return _.extend(t,e(t.element,i,n,s,t.headers,t.params,t.httpConfig))},h)},t.addRequestInterceptor=function(t){return e.requestInterceptors.push(function(e,i,n,s,o,l,r){return{headers:o,params:l,element:t(e,i,n,s),httpConfig:r}}),this},t.setRequestInterceptor=t.addRequestInterceptor,t.addFullRequestInterceptor=function(t){return e.requestInterceptors.push(t),this},t.setFullRequestInterceptor=t.addFullRequestInterceptor,e.errorInterceptor=e.errorInterceptor||function(){},t.setErrorInterceptor=function(t){return e.errorInterceptor=t,this},e.onBeforeElemRestangularized=e.onBeforeElemRestangularized||function(t){return t},t.setOnBeforeElemRestangularized=function(t){return e.onBeforeElemRestangularized=t,this},e.onElemRestangularized=e.onElemRestangularized||function(t){return t},t.setOnElemRestangularized=function(t){return e.onElemRestangularized=t,this},e.shouldSaveParent=e.shouldSaveParent||function(){return!0},t.setParentless=function(t){return _.isArray(t)?e.shouldSaveParent=function(e){return!_.contains(t,e)}:_.isBoolean(t)&&(e.shouldSaveParent=function(){return!t}),this},e.suffix=_.isUndefined(e.suffix)?null:e.suffix,t.setRequestSuffix=function(t){return e.suffix=t,this},e.transformers=e.transformers||{},t.addElementTransformer=function(i,n,s){var o=null,l=null;2===arguments.length?l=n:(l=s,o=n);var r=e.transformers[i];return r||(r=e.transformers[i]=[]),r.push(function(t,e){return _.isNull(o)||t==o?l(e):e}),t},t.extendCollection=function(e,i){return t.addElementTransformer(e,!0,i)},t.extendModel=function(e,i){return t.addElementTransformer(e,!1,i)},e.transformElem=function(t,i,n,s,o){if(!o&&!e.transformLocalElements&&!t[e.restangularFields.fromServer])return t;var l=e.transformers[n],r=t;return l&&_.each(l,function(t){r=t(i,r)}),e.onElemRestangularized(r,i,n,s)},e.transformLocalElements=!_.isUndefined(e.transformLocalElements)&&e.transformLocalElements,t.setTransformOnlyServerElements=function(t){e.transformLocalElements=!t},e.fullResponse=!_.isUndefined(e.fullResponse)&&e.fullResponse,t.setFullResponse=function(t){return e.fullResponse=t,this},e.urlCreatorFactory={};var s=function(){};s.prototype.setConfig=function(t){return this.config=t,this},s.prototype.parentsArray=function(t){for(var e=[];t;)e.push(t),t=t[this.config.restangularFields.parentResource];return e.reverse()},s.prototype.resource=function(t,i,n,s,o,l,r,a){var h=_.defaults(o||{},this.config.defaultRequestParams.common),d=_.defaults(s||{},this.config.defaultHeaders);r&&(e.isSafe(a)?d["If-None-Match"]=r:d["If-Match"]=r);var c=this.base(t);if(l){var u="";/\/$/.test(c)||(u+="/"),c+=u+=l}return this.config.suffix&&-1===c.indexOf(this.config.suffix,c.length-this.config.suffix.length)&&!this.config.getUrlFromElem(t)&&(c+=this.config.suffix),t[this.config.restangularFields.httpConfig]=void 0,function(t,e,i,n){var s={};return _.each(_.keys(n),function(o){var l=n[o];l.params=_.extend({},l.params,t.defaultRequestParams[l.method.toLowerCase()]),_.isEmpty(l.params)&&delete l.params,s[o]=t.isSafe(l.method)?function(){return e(_.extend(l,{url:i}))}:function(t){return e(_.extend(l,{url:i,data:t}))}}),s}(this.config,i,c,{getList:this.config.withHttpValues(n,{method:"GET",params:h,headers:d}),get:this.config.withHttpValues(n,{method:"GET",params:h,headers:d}),jsonp:this.config.withHttpValues(n,{method:"jsonp",params:h,headers:d}),put:this.config.withHttpValues(n,{method:"PUT",params:h,headers:d}),post:this.config.withHttpValues(n,{method:"POST",params:h,headers:d}),remove:this.config.withHttpValues(n,{method:"DELETE",params:h,headers:d}),head:this.config.withHttpValues(n,{method:"HEAD",params:h,headers:d}),trace:this.config.withHttpValues(n,{method:"TRACE",params:h,headers:d}),options:this.config.withHttpValues(n,{method:"OPTIONS",params:h,headers:d}),patch:this.config.withHttpValues(n,{method:"PATCH",params:h,headers:d})})};var o=function(){};(o.prototype=new s).base=function(t){var i=this;return _.reduce(this.parentsArray(t),function(t,n){var s,o=i.config.getUrlFromElem(n);if(o){if(i.config.isAbsoluteUrl(o))return o;s=o}else if(s=n[i.config.restangularFields.route],n[i.config.restangularFields.restangularCollection]){var l=n[i.config.restangularFields.ids];l&&(s+="/"+l.join(","))}else{var r;r=i.config.useCannonicalId?i.config.getCannonicalIdFromElem(n):i.config.getIdFromElem(n),e.isValidId(r)&&!n.singleOne&&(s+="/"+(i.config.encodeIds?encodeURIComponent(r):r))}return t.replace(/\/$/,"")+"/"+s},this.config.baseUrl)},o.prototype.fetchUrl=function(t,e){var i=this.base(t);return e&&(i+="/"+e),i},o.prototype.fetchRequestedUrl=function(t,i){function n(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}var s=this.fetchUrl(t,i),o=t[e.restangularFields.reqParams];if(!o)return s;var l=[];return function(t,e,i){for(var n=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e.sort()}(t),s=0;s<n.length;s++)e.call(i,t[n[s]],n[s])}(o,function(t,e){null!=t&&void 0!=t&&(angular.isArray(t)||(t=[t]),angular.forEach(t,function(t){angular.isObject(t)&&(t=angular.toJson(t)),l.push(n(e)+"="+n(t))}))}),s+(this.config.suffix||"")+(-1===s.indexOf("?")?"?":"&")+l.join("&")},e.urlCreatorFactory.path=o};var e={};t.init(this,e),this.$get=["$http","$q",function(i,n){function s(e){function o(t,i,n,s,o){if(i[e.restangularFields.route]=n,i[e.restangularFields.getRestangularUrl]=_.bind(H.fetchUrl,H,i),i[e.restangularFields.getRequestedUrl]=_.bind(H.fetchRequestedUrl,H,i),i[e.restangularFields.addRestangularMethod]=_.bind(P,i),i[e.restangularFields.clone]=_.bind(v,i,i),i[e.restangularFields.reqParams]=_.isEmpty(s)?null:s,i[e.restangularFields.withHttpConfig]=_.bind(k,i),i[e.restangularFields.plain]=_.bind(m,i,i),i[e.restangularFields.one]=_.bind(l,i,i),i[e.restangularFields.all]=_.bind(r,i,i),i[e.restangularFields.several]=_.bind(a,i,i),i[e.restangularFields.oneUrl]=_.bind(h,i,i),i[e.restangularFields.allUrl]=_.bind(d,i,i),i[e.restangularFields.fromServer]=!!o,t&&e.shouldSaveParent(n)){var c=e.getIdFromElem(t),u=e.getUrlFromElem(t),f=_.union(_.values(_.pick(e.restangularFields,["route","singleOne","parentResource"])),e.extraFields),p=_.pick(t,f);e.isValidId(c)&&e.setIdToElem(p,c),e.isValidId(u)&&e.setUrlToElem(p,u),i[e.restangularFields.parentResource]=p}else i[e.restangularFields.parentResource]=null;return i}function l(t,i,n,s){if(_.isNumber(i)||_.isNumber(t)){var o="You're creating a Restangular entity with the number ";throw o+="instead of the route or the parent. You can't call .one(12)",new Error(o)}var l={};return e.setIdToElem(l,n),e.setFieldToElem(e.restangularFields.singleOne,l,s),b(t,l,i,!1)}function r(t,e){return y(t,[],e,!1)}function a(t,i){var n=[];return n[e.restangularFields.ids]=Array.prototype.splice.call(arguments,2),y(t,n,i,!1)}function h(t,i,n){if(!i)throw new Error("Route is mandatory when creating new Restangular objects.");var s={};return e.setUrlToElem(s,n,i),b(t,s,i,!1)}function d(t,i,n){if(!i)throw new Error("Route is mandatory when creating new Restangular objects.");var s={};return e.setUrlToElem(s,n,i),y(t,s,i,!1)}function c(t,i,n){return t.call=_.bind(u,t),t.get=_.bind(f,t),t[e.restangularFields.restangularCollection]=i,i&&(t.push=_.bind(u,t,"push")),t.$object=n,t}function u(t){var i=n.defer(),s=arguments,o={};return this.then(function(e){var n=Array.prototype.slice.call(s,1);e[t].apply(e,n),o=e,i.resolve(e)}),c(i.promise,this[e.restangularFields.restangularCollection],o)}function f(t){var i=n.defer(),s={};return this.then(function(e){s=e[t],i.resolve(s)}),c(i.promise,this[e.restangularFields.restangularCollection],s)}function p(t,i,n,s){return _.extend(s,n),e.fullResponse?t.resolve(_.extend(i,{data:n})):void t.resolve(n)}function m(t){if(_.isArray(t)){var i=[];return _.each(t,function(t){i.push(m(t))}),i}return _.omit(t,_.values(_.omit(e.restangularFields,"id")))}function g(t){t[e.restangularFields.customOperation]=_.bind(X,t),_.each(["put","post","get","delete"],function(e){_.each(["do","custom"],function(i){var n,s="delete"===e?"remove":e,o=i+e.toUpperCase();n="put"!==s&&"post"!==s?X:function(t,e,i,n,s){return _.bind(X,this)(t,i,n,s,e)},t[o]=_.bind(n,t,s)})}),t[e.restangularFields.customGETLIST]=_.bind(N,t),t[e.restangularFields.doGETLIST]=t[e.restangularFields.customGETLIST]}function v(t,i){var n=angular.copy(t,i);return b(n[e.restangularFields.parentResource],n,n[e.restangularFields.route],!0)}function b(t,i,n,s,l,r){var a=o(t,e.onBeforeElemRestangularized(i,!1,n),n,r,s);return e.useCannonicalId&&(a[e.restangularFields.cannonicalId]=e.getIdFromElem(a)),l&&(a[e.restangularFields.getParentList]=function(){return l}),a[e.restangularFields.restangularCollection]=!1,a[e.restangularFields.get]=_.bind(T,a),a[e.restangularFields.getList]=_.bind(N,a),a[e.restangularFields.put]=_.bind(O,a),a[e.restangularFields.post]=_.bind(j,a),a[e.restangularFields.remove]=_.bind(E,a),a[e.restangularFields.head]=_.bind(A,a),a[e.restangularFields.trace]=_.bind(M,a),a[e.restangularFields.options]=_.bind(D,a),a[e.restangularFields.patch]=_.bind(L,a),a[e.restangularFields.save]=_.bind(I,a),g(a),e.transformElem(a,!1,n,B,!0)}function y(t,i,n,s,l){var r=o(t,e.onBeforeElemRestangularized(i,!0,n),n,l,s);return r[e.restangularFields.restangularCollection]=!0,r[e.restangularFields.post]=_.bind(j,r,null),r[e.restangularFields.remove]=_.bind(E,r),r[e.restangularFields.head]=_.bind(A,r),r[e.restangularFields.trace]=_.bind(M,r),r[e.restangularFields.putElement]=_.bind(w,r),r[e.restangularFields.options]=_.bind(D,r),r[e.restangularFields.patch]=_.bind(L,r),r[e.restangularFields.get]=_.bind(x,r),r[e.restangularFields.getList]=_.bind(N,r,null),g(r),e.transformElem(r,!0,n,B,!0)}function x(t,e,i){return this.customGET(t.toString(),e,i)}function w(t,i,s){var o=this,l=this[t],r=n.defer(),a=[];return a=e.transformElem(a,!0,l[e.restangularFields.route],B),l.put(i,s).then(function(e){var i=v(o);i[t]=e,a=i,r.resolve(i)},function(t){r.reject(t)}),c(r.promise,!0,a)}function C(t,i,n,s,o,l){var r=e.responseExtractor(t,i,n,s,o,l),a=o.headers("ETag");return r&&a&&(r[e.restangularFields.etag]=a),r}function N(t,s,o){var l=this,r=n.defer(),a=H.fetchUrl(this,t),h=t||l[e.restangularFields.route],d=e.fullRequestInterceptor(null,"getList",h,a,o||{},s||{},this[e.restangularFields.httpConfig]||{}),u=[];u=e.transformElem(u,!0,h,B);var f="getList";return e.jsonp&&(f="jsonp"),H.resource(this,i,d.httpConfig,d.headers,d.params,t,this[e.restangularFields.etag],"getList")[f]().then(function(i){var n=i.data,s=i.config.params,o=C(n,"getList",h,a,i,r);if((_.isUndefined(o)||""===o)&&(o=[]),!_.isArray(o))throw new Error("Response for getList SHOULD be an array and not an object or something else");var d=_.map(o,function(i){return l[e.restangularFields.restangularCollection]?b(l[e.restangularFields.parentResource],i,l[e.restangularFields.route],!0,o):b(l,i,t,!0,o)});d=_.extend(o,d),l[e.restangularFields.restangularCollection]?p(r,i,y(l[e.restangularFields.parentResource],d,l[e.restangularFields.route],!0,s),u):p(r,i,y(l,d,t,!0,s),u)},function(t){304===t.status&&l[e.restangularFields.restangularCollection]?p(r,t,l,u):!1!==e.errorInterceptor(t,r)&&r.reject(t)}),c(r.promise,!0,u)}function k(t){return this[e.restangularFields.httpConfig]=t,this}function I(t,i){return this[e.restangularFields.fromServer]?this[e.restangularFields.put](t,i):_.bind(S,this)("post",void 0,t,void 0,i)}function S(t,s,o,l,r){var a=this,h=n.defer(),d=o||{},u=s||this[e.restangularFields.route],f=H.fetchUrl(this,s),g=l||this,v=g[e.restangularFields.etag]||("post"!=t?this[e.restangularFields.etag]:null);_.isObject(g)&&e.isRestangularized(g)&&(g=m(g));var y=e.fullRequestInterceptor(g,t,u,f,r||{},d||{},this[e.restangularFields.httpConfig]||{}),x={};x=e.transformElem(x,!1,u,B);var w=function(i){var n=i.data,o=i.config.params,l=C(n,t,u,f,i,h);l?"post"!==t||a[e.restangularFields.restangularCollection]?(data=b(a[e.restangularFields.parentResource],l,a[e.restangularFields.route],!0,null,o),data[e.restangularFields.singleOne]=a[e.restangularFields.singleOne],p(h,i,data,x)):p(h,i,b(a,l,s,!0,null,o),x):p(h,i,void 0,x)},N=function(i){304===i.status&&e.isSafe(t)?p(h,i,a,x):!1!==e.errorInterceptor(i,h)&&h.reject(i)},k=t,I=_.extend({},y.headers),S=e.isOverridenMethod(t);return S?(k="post",I=_.extend(I,{"X-HTTP-Method-Override":"remove"===t?"DELETE":t})):e.jsonp&&"get"===k&&(k="jsonp"),e.isSafe(t)?S?H.resource(this,i,y.httpConfig,I,y.params,s,v,k)[k]({}).then(w,N):H.resource(this,i,y.httpConfig,I,y.params,s,v,k)[k]().then(w,N):H.resource(this,i,y.httpConfig,I,y.params,s,v,k)[k](y.element).then(w,N),c(h.promise,!1,x)}function T(t,e){return _.bind(S,this)("get",void 0,t,void 0,e)}function E(t,e){return _.bind(S,this)("remove",void 0,t,void 0,e)}function O(t,e){return _.bind(S,this)("put",void 0,t,void 0,e)}function j(t,e,i,n){return _.bind(S,this)("post",t,i,e,n)}function A(t,e){return _.bind(S,this)("head",void 0,t,void 0,e)}function M(t,e){return _.bind(S,this)("trace",void 0,t,void 0,e)}function D(t,e){return _.bind(S,this)("options",void 0,t,void 0,e)}function L(t,e,i){return _.bind(S,this)("patch",void 0,e,t,i)}function X(t,e,i,n,s){return _.bind(S,this)(t,e,i,s,n)}function P(t,i,n,s,o,l){var r;r="getList"===i?_.bind(N,this,n):_.bind(X,this,i,n);var a=function(t,e,i){var n=_.defaults({params:t,headers:e,elem:i},{params:s,headers:o,elem:l});return r(n.params,n.headers,n.elem)};this[t]=e.isSafe(i)?a:function(t,e,i){return a(e,i,t)}}var B={},H=new e.urlCreatorFactory[e.urlCreator];return H.setConfig(e),t.init(B,e),B.copy=_.bind(v,B),B.service=_.bind(function(t,e){var i={},n=(e||B).all(t);return i.one=_.bind(l,e||B,e,t),i.post=_.bind(n.post,n),i.getList=_.bind(n.getList,n),i},B),B.withConfig=_.bind(function(i){var n=angular.copy(_.omit(e,"configuration"));return t.init(n,n),i(n),s(n)},B),B.one=_.bind(l,B,null),B.all=_.bind(r,B,null),B.several=_.bind(a,B,null),B.oneUrl=_.bind(h,B,null),B.allUrl=_.bind(d,B,null),B.stripRestangular=_.bind(m,B),B.restangularizeElement=_.bind(b,B),B.restangularizeCollection=_.bind(function(t,e,i){var n=y(t,e,i,!1);return _.each(n,function(e){b(t,e,i,!1)}),n},B),B}return s(e)}]}),void 0===window.dhx&&(window.dhx=window.dhx4={version:"5.0.2",skin:null,skinDetect:function(t){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[10*Math.floor(dhx4.readFromCss(t+"_skin_detect")/10)]||null},readFromCss:function(t,e,i){var n=document.createElement("DIV");n.className=t,null!=document.body.firstChild?document.body.insertBefore(n,document.body.firstChild):document.body.appendChild(n),"string"==typeof i&&(n.innerHTML=i);var s=n[e||"offsetWidth"];return n.parentNode.removeChild(n),n=null,s},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return"string"==typeof t&&(t=t.toLowerCase()),1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t||"on"==t},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(t){dhx4.temp=null}return obj=dhx4.temp,dhx4.temp=null,obj},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this.getOffset(t).top},_aOfs:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},getOffset:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfs(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&void 0===t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i]}else for(e=[],i=0;i<t.length;i++)"object"==typeof t[i]&&null!=t[i]?e[i]=this._copyObj(t[i]):e[i]=t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){var n=(t="string"==typeof t?document.getElementById(t):t).value.length;if(e=Math.max(Math.min(e,n),0),i=Math.min(i,n),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(t){}else if(t.createTextRange){var s=t.createTextRange();s.moveStart("character",e),s.moveEnd("character",i-n);try{s.select()}catch(t){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData},_xmlNodeValue:function(t){for(var e="",i=0;i<t.childNodes.length;i++)e+=null!=t.childNodes[i].nodeValue?t.childNodes[i].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return e}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&1!=window.navigator.pointerEnabled,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&1==window.navigator.pointerEnabled,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(t){return window.dhx4.isIE10&&t.pointerType==t.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&"mouse"==t.pointerType||window.dhx4.isEdge&&"mouse"==t.pointerType},_touchOn:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="",t=null},_touchOff:function(t){null==t&&(t=document.body),t.style.touchAction=t.style.msTouchAction="none",t=null}},1==window.navigator.pointerEnabled?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:1==window.navigator.msPointerEnabled?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:void 0!==window.addEventListener&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),void 0===window.dhx4.template&&(window.dhx4.trim=function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(t,e,i){return t.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var t=arguments[1],n=window.dhx4.trim(arguments[3]),s=null,o=[e[t]];if(n.length>0){n=n.split(":");for(var l=[],r=0;r<n.length;r++)r>0&&null!=l[l.length-1].match(/\\$/)?l[l.length-1]=l[l.length-1].replace(/\\$/,"")+":"+n[r]:l.push(n[r]);s=l[0];for(r=1;r<l.length;r++)o.push(l[r])}return"string"==typeof s&&"function"==typeof window.dhx4.template[s]?window.dhx4.template[s].apply(window.dhx4.template,o):t.length>0&&void 0!==e[t]?1==i?window.dhx4.trim(e[t]):String(e[t]):""})},window.dhx4.template.date=function(t,e){return null!=t?t instanceof Date?window.dhx4.date2str(t,e):null!=(t=t.toString()).match(/^\d*$/)?window.dhx4.date2str(new Date(parseInt(t)),e):t:""},window.dhx4.template.maxlength=function(t,e){return String(t).substr(0,e)},window.dhx4.template.number_format=function(t,e,i,n){var s=window.dhx4.template._parseFmt(e,i,n);return 0==s?t:window.dhx4.template._getFmtValue(t,s)},window.dhx4.template.lowercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toLowerCase()},window.dhx4.template.uppercase=function(t){return void 0!==t&&null!=t||(t=""),String(t).toUpperCase()},window.dhx4.template._parseFmt=function(t,e,i){var n=t.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==n||4!=n.length)return!1;var s={i_len:!1,i_sep:"string"==typeof e?e:",",d_len:!1,d_sep:"string"==typeof i?i:".",s_bef:"string"==typeof n[1]?n[1]:"",s_aft:"string"==typeof n[3]?n[3]:""},o=n[2].split(".");null!=o[1]&&(s.d_len=o[1].length);var l=o[0].split(",");return l.length>1&&(s.i_len=l[l.length-1].length),s},window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=fmt.s_bef,!1!==fmt.i_len){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==fmt.i_len&&q>0&&(v1=fmt.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(!1!==fmt.d_len){for(null==r[4]&&(r[4]="");r[4].length<fmt.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=fmt.d_sep+t1),dhx4.temp=t1=null}return v0+=fmt.s_aft}return value}),void 0===window.dhx4.dateLang&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(t,e,i){if(null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t instanceof Date)var n=function(t){return 1==String(t).length?"0"+String(t):t},s=String(e||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return n(t.getDate());case"%j":return t.getDate();case"%D":return i.dayShortName[t.getDay()];case"%l":return i.dayFullName[t.getDay()];case"%m":return n(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.monthShortName[t.getMonth()];case"%F":return i.monthFullName[t.getMonth()];case"%y":return n(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return n((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return n(t.getHours());case"%i":return n(t.getMinutes());case"%s":return n(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return t.getMilliseconds();case"%P":if(null!=window.dhx4.temp_calendar&&null!=window.dhx4.temp_calendar.tz)return window.dhx4.temp_calendar.tz;var s=t.getTimezoneOffset(),o=Math.abs(Math.floor(s/60)),l=Math.abs(s)-60*o;return(s>0?"-":"+")+n(o)+":"+n(l);default:return e}});return s||String(t)},window.dhx4.str2date=function(t,e,i){null!=e&&void 0!==e||(e=window.dhx4.dateFormat[window.dhx4.dateLang]),null!=i&&void 0!==i||(i=window.dhx4.dateStrings[window.dhx4.dateLang]);var n=[],s=[];e=(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&")).replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-zéûäа-яё]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"([a|p]m)";case"%A":return s.push(t),"([A|P]M)";case"%u":return s.push(t),"(\\d{1,6})";case"%P":return s.push(t),"([+-]\\d{1,2}:\\d{1,2})"}return t});var o=new RegExp(e,"i"),l=t.match(o);if(null==l||l.length-1!=s.length)return"Invalid Date";for(var r=1;r<l.length;r++)n.push(l[r]);var a={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},h={},d={};for(r=0;r<s.length;r++)if(void 0!==a[s[r]]){var c=a[s[r]];h[c]||(h[c]=[],d[c]=[]),h[c].push(n[r]),d[c].push(s[r])}n=[],s=[];for(r=1;r<=7;r++)if(null!=h[r])for(var u=0;u<h[r].length;u++)n.push(h[r][u]),s.push(d[r][u]);var f=new Date;f.setDate(1),f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0);var p=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1};for(r=0;r<n.length;r++)switch(s[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(n[r])||f[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[s[r]]](Number(n[r])+("%m"==s[r]||"%n"==s[r]?-1:0));break;case"%M":case"%F":var _=p(n[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[s[r]]]);_>=0&&f.setMonth(_);break;case"%y":if(!isNaN(n[r])){var m=Number(n[r]);f.setFullYear(m+(m>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(n[r])){(m=Number(n[r]))<=12&&m>=0&&f.setHours(m+(p("pm",n)>=0?12==m?0:12:12==m?-12:0))}break;case"%P":null!=window.dhx4.temp_calendar&&(window.dhx4.temp_calendar.tz=n[r])}return f}),void 0===window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(t){if("string"!=typeof t)return t;if(t=t.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE)var e=(new window.DOMParser).parseFromString(t,"text/xml");else if(window.ActiveXObject!==window.undefined){(e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)}return e},xmltop:function(t,e,i){if((void 0===e.status||e.status<400)&&(xml=e.responseXML?e.responseXML||e:dhx4.ajax.parse(e.responseText||e),xml&&null!==xml.documentElement))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(t)[0]}catch(t){}return-1!==i&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),!dhx4.isIE){for(var i,n=[],s=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=s.iterateNext();)n.push(i);return n}try{return e.selectNodes(t)||[]}catch(t){return[]}},query:function(t){dhx4.ajax._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){return this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){return this._call("PUT",t,e,!0,i)},del:function(t,e,i){return this._call("DELETE",t,e,!0,i)},post:function(t,e,i){return 1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,s,o,l){var r=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);if(1==n&&(r.onreadystatechange=function(){if(4==r.readyState||1==a&&3==r.readyState){if((200!=r.status||""==r.responseText)&&!dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:r,filePath:e,async:n}]),null!=o&&(void 0!==o.postData?dhx4.ajax.postLong(o.url,o.postData,s):dhx4.ajax.getLong(o.url,s)),s=null,r=null},1)}}),"GET"==t&&(e+=this._dhxr(e)),r.open(t,e,n),null!=l)for(var h in l)r.setRequestHeader(h,l[h]);else"POST"==t||"PUT"==t||"DELETE"==t?r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(i),1!=n&&(4==r.readyState||1==a&&3==r.readyState)&&(200==r.status&&""!=r.responseText||dhx4.callEvent("onAjaxError",[{xmlDoc:r,filePath:e,async:n}])),{xmlDoc:r,filePath:e,async:n}},_dhxr:function(t,e){return 1!=this.cache?(null==t.match(/^[\?\&]$/)&&(t=t.indexOf("?")>=0?"&":"?"),void 0===e&&(e=!0),t+"dhxr"+(new Date).getTime()+(1==e?"=1":"")):""}}),void 0===window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(t,e,i,n,s){if("clear"==s){for(var o in t._dhxdataload)t._dhxdataload[o]=null,delete t._dhxdataload[o];return t._loadData=null,t._dhxdataload=null,t.load=null,t.loadStruct=null,void(t=null)}if(t._dhxdataload={initObj:e,xmlToJson:i,xmlRootTag:n,onBeforeXLS:null},t._loadData=function(t,e,i){2==arguments.length&&(i=e,e=null);var n=null;if(3==arguments.length&&(i=arguments[2]),"string"==typeof t){var s=t.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");if(new RegExp("^<"+this._dhxdataload.xmlRootTag).test(s.replace(/^<\?xml[^\?]*\?>\s*/,""))&&null!=(n=dhx4.ajax.parse(t))&&(n=this[this._dhxdataload.xmlToJson].apply(this,[n])),null!=n||null==s.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)&&null==s.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)||(n=dhx4.s2j(s)),null==n){this.callEvent("onXLS",[]);var o=[];if("function"==typeof this._dhxdataload.onBeforeXLS){if(null!=(s=this._dhxdataload.onBeforeXLS.apply(this,[t]))&&"object"==typeof s&&(null!=s.url&&(t=s.url),null!=s.params))for(var l in s.params)o.push(l+"="+encodeURIComponent(s.params[l]))}var r=this,a=function(e){var n=null;null!=(n=(e.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=e.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)?r[r._dhxdataload.xmlToJson].apply(r,[e.xmlDoc.responseXML]):dhx4.s2j(e.xmlDoc.responseText))&&r[r._dhxdataload.initObj].apply(r,[n,t]),r.callEvent("onXLE",[]),null!=i&&("function"==typeof i?i.apply(r,[]):"function"==typeof window[i]&&window[i].apply(r,[])),a=i=null,n=e=r=null};return o=o.join("&")+("string"==typeof e?"&"+e:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(t,o,a):"get"==dhx4.ajax.method&&dhx4.ajax.get(t+(o.length>0?(t.indexOf("?")>0?"&":"?")+o:""),a))}}else n="object"==typeof t.documentElement||void 0!==t.tagName&&void 0!==t.getElementsByTagName&&t.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[t]):window.dhx4._copyObj(t);null!=n&&this[this._dhxdataload.initObj].apply(this,[n]),null!=i&&("function"==typeof i?i.apply(this,[]):"function"==typeof window[i]&&window[i].apply(this,[]),i=null)},null!=s){var l={struct:"loadStruct",data:"load"};for(var o in s)1==s[o]&&(t[l[o]]=function(){return this._loadData.apply(this,arguments)})}t=null}),void 0===window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){if("clear"==e)return t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null);t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var n in this.dhxevs.data[e])n==t?(this.dhxevs.data[e][n]=null,delete this.dhxevs.data[e][n]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var n in this.dhxevs.data[t])i=this.dhxevs.data[t][n].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},t=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return!!t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)},isValidSSN:function(t){return!!t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)},isValidSIN:function(t){return!!t.toString().match(/^\d{9}$/)}},dhtmlxValidation=new dhtmlxValidation),void 0===window.dhtmlx&&(window.dhtmlx={extend:function(t,e){for(var i in e)t[i]||(t[i]=e[i]);return t},extend_api:function(t,e,i){var n=window[t];n&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=n.apply(this,e._init?e._init(t):arguments);for(var s in dhtmlx)e[s]&&this[e[s]](dhtmlx[s]);for(var s in t)e[s]?this[e[s]](t[s]):0===s.indexOf("on")&&this.attachEvent(s,t[s])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlx.extend(window[t].prototype,i))},url:function(t){return-1!=t.indexOf("?")?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault)&&(t.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var n=document.createElement("Div");n.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=n.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)s=t.srcElement;else var s=t.target;dragger.checkLanding(s,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var s=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*s.split("_")[0],n+=1*s.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),window.dhtmlxEvent,null==dhtmlxEvent.touchDelay&&(dhtmlxEvent.touchDelay=2e3),void 0===dhtmlxEvent.initTouch&&(dhtmlxEvent.initTouch=function(){function t(){if(i){var t=document.createEvent("HTMLEvents");t.initEvent("dblclick",!0,!0),i.dispatchEvent(t),e=i=null}}var e,i,n,s;dhtmlxEvent(document.body,"touchstart",function(o){i=o.touches[0].target,n=o.touches[0].clientX,s=o.touches[0].clientY,e=window.setTimeout(t,dhtmlxEvent.touchDelay)}),dhtmlxEvent(document.body,"touchmove",function(t){e&&(Math.abs(t.touches[0].clientX-n)>50||Math.abs(t.touches[0].clientY-s)>50)&&(window.clearTimeout(e),e=i=!1)}),dhtmlxEvent(document.body,"touchend",function(t){e&&(window.clearTimeout(e),e=i=!1)}),dhtmlxEvent.initTouch=function(){}}),window.dhtmlx||(dhtmlx={}),dhtmlx.assert=function(t,e){t||dhtmlx.error(e)},dhtmlx.assert_enabled=function(){return!1},dhtmlx.assert_event=function(t,e){t._event_check||(t._event_check={},t._event_check_size={});for(var i in e){t._event_check[i.toLowerCase()]=e[i];var n=-1;for(var s in e[i])n++;t._event_check_size[i.toLowerCase()]=n}},dhtmlx.assert_method_info=function(t,e,i,n){for(var s=[],o=0;o<n.length;o++)s.push(n[o][0]+" : "+n[o][1]+"\n   "+n[o][2].describe()+(n[o][3]?"; optional":""));return t.name+"."+e+"\n"+i+"\n Arguments:\n - "+s.join("\n - ")},dhtmlx.assert_method=function(t,e){for(var i in e)dhtmlx.assert_method_process(t,i,e[i].descr,e[i].args,e[i].min||99,e[i].skip)},dhtmlx.assert_method_process=function(t,e,i,n,s,o){var l=t[e];o||(t[e]=function(){if(arguments.length!=n.length&&arguments.length<s)dhtmlx.log("warn","Incorrect count of parameters\n"+t[e].describe()+"\n\nExpecting "+n.length+" but have only "+arguments.length);else for(var i=0;i<n.length;i++)n[i][3]||n[i][2](arguments[i])||dhtmlx.log("warn","Incorrect method call\n"+t[e].describe()+"\n\nActual value of "+(i+1)+" parameter: {"+typeof arguments[i]+"} "+arguments[i]);return l.apply(this,arguments)}),t[e].describe=function(){return dhtmlx.assert_method_info(t,e,i,n)}},dhtmlx.assert_event_call=function(t,e,i){t._event_check&&(t._event_check[e]?dhtmlx.isNotDefined(i)?dhtmlx.log("warn","Event without parameters :"+e):t._event_check_size[e]!=i.length&&dhtmlx.log("warn","Incorrect event call, expected "+t._event_check_size[e]+" parameter(s), but have "+i.length+" parameter(s), for "+e+" event"):dhtmlx.log("warn","Not expected event call :"+e))},dhtmlx.assert_event_attach=function(t,e){t._event_check&&!t._event_check[e]&&dhtmlx.log("warn","Unknown event name: "+e)},dhtmlx.assert_property=function(t,e){t._settings_check||(t._settings_check={}),dhtmlx.extend(t._settings_check,e)},dhtmlx.assert_check=function(t,e){if("object"==typeof t)for(var i in t)dhtmlx.assert_settings(i,t[i],e)},dhtmlx.assert_settings=function(t,e,i){if(i=i||this._settings_check){if(!i[t])return dhtmlx.log("warn","Unknown propery: "+t);for(var n=!1,s=0;s<i[t].length;s++){var o=i[t][s];if("string"!=typeof o&&("function"==typeof o?n=n||o(e):"object"==typeof o&&"function"==typeof o[1]&&(n=n||o[1](e))&&o[2]&&dhtmlx.assert_check(e,o[2]),n))break}n||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(t,i)+"\nActual value: {"+typeof e+"} "+e)}},dhtmlx.assert_info=function(t,e){for(var i=e[t],n="",s=[],o=0;o<i.length;o++)"string"==typeof rule?n=i[o]:i[o].describe?s.push(i[o].describe()):i[o][1]&&i[o][1].describe&&s.push(i[o][1].describe());return"Property: "+t+", "+n+" \nExpected value: \n - "+s.join("\n - ")},dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(t){return"string"==typeof t&&(0===t.indexOf("#")&&""===t.substr(1).replace(/[0-9A-F]/gi,""))},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(t){return"function"==typeof t||"string"==typeof t},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(t){return"boolean"==typeof t},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(t,e){return"object"==typeof t},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(t){return"string"==typeof t},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(t){return!!dhtmlx.toNode(t)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(t){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(t){var e=function(e){return t[e]};return e.describe=function(){var e=[];for(var i in t)e.push(i);return"{String} can take one of next values: "+e.join(", ")},e},dhtmlx.assert_rule_dimension=function(t){return 1*t==t&&!isNaN(t)&&t>=0},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(t){return"number"==typeof t},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(t){return"function"==typeof t},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(t){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(t,e){var i=function(i){return!(!t(i)&&!e(i))};return i.describe=function(){return t.describe()},i}),dhtmlx.codebase="./",dhtmlx.copy=function(t){var e=dhtmlx.copy._function;return e.prototype=t,new e},dhtmlx.copy._function=function(){},dhtmlx.extend=function(t,e){for(var i in e)t[i]=e[i];return dhtmlx.assert_enabled()&&e._assert&&(t._assert(),t._assert=null),dhtmlx.assert(t,"Invalid nesting target"),dhtmlx.assert(e,"Invalid nesting source"),e._init&&t._init(),t},dhtmlx.proto_extend=function(){for(var t=arguments,e=t[0],i=[],n=t.length-1;n>0;n--){"function"==typeof t[n]&&(t[n]=t[n].prototype);for(var s in t[n])"_init"==s?i.push(t[n][s]):e[s]||(e[s]=t[n][s])}t[0]._init&&i.push(t[0]._init),e._init=function(){for(var t=0;t<i.length;t++)i[t].apply(this,arguments)},e.base=t[1];var o=function(t){this._init(t),this._parseSettings&&this._parseSettings(t,this.defaults)};return o.prototype=e,e=t=null,o},dhtmlx.bind=function(t,e){return function(){return t.apply(e,arguments)}},dhtmlx.require=function(t){dhtmlx._modules[t]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+t).responseText),dhtmlx._modules[t]=!0)},dhtmlx._modules={},dhtmlx.exec=function(t){window.execScript?window.execScript(t):window.eval(t)},dhtmlx.methodPush=function(t,e,i){return function(){return t[e].apply(t,arguments)}},dhtmlx.isNotDefined=function(t){return void 0===t},dhtmlx.delay=function(t,e,i,n){setTimeout(function(){var n=t.apply(e,i);return t=e=i=null,n},n||1)},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.toNode=function(t){return"string"==typeof t?document.getElementById(t):t},dhtmlx.toArray=function(t){return dhtmlx.extend(t||[],dhtmlx.PowerArray)},dhtmlx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhtmlx._events={},dhtmlx.event=function(t,e,i,n){t=dhtmlx.toNode(t);var s=dhtmlx.uid();return dhtmlx._events[s]=[t,e,i],n&&(i=dhtmlx.bind(i,n)),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i),s},dhtmlx.eventRemove=function(t){if(t){dhtmlx.assert(this._events[t],"Removing non-existing event");var e=dhtmlx._events[t];e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],!1):e[0].detachEvent&&e[0].detachEvent("on"+e[1],e[2]),delete this._events[t]}},dhtmlx.log=function(t,e,i){window.console&&console.log&&(t=t.toLowerCase(),window.console[t]?window.console[t](e||"unknown error"):window.console.log(t+": "+e),i&&window.console.log(i))},dhtmlx.log_full_time=function(t){dhtmlx._start_time_log=new Date,dhtmlx.log("Info","Timing start ["+t+"]"),window.setTimeout(function(){var e=new Date;dhtmlx.log("Info","Timing end ["+t+"]:"+(e.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)},dhtmlx.log_time=function(t){var e="_start_time_log"+t;if(dhtmlx[e]){var i=new Date;dhtmlx.log("Info","Timing end ["+t+"]:"+(i.valueOf()-dhtmlx[e].valueOf())/1e3+"s"),dhtmlx[e]=null}else dhtmlx[e]=new Date,dhtmlx.log("Info","Timing start ["+t+"]")},dhtmlx.error=function(t,e){dhtmlx.log("error",t,e)},dhtmlx.EventSystem={_init:function(){this._events={},this._handlers={},this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(t){dhtmlx.extend(this._map,t)},callEvent:function(t,e){if(this._events._block)return!0;t=t.toLowerCase(),dhtmlx.assert_event_call(this,t,e);var i=this._events[t.toLowerCase()],n=!0;if(dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+t,e),i)for(var s=0;s<i.length;s++)!1===i[s].apply(this,e||[])&&(n=!1);return this._map[t]&&!this._map[t].callEvent(t,e)&&(n=!1),n},attachEvent:function(t,e,i){t=t.toLowerCase(),dhtmlx.assert_event_attach(this,t),i=i||dhtmlx.uid(),e=dhtmlx.toFunctor(e);var n=this._events[t]||dhtmlx.toArray();return n.push(e),this._events[t]=n,this._handlers[i]={f:e,t:t},i},detachEvent:function(t){if(this._handlers[t]){var e=this._handlers[t].t,i=this._handlers[t].f;this._events[e].remove(i),delete this._handlers[t]}}},dhtmlx.PowerArray={removeAt:function(t,e){t>=0&&this.splice(t,e||1)},remove:function(t){this.removeAt(this.find(t))},insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},find:function(t){for(i=0;i<this.length;i++)if(t==this[i])return i;return-1},each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this}},dhtmlx.env={},-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9)),dhtmlx.env={},function(){dhtmlx.env.transform=!1,dhtmlx.env.transition=!1;var t={};t.names=["transform","transition"],t.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"],t.transition=["transition","WebkitTransition","MozTransition","oTransition"];for(var e=document.createElement("DIV"),i=0;i<t.names.length;i++)for(;p=t[t.names[i]].pop();)void 0!==e.style[p]&&(dhtmlx.env[t.names[i]]=!0)}(),dhtmlx.env.transform_prefix=function(){var t;return dhtmlx._isOpera?t="-o-":(t="",dhtmlx._isFF&&(t="-moz-"),dhtmlx._isWebKit&&(t="-webkit-")),t}(),dhtmlx.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),dhtmlx.zIndex={drag:1e4},dhtmlx.html={create:function(t,e,i){e=e||{};var n=document.createElement(t);for(var s in e)n.setAttribute(s,e[s]);return e.style&&(n.style.cssText=e.style),e.class&&(n.className=e.class),i&&(n.innerHTML=i),n},getValue:function(t){return(t=dhtmlx.toNode(t))?dhtmlx.isNotDefined(t.value)?t.innerHTML:t.value:""},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else t&&t.parentNode&&t.parentNode.removeChild(t)},insertBefore:function(t,e,i){t&&(e?e.parentNode.insertBefore(t,e):i.appendChild(t))},locate:function(t,e){for(var i=(t=t||event).target||t.srcElement;i;){if(i.getAttribute){var n=i.getAttribute(e);if(n)return n}i=i.parentNode}return null},offset:function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{y:Math.round(a),x:Math.round(h)}}for(a=0,h=0;t;)a+=parseInt(t.offsetTop,10),h+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:a,x:h}},pos:function(t){if((t=t||event).pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}},preventEvent:function(t){t&&t.preventDefault&&t.preventDefault(),dhtmlx.html.stopEvent(t)},stopEvent:function(t){return(t||event).cancelBubble=!0,!1},addCss:function(t,e){t.className+=" "+e},removeCss:function(t,e){t.className=t.className.replace(RegExp(e,"g"),"")}},function(){var t=document.getElementsByTagName("SCRIPT");dhtmlx.assert(t.length,"Can't locate codebase"),t.length&&((t=(t[t.length-1].getAttribute("src")||"").split("/")).splice(t.length-1,1),dhtmlx.codebase=t.slice(0,t.length).join("/")+"/")}(),dhtmlx.ui||(dhtmlx.ui={}),dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){},this._htmlmap=null,this._htmlrows=null,this._html&&document.body.appendChild(this._html),this._html=null,this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null),this._obj=this._dataobj=null,this.data=null,this._events=this._handlers={},this.render&&(this.render=function(){})}},dhtmlx.destructors=[],dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var t=0;t<dhtmlx.destructors.length;t++)dhtmlx.destructors[t].destructor();dhtmlx.destructors=[]}for(var e in dhtmlx._events){var i=dhtmlx._events[e];i[0].removeEventListener?i[0].removeEventListener(i[1],i[2],!1):i[0].detachEvent&&i[0].detachEvent("on"+i[1],i[2]),delete dhtmlx._events[e]}}),dhtmlx.ajax=function(t,e,i){if(0!==arguments.length){var n=new dhtmlx.ajax;i&&(n.master=i),n.get(t,null,e)}return this.getXHR?this:new dhtmlx.ajax},dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(t,e,i){var n=this.getXHR();if("function"==typeof i&&(i=[i]),"object"==typeof e){var s=[];for(var o in e){var l=e[o];null!==l&&l!==dhtmlx.undefined||(l=""),s.push(o+"="+encodeURIComponent(l))}e=s.join("&")}e&&!this.post&&(t=t+(-1!=t.indexOf("?")?"&":"?")+e,e=null),n.open(this.post?"POST":"GET",t,!this._sync),this.post&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=this;return n.onreadystatechange=function(){if(!n.readyState||4==n.readyState){if(i&&r)for(var t=0;t<i.length;t++)i[t]&&i[t].call(r.master||r,n.responseText,n.responseXML,n);r.master=null,i=r=null}},n.send(e||null),n},get:function(t,e,i){return this.post=!1,this.send(t,e,i)},post:function(t,e,i){return this.post=!0,this.send(t,e,i)},sync:function(){return this._sync=!0,this}},dhtmlx.AtomDataLoader={_init:function(t){this.data={},t&&(this._settings.datatype=t.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(t){return this._ready_for_data?(this.load(t,this._settings.datatype),t):t},data_setter:function(t){return this._ready_for_data?(this.parse(t,this._settings.datatype),!0):t},load:function(t,e){this.callEvent("onXLS",[]),"string"==typeof e?(this.data.driver=dhtmlx.DataDriver[e],e=arguments[2]):this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"],window.dhx4?dhx4.ajax.get(t,dhtmlx.bind(function(t){var i=t.xmlDoc,n=i.responseText,s=i.responseXML;this._onLoad&&this._onLoad.call(this,n,s,i),e&&e.call(this,n,s,i)},this)):dhtmlx.ajax(t,[this._onLoad,e],this)},parse:function(t,e){this.callEvent("onXLS",[]),this.data.driver=dhtmlx.DataDriver[e||"xml"],this._onLoad(t,null)},_onLoad:function(t,e,i){var n=this.data.driver,s=n.getRecords(n.toObject(t,e))[0];this.data=n?n.getDetails(s):t,this.callEvent("onXLE",[])},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.callEvent("onXLS",[]),dhtmlx.ajax(e,function(t,e){this._ignore_feed=!0,this.setValues(dhtmlx.DataDriver.json.toObject(t)[0]),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhtmlx.DataDriver={},dhtmlx.DataDriver.json={toObject:function(data){return data||(data="[]"),"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(t){return t&&t.data&&(t=t.data),!t||t instanceof Array?t:[t]},getDetails:function(t){return t},getInfo:function(t){return{_size:t.total_count||0,_from:t.pos||0,_key:t.dhx_security}}},dhtmlx.DataDriver.json_ext={toObject:function(data){if(data||(data="[]"),"string"==typeof data){var temp;eval("temp="+data),dhtmlx.temp=[];for(var header=temp.header,i=0;i<temp.data.length;i++){for(var item={},j=0;j<header.length;j++)void 0!==temp.data[i][j]&&(item[header[j]]=temp.data[i][j]);dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(t){return!t||t instanceof Array?t:[t]},getDetails:function(t){return t},getInfo:function(t){return{_size:t.total_count||0,_from:t.pos||0}}},dhtmlx.DataDriver.html={toObject:function(t){if("string"==typeof t){var e=null;return-1==t.indexOf("<")&&(e=dhtmlx.toNode(t)),e||((e=document.createElement("DIV")).innerHTML=t),e.getElementsByTagName(this.tag)}return t},getRecords:function(t){return t.tagName?t.childNodes:t},getDetails:function(t){return dhtmlx.DataDriver.xml.tagToObject(t)},getInfo:function(t){return{_size:0,_from:0}},tag:"LI"},dhtmlx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(t){return t},getDetails:function(t){for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(t){return{_size:0,_from:0}}},dhtmlx.DataDriver.csv={toObject:function(t){return t},getRecords:function(t){return t.split(this.row)},getDetails:function(t){t=this.stringToArray(t);for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(t){return{_size:0,_from:0}},stringToArray:function(t){t=t.split(this.cell);for(var e=0;e<t.length;e++)t[e]=t[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return t},row:"\n",cell:","},dhtmlx.DataDriver.xml={toObject:function(t,e){return e&&(e=this.checkResponse(t,e))?e:"string"==typeof t?this.fromString(t):t},getRecords:function(t){return this.xpath(t,this.records)},records:"/*/item",getDetails:function(t){return this.tagToObject(t,{})},getInfo:function(t){return{_size:t.documentElement.getAttribute("total_count")||0,_from:t.documentElement.getAttribute("pos")||0,_key:t.documentElement.getAttribute("dhx_security")}},xpath:function(t,e){if(window.XPathResult){var i=t;-1==t.nodeName.indexOf("document")&&(t=t.ownerDocument);for(var n=[],s=t.evaluate(e,i,null,XPathResult.ANY_TYPE,null),o=s.iterateNext();o;)n.push(o),o=s.iterateNext();return n}var l=!0;try{void 0===t.selectNodes&&(l=!1)}catch(t){}if(l)return t.selectNodes(e);var r=e.split("/").pop();return t.getElementsByTagName(r)},tagToObject:function(t,e){e=e||{};for(var i=!1,n=t.childNodes,s=0;s<n.length;s++)if(1==n[s].nodeType){var o=n[s].tagName;void 0!==e[o]?(e[o]instanceof Array||(e[o]=[e[o]]),e[o].push(this.tagToObject(n[s],{}))):e[n[s].tagName]=this.tagToObject(n[s],{}),i=!0}var l=t.attributes;if(l&&l.length){for(s=0;s<l.length;s++)e[l[s].name]=l[s].value;i=!0}return i?(e.value=this.nodeValue(t),e):this.nodeValue(t)},nodeValue:function(t){return t.firstChild?t.firstChild.wholeText||t.firstChild.data:""},fromString:function(t){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");return e.loadXML(t),e}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(t,e){if(e&&e.firstChild&&"parsererror"!=e.firstChild.tagName)return e;var i=this.fromString(t.replace(/^[\s]+/,""));if(i)return i;dhtmlx.error("xml can't be parsed",t)}},dhtmlx.DataLoader={_init:function(t){t=t||"",this.name="DataStore",this.data=t.datastore||new dhtmlx.DataStore,this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(t,e){dhtmlx.AtomDataLoader.load.apply(this,arguments),this.data.feed||(this.data.feed=function(e,i){if(this._load_count)return this._load_count=[e,i];this._load_count=!0,this.load(t+(-1==t.indexOf("?")?"?":"&")+"posStart="+e+"&count="+i,function(){var t=this._load_count;this._load_count=!1,"object"==typeof t&&this.data.feed.apply(this,t)})})},_onLoad:function(t,e,i){this.data._parse(this.data.driver.toObject(t,e)),this.callEvent("onXLE",[]),this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(t){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!i)return;if("function"==typeof t){if(!e)return;t(e,i)}else i={text:e};this.clearAll();var n=this._settings.dataFeed;if("function"==typeof n)return n.call(this,e,i);var s=[];for(var o in i)s.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(n+(n.indexOf("?")<0?"?":"&")+s.join("&"),this._settings.datatype),!1}},this)),t},_call_onready:function(){if(this._settings.ready){var t=dhtmlx.toFunctor(this._settings.ready);t&&t.call&&t.apply(this,arguments)}}},dhtmlx.DataStore=function(){this.name="DataStore",dhtmlx.extend(this,dhtmlx.EventSystem),this.setDriver("xml"),this.pull={},this.order=dhtmlx.toArray()},dhtmlx.DataStore.prototype={setDriver:function(t){dhtmlx.assert(dhtmlx.DataDriver[t],"incorrect DataDriver"),this.driver=dhtmlx.DataDriver[t]},_parse:function(t){this.callEvent("onParse",[this.driver,t]),this._filter_order&&this.filter();var e=this.driver.getInfo(t);e._key&&(dhtmlx.security_key=e._key);var i=this.driver.getRecords(t),n=1*(e._from||0);0===n&&this.order[0]&&(n=this.order.length);for(var s=0,o=0;o<i.length;o++){var l=this.driver.getDetails(i[o]),r=this.id(l);this.pull[r]||(this.order[s+n]=r,s++),this.pull[r]=l,this.extraParser&&this.extraParser(l),this._scheme&&(this._scheme.$init?this._scheme.$update(l):this._scheme.$update&&this._scheme.$update(l))}for(o=0;o<e._size;o++)if(!this.order[o]){l={id:r=dhtmlx.uid(),$template:"loading"};this.pull[r]=l,this.order[o]=r}this.callEvent("onStoreLoad",[this.driver,t]),this.refresh()},id:function(t){return t.id||(t.id=dhtmlx.uid())},changeId:function(t,e){dhtmlx.assert(this.pull[t],"Can't change id, for non existing item: "+t),this.pull[e]=this.pull[t],this.pull[e].id=e,this.order[this.order.find(t)]=e,this._filter_order&&(this._filter_order[this._filter_order.find(t)]=e),this.callEvent("onIdChange",[t,e]),this._render_change_id&&this._render_change_id(t,e)},get:function(t){return this.item(t)},set:function(t,e){return this.update(t,e)},item:function(t){return this.pull[t]},update:function(t,e){if(this._scheme&&this._scheme.$update&&this._scheme.$update(e),!1===this.callEvent("onBeforeUpdate",[t,e]))return!1;this.pull[t]=e,this.refresh(t)},refresh:function(t){this._skip_refresh||(t?this.callEvent("onStoreUpdated",[t,this.pull[t],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(t){this._skip_refresh=!0,t.call(this),this._skip_refresh=!1},getRange:function(t,e){if(t=t?this.indexById(t):this.startOffset||0,e?e=this.indexById(e):(e=Math.min(this.endOffset||1/0,this.dataCount()-1))<0&&(e=0),this.min&&(t=this.min),this.max&&(e=this.max),t>e){var i=e;e=t,t=i}return this.getIndexRange(t,e)},getIndexRange:function(t,e){e=Math.min(e||1/0,this.dataCount()-1);for(var i=dhtmlx.toArray(),n=t||0;n<=e;n++)i.push(this.item(this.order[n]));return i},dataCount:function(){return this.order.length},exists:function(t){return!!this.pull[t]},move:function(t,e){if(t<0||e<0)dhtmlx.error("DataStore::move","Incorrect indexes");else{var i=this.idByIndex(t),n=this.item(i);this.order.removeAt(t),this.order.insertAt(i,Math.min(this.order.length,e)),this.callEvent("onStoreUpdated",[i,n,"move"])}},scheme:function(t){this._scheme=t},sync:function(t,e,i){"function"!=typeof e&&(i=e,e=null),dhtmlx.debug_bind&&(this.debug_sync_master=t,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var n=t;"DataStore"!=t.name&&(t=t.data);var s=dhtmlx.bind(function(n,s,o){("update"!=o||e)&&(n=null),n||(this.order=dhtmlx.toArray([].concat(t.order)),this._filter_order=null,this.pull=t.pull,e&&this.silent(e),this._on_sync&&this._on_sync()),dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),i?i=!1:this.refresh(n)},this);t.attachEvent("onStoreUpdated",s),this.feed=function(t,e){n.loadNext(e,t)},s()},add:function(t,e){if(this._scheme){t=t||{};for(var i in this._scheme)t[i]=t[i]||this._scheme[i];this._scheme&&(this._scheme.$init?this._scheme.$update(t):this._scheme.$update&&this._scheme.$update(t))}var n=this.id(t),s=this.dataCount();if((dhtmlx.isNotDefined(e)||e<0)&&(e=s),e>s&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),e=Math.min(this.order.length,e)),!1===this.callEvent("onBeforeAdd",[n,t,e]))return!1;if(this.exists(n))return dhtmlx.error("Not unique ID");if(this.pull[n]=t,this.order.insertAt(n,e),this._filter_order){var o=this._filter_order.length;!e&&this.order.length&&(o=0),this._filter_order.insertAt(n,o)}return this.callEvent("onafterAdd",[n,e]),this.callEvent("onStoreUpdated",[n,t,"add"]),n},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else{if(!1===this.callEvent("onBeforeDelete",[t]))return!1;if(!this.exists(t))return dhtmlx.error("Not existing ID",t);var i=this.item(t);this.order.remove(t),this._filter_order&&this._filter_order.remove(t),delete this.pull[t],this.callEvent("onafterdelete",[t]),this.callEvent("onStoreUpdated",[t,i,"delete"])}},clearAll:function(){this.pull={},this.order=dhtmlx.toArray(),this.feed=null,this._filter_order=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(t){return(t>=this.order.length||t<0)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[t]},indexById:function(t){return this.order.find(t)},next:function(t,e){return this.order[this.indexById(t)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(t,e){return this.order[this.indexById(t)-(e||1)]},sort:function(t,e,i){var n=t;"function"==typeof t?n={as:t,dir:e}:"string"==typeof t&&(n={by:t,dir:e,as:i});var s=[n.by,n.dir,n.as];if(this.callEvent("onbeforesort",s)){if(this.order.length){var o=dhtmlx.sort.create(n),l=this.getRange(this.first(),this.last());l.sort(o),this.order=l.map(function(t){return this.id(t)},this)}this.refresh(),this.callEvent("onaftersort",s)}},filter:function(t,e){if(this.callEvent("onBeforeFilter",[t,e])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(t){var i=t;e=e||"","string"==typeof t&&(t=dhtmlx.Template.fromHTML(t),e=e.toString().toLowerCase(),i=function(e,i){return-1!=t(e).toLowerCase().indexOf(i)});for(var n=dhtmlx.toArray(),s=0;s<this.order.length;s++){var o=this.order[s];i(this.item(o),e)&&n.push(o)}this._filter_order=this.order,this.order=n}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(t,e){for(var i=0;i<this.order.length;i++)t.call(e||this,this.item(this.order[i]))},provideApi:function(t,e){this.debug_bind_master=t,e&&this.mapEvent({onbeforesort:t,onaftersort:t,onbeforeadd:t,onafteradd:t,onbeforedelete:t,onafterdelete:t,onbeforeupdate:t});for(var i=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],n=0;n<i.length;n++)t[i[n]]=dhtmlx.methodPush(this,i[n]);dhtmlx.assert_enabled()&&this.assert_event(t)},serialize:function(){for(var t=this.order,e=[],i=0;i<t.length;i++)e.push(this.pull[t[i]]);return e}},dhtmlx.sort={create:function(t){return dhtmlx.sort.dir(t.dir,dhtmlx.sort.by(t.by,t.as))},as:{int:function(t,e){return t*=1,e*=1,t>e?1:t<e?-1:0},string_strict:function(t,e){return t=t.toString(),e=e.toString(),t>e?1:t<e?-1:0},string:function(t,e){return t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:t<e?-1:0}},by:function(t,e){return t?("function"!=typeof e&&(e=dhtmlx.sort.as[e||"string"]),t=dhtmlx.Template.fromHTML(t),function(i,n){return e(t(i),t(n))}):e},dir:function(t,e){return"asc"==t?e:function(t,i){return-1*e(t,i)}}},dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(t){var e=(t=t||event).which||t.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[e,t.ctrlKey,t.shiftKey,t])}},dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this)),this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this),this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(t){return this._mouseEvent(t,this.on_click,"ItemClick")},_onDblClick:function(t){return this._mouseEvent(t,this.on_dblclick,"ItemDblClick")},_onContext:function(t){var e=dhtmlx.html.locate(t,this._id);if(e&&!this.callEvent("onBeforeContextMenu",[e,t]))return dhtmlx.html.preventEvent(t)},_onMouse:function(t){dhtmlx._isIE&&(t=document.createEventObject(event)),this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[t]),this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==t.type?this._onMouseMove(t):this._onMouseOut(t)},this),500)},_onMouseMove:function(t){this._mouseEvent(t,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[t||event])},_onMouseOut:function(t){this.callEvent("onMouseOut",[t||event])},_mouseEvent:function(t,e,i){for(var n=(t=t||event).target||t.srcElement,s="",o=null,l=!1;n&&n.parentNode;){if(!l&&n.getAttribute&&(o=n.getAttribute(this._id))){if(n.getAttribute("userdata")&&this.callEvent("onLocateData",[o,n,t]),!this.callEvent("on"+i,[o,t,n]))return;l=!0}if((s=n.className)&&(s=s.split(" "),s=s[0]||s[1],e[s]))return e[s].call(this,t,o||dhtmlx.html.locate(t,this._id),n);n=n.parentNode}return l}},dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(t,e){return"object"==typeof t?this._parseSeetingColl(t):this._define(t,e)},_define:function(t,e){dhtmlx.assert_settings.call(this,t,e);var i=this[t+"_setter"];return this._settings[t]=i?i.call(this,e):e},_parseSeetingColl:function(t){if(t)for(var e in t)this._define(e,t[e])},_parseSettings:function(t,e){var i=dhtmlx.extend({},e);"object"!=typeof t||t.tagName||dhtmlx.extend(i,t),this._parseSeetingColl(i)},_mergeSettings:function(t,e){for(var i in e)switch(typeof t[i]){case"object":t[i]=this._mergeSettings(t[i]||{},e[i]);break;case"undefined":t[i]=e[i]}return t},_parseContainer:function(t,e,i){"object"!=typeof t||t.tagName||(t=t.container),this._obj=this.$view=dhtmlx.toNode(t),!this._obj&&i&&(this._obj=i(t)),dhtmlx.assert(this._obj,"Incorrect html container"),this._obj.className+=" "+e,this._obj.onselectstart=function(){return!1},this._dataobj=this._obj},_set_type:function(t){if("object"==typeof t)return this.type_setter(t);dhtmlx.assert(this.types,"RenderStack :: Types are not defined"),dhtmlx.assert(this.types[t],"RenderStack :: Inccorect type name",t),this.type=dhtmlx.extend({},this.types[t]),this.customize()},customize:function(t){t&&dhtmlx.extend(this.type,t),this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type),this.render()},type_setter:function(t){return this._set_type("object"==typeof t?dhtmlx.Type.add(this,t):t),t},template_setter:function(t){return this.type_setter({template:t})},css_setter:function(t){return this._obj.className+=" "+t,t}},dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(t){return dhtmlx.Template.fromHTML(t)},obj_setter:function(t){var e=dhtmlx.Template.setter(t),i=this;return function(){return e.apply(i,arguments)}},fromHTML:function(t){return"function"==typeof t?t:this._cache[t]?this._cache[t]:(t=(t||"").toString(),t=t.replace(/[\r\n]+/g,"\\n"),t=t.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),t=t.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"'),t=t.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"'),t=t.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"'),t=t.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"'),t=t.replace(/\{obj\}/g,'"+obj+"'),t=t.replace(/\{-obj/g,"{obj"),t=t.replace(/\{-common/g,"{common"),t='return "'+t+'";',this._cache[t]=Function("obj","common",t))}},dhtmlx.Type={add:function(t,e){!t.types&&t.prototype.types&&(t=t.prototype),dhtmlx.assert_enabled()&&this.assert_event(e);var i=e.name||"default";return this._template(e),this._template(e,"edit"),this._template(e,"loading"),t.types[i]=dhtmlx.extend(dhtmlx.extend({},t.types[i]||this._default),e),i},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(t,e){var i=t[e="template"+(e?"_"+e:"")];if(i&&"string"==typeof i){if(-1!=i.indexOf("->"))switch((i=i.split("->"))[0]){case"html":i=dhtmlx.html.getValue(i[1]).replace(/\"/g,'\\"');break;case"http":i=(new dhtmlx.ajax).sync().get(i[1],{uid:(new Date).valueOf()}).responseText}t[e]=dhtmlx.Template.fromHTML(i)}}},dhtmlx.SingleRender={_init:function(){},_toHTML:function(t){return this.type._item_start(t,this.type)+this.type.template(t,this.type)+this.type._item_end},render:function(){this.callEvent&&!this.callEvent("onBeforeRender",[this.data])||(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}},dhtmlx.ui.Tooltip=function(t){this.name="Tooltip",dhtmlx.assert_enabled()&&this._assert(),"string"==typeof t&&(t={template:t}),dhtmlx.extend(this,dhtmlx.Settings),dhtmlx.extend(this,dhtmlx.SingleRender),this._parseSettings(t,{type:"default",dy:0,dx:20}),this._dataobj=this._obj=document.createElement("DIV"),this._obj.className="dhx_tooltip",dhtmlx.html.insertBefore(this._obj,document.body.firstChild)},dhtmlx.ui.Tooltip.prototype={show:function(t,e){this._disabled||(this.data!=t&&(this.data=t,this.render(t)),this._obj.style.top=e.y+this._settings.dy+"px",this._obj.style.left=e.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null,this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{default:dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty},dhtmlx.AutoTooltip={tooltip_setter:function(t){var e=new dhtmlx.ui.Tooltip(t);return this.attachEvent("onMouseMove",function(t,i){e.show(this.get(t),dhtmlx.html.pos(i))}),this.attachEvent("onMouseOut",function(t,i){e.hide()}),this.attachEvent("onMouseMoving",function(t,i){e.hide()}),e}},dhtmlx.compat=function(t,e){dhtmlx.compat[t]&&dhtmlx.compat[t](e)},dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachAbstract=function(t,e){var i=document.createElement("DIV");i.id="CustomObject_"+dhtmlx.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),e.container=i.id;var n=this.vs[this.av];n.grid=new window[t](e),n.gridId=i.id,n.gridObj=i,n.grid.setSizes=function(){this.resize?this.resize():this.render()};return this.vs[this._viewRestore()].grid},dhtmlx.attaches.attachDataView=function(t){return this.attachAbstract("dhtmlXDataView",t)},dhtmlx.attaches.attachChart=function(t){return this.attachAbstract("dhtmlXChart",t)},dhtmlx.compat.layout=function(){},dhtmlXCellObject.prototype.showView=function(t){if(this.conf.view==t)return!1;this._viewSave(this.conf.view),this._viewRestore(t),this._updateIdx(),this._adjustCont(),this.conf.view=t;var e=void 0===this.conf.views_loaded[this.conf.view];return this.conf.views_loaded[this.conf.view]=!0,e},dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view},dhtmlXCellObject.prototype.unloadView=function(t){if(t==this.conf.view){var e=this.conf.unloading;return this.conf.unloading=!0,"function"==typeof this.detachMenu&&this.detachMenu(),"function"==typeof this.detachToolbar&&this.detachToolbar(),"function"==typeof this.detachRibbon&&this.detachRibbon(),this.detachStatusBar(),this._detachObject(null,!0),this.conf.unloading=e,void(this.conf.unloading||this._adjustCont(this._idd))}if(null!=this.views[t]){var i=this.views[t];for(var n in i.dataNodes)"function"==typeof i.dataNodes[n].unload&&i.dataNodes[n].unload(),i.dataNodes[n]=null,i.dataNodesCont[n]=null;"url"==i.dataType?null!=i.cellCont&&"null"!=i.cellCont[0]&&this._detachURLEvents(i.cellCont[0]):null!=i.dataObj&&("function"==typeof i.dataObj.unload?i.dataObj.unload():"function"==typeof i.dataObj.destructor&&i.dataObj.destructor(),i.dataObj=null),i=null,this._viewDelete(t),void 0!==this.conf.views_loaded[t]&&delete this.conf.views_loaded[t]}},dhtmlXCellObject.prototype.getId=function(){return this._idd},dhtmlXCellObject.prototype.progressOn=function(){if(1!=this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className=this.conf.idx_data.pr1;var e=document.createElement("DIV");"material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(e.className=this.conf.idx_data.pr3,e.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'):e.className=this.conf.idx_data.pr2,null!=this.conf.idx.cover?this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(e),this.cell.insertBefore(t,e),t=e=null,this._updateIdx(),this._adjustProgress()}},dhtmlXCellObject.prototype.progressOff=function(){if(1==this.conf.progress){for(var t in{pr3:3,pr2:2,pr1:1}){var e=this.cell.childNodes[this.conf.idx[t]];null!=e&&e.parentNode.removeChild(e),e=null}this.conf.progress=!1,this._updateIdx()}},dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var t=this.cell.childNodes[this.conf.idx.pr1],e=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];this.conf.pr.ofs||(e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px",this.conf.pr.ofs={w:e.offsetWidth-e.clientWidth,h:e.offsetHeight-e.clientHeight}),e.style.width=t.offsetWidth-this.conf.pr.ofs.w+"px",e.style.height=t.offsetHeight-this.conf.pr.ofs.h+"px",t=e=null}},dhtmlXCellObject.prototype._showCellCover=function(){if(1!=this.conf.cover){this.conf.cover=!0;var t=document.createElement("DIV");t.className=this.conf.idx_data.cover,this.cell.appendChild(t),t=null,this._updateIdx()}},dhtmlXCellObject.prototype._hideCellCover=function(){1==this.conf.cover&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)},dhtmlXCellObject.prototype._showBorders=function(t){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),!0!==t&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._hideBorders=function(t){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),!0!==t&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth},dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight},dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"},dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=!0,this.callEvent("_onCellUnload",[]),this.progressOff(),this.unloadView(this.conf.view),this.dataNodes=null,this.cell.parentNode.removeChild(this.cell),this.cell=null,window.dhx4._eventable(this,"clear");for(var t in this.views)this.unloadView(t);this.conf=null;for(var t in this)this[t]=null},dhtmlXCellObject.prototype.attachObject=function(t,e){if(!window.dhx4.s2b(e)||"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(e=!1),"string"==typeof t&&(t=document.getElementById(t)),t.parentNode!=this.cell.childNodes[this.conf.idx.cont]){if(e){t.style.display="";var i=t.offsetWidth,n=t.offsetHeight}this._attachObject(t),this.dataType="obj",t.style.display="",t=null,e&&this._adjustByCont(i,n)}else t=null},dhtmlXCellObject.prototype.appendObject=function(t){"string"==typeof t&&(t=document.getElementById(t)),t.parentNode!=this.cell.childNodes[this.conf.idx.cont]?(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(t,null,null,!0),this.dataType="obj",t.style.display="",t=null):t=null},dhtmlXCellObject.prototype.detachObject=function(t,e){this._detachObject(null,t,e)},dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb},dhtmlXCellObject.prototype.getAttachedObject=function(){return"obj"==this.dataType||"url"==this.dataType||"url-ajax"==this.dataType?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj},dhtmlXCellObject.prototype.attachURL=function(t,e,i){1==i&&(i={});var n=void 0!==i&&0!=i&&null!=i;if(null==this.conf.url_data&&(this.conf.url_data={}),this.conf.url_data.url=t,this.conf.url_data.ajax=1==e,this.conf.url_data.post_data=1==i?{}:i||null,null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(t){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}if(1==e){var s=this;if(n){var o="";for(var l in i)o+="&"+encodeURIComponent(l)+"="+encodeURIComponent(i[l]);this.conf.url_data.xml_doc=dhx4.ajax.post(t,o,function(t){null!=s.attachHTMLString&&"string"==typeof t.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=t=null})}else this.conf.url_data.xml_doc=dhx4.ajax.get(t,function(t){null!=s.attachHTMLString&&"string"==typeof t.xmlDoc.responseText&&(s.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof s._doOnFrameContentLoaded&&s._doOnFrameContentLoaded(),s.dataType="url-ajax"),s=t=null})}else{if("url"==this.dataType)var r=this.getFrame();else{(r=document.createElement("IFRAME")).frameBorder=0,r.border=0,r.style.width="100%",r.style.height="100%",r.style.position="relative",this._attachObject(r),this.dataType="url",this._attachURLEvents()}if(n){var a=void 0===this.conf.url_data.post_ifr;this.conf.url_data.post_ifr=!0,a&&this._attachURLEvents(),r.src="about:blank"}else r.src=t+window.dhx4.ajax._dhxr(t);r=null}r=null},dhtmlXCellObject.prototype.reloadURL=function(){"url"!=this.dataType&&"url-ajax"!=this.dataType||null!=this.conf.url_data&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)},dhtmlXCellObject.prototype.attachHTMLString=function(t){this._attachObject(null,null,t);for(var e=t.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],i=0;i<e.length;i++){var n=e[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");n&&(window.execScript?window.execScript(n):window.eval(n))}},dhtmlXCellObject.prototype.attachScheduler=function(t,e,i,n){n=n||window.scheduler;var s=!1;if(i){(o=document.getElementById(i))&&(s=!0)}if(!s){var o,l=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';(o=document.createElement("DIV")).id="dhxSchedObj_"+(new Date).getTime(),o.style.width="100%",o.style.height="100%",o.style.position="relative",o.style.overflow="hidden",o.className="dhx_cal_container",o.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+l+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}return this._attachObject(o),this.dataType="scheduler",this.dataObj=n,this.dataObj.setSizes=function(){this.update_view()},n.init(o.id,t,e),o=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachMap=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),t||(t={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(e,t),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype._createNode_sb=function(t,e,i,n,s){if(void 0!==s)t=s;else{var o=e||{},l="string"==typeof o.text&&o.text.length>0?o.text:"&nbsp;",r="number"==typeof o.height&&o.height;(t=document.createElement("DIV")).className="dhx_cell_statusbar_def",t.innerHTML="<div class='"+(1==o.paging?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+l+"</div>",0!=r&&(t.firstChild.style.height=t.firstChild.style.lineHeight=r+"px")}return null!=this.conf.idx.pr1?this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(t),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),t},dhtmlXCellObject.prototype.attachStatusBar=function(t){if(!this.dataNodes.sb)return null!=t&&1==window.dhx4.s2b(t.paging)&&(t.height=null),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",t),this.dataNodes.sb.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(t){return!1},this.dataNodes.sb},dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))},dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")},dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")},dhtmlXCellObject.prototype._mtbShowHide=function(t,e){this.dataNodes[t]&&(this.cell.childNodes[this.conf.idx[t]].style.display=e,this._adjustCont())},dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild},dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var t=this,e=this._idd,i=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(i){t.callEvent("_onContentMouseDown",[e,i||event])}),"function"==typeof window.addEventListener?i.onload=function(){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",t._doOnFrameMouseDown,!1)}catch(t){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(t){}}:i.onreadystatechange=function(e){if("complete"==this.readyState){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",t._doOnFrameMouseDown)}catch(t){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(t){}}}}},dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var t=this.getFrame().contentWindow.document,e=t.createElement("FORM");e.method="POST",e.action=this.conf.url_data.url,t.body.appendChild(e);var i={};1!=window.dhx4.ajax.cache&&(i["dhxr"+(new Date).getTime()]="1");for(var n in this.conf.url_data.post_data)i[n]=this.conf.url_data.post_data[n];for(var n in i){var s=t.createElement("INPUT");s.type="hidden",s.name=n,s.value=i[n],e.appendChild(s),s=null}this.conf.url_data.post_ifr=!1,e.submit()}else this.callEvent("_onContentLoaded",[this._idd])},dhtmlXCellObject.prototype._detachURLEvents=function(t){if(null==t){if("url"!=this.dataType)return;t=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){t.onload=null;try{t.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(t){}}else{t.onreadystatechange=null;try{t.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(t){}}t=null},dhtmlXCellObject.prototype._attachObject=function(t,e,i,n,s){if("string"==typeof t&&1=={menu:1,toolbar:1,ribbon:1,sb:1}[t])return this["_createNode_"+t].apply(this,arguments);1!=n&&this._detachObject(null,!0,null),"string"==typeof i?this.cell.childNodes[this.conf.idx.cont].innerHTML=i:this.cell.childNodes[this.conf.idx.cont].appendChild(t),t=null},dhtmlXCellObject.prototype._detachObject=function(t,e,i){if(this.callEvent("_onBeforeContentDetach",[]),"menu"==t||"toolbar"==t||"ribbon"==t||"sb"==t){return(n=this.cell.childNodes[this.conf.idx[t]]).parentNode.removeChild(n),n=null,this.conf.ofs_nodes["sb"==t?"b":"t"][t]=!1,this._updateIdx(),void(this.conf.unloading||this._adjustCont(this._idd))}if(1==e?i=!1:void 0===i?i=document.body:"string"==typeof i&&(i=document.getElementById(i)),!1===i){if(1==this.conf.unloading&&null!=String(this.dataType).match(/ajax/)&&null!=this.conf.url_data&&null!=this.conf.url_data.xml_doc){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(t){}this.conf.url_data.xml_doc.xmlDoc=null,this.conf.url_data.xml_doc=null}"url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor())}for(var n=this.cell.childNodes[this.conf.idx.cont];n.childNodes.length>0;)!1===i?n.removeChild(n.lastChild):(n.firstChild.style.display="none",i.appendChild(n.firstChild));this.conf.append_mode&&(n.style.overflow="",this.conf.append_mode=!1);var s="tabbar"==this.dataType;this.dataObj=null,this.dataType=null,i=n=null,1!=this.conf.unloading&&s&&(this.showHeader(!0),this._showBorders())},dhtmlXCellObject.prototype._attachFromCell=function(t){this.detachObject(!0);var e="layout";"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(e="window"),"function"==typeof window.dhtmlXWindowsCell&&t instanceof window.dhtmlXWindowsCell&&1==t.wins.w[t._idd].conf.parked&&t.wins._winCellSetOpacity(t._idd,"open",!1),"function"==typeof window.dhtmlXAccordionCell&&t instanceof window.dhtmlXAccordionCell&&0==t.conf.opened&&t._cellSetOpacity("open",!1);for(var i in t.dataNodes)this._attachObject(i,null,null,null,t.cell.childNodes[t.conf.idx[i]]),this.dataNodes[i]=t.dataNodes[i],t.dataNodes[i]=null,t.conf.ofs_nodes["sb"==i?"b":"t"][i]=!1,t._updateIdx();if(this._mtbUpdBorder(),null!=t.dataType&&null!=t.dataObj){for(this.dataType=t.dataType,this.dataObj=t.dataObj;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);t.dataType=null,t.dataObj=null,"grid"==this.dataType&&("window"==e&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);this.conf.view=t.conf.view,t.conf.view="def";for(var i in t.views)this.views[i]=t.views[i],t.views[i]=null,delete t.views[i];t._updateIdx(),t._adjustCont(),this._updateIdx(),this._adjustCont(),1==t.conf.progress?(t.progressOff(),this.progressOn()):this.progressOff(),"window"==e&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)},dhtmlXCellTop.prototype.setOffsets=function(t,e){var i=!1;for(var n in t){var s=n.charAt(0);void 0===this.conf.ofs[s]||isNaN(t[n])||(this.conf.ofs[s]=parseInt(t[n]),i=!0)}!1!==e&&"function"==typeof this.setSizes&&1==i&&this.setSizes()},dhtmlXCellTop.prototype.attachMenu=function(t){if(null==this.dataNodes.menu)return this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxcelltop_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(t),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(null==this.conf.ofs_menu&&(this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}),this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.menu},dhtmlXCellTop.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachToolbar=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxcelltop_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cont),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.toolbar},dhtmlXCellTop.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV"),this.dataNodes.ribbonObj.className="dhxcelltop_ribbon",this.base.insertBefore(this.dataNodes.ribbonObj,this.cont),this.dataNodes.ribbonObj.appendChild(document.createElement("DIV")),"object"==typeof t&&null!=t||(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.ribbonObj.firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t),this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())}),this.conf.ofs_nodes.t.ribbonObj=!0;var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e.setSizes()}),this.setSizes(),t.parnt=null,t=null,this.dataNodes.ribbon}},dhtmlXCellTop.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.attachStatusBar=function(t){if(!this.dataNodes.sbObj)return void 0===t&&(t={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",null!=this.cont.nextSibling?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof t.text&&t.text.length>0?t.text:"&nbsp;")+"</div>","number"==typeof t.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=t.height+"px"),this.dataNodes.sbObj.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(t){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj},dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())},dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")},dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")},dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")},dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")},dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")},dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")},dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")},dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")},dhtmlXCellTop.prototype._mtbShowHide=function(t,e){null!=this.dataNodes[t]&&(this.dataNodes[t].style.display=e,this.setSizes())},dhtmlXCellTop.prototype._mtbUnload=function(t,e){this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon()},dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj},dhtmlXCellTop.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className="dhxcelltop_progress",this.base.appendChild(t);var e=document.createElement("DIV");if("material"==this.conf.skin&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge))e.className="dhxcelltop_progress_svg",e.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>';else{(e=document.createElement("DIV")).className="dhxcelltop_progress_img"}this.base.appendChild(e),t=e=null}},dhtmlXCellTop.prototype.progressOff=function(){if(this.conf.progress){for(var t={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0,dhxcelltop_progress_svg:!0},e=0;e<this.base.childNodes.length;e++)void 0!==this.base.childNodes[e].className&&1==t[this.base.childNodes[e].className]&&(t[this.base.childNodes[e].className]=this.base.childNodes[e]);for(var i in t)1!=t[i]&&this.base.removeChild(t[i]),t[i]=null;this.conf.progress=!1,t=null}},dhtmlXCellTop.prototype.attachHeader=function(t,e){null==this.dataNodes.haObj&&("object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(e||t.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(t),t.style.visibility="visible",t=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px",this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px",this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())},dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;this.dataNodes.haObj.childNodes.length>0;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj),this.dataNodes.haObj=null,this.detachEvent(this.dataNodes.haEv),this.dataNodes.haEv=null,this.conf.ofs_nodes.t.haObj=!1,delete this.dataNodes.haEv,delete this.dataNodes.haObj,this.conf.unloading||this.setSizes()}},dhtmlXCellTop.prototype.attachFooter=function(t,e){if(null==this.dataNodes.faObj){"object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.faObj=document.createElement("DIV"),this.dataNodes.faObj.className="dhxcelltop_ftr",this.dataNodes.faObj.style.height=(e||t.offsetHeight)+"px";var i=this.dataNodes.sbObj||this.cont;this.base.lastChild==i?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,i.nextSibling),this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px",this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px",this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.dataNodes.faObj.appendChild(t),t.style.visibility="visible",i=t=null,this.conf.ofs_nodes.b.faObj=!0,this.setSizes()}},dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;this.dataNodes.faObj.childNodes.length>0;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj),this.dataNodes.faObj=null,this.detachEvent(this.dataNodes.faEv),this.dataNodes.faEv=null,this.conf.ofs_nodes.b.faObj=!1,delete this.dataNodes.faEv,delete this.dataNodes.faObj,this.conf.unloading||this.setSizes()}},dhtmlXCalendarObject.prototype.lang="en",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(t){var e=this,i=function(t){return 1==String(t).length?"0"+String(t):t},n=function(t,e){return"<span class='dhtmlxcalendar_month_label_"+t+"'>"+e+"</span>"},s=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(s){switch(s){case"%m":return n("month",i(t.getMonth()+1));case"%n":return n("month",t.getMonth()+1);case"%M":return n("month",e.langData[e.lang].monthesSNames[t.getMonth()]);case"%F":return n("month",e.langData[e.lang].monthesFNames[t.getMonth()]);case"%y":return n("year",i(t.getYear()%100));case"%Y":return n("year",t.getFullYear());case"%%":return"%";default:return s}});return e=i=n=null,s},dhtmlXCalendarObject.prototype.enableIframe=function(t){1==t?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._dateStrings=function(){var t=this.langData[this.lang];return{monthFullName:t.monthesFNames,monthShortName:t.monthesSNames,dayFullName:t.daysFNames,dayShortName:t.daysSNames}},dhtmlXCalendarObject.prototype._strToDate=function(t,e){return window.dhx4.str2date(t,e||this._dateFormat,this._dateStrings())},dhtmlXCalendarObject.prototype._dateToStr=function(t,e){return window.dhx4.date2str(t,e||this._dateFormat,this._dateStrings())},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(t){var e=this;return this.leftCalendar=new dhtmlXCalendarObject(t),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(t),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(t){e._updateRange("rightCalendar",t,null),e._evOnClick(["left",t])}),this.rightCalendar.attachEvent("onClick",function(t){e._updateRange("leftCalendar",null,t),e._evOnClick(["right",t])}),this.leftCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["left",t])}),this.rightCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["right",t])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(t){this.leftCalendar.setDateFormat(t),this.rightCalendar.setDateFormat(t)},this.setDates=function(t,e){null!=t&&this.leftCalendar.setDate(t),null!=e&&this.rightCalendar.setDate(e),this._updateRange()},this._updateRange=function(t,e,i){3==arguments.length?("leftCalendar"==t?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,i):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,e=null},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnBeforeChange=function(t){return this.callEvent("onBeforeChange",t)},window.dhx4._eventable(this),this},dhtmlXCombo.prototype.setName=function(t){this.conf.form_name=t,this.base.childNodes[1].name=t,this.base.childNodes[2].name=t.replace(/(\[.*)?$/,"_new_value$1")},dhtmlXCombo.prototype.readonly=function(t){window.dhx4.s2b(t)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)},dhtmlXCombo.prototype.setPlaceholder=function(t){void 0!==t&&null!=t||(t=""),this.base.firstChild.setAttribute("placeholder",String(t))},dhtmlXCombo.prototype.setTemplate=function(t){for(var e in t)void 0!==this.conf.template[e]&&(this.conf.template[e]="header"==e?window.dhx4.s2b(t[e]):String(t[e]));null!=t.columns?this._mcMakeTemplate(t.columns):this._mcDetachHeader();for(var e in this.t)this.t[e].obj.setText(this.t[e].item,this.t[e].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(t){t!=this.conf.skin&&(this.conf.skin=t,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(null!=this.hdr?" dhxcombolist_multicolumn":""),null!=this.hdr&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"),this.conf.i_ofs="material"==t?26:23,this._adjustBase())},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(t){for(var e=0;e<this.list.childNodes.length;e++)t.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(t,e){null!=t&&(this.base.firstChild.style.fontSize=t),null!=e&&(this.list.style.fontSize=e)},dhtmlXCombo.prototype.getOption=function(t){for(var e=null,i=null,n=0;n<this.list.childNodes.length;n++)if(null==e){var s=this.list.childNodes[n]._optId;this.t[s].obj.getValue(this.t[s].item)==t&&(e=s,i=n)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getOptionByIndex=function(t){return t<0?null:null==this.list.childNodes[t]?null:this._getOption(this.list.childNodes[t]._optId,t)},dhtmlXCombo.prototype.getOptionByLabel=function(t){for(var e=null,i=null,n=0;n<this.list.childNodes.length;n++)if(null==e){var s=this.list.childNodes[n]._optId;this.t[s].obj.getText(this.t[s].item,!0)==t&&(e=s,i=n)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(t){var e=this.getOption(t);return null!=e?e.index:-1},dhtmlXCombo.prototype.setComboText=function(t){1==this.conf.allow_free_text&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=t,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())},dhtmlXCombo.prototype.setComboValue=function(t){var e=this.getOption(t);null!=e?this.selectOption(e.index):(this.conf.last_value=t,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(t,e,i){if(!(t<0||t>=this.list.childNodes.length)){var n=this.list.childNodes[t]._optId;this._setSelected(n,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null),this.base.firstChild.value="",0!=this.conf.f_mode&&this._filterOpts(!0),this._hideList(),this._updateTopImage(null),this._confirmSelect("script")},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(t){t=void 0===t||window.dhx4.s2b(t),this.conf.enabled!=t&&(this.conf.enabled=t,t?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(t){t=void 0===t||window.dhx4.s2b(t),this.enable(!t)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(t){t=void 0===t||window.dhx4.s2b(t),this.base.style.display=1==t?"":"none"},dhtmlXCombo.prototype.hide=function(t){void 0===t&&(t=!0),this.show(!t)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.setFilterHandler=function(t){"function"==typeof t?(this.conf.f_func=t,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):"string"==typeof t&&"function"==typeof window[t]?(this.conf.f_func=window[t],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null},dhtmlXCombo.prototype.enableFilteringMode=function(t,e,i,n){1==t||"between"==t?(this.conf.f_mode=1==t?"start":"between",null!=e?(this.conf.f_url=e,this.conf.f_cache=window.dhx4.s2b(i),this.conf.f_dyn=window.dhx4.s2b(n)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(t,e){for(var i=0;i<this.list.childNodes.length;i++){var n=t.apply(window,[this._getOption(this.list.childNodes[i]._optId,i)]);this.list.childNodes[i].style.display=!0===n?"":"none"}void 0!==e&&1!=e||this._showList(!0)},dhtmlXCombo.prototype.sort=function(t){for(var e=[],i=0;i<this.list.childNodes.length;i++){var n=this.list.childNodes[i]._optId;e.push([n,this._getOption(n,i)])}for("asc"==t||"desc"==t?(k=!0,e.sort(function(e,i){e=e[1].text_option.toLowerCase(),i=i[1].text_option.toLowerCase();var n="asc"==t?1:-1;return e>i?n:-1*n})):"function"!=typeof t&&"function"!=typeof window[t]||("function"==typeof window[t]&&(t=window[t]),e.sort(function(e,i){return t.apply(window,[e[1],i[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(i=0;i<e.length;i++)this.list.appendChild(this.t[e[i][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(t){t=void 0===t||window.dhx4.s2b(t),this.conf.f_ac=t},dhtmlXCombo.prototype.disableAutocomplete=function(t){t=void 0===t||window.dhx4.s2b(t),this.enableAutocomplete(!t)},dhtmlXCombo.prototype.allowFreeText=function(t,e){this.conf.allow_free_text=void 0===t||window.dhx4.s2b(t),this.conf.free_text_empty=void 0!==e&&window.dhx4.s2b(e)},dhtmlXCombo.prototype._checkForMatch=function(t){for(var e=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),i=null,n=this.list.firstChild;null!=n;){if(""==n.style.display&&null!=n._optId){e==window.dhx4.trim(this.t[n._optId].obj.getText(n,!0)).toLowerCase()&&(i=n._optId,n=null)}null!=n&&(n=n.nextSibling)}null==this.conf.last_match?null!=i?(this._setSelected(i,!0,!0),this.conf.last_match=i):"between"==this.conf.f_mode&&1!=t||(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=i?i!=this.conf.last_match&&(this._setSelected(i,!0,!0),this.conf.last_match=i):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(t,e){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,t,e)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(t){if(0!=this._getListVisibleCount())if(this._isListVisible())this._checkListHeight();else{this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1),this.list.style.visibility="hidden",this.list.style.display="",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display);var e=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0;this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+e+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-e+"px"),this._checkListHeight(),this.list.style.visibility="visible",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.visibility="visible"),this.callEvent("onOpen",[])}else t&&this._isListVisible()&&this._hideList()},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var t=0,e=0;e<this.list.childNodes.length;e++)t+=""==this.list.childNodes[e].style.display?1:0;return t},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var t=this.list.firstChild;null!=t;)""==t.style.display?(this.conf.item_h=t.offsetHeight+(null!=this.hdr?-1:0),t=null):t=t.nextSibling;t=null}var e=window.dhx4.screenDim(),i=window.dhx4.absTop(this.base),n=this.base.offsetHeight,s=null!=this.hdr&&1==this.conf.template.header?this.hdr.offsetHeight:0,o=Math.max(0,Math.floor((i+s-e.top)/this.conf.item_h)),l=Math.max(0,Math.floor((e.bottom-(i+n+s))/this.conf.item_h)),r=this._getListVisibleCount();l<Math.min(this.conf.opts_count_min,r)&&o>l&&(l=null);var a=Math.min(null==l?o:l,this.conf.opts_count,r),h=a<r?a*this.conf.item_h+"px":"",d=this.conf.sp[this.conf.skin][null!=this.hdr&&1==this.conf.template.header?"hdr_ofs":"list_ofs"];this.list.style.height=h,this.list.style.top=(null==l?i-this.list.offsetHeight+d:i+n+s-d)+"px",null!=this.hdr&&1==this.conf.template.header&&(this.hdr.style.top=(null==l?i-s-this.list.offsetHeight+d:i+n-d)+"px")}},dhtmlXCombo.prototype._scrollToItem=function(t){var e=this.t[t].item.offsetTop,i=e+this.t[t].item.offsetHeight,n=this.list.scrollTop,s=n+this.list.clientHeight;e<n?this.list.scrollTop=e+(null!=this.hdr&&1==this.conf.template.header?1:0):i>s&&(this.list.scrollTop=i-this.list.clientHeight+(null!=this.hdr&&1==this.conf.template.header?-this.conf.sp[this.conf.skin].scr_ofs:0))},dhtmlXCombo.prototype._setSelected=function(t,e,i,n){this.conf.temp_selected=null,i&&this._updateTopImage(t),null==t||this.conf.last_hover!=t?(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==t&&this.callEvent("onSelectionChange",[])),null!=t&&(this.t[t].obj.setSelected(this.t[t].item,!0),this.conf.last_hover=t,1!=n&&(this.conf.temp_selected=t,this.callEvent("onSelectionChange",[])),"select"==this.conf.s_mode&&this.t[t].item==this.t[t].item.parentNode.lastChild&&this._subloadRequest(),e&&this._scrollToItem(t))):e&&this._scrollToItem(t)},dhtmlXCombo.prototype._subloadRequest=function(){if(null!=this.conf.f_url&&1==this.conf.f_dyn&&0==this.conf.f_dyn_end){var t="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,e=this,i=function(t){e.conf.f_cache&&e.conf.f_cache_data[e.conf.f_mask].data.push(t.xmlDoc.responseXML);var n=e.list.childNodes.length;e.conf.f_loading=!0,e.load(t.xmlDoc.responseXML),e.conf.f_loading=!1,n==e.list.childNodes.length&&(e.conf.f_dyn_end=!0,e.conf.f_cache&&(e.conf.f_cache_data[e.conf.f_mask].dyn_end=!0)),i=e=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,t,i):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+t,i)}},dhtmlXCombo.prototype.addOption=function(t,e,i,n,s){var o=null;if(t instanceof Array){for(var l=0;l<t.length;l++)if(void 0!==t[l])if(t[l]instanceof Array)r=this._renderOption({value:t[l][0],text:t[l][1],css:t[l][2],img:t[l][3]}),null==o&&1==window.dhx4.s2b(t[l][4])&&(o=r);else{r=this._renderOption(t[l]);null==o&&1==window.dhx4.s2b(t[l].selected)&&(o=r)}}else{var r=this._renderOption({value:t,text:e,css:i,img:n});null==o&&1==window.dhx4.s2b(s)&&(o=r)}null!=o&&(this._setSelected(o,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(t,e,i,n){var s=this._getOptionId(t);null!=s&&(this.t[s].obj.update(this.t[s].item,{value:e,text:i,css:n}),this.conf.last_selected==s&&(this.conf.last_text=this.base.firstChild.value=this.t[s].obj.getText(this.t[s].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(t){for(var e in this.t){this.t[e].obj.getValue(this.t[e].item)==t&&this._removeOption(e)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(t){t=void 0===t||window.dhx4.s2b(t);for(var e in this.t)this._removeOption(e);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,1==t&&this._hideList()},dhtmlXCombo.prototype._renderOption=function(t){var e=window.dhx4.newId(),i=document.createElement("DIV");i._optId=e,i._tpl=this.conf.template,void 0===t.img&&void 0!==t.img_src&&(t.img=t.img_src,delete t.img_src),void 0===t.img_dis&&void 0!==t.img_src_dis&&(t.img_dis=t.img_src_dis,delete t.img_src_dis),t.img_path=this.conf.img_path,t.img_def=this.conf.img_def,t.img_def_dis=this.conf.img_def_dis,this.list.appendChild(i);var n=this._isListVisible()&&1==window.dhx4.isFF;if(1==n){this.list.scrollTop;this.list.scrollTop-=1}return null!=this.hdr&&(t.multicol=!0),this.t[i._optId]={obj:this.modes[this.conf.opts_type].render(i,t),item:i,conf:{type:this.conf.opts_type}},i=null,1==n&&(this.list.scrollTop+=1),e},dhtmlXCombo.prototype._removeOption=function(t){this.t[t].obj.destruct(this.t[t].item),this.t[t].obj=null,this.t[t].item.parentNode.removeChild(this.t[t].item),this.t[t].item=null,this.t[t].conf=null,this.t[t]=null,delete this.t[t],this.conf.last_hover==t&&(this.conf.last_hover=null),this.conf.last_selected==t&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(t,e){var i=!1;if(void 0===e&&(e=!0),this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)i=i||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(!0),void this._updateTopImage(this.conf.last_selected);i=i||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=t&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),e&&this._hideList(),1==i&&"onInit"!=t&&"onDelete"!=t&&(this.callEvent("onSelectionChange",[]),this.callEvent("onChange",[this.conf.last_value,this.conf.last_text]))},dhtmlXCombo.prototype._cancelSelect=function(t){this._hideList(),1==t&&0==this.conf.allow_free_text&&1==this.conf.free_text_empty?(this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="",this.base.childNodes[2].value="false"):this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(t,e){if(!this.t[t])return null;if(void 0===e&&(e=-1),e<0)for(var i=0;i<this.list.childNodes.length;i++)e<0&&this.list.childNodes[i]._optId==t&&(e=i);var n={value:this.t[t].obj.getValue(this.t[t].item),text:this.t[t].obj.getText(this.t[t].item),text_input:this.t[t].obj.getText(this.t[t].item,!0),text_option:this.t[t].obj.getText(this.t[t].item,null,!0),css:this.t[t].obj.getCss(this.t[t].item),selected:t==this.conf.last_selected,index:e};if("function"==typeof this.t[t].obj.getExtraData){var s=this.t[t].obj.getExtraData(this.t[t].item);for(var o in s)void 0===n[o]&&(n[o]=s[o])}return n},dhtmlXCombo.prototype._getOptionProp=function(t,e,i){if(null!=t){var n=this._getOption(t);if(null!=n)return n[e]}return i},dhtmlXCombo.prototype._getOptionId=function(t){for(var e=null,i=0;i<this.list.childNodes.length;i++)if(null==e){var n=this.list.childNodes[i]._optId;t==this.t[n].obj.getValue(this.t[n].item)&&(e=n)}return e},dhtmlXCombo.prototype._getOptionValue=function(t){return this._getOptionProp(t,"value",null)},dhtmlXCombo.prototype.setSize=function(t){this.conf.combo_width=parseInt(t)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),this.base.style.width=Math.max(0,this.conf.combo_width)+"px",this._adjustBase()},dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?this.conf.i_ofs+"px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(t){this.conf.opts_width=parseInt(t)||null},dhtmlXCombo.prototype.setOptionIndex=function(t,e){if(!(isNaN(e)||e<0)){var i=this.getOption(t);if(null!=i&&e!=i.index){var n=this.list.childNodes[i.index];n.parentNode.removeChild(n),null!=this.list.childNodes[e]?this.list.insertBefore(n,this.list.childNodes[e]):this.list.appendChild(n),n=null}}},dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length},dhtmlXCombo.prototype._mcMakeTemplate=function(t){var e="",i="";this.conf.col_w=0;for(var n=0;n<t.length;n++){var s=Number(parseInt(t[n].width)||50),o=t[n].css||"",l=0==n&&1==window.dhx4.isIE6?"_first":"";i+="<div class='dhxcombo_cell"+l+" "+o+"' style='width:"+s+"px;'><div class='dhxcombo_cell_text'>"+(t[n].option||"&nbsp;")+"</div></div>",e+="<div class='dhxcombo_hdrcell"+l+" "+o+"' style='width:"+s+"px;'><div class='dhxcombo_hdrcell_text'>"+(t[n].header||"&nbsp;")+"</div></div>",this.conf.col_w+=s+1}s=500;var r=document.createElement("DIV");r.style.position="absolute",r.style.top="10px",r.style.left=2*-s+"px",r.style.width=s+"px",r.style.height="50px",r.style.overflowY="scroll",r.innerHTML="<div>&nbsp;</div>",document.body.appendChild(r),this.conf.col_w+=s-r.firstChild.offsetWidth+10,r.parentNode.removeChild(r),r=null,this.conf.template.option=i,this._mcAttachHeader(e),this.list.className+=" dhxcombolist_multicolumn"},dhtmlXCombo.prototype._mcAttachHeader=function(t){null==this.hdr&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),"function"==typeof window.addEventListener?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),"checkbox"==this.conf.opts_type&&1==this.conf.combo_image&&(this.conf.combo_image=!1,null!=this.base.lastChild.className.match(/dhxcombo_top_image/)&&this.base.removeChild(this.base.lastChild),this._adjustBase())),this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+t+"</div>"},dhtmlXCombo.prototype._mcDetachHeader=function(){null!=this.hdr&&("function"==typeof window.addEventListener?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null),this.conf.col_w=null,this.conf.item_h=null},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(t,e,i,n){var s=t>=0&&t<this.list.childNodes.length?this.list.childNodes[t]._optId:null;if(null==s)return null;if("function"!=typeof this.t[s].obj[e])return null;for(var o=[this.t[s].item],l=2;l<arguments.length;l++)o.push(arguments[l]);return this.t[s].obj[e].apply(this.t[s].obj,o)},dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText=e.css,t._conf.css=e.css),this.setText(t,e.text),this},destruct:function(t){t._conf=null},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text)},setText:function(t,e,i){t._conf.text=e;var n="object"==typeof e?window.dhx4.template(t._tpl.option,this.replaceHtml(t._conf.text,i),!0):window.dhx4.trim(this.replaceHtml(t._conf.text,i)||"");t.lastChild.innerHTML=0==n.length?"&nbsp;":n},getText:function(t,e,i){return window.dhx4.s2b(e)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.input,t._conf.text,!0):window.dhx4.s2b(i)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.option,t._conf.text,!0):t._conf.text},getValue:function(t){return t._conf.value},getCss:function(t){return t._conf.css},setSelected:function(t,e){t.className="dhxcombo_option"+(e?" dhxcombo_option_selected":"")},isSelected:function(t){return String(t.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(t){return{type:"option"}},replaceHtml:function(t,e){if(1==this.html)return t;if(void 0!==e&&null!=e||(e={}),"object"==typeof t){var i={};for(var n in t)i[n]=1==e[n]?t[n]:this.replaceHtml(t[n])}else i=(t||"").replace(/[\<\>\&\s]/g,function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return t});return i}},dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!1,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(t,e){null==this.image_css_regexp&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))),t._conf={value:e.value,css:"",checked:window.dhx4.s2b(e.checked)},t.className="dhxcombo_option";var i={};return 1==e.multicol?(e.text.checkbox="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div>&nbsp;",i.checkbox=!0,t.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"):t.innerHTML="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text,i),this},setChecked:function(t,e){t._conf.checked=window.dhx4.s2b(e);var i=String(this.image_css).replace("#state#",t._conf.checked?"1":"0");this._changeChbxCss(t.childNodes,i)},_changeChbxCss:function(t,e){for(var i=0;i<t.length;i++)null!=t[i].tagName&&null!=t[i].className&&null!=t[i].className.match(this.image_css_regexp)?t[i].className=e:t[i].childNodes.length>0&&this._changeChbxCss(t[i].childNodes,e)},isChecked:function(t){return 1==t._conf.checked},getExtraData:function(t){return{type:"checkbox",checked:t._conf.checked}},optionClick:function(t,e,i){for(var n=!0,s=e.target||e.srcElement;1==n&&null!=s&&s!=t&&null!=s.className;)if(null!=s.className.match(this.image_css_regexp)){var o=[t._conf.value,!t._conf.checked];!0===i.callEvent("onBeforeCheck",o)&&(this.setChecked(t,!this.isChecked(t)),i.callEvent("onCheck",o)),n=!1,o=null}else s=s.parentNode;return s=i=t=null,n},getTopImage:function(t,e){return""},topImageClick:function(t,e){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.setChecked=function(t,e){this.doWithItem(t,"setChecked",e)},dhtmlXCombo.prototype.getChecked=function(t){for(var e=[],i=0;i<this.list.childNodes.length;i++)this.isChecked(i)&&e.push(this._getOptionProp(this.list.childNodes[i]._optId,"value",""));return e},dhtmlXCombo.prototype.isChecked=function(t){return this.doWithItem(t,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,html:!1,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis),this},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis)},setImage:function(t,e,i,n,s,o){e=null!=e&&e.length>0?n+e:null!=s&&s.length>0?n+s:null,i=null!=i&&i.length>0?n+i:null!=o&&o.length>0?n+o:1==o?e:null,t._conf.img=e,t._conf.img_dis=i,t.firstChild.style.backgroundImage=null!=e?"url("+e+")":"none"},getExtraData:function(t){return{type:"image"}},getTopImage:function(t,e){var i=e?"img":"img_dis";return null!=t&&null!=t._conf[i]?"<div class='"+this.image_css+"' style='background-image:url("+t._conf[i]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(t,e){null!=t&&(this.conf.img_def=t),null!=e&&(this.conf.img_def_dis=e)},dhtmlXCombo.prototype.setImagePath=function(t){this.conf.img_path=t},dhtmlXColorPicker.prototype.linkTo=function(t,e,i){1==arguments.length&&(e=i=t);var n;return t=t||null,i=i||null,"string"==typeof e&&(e=document.getElementById(e)),(n=this._addNode(e,t,i))&&this._attachEventsToNode(n),n},dhtmlXColorPicker.prototype._isBaseNode=function(t){return t==this.base||t.parentElement!=document.body&&(!!t.parentElement&&this._isBaseNode(t.parentElement))},dhtmlXColorPicker.prototype._hasInput=function(t){var e,i,n=!1;for(i=this._nodes.length,e=0;e<i;e++)if(this._nodes[e].valueCont==t){n=!0;break}return n},dhtmlXColorPicker.prototype._findNodesByArray=function(t){var e,i,n;for(i=t.length,e=0;e<i;e++)(n="string"==typeof t[e]?document.getElementById(t[e]):t[e])&&this._addNode(n)},dhtmlXColorPicker.prototype._addNode=function(t,e,i){var n,s,o,l;return n="string"==typeof t?document.getElementById(t):t,"string"==typeof e&&(e=document.getElementById(e)),"string"==typeof i&&(i=document.getElementById(i)),n?(dhx4.s2b(n.getAttribute("colorbox"))&&((s=document.createElement("div")).style.width=n.offsetWidth+"px",s.style.height=n.offsetHeight+"px",n.style.width=n.offsetWidth-(n.offsetHeight+8)+"px",n.parentNode.insertBefore(s,n),s.style.position="relative",o=document.createElement("div"),s.appendChild(n),s.appendChild(o),o.className="dhxcp_colorBox",n.className+=" dhxcp_colorInput",o.style.width=o.style.height=n.offsetHeight+"px"),l={node:n,valueColor:void 0!=e?e:o||n,valueCont:void 0!=i?i:n,conf:{customColors:null!=n.getAttribute("customcolors")?dhx4.s2b(n.getAttribute("customcolors")):null,selectedColor:n.getAttribute("selectedcolor")}},this._nodes.push(l),this.activeNode||(this.activeNode=l),l):null},dhtmlXColorPicker.prototype.getNode=function(t){var e=null,i=null;return void 0!=(e="string"==typeof t?document.getElementById(t):t).tagName&&(i=this._getNodeByElement(e)),i},dhtmlXColorPicker.prototype._getNodeByElement=function(t){var e,i,n=null;for(i=this._nodes.length,e=0;e<i;e++)this._nodes[e].node==t&&(n=this._nodes[e]);return n},dhtmlXColorPicker.prototype._getNodeByValueCont=function(t){var e,i,n=null;for(i=this._nodes.length,e=0;e<i;e++)this._nodes[e].valueCont&&this._nodes[e].valueCont==t&&(n=this._nodes[e]);return n},dhtmlXColorPicker.prototype.initMemoryColors=function(){var t=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>",this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]),this.memory.onSelect=this._onSelectMemoryEl,this.memory.onSave=function(e){var i=t.colorAIP.rgb2hex({r:e.red,g:e.green,b:e.blue});t.callEvent("onSaveColor",[i])};var e=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild,"function"==typeof window.addEventListener?e.addEventListener("click",this.saveColor,!1):e.attachEvent("onclick",this.saveColor)},dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(t,e,i){var n,s,o;n=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*t/359)+this.configColorArea.minX,s=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-i)/100)+this.configColorArea.minY,o=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-e)/100)+this.configColorArea.minY,this._setColorAreaXY(n,s),this._setContrastY(o)},dhtmlXColorPicker.prototype._parseColor=function(t){if(t instanceof Array)var e={r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2])};else if("string"==typeof t)if(t=t.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(t)){var i=t.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);e={r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}}else e=this.colorAIP.hex2rgb(t);return e},dhtmlXColorPicker.prototype.setColor=function(t){var e=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),i=this._parseColor(t),n=i instanceof Object;if(n=n&&0<=i.r&&i.r<=255,n=n&&0<=i.g&&i.g<=255,!(n=n&&0<=i.b&&i.b<=255))return e;var s=this.colorAIP.rgb2hex({r:i.r,g:i.g,b:i.b});if(s==e)return e;this.value.red=i.r,this.value.green=i.g,this.value.blue=i.b;var o=this.colorAIP.rgb2hsl(i.r/255,i.g/255,i.b/255);return this.value.hue=Math.round(o.h),this.value.sat=Math.round(100*o.s),this.value.lum=Math.round(100*o.l),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),s},dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]},dhtmlXColorPicker.prototype._attachEventsToNode=function(t){"function"==typeof window.addEventListener?t.node.addEventListener("click",this._doOnClickByNode,!1):t.node.attachEvent("onclick",this._doOnClickByNode),t.valueCont&&"input"==t.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(t.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),t.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(t.valueCont.attachEvent("onfocus",this._doOnFocusByInput),t.valueCont.attachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype._detachEventsFromNode=function(t){"function"==typeof window.addEventListener?t.node.removeEventListener("click",this._doOnClickByNode,!1):t.node.detachEvent("onclick",this._doOnClickByNode),t.valueCont&&"input"==t.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(t.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),t.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(t.valueCont.detachEvent("onfocus",this._doOnFocusByInput),t.valueCont.detachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype.show=function(t){var e=!1;void 0!=t&&(this.activeNode=this.getNode(t)||this.activeNode),this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value),this.activeNode?(e=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):e=this.conf.customColors,e?this.showMemory():this.hideMemory(),this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible","function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode),this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode),this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.setPosition=function(t,e){var i=null,n=parseInt(t),s=parseInt(e);isNaN(n)&&(i={right:"right",bottom:"bottom"}[t.toLowerCase()]?t:null),this.base._dhx_remove?null==i||(this.conf.position=i,this._refreshPosition(i)):isNaN(n)||isNaN(s)||(this._globalNode.style.left=n+"px",this._globalNode.style.top=s+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))},dhtmlXColorPicker.prototype._initListenerInput=function(){var t=this;this._inputListenerId=this._inputListenerId||setInterval(function(){t._refreshValueByInput()},70)},dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)},dhtmlXColorPicker.prototype._refreshValueByInput=function(){var t=this.activeNode.valueCont.value,e=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(t)&&t!=e&&(this.setColor(t),this.callEvent("onSelect",[t,this.activeNode.node]))},dhtmlXColorPicker.prototype._refreshPosition=function(t){if(null!=this.activeNode){var e=dhx4.absTop(this.activeNode.node),i=dhx4.absLeft(this.activeNode.node),n=dhx4.screenDim(),s=this._globalNode.offsetWidth,o=this._globalNode.offsetHeight,l=0;switch(t=t||this.conf.position){case"bottom":l=e+this.activeNode.node.offsetHeight+this.conf.indent;(r=i)+s>n.left+n.right&&(r=i+this.activeNode.node.offsetWidth-s),r<n.left&&(r=i),l+o>n.top+n.bottom&&(l=e-o-this.conf.indent),l-n.top<0&&(l=n.top+this.conf.indent),this._globalNode.style.top=l+"px",this._globalNode.style.left=r+"px";break;default:var r=i+this.activeNode.node.offsetWidth+this.conf.indent;l=e,"right"==t&&(r+s>n.left+n.right&&(r=i-s-this.conf.indent),r<n.left&&(r=i+this.activeNode.node.offsetWidth+this.conf.indent)),n.bottom-(l+o)<=0&&(l=e+this.activeNode.node.offsetHeight-o),l-n.top<0&&(l=n.top+this.conf.indent),this._globalNode.style.left=r+"px",this._globalNode.style.top=l+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}},dhtmlXColorPicker.prototype.isVisible=function(){return this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base},dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),void 0!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119},dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}},dhtmlXColorPicker.prototype.loadUserLanguage=function(t){"function"==typeof this._mergeLangModules&&this._mergeLangModules(),this.conf.lang=t,this._refreshLanguage()},dhtmlXColorPicker.prototype._refreshLanguage=function(){var t,e=this.i18n[this.conf.lang];for(t in e)this._labelNodes[t]&&(this._labelNodes[t].innerHTML=e[t])},dhtmlXColorPicker.prototype._setColorAreaXY=function(t,e){var i=this.configColorArea;t=parseInt(t),i.minX>t?this.conf.x=i.minX:t>i.maxX?this.conf.x=i.maxX:isNaN(t)||(this.conf.x=t),e=parseInt(e),i.minY>e?this.conf.y=i.minY:e>i.maxY?this.conf.y=i.maxY:isNaN(e)||(this.conf.y=e),this._refreshLines()},dhtmlXColorPicker.prototype._setColorByXYC=function(t){t=t||!1,this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX)),this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY)),this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var e=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*e.r),this.value.green=Math.round(255*e.g),this.value.blue=Math.round(255*e.b),t||this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue()},dhtmlXColorPicker.prototype._setContrastY=function(t){var e=this.configColorArea;t=parseInt(t),isNaN(t)||(this.conf.c=Math.min(Math.max(e.minY,t),e.maxY)),this._refreshContrastLine()},dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue,this._controllerNodes.sat.value=this.value.sat,this._controllerNodes.lum.value=this.value.lum,this._controllerNodes.red.value=this.value.red,this._controllerNodes.green.value=this.value.green,this._controllerNodes.blue.value=this.value.blue},dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var t=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=t,this.callEvent("onChange",[t])},dhtmlXColorPicker.prototype._refreshContrast=function(){var t=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),e=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),i=this._checkIeVersion();if(i&&i<=9){var n=this._controllerNodes.contrastArea.firstChild;n==this._controllerNodes.contrast_line&&((n=document.createElement("div")).className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(n),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line));var s=this.colorAIP.rgb2hex({r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b)}),o=this.colorAIP.rgb2hex({r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b)});n.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+o+"', endColorstr='"+s+"', GradientType=0)"}else{t=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)];var l="linear-gradient(rgb("+(e=[Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)]).join(",")+"), rgb("+t.join(",")+"))";1==window.dhx4.isKHTML&&null!=navigator.userAgent.match(/Windows/gi)&&(l="-webkit-"+l),this._controllerNodes.contrastArea.style.backgroundImage=l}},dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px",this._controllerNodes.h_line.style.top=this.conf.y+"px"},dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"},dhtmlXColorPicker.prototype._getOffsetPosition=function(t,e){var i={x:NaN,y:NaN},n=t.target||t.srcElement;return n==e?(i.x=void 0!=t.offsetX?t.offsetX:t.layerX,i.y=void 0!=t.offsetY?t.offsetY:t.layerY):n==this._controllerNodes.v_line?i.y=void 0!=t.offsetY?t.offsetY:t.layerY:i.x=void 0!=t.offsetX?t.offsetX:t.layerX,i},dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(t){var e=t.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=e?{r:parseInt("0x"+e[2]),g:parseInt("0x"+e[3]),b:parseInt("0x"+e[4])}:null},rgb2hex:function(t){var e=parseInt(t.r),i=parseInt(t.g),n=parseInt(t.b);return e=e||0,i=i||0,n=n||0,"#"+(e?e<16?"0"+e.toString(16):e.toString(16):"00")+(i?i<16?"0"+i.toString(16):i.toString(16):"00")+(n?n<16?"0"+n.toString(16):n.toString(16):"00")},rgb2hsl:function(t,e,i){var n,s,o,l=Math.max(t,e,i),r=Math.min(t,e,i);return o=.5*(l+r),l==r?n=0:l==t?(n=60*(e-i)/(l-r),e<i&&(n+=360)):n=l==e?60*(i-t)/(l-r)+120:60*(t-e)/(l-r)+240,s=0==o||l==r?0:o<=.5?.5*(l-r)/o:.5*(l-r)/(1-o),{h:n,s:s,l:o}},hsl2rgb:function(t,e,i){var n,s,o,l=[],r=[];s=2*i-(n=i<=.5?i*(1+e):i+e-i*e),o=t/360,l.push(o+1/3),l.push(o),l.push(o-1/3);for(var a=0;a<3;a++)l[a]<0?l[a]+=1:l[a]>1&&(l[a]-=1),l[a]<1/6?r.push(s+6*(n-s)*l[a]):l[a]<.5?r.push(n):l[a]<2/3?r.push(s+(n-s)*(2/3-l[a])*6):r.push(s);return{r:r[0],g:r[1],b:r[2]}}},dhtmlXColorPicker.prototype._checkIeVersion=function(){var t=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return t&&t[2]?parseInt(t[2]):null},dhtmlXColorPicker.prototype.setCustomColors=function(){null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0);var t,e,i,n,s,o;for(e=arguments.length,t=0;t<e;t++)if(arguments[t]instanceof Array)i=this._rgb2value(arguments[t][0],arguments[t][1],arguments[t][2]),this.memory.setValue(i,null,!1);else if("string"==typeof arguments[t]){if((n=arguments[t].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i))instanceof Array){i=this._rgb2value(n[1],n[2],n[3]),this.memory.setValue(i,null,!1);continue}if((n=arguments[t].match(/(#[\da-f]{6})/gi))instanceof Array)for(o=n.length,s=0;s<o;s++)i=this._hex2value(n[s]),this.memory.setValue(i,null,!1)}},dhtmlXColorPicker.prototype.getCustomColors=function(){var t=[];if(null!=this.memory&&1==this.conf.customColors)for(var e=0;e<this.memory.controllers.length;e++){var i=this.memory.controllers[e].value;t.push(this.colorAIP.rgb2hex({r:i.red,g:i.green,b:i.blue}))}return t},dhtmlXColorPicker.prototype._rgb2value=function(t,e,i){var n=this.colorAIP.rgb2hsl(t/255,e/255,i/255);return{red:t,green:e,blue:i,hue:Math.round(n.h),sat:Math.round(100*n.s),lum:Math.round(100*n.l)}},dhtmlXColorPicker.prototype._hex2value=function(t){var e,i;return e=this.colorAIP.hex2rgb(t),i=this.colorAIP.rgb2hsl(e.r/255,e.g/255,e.b/255),{red:e.r,green:e.g,blue:e.b,hue:Math.round(i.h),sat:Math.round(100*i.s),lum:Math.round(100*i.l)}},dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors(),this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory"),this.conf.customColors=!0},dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")),this.conf.customColors=!1},dhtmlXColorPicker.prototype.setSkin=function(t){if(1==this._skinCollection[t]){var e="dhtmlxcp_"+(this.skin||"dummy");if(this.base.className=this.base.className.replace(new RegExp(e),""),this.base.className+=" dhtmlxcp_"+t,this.skin=t,"material"==this.skin){var i={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(var n in i)this.i18n.en[n]=i[n]}null!=this.base.className.match(/dhxcp_shadow/)||dhx4.isIE6||dhx4.isIE7||dhx4.isIE8||(this.base.className+=" dhxcp_shadow")}},dhtmlXColorPicker.prototype.hideOnSelect=function(t){t=dhx4.s2b(t),this.conf.hideOnSelect=t},dhtmlXColorPicker.prototype._indexOf=function(t,e){var i,n=-1;for(i=t.length;i>=0;i--)if(t[i]==e){n=i;break}return n},dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var t=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null,"function"==typeof window.addEventListener?t.removeEventListener("click",this.saveColor,!1):t.detachEvent("onclick",this.saveColor),this.memory.remove(),this._controllerNodes.memory_block.innerHTML="",this.memory=null}},dhtmlXColorPicker.prototype.Memory=function(t){var e=this,i=null,n={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var t=this!=window?this:event.srcElement,n=n||t.dhxpc_memory;null!=i&&e.unSelect(),i=n,n.domElement.className+=" dhxcp_memory_el_select","function"==typeof e.onSelect&&e.onSelect(n)},this.onSelect=null,this.onSave=null,this._createMemoryController=function(t){var i={domElement:t,value:dhx4._copyObj(n)};return t.dhxpc_memory=i,"function"==typeof window.addEventListener?t.addEventListener("click",e.select,!1):t.attachEvent("onclick",e.select),i},this._findMemoryControllers=function(t){var e,i,n=t.getElementsByTagName("a"),s=[];for(i=n.length,e=0;e<i;e++)s.push(this._createMemoryController(n[e]));return s},this.controllers=this._findMemoryControllers(t),this.unSelect=function(){i&&(i.domElement.className=i.domElement.className.replace(/\s.*$/i,"")),i=null},this.setActiveNext=function(){var t,e=null;return null==i?i=this.controllers[0]:(e=this.getIndex(i),t=this.controllers.length,this.unSelect(),i=e+1<t?this.controllers[e+1]:this.controllers[0]),i.domElement.className+=" dhxcp_memory_el_next",i},this.setValue=function(t,e,n){null==(i=e||i)&&(i=this.controllers[0]),i.value.red=t.red,i.value.blue=t.blue,i.value.green=t.green,i.value.hue=t.hue,i.value.sat=t.sat,i.value.lum=t.lum,i.domElement.style.backgroundColor="rgb("+[t.red,t.green,t.blue].join(", ")+")",this.setActiveNext(),0!=n&&"function"==typeof this.onSave&&this.onSave(t)},this.clean=function(){for(var t,e=this.controllers.length,s=0;s<e;s++)(t=this.controllers[s]).value=dhx4._copyObj(n),t.domElement.style.backgroundColor="rgb("+[n.red,n.green,n.blue].join(", ")+")";this.unSelect(),i=this.controllers[0]},this.getIndex=function(t){var e,i,n=-1;for(i=this.controllers.length,e=0;e<i;e++)if(this.controllers[e]==t){n=e;break}return n},this.remove=function(){var t,e;for(e=this.controllers.length,t=0;t<e;t++)"function"==typeof window.addEventListener?this.controllers[t].domElement.removeEventListener("click",this.select,!1):this.controllers[t].domElement.detachEvent("onclick",this.select),delete this.controllers[t].domElement.dhxpc_memory;delete this.onSelect,delete this.controllers,delete this.onSave}},window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var t;this._controllerNodes.fr_cover||((t=document.createElement("IFRAME")).className="dhxcp_frm",t.border=0,t.frameBorder=0,this._controllerNodes.fr_cover=t),this.base._dhx_remove||this.base.insertBefore(t,this._globalNode)}),dhtmlXSlider.prototype._setOrient=function(t){t=t||!1,/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,"")),/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,"")),this._nodes.cont.className+=t?" dhxsl_cont_vr":" dhxsl_cont_hr"},dhtmlXSlider.prototype._getTouchCoord=function(t){var e=(null!=t.type.match(/mouse/)?"client":"page")+(1==this.conf.vertical?"Y":"X");return void 0!==t[e]&&0!=t[e]?t[e]:null!=t.touches&&null!=t.touches[0]?t.touches[0][e]||0:0},dhtmlXSlider.prototype._attachEvents=function(t){"function"==typeof window.addEventListener?(t.runner.addEventListener("mousedown",this._initMover,!1),t.runner.addEventListener("touchstart",this._initMover,!1),t.cont.addEventListener("mousedown",this._doOnSetValue,!1),t.cont.addEventListener("touchstart",this._doOnSetValue,!1),t.runner2&&(t.runner2.addEventListener("mousedown",this._initMover,!1),t.runner2.addEventListener("touchstart",this._initMover,!1))):(t.runner.attachEvent("onmousedown",this._initMover),t.cont.attachEvent("onmousedown",this._doOnSetValue),t.runner2&&t.runner2.attachEvent("onmousedown",this._initMover))},dhtmlXSlider.prototype._detachEvents=function(t){"function"==typeof window.addEventListener?(t.runner.removeEventListener("mousedown",this._initMover,!1),t.runner.removeEventListener("touchstart",this._initMover,!1),t.cont.removeEventListener("mousedown",this._doOnSetValue,!1),t.cont.removeEventListener("touchstart",this._doOnSetValue,!1),t.runner2&&(t.runner2.removeEventListener("mousedown",this._initMover,!1),t.runner2.removeEventListener("touchstart",this._initMover,!1))):(t.runner.detachEvent("onmousedown",this._initMover),t.cont.detachEvent("onmousedown",this._doOnSetValue),t.runner2&&t.runner2.detachEvent("onmousedown",this._initMover))},dhtmlXSlider.prototype._mergeConfig=function(t){for(var e in t)switch(e.toLowerCase()){case"min":case"max":case"size":case"step":case"value":case"inverse":this.conf[e]=t[e];break;case"tooltip":case"visible":case"vertical":case"disabled":case"range":case"bg":this.conf[e]=dhx4.s2b(t[e]);break;case"bg_mode":this.conf[e]={left:"left",right:"right"}[t[e]]||"left";break;case"parent":continue;case"skin":this.conf[e]=1==this._skinCollection[t[e]]?t[e]:null;break;default:this.conf[e]=t[e]}},dhtmlXSlider.prototype._readAttFormNode=function(t){var e,i,n=t.attributes,s=n.length,o={};for(e=0;e<s;e++)switch((i=n[e]).name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":o[i.name]=Number(i.value);break;case"skin":o[i.name]=i.value;break;case"vertical":case"disabled":case"visible":case"range":case"bg":o[i.name]=dhx4.s2b(i.value);break;case"linkto":o[i.name]=i.value;break;case"tooltip":o[i.name]=dhx4.s2b(i.value);break;case"bg_mode":o[i.name]={left:"left",right:"right"}[i.value]||"left"}return o},dhtmlXSlider.prototype._renderArgumets=function(t){var e,i,n={};for(i=t.length,e=0;e<i;e++)switch(e){case 0:n.parent=t[e];break;case 1:n.size=t[e];break;case 2:n.skin=t[e];break;case 3:n.vertical=t[e];break;case 4:n.min=t[e];break;case 5:n.max=t[e];break;case 6:n.value=t[e];break;case 7:n.step=t[e]}return n},dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXSlider.prototype._indexOf=function(t,e){var i,n=-1;for(i=t.length;i>=0;i--)if(t[i]==e){n=i;break}return n},dhtmlXSlider.prototype._refreshRunner=function(t){var e=1==this.conf.vertical?{x:"top",y:"left",ofs_w:"offsetHeight",ofs_h:"offsetWidth"}:{x:"left",y:"top",ofs_w:"offsetWidth",ofs_h:"offsetHeight"},i=this._nodes.cont[e.ofs_w]-this._nodes.runner[e.ofs_w],n=this._nodes.runner,s=this._nodes.runner2;if(null==t||0==t){var o=this._getCoord(i,this.conf.value instanceof Array?this.conf.value[0]:this.conf.value);n.style[e.x]=o+this.conf.border+"px",n.style[e.y]=Math.round((this._nodes.cont[e.ofs_h]-n[e.ofs_h])/2)+"px"}if(1==this.conf.range&&(null==t||1==t)){o=this._getCoord(i,this.conf.value[1]);s.style[e.x]=o+this.conf.border+"px",s.style[e.y]=Math.round((this._nodes.cont[e.ofs_h]-n[e.ofs_h])/2)+"px"}1==this.conf.range&&(n.style[e.x]==s.style[e.x]&&this.conf.value[1]==this.conf.max?2!=n.style.zIndex&&(n.style.zIndex=2):2==n.style.zIndex&&(n.style.zIndex=1)),n=s=null,this._refreshBG()},dhtmlXSlider.prototype._setValueByCoord=function(t){var e,i,n=dhx4.absLeft(this._nodes.cont),s=dhx4.absTop(this._nodes.cont);i=this.conf.vertical?(t.y-s-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(t.x-n-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth),e=(this.conf.max-this.conf.min)*i+this.conf.min,this.setValue(e,!0)},dhtmlXSlider.prototype._getCoord=function(t,e){var i=((this.conf.inverse?this._inverseValue(e):e)-this.conf.min)/(this.conf.max-this.conf.min);return Math.round(t*i)},dhtmlXSlider.prototype._normalize=function(t,e,i){t=Number(t),t=Math.round(t/this.conf.step)*this.conf.step;var n=Math.pow(10,this.conf.decimals);return t=Math.round(t*n)/n,t=Math.max(e,Math.min(i,t))},dhtmlXSlider.prototype._normalizeRange=function(t,e,i){return t[1]<t[0]&&(t[1]=t[0]),t[0]=this._normalize(t[0],e,Math.min(i,t[1])),t[1]=this._normalize(t[1],Math.max(e,t[0]),i),t},dhtmlXSlider.prototype._refreshBG=function(){if(1==this.conf.bg){var t=this._nodes.track.firstChild,e=this._nodes.runner,i=e.nextSibling,n=1==this.conf.vertical?{x:"top",w:"height",ofs:"offsetHeight"}:{x:"left",w:"width",ofs:"offsetWidth"};if(1==this.conf.range)t.style[n.x]=Math.floor(parseInt(e.style[n.x])+e[n.ofs]/2)+"px",t.style[n.w]=Math.max(Math.floor(parseInt(i.style[n.x])+i[n.ofs]/2)-parseInt(t.style[n.x]),0)+"px";else{var s=1==this.conf.inverse?{left:"right",right:"left"}[this.conf.bg_mode]:this.conf.bg_mode;t.style[n.x]=("left"==s?"0":Math.floor(parseInt(e.style[n.x])+e[n.ofs]/2))+"px",t.style[n.w]=("left"==s?Math.floor(parseInt(e.style[n.x])+e[n.ofs]/2):this._nodes.track[n.ofs]-parseInt(t.style[n.x]))+"px"}t=e=i=null}},dhtmlXSlider.prototype._attachNode=function(t,e){this._detachNode(e);var i=t.tagName.toLowerCase();if(i){switch(this._attachedNode["node_"+e]=t,i){case"input":case"select":"function"==typeof window.addEventListener?(t.addEventListener("change",this._doOnChangeInput,!1),t.addEventListener("keydown",this._doOnKeyDown,!1)):(t.attachEvent("onchange",this._doOnChangeInput),t.attachEvent("onkeydown",this._doOnKeyDown)),this._attachedNode.setValue=function(t,e,i){var n=t instanceof Array?t[i||0]:t;this["node_"+(i||0)].value=dhtmlXSlider.prototype._atatchedNodeFixDec(n,e)};break;default:this._attachedNode.setValue=function(t,e,i){var n=t instanceof Array?t[i||0]:t;this["node_"+(i||0)].innerHTML=dhtmlXSlider.prototype._atatchedNodeFixDec(n,e)}}this._attachedNode.setValue(this.conf.value,this.conf.decimals,e)}},dhtmlXSlider.prototype._detachNode=function(t){var e=this._attachedNode["node_"+t];if(e){switch(e.tagName){case"input":case"select":"function"==typeof window.addEventListener?(e.removeEventListener("change",this._doOnChangeInput,!1),e.removeEventListener("keydown",this._doOnChangeInput,!1)):(e.detachEvent("change",this._doOnChangeInput),e.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode["node_"+t],delete this._attachedNode.setValue,e=null}},dhtmlXSlider.prototype._atatchedNodeFixDec=function(t,e){if(t=String(t),e>0){var i=t.match(/\.\d{1,}$/);null!=i&&(e=Math.max(e-i[0].length+1)),t+=t.indexOf(".")<0?".":"";for(var n=0;n<e;n++)t+="0"}return t},dhtmlXSlider.prototype._detectDecimals=function(){var t=this.conf.step.toString().match(/\.(\d*)$/);this.conf.decimals=null!=t?t[1].length:0},dhtmlXSlider.prototype.setSize=function(t){isNaN(t)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=t-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=t-this.conf.margin+"px"),this._refreshRunner())},dhtmlXSlider.prototype.setSkin=function(t){t=t.toLowerCase();var e,i,n=-1;if((e=this.base.className.match(/\S\w+/gi))instanceof Array){for(i in this._skinCollection){if(-1!=n)break;n=this._indexOf(e,"dhtmlxslider_"+i)}n=-1==n?e.length:n}else e=[],n=0;e[n]="dhtmlxslider_"+t,this.base.className=e.join(" "),this.conf.skin=t,this._nodes&&this._refreshRunner()},dhtmlXSlider.prototype.setValue=function(t,e){e=e||!1;var i=null;if(1==this.conf.range?(null!=this._r_actv&&(i=this._r_actv==this._nodes.runner?0:1),t=this._normalizeRange(t,this.conf.min,this.conf.max),this.conf.value[0]!=t[0]||this.conf.value[1]!=t[1]):(t=this._normalize(t,this.conf.min,this.conf.max),this.conf.value!=t),!0&&(this.conf.value=t,this._refreshRunner(i),this._refreshTooltip(),e)){var n=[t,this];1==this.conf.range&&(null!=this._r_actv?n.push(this._r_actv==this._nodes.runner?0:1):null!=this.conf.init_index&&n.push(this.conf.init_index.valueOf())),this.callEvent("onChange",n)}"function"==typeof this._attachedNode.setValue&&(null==i&&(i=this.conf.init_index),this._attachedNode.setValue(this.conf.value,this.conf.decimals,i))},dhtmlXSlider.prototype.getValue=function(){return 1==this.conf.range?[this.conf.value[0].valueOf(),this.conf.value[1].valueOf()]:this.conf.value.valueOf()},dhtmlXSlider.prototype._inverseValue=function(t){return this.conf.max+this.conf.min-t},dhtmlXSlider.prototype.disable=function(t){if(t=0!=t){for(var e in this._nodes)if("cont"!=e){var i="runner2"==e?"runner":e;null!=this._nodes[e]&&(new RegExp("\\s?dhxsl_"+i+"_dis","i").test(this._nodes[e].className)||(this._nodes[e].className+=" dhxsl_"+i+"_dis"))}this.conf.disabled=!0}else this.enable()},dhtmlXSlider.prototype.enable=function(){var t;for(var e in this._nodes)if("cont"!=e){var i="runner2"==e?"runner":e;null!=this._nodes[e]&&(t=new RegExp("\\s?dhxsl_"+i+"_dis","i")).test(this._nodes[e].className)&&(this._nodes[e].className=this._nodes[e].className.replace(t,""))}this.conf.disabled=!1},dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled},dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title"),this.conf.tooltip=!1},dhtmlXSlider.prototype.enableTooltip=function(t){(t=void 0===t||dhx4.s2b(t))?(this.conf.tooltip=!0,this._refreshTooltip()):this.disableTooltip()},dhtmlXSlider.prototype.setMax=function(t){!isNaN(t)&&this.conf.min<t&&(this.conf.max=t,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMax=function(){return this.conf.max},dhtmlXSlider.prototype.setMin=function(t){!isNaN(t)&&this.conf.max>t&&(this.conf.min=t,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMin=function(){return this.conf.min},dhtmlXSlider.prototype.setStep=function(t){var e=this.conf.max-this.conf.min;!isNaN(t)&&t<e&&(this.conf.step=t,this._detectDecimals(),this.setValue(this.conf.value))},dhtmlXSlider.prototype.getStep=function(){return this.conf.step},dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,"")),this.conf.visible=!0},dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden"),this.conf.visible=!1},dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible},dhtmlXSlider.prototype.linkTo=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length&&e<2;e++)null!=t[e]&&("string"==typeof t[e]&&(t[e]=document.getElementById(t[e])),this._attachNode(t[e],e))},dhtmlXSlider.prototype._refreshTooltip=function(){1==this.conf.tooltip&&(this.conf.value instanceof Array?this._nodes.cont.title=this.conf.value.join(", "):this._nodes.cont.title=this.conf.value)},dhtmlXSlider.prototype.getRunnerIndex=function(){return null==this._r_actv?-1:this._r_actv==this._nodes.runner?0:1},dhtmlXPopup.prototype.attachObject=function(t){return this._attachNode("object",{obj:t})},dhtmlXPopup.prototype._attach_init_object=function(t){this._nodeObj="string"==typeof t.obj?document.getElementById(t.obj):t.obj,t.obj=null,document.getElementById(this._nodeId).appendChild(this._nodeObj),this._nodeObj.style.display="",this._nodeObj.style.visibility="visible"},dhtmlXPopup.prototype.attachHTML=function(t){return this._attachNode("html",{html:t})},dhtmlXPopup.prototype._attach_init_html=function(t){document.getElementById(this._nodeId).innerHTML=t.html,this._nodeObj={text:t.html}},dhtmlXPopup.prototype.attachForm=function(t,e){return this._attachNode("form",{struct:t,width:e})},dhtmlXPopup.prototype._attach_init_form=function(t){var e=this;this._nodeObj=new dhtmlXForm(this._nodeId,t.struct),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){e._clearClick=!0}),null!=this.conf.editorEv&&0==this.checkEvent(this.conf.editorEv)&&(this.conf.editorEv=null),null!=dhtmlXForm.prototype.items.editor&&null==this.conf.editorEv&&(this.conf.editorEv=this.attachEvent("onShow",function(){var t=dhtmlXForm.prototype.items.editor.editor;for(var e in t){for(var i=t[e].base,n=!1;null!=i;)i==this.p?(n=!0,i=null):i=i.parentNode;i=null,1==n&&(t[e].cell.conf.cells_cont=null,t[e].setSizes())}t=null,this.detachEvent(this.conf.editorEv),this.conf.editorEv=null}),null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(this.conf.editorEv))},dhtmlXPopup.prototype.attachCalendar=function(t){return this._attachNode("calendar",t||{})},dhtmlXPopup.prototype._attach_init_calendar=function(t){1==t.double?(this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId),this._nodeObj.leftCalendar.setSkin(this.conf.skin),this._nodeObj.rightCalendar.setSkin(this.conf.skin)):(this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)),this._nodeObj.show()},dhtmlXPopup.prototype.attachGrid=function(t,e){return this._attachNode("grid",{width:t||400,height:e||200})},dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)},dhtmlXPopup.prototype.attachTree=function(t,e,i){return this._attachNode("tree",{width:t||400,height:e||200,rootId:i||0})},dhtmlXPopup.prototype._attach_init_tree=function(t){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",t.rootId)},dhtmlXPopup.prototype.attachLayout=function(t,e,i){return this._attachNode("layout",{width:t||400,height:e||200,pattern:i||"3L"})},dhtmlXPopup.prototype._attach_init_layout=function(t){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,t.pattern,this.conf.skin)},dhtmlXPopup.prototype.attachAccordion=function(t,e,i){return this._attachNode("accordion",{width:t||400,height:e||200,conf:i||{}})},dhtmlXPopup.prototype._attach_init_accordion=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXAccordion(t.conf)},dhtmlXPopup.prototype.attachTabbar=function(t,e,i){return"string"==typeof i?i={mode:i}:"object"==typeof i&&null!=i||(i={}),this._attachNode("tabbar",{width:t||400,height:e||200,conf:i})},dhtmlXPopup.prototype._attach_init_tabbar=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTabBar(t.conf)},dhtmlXPopup.prototype.attachSidebar=function(t,e,i){return null==i&&(i={}),this._attachNode("sidebar",{width:t||400,height:e||200,conf:i})},dhtmlXPopup.prototype._attach_init_sidebar=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXSideBar(t.conf)},dhtmlXPopup.prototype.attachEditor=function(t,e,i){return this._attachNode("editor",{width:t||400,height:e||200,conf:i||{}})},dhtmlXPopup.prototype._attach_init_editor=function(t){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin,t.conf.parent=this._nodeId,null==t.conf.skin&&(t.conf.skin=this.conf.skin),this._nodeObj=new dhtmlXEditor(t.conf);var e=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(e)},dhtmlXPopup.prototype.attachColorPicker=function(t){return"object"==typeof t&&null!=t||(t={}),this._attachNode("colorpicker",{conf:t})},dhtmlXPopup.prototype._attach_init_colorpicker=function(t){t.conf.skin=this.conf.skin,t.conf.parent=this._nodeId,this._nodeObj=new dhtmlXColorPicker(t.conf)},dhtmlXPopup.prototype.attachCarousel=function(t,e,i){return null==i&&(i={}),this._attachNode("carousel",{width:t||400,height:e||300,conf:i})},dhtmlXPopup.prototype._attach_init_carousel=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXCarousel(t.conf)},dhtmlXPopup.prototype.attachTreeView=function(t,e,i){return null==i&&(i={}),this._attachNode("treeview",{width:t||400,height:e||300,conf:i})},dhtmlXPopup.prototype._attach_init_treeview=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTreeView(t.conf),this._nodeObj.base.className+=" dhxtreeview_with_border";var e=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXTreeView&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(e)},dhtmlXPopup.prototype.setDimension=function(t,e){if(null!=this._nodeId&&(null!=t||null!=e)){var i=document.getElementById(this._nodeId);null!=t&&(i.style.width=t+"px"),null!=e&&(i.style.height=e+"px"),this._repaint(),null!=this._nodeObj&&"function"==typeof this._nodeObj.setSizes&&this._nodeObj.setSizes(),i=null}},dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;null!=this.idPull[i]&&(n!=t||"item"!=s&&"radio"!=s&&"checkbox"!=s||"none"==this.idPull[i].style.display||e++)}return e},dhtmlXMenuObject.prototype._redefineComplexState=function(t){if(this.idPrefix+this.topId!=t&&null!=this.idPull["polygon_"+t]&&null!=this.idPull[t]){var e=this._countVisiblePolygonItems(t);e>0&&!this.itemPull[t].complex&&this._updateItemComplexState(t,!0,!1),0==e&&this.itemPull[t].complex&&this._updateItemComplexState(t,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(t,e,i){if(this.conf.context||"TopLevel"!=this._getItemLevelType(t.replace(this.idPrefix,""))){if(null!=this.idPull[t]&&null!=this.itemPull[t]&&(this.itemPull[t].complex=e,t!=this.idPrefix+this.topId)){var n=null,s=this.idPull[t].childNodes[this.conf.rtl?0:2];if(s.childNodes[0]&&0===String(s.childNodes[0].className).search("complex_arrow")&&(n=s.childNodes[0]),this.itemPull[t].complex){if(null==n){for((n=document.createElement("DIV")).className="complex_arrow",n.id="arrow_"+t;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}this.conf.dload&&"get"==this.itemPull[t].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=n.className&&(n.className="complex_arrow_loading"):n.className="complex_arrow"}else this.itemPull[t].complex||null==n||(s.removeChild(n),null!=this.itemPull[t].hotkey_backup&&this.setHotKey&&this.setHotKey(t.replace(this.idPrefix,""),this.itemPull[t].hotkey_backup))}}else this.itemPull[t].complex=e},dhtmlXMenuObject.prototype._getItemLevelType=function(t){return this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXMenuObject.prototype._updateItemImage=function(t,e){t=this.idPrefix+t;var i=this.itemPull[t].type;if("checkbox"!=i&&"radio"!=i){var n=this.itemPull[t].parent==this.idPrefix+this.topId&&!this.conf.context,s=null;if(n)for(var o=0;o<this.idPull[t].childNodes.length;o++)(null==s&&"dhtmlxMenu_TopLevel_Item_Icon"==(this.idPull[t].childNodes[o].className||"")||"i"==(this.idPull[t].childNodes[o].tagName||"").toLowerCase())&&(s=this.idPull[t].childNodes[o]);else{try{s=this.idPull[t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){}(null==s||void 0===s.className||"sub_icon"!=s.className&&"i"!=s.tagName.toLowerCase())&&(s=null)}var l=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(l.length>0)if(null!=s)1==this.conf.icons_css?s.className=this.conf.icons_path+l:s.src=this.conf.icons_path+l;else if(n){if(1==this.conf.icons_css){(s=document.createElement("i")).className=this.conf.icons_path+l}else{(s=document.createElement("IMG")).className="dhtmlxMenu_TopLevel_Item_Icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t}!this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(s,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(s)}else if(1==this.conf.icons_css){(r=this.idPull[t].childNodes[this.conf.rtl?2:0]).innerHTML="<i class='"+this.conf.icons_path+l+"'></i>"}else{(s=document.createElement("IMG")).className="sub_icon",s.src=this.conf.icons_path+l,s.border="0",s.id="image_"+t;for(var r=this.idPull[t].childNodes[this.conf.rtl?2:0];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(s)}else if(null!=s)if(n)s.parentNode.removeChild(s),s=null;else{var a=s.parentNode;a.removeChild(s),a.innerHTML="&nbsp;",a=s=null}}},dhtmlXMenuObject.prototype._getAllParents=function(t){var e=new Array;for(var i in this.itemPull)if(this.itemPull[i].parent==t&&(e[e.length]=this.itemPull[i].id,this.itemPull[i].complex))for(var n=this._getAllParents(this.itemPull[i].id),s=0;s<n.length;s++)e[e.length]=n[s];return e},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var t=window.dhx4.screenDim();this.conf.v.x1=t.left,this.conf.v.x2=t.right,this.conf.v.y1=t.top,this.conf.v.y2=t.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(t){t=this.idPrefix+t;var e=-1;if(null==this.itemPull[t])return e;for(var i=this.itemPull[t].parent,n=null!=this.idPull["polygon_"+i]?this.idPull["polygon_"+i].tbd:this.cont,s=0;s<n.childNodes.length;s++)n.childNodes[s]!=this.idPull["separator_"+t]&&n.childNodes[s]!=this.idPull[t]||(e=s);return e},dhtmlXMenuObject.prototype.setItemPosition=function(t,e){if(t=this.idPrefix+t,null!=this.idPull[t]){var i=this.itemPull[t].parent==this.idPrefix+this.topId,n=this.idPull[t],s=this.getItemPosition(t.replace(this.idPrefix,"")),o=this.itemPull[t].parent,l=null!=this.idPull["polygon_"+o]?this.idPull["polygon_"+o].tbd:this.cont;l.removeChild(l.childNodes[s]),e<0&&(e=0),i&&e<1&&(e=1),e<l.childNodes.length?l.insertBefore(n,l.childNodes[e]):l.appendChild(n)}},dhtmlXMenuObject.prototype.getParentId=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:(null!=this.itemPull[t].parent?this.itemPull[t].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},void 0===dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype.setIconset=function(t){this.conf.icons_css="awesome"==t},dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(t,e){var i=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var n=0;n<i.length;n++)i[n]!=t&&this._hidePolygon(i[n]),null!=this.idPull[i[n]]&&i[n]!=t&&(this.idPull[i[n]].className=this.idPull[i[n]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+t].state&&(this.idPull[this.idPrefix+t].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+t,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?t:this.conf.selected:t,this.itemPull[this.idPrefix+t].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+t,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var t=this._getMenuNodes(this.idPrefix+this.topId),e=0;e<t.length;e++)"item"==this.itemPull[t[e]].type&&this._renderToplevelItem(t[e],null),"separator"==this.itemPull[t[e]].type&&this._renderSeparator(t[e],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(t,e){var i=this,n=document.createElement("DIV");if(n.id=t,"enabled"==this.itemPull[t].state&&null!=this.itemPull[t].cssNormal?n.className=this.itemPull[t].cssNormal:n.className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[t].state?"Normal":"Disabled"),""!=this.itemPull[t].title){var s=document.createElement("DIV");s.className="top_level_text",s.innerHTML=this.itemPull[t].title,n.appendChild(s)}if(this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),""!=this.itemPull[t].imgen||""!=this.itemPull[t].imgdis){var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(o)if(1==this.conf.icons_css){var l=document.createElement("i");l.className=this.conf.icons_path+o,n.childNodes.length>0&&!this.conf.rtl?n.insertBefore(l,n.childNodes[0]):n.appendChild(l)}else{var r=document.createElement("IMG");r.border="0",r.id="image_"+t,r.src=this.conf.icons_path+o,r.className="dhtmlxMenu_TopLevel_Item_Icon",n.childNodes.length>0&&!this.conf.rtl?n.insertBefore(r,n.childNodes[0]):n.appendChild(r)}}n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=e&&(++e<0&&(e=0),e>this.cont.childNodes.length-1&&(e=null)),null!=e?this.cont.insertBefore(n,this.cont.childNodes[e]):this.cont.appendChild(n),this.idPull[n.id]=n,this.itemPull[t].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[t].id,this.itemPull[t].id),n.onmouseover=function(){"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler);var t=i._getSubItemToDeselectByPolygon("parent");i._removeSubItemFromSelected(-1,-1);for(var e=0;e<t.length;e++)t[e]!=this.id&&i._hidePolygon(t[e]),null!=i.idPull[t[e]]&&t[e]!=this.id&&(null!=i.itemPull[t[e]].cssNormal?i.idPull[t[e]].className=i.itemPull[t[e]].cssNormal:("sub_item_selected"==i.idPull[t[e]].className&&(i.idPull[t[e]].className="sub_item"),i.idPull[t[e]].className=i.idPull[t[e]].className.replace(/Selected/g,"Normal")));if("enabled"==i.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected",i._addSubItemToSelected(this.id,"parent"),i.conf.selected="win"==i.conf.mode?-1!=i.conf.selected?this.id:i.conf.selected:this.id,i.conf.dload){if("no"==i.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),i.itemPull[this.id].loaded="get";var n=this.id.replace(i.idPrefix,"");i._dhxdataload.onBeforeXLS=function(){var t={params:{}};t.params[this.conf.dload_pid]=n;for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},i.loadStruct(i.conf.dload_url)}i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!0)}if((!i.conf.dload||i.conf.dload&&(!i.itemPull[this.id].loaded||"yes"==i.itemPull[this.id].loaded))&&i.itemPull[this.id].complex&&-1!=i.conf.selected)if(i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context){this._mouseOver=!0;var s=this.id;this._menuOpenTM=window.setTimeout(function(){i._showPolygon(s,i.conf.dir_toplv)},i.conf.top_tmtime)}else i._showPolygon(this.id,i.conf.dir_toplv)}i._doOnTouchMenu(this.id.replace(i.idPrefix,""))},n.onmouseout=function(){i.itemPull[this.id].complex&&-1!=i.conf.selected||"enabled"!=i.itemPull[this.id].state||(null!=i.itemPull[this.id].cssNormal?n.className=i.itemPull[this.id].cssNormal:n.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal"),"web"==i.conf.mode&&(window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i._clearAndHide()},i.conf.tm_sec,"JavaScript")),i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},n.onclick=function(t){if("web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),"web"==i.conf.mode||"disabled"!=i.itemPull[this.id].state){if(t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,"win"==i.conf.mode&&i.itemPull[this.id].complex){if(i.conf.selected==this.id){i.conf.selected=-1;var e=!1}else{i.conf.selected=this.id;e=!0}e?i._showPolygon(this.id,i.conf.dir_toplv):i._hidePolygon(this.id)}var n=i.itemPull[this.id].complex?"c":"-",s="enabled"!=i.itemPull[this.id].state?"d":"-",o={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};return i._doOnClick(this.id.replace(i.idPrefix,""),n+s+"t",o),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(t,e){this._renderSublevelPolygon(t,e);var i=this._getMenuNodes(e);for(n=0;n<i.length;n++)"separator"==this.itemPull[i[n]].type?this._renderSeparator(i[n],null):this._renderSublevelItem(i[n],null);if(t==e);else;for(var n=0;n<i.length;n++)this.itemPull[i[n]].complex&&this._addSubMenuPolygon(t,this.itemPull[i[n]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(t,e){var i=document.createElement("DIV");i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),i.dir="ltr",i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},i.id="polygon_"+e,i.onclick=function(t){(t=t||event).cancelBubble=!0},i.style.display="none",document.body.insertBefore(i,document.body.firstChild),i.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var n=document.createElement("TABLE");n.className="dhtmlxMebu_SubLevelArea_Tbl",n.cellSpacing=0,n.cellPadding=0,n.border=0;var s=document.createElement("TBODY");return n.appendChild(s),i.childNodes[1].appendChild(n),i.tbl=n,i.tbd=s,this.idPull[i.id]=i,null!=this.sxDacProc&&(this.idPull["sxDac_"+e]=new this.sxDacProc(i,i.className),window.dhx4.isIE?(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCycles))),i},dhtmlXMenuObject.prototype._renderSublevelItem=function(t,e){var i=this,n=document.createElement("TR");n.className="enabled"==this.itemPull[t].state?"sub_item":"sub_item_dis";var s=document.createElement("TD");s.className="sub_item_icon";var o=this.itemPull[t].type,l=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(""!=l){if("checkbox"==o||"radio"==o){(r=document.createElement("DIV")).id="image_"+this.itemPull[t].id,r.className="sub_icon "+l,s.appendChild(r)}if("checkbox"!=o&&"radio"!=o)if(1==this.conf.icons_css)s.innerHTML="<i class='"+this.conf.icons_path+l+"'></i>";else{var r;(r=document.createElement("IMG")).id="image_"+this.itemPull[t].id,r.className="sub_icon",r.src=this.conf.icons_path+l,s.appendChild(r)}}else s.innerHTML="&nbsp;";var a=document.createElement("TD");if(a.className="sub_item_text",""!=this.itemPull[t].title){var h=document.createElement("DIV");h.className="sub_item_text",h.innerHTML=this.itemPull[t].title,a.appendChild(h)}else a.innerHTML="&nbsp;";var d=document.createElement("TD");if(d.className="sub_item_hk",this.itemPull[t].complex){var c=document.createElement("DIV");c.className="complex_arrow",c.id="arrow_"+this.itemPull[t].id,d.appendChild(c)}else if(this.itemPull[t].hotkey.length>0&&!this.itemPull[t].complex){var u=document.createElement("DIV");u.className="sub_item_hk",u.innerHTML=this.itemPull[t].hotkey,d.appendChild(u)}else d.innerHTML="&nbsp;";n.appendChild(this.conf.rtl?d:s),n.appendChild(a),n.appendChild(this.conf.rtl?s:d),n.id=this.itemPull[t].id,n.parent=this.itemPull[t].parent,this.itemPull[t].tip.length>0&&(n.title=this.itemPull[t].tip),n.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},n.onmouseover=function(t){i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),this._visible||i._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},n.onmouseout=function(){"web"==i.conf.mode&&(i.conf.tm_handler&&window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i&&i._clearAndHide&&i._clearAndHide()},i.conf.tm_sec,"JavaScript"));var t=this;i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),i.conf.hide_tm[this.id]=window.setTimeout(function(){t._visible=!1},50)},n.onclick=function(t){if(i.checkEvent("onClick")||!i.itemPull[this.id].complex){(t=t||event).cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,tc=i.itemPull[this.id].complex?"c":"-",td="enabled"==i.itemPull[this.id].state?"-":"d";var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};switch(i.itemPull[this.id].type){case"checkbox":i._checkboxOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"radio":i._radioOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"item":i._doOnClick(this.id.replace(i.idPrefix,""),tc+td+"n",e)}return!1}};var f=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>f.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=f.tbd.childNodes[e]?f.tbd.insertBefore(n,f.tbd.childNodes[e]):f.tbd.appendChild(n),this.idPull[n.id]=n},dhtmlXMenuObject.prototype._renderSeparator=function(t,e){var i=this.conf.context?"SubLevelArea":this.itemPull[t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=i||!this.conf.context){var n=this;if("TopLevel"!=i){var s=document.createElement("TR");s.className="sub_sep";var o=document.createElement("TD");o.colSpan="3",s.appendChild(o)}var l=document.createElement("DIV");if(l.id="separator_"+t,l.className="TopLevel"==i?"top_sep":"sub_sep",l.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},l.onclick=function(t){(t=t||event).cancelBubble=!0;var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};n._doOnClick(this.id.replace("separator_"+n.idPrefix,""),"--s",e)},"TopLevel"==i){if(null!=e)++e<0&&(e=0),null!=this.cont.childNodes[e]?this.cont.insertBefore(l,this.cont.childNodes[e]):this.cont.appendChild(l);else{var r=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(r).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,r)}this.idPull[l.id]=l}else{var a=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(++e<0&&(e=0),e>a.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=a.tbd.childNodes[e]?a.tbd.insertBefore(s,a.tbd.childNodes[e]):a.tbd.appendChild(s),o.appendChild(l),this.idPull[l.id]=s}}},dhtmlXMenuObject.prototype.addNewSeparator=function(t,e){e=this.idPrefix+(null!=e?e:this._genStr(24));var i=this.idPrefix+this.getParentId(t);this._addItemIntoGlobalStrorage(e,i,"","separator",!1,"",""),this._renderSeparator(e,this.getItemPosition(t))},dhtmlXMenuObject.prototype._initObj=function(t,e,i){t instanceof Array||(null!=(i=t.parentId)&&0!==String(i).indexOf(this.idPrefix)&&(i=this.idPrefix+String(i)),t=t.items);for(var n=0;n<t.length;n++){void 0!==t[n].id&&null!=t[n].id||(t[n].id=this._genStr(24)),null==t[n].text&&(t[n].text=""),0!==String(t[n].id).indexOf(this.idPrefix)&&(t[n].id=this.idPrefix+String(t[n].id));var s={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var o in s)void 0===t[n][o]&&(t[n][o]=s[o]);if(""==t[n].imgen&&null!=t[n].img&&(t[n].imgen=t[n].img),""==t[n].imgdis&&null!=t[n].img_disabled&&(t[n].imgdis=t[n].img_disabled),null==t[n].title&&null!=t[n].text&&(t[n].title=t[n].text),null!=t[n].href&&(null!=t[n].href.link&&(t[n].href_link=t[n].href.link),null!=t[n].href.target&&(t[n].href_target=t[n].href.target)),null!=t[n].userdata)for(var o in t[n].userdata)this.userData[t[n].id+"_"+o]=t[n].userdata[o];void 0!==t[n].enabled&&0==window.dhx4.s2b(t[n].enabled)?t[n].state="disabled":void 0!==t[n].disabled&&1==window.dhx4.s2b(t[n].disabled)&&(t[n].state="disabled"),void 0===t[n].parent&&(t[n].parent=null!=i?i:this.idPrefix+this.topId),"checkbox"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="chbx_"+(t[n].checked?"1":"0")),"radio"==t[n].type&&(t[n].checked=window.dhx4.s2b(t[n].checked),t[n].imgen=t[n].imgdis="rdbt_"+(t[n].checked?"1":"0"),void 0!==t[n].group&&null!=t[n].group||(t[n].group=this._genStr(24)),null==this.radio[t[n].group]&&(this.radio[t[n].group]=[]),this.radio[t[n].group].push(t[n].id)),this.itemPull[t[n].id]=t[n],null!=t[n].items&&t[n].items.length>0?(this.itemPull[t[n].id].complex=!0,this._initObj(t[n].items,!0,t[n].id)):this.conf.dload&&1==t[n].complex&&(this.itemPull[t[n].id].loaded="no"),this.itemPull[t[n].id].items=null}if(!0!==e)if(1==this.conf.dload)if(null==i)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(i,i),this.conf.selected==i){var l=this.itemPull[i].parent==this.idPrefix+this.topId,r=l&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,a=!1;if(l&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var h=this.idPull[i];if(1==h._mouseOver){var d=this.conf.top_tmtime-((new Date).getTime()-h._dynLoadTM);if(d>1){var c=i,u=this;h._menuOpenTM=window.setTimeout(function(){u._showPolygon(c,r),u=c=null},d),a=!0}}}a||this._showPolygon(i,r)}this.itemPull[i].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(i,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(t,e){var i=[];if(null==e){var n=t.getElementsByTagName(this.conf.tags.root);if(null==n||null!=n&&0==n.length)return{items:[]};n=n[0]}else n=t;null!=n.getAttribute("parentId")&&(e=this.idPrefix+n.getAttribute("parentId"));for(var s=0;s<n.childNodes.length;s++)if(void 0!==n.childNodes[s].tagName&&String(n.childNodes[s].tagName).toLowerCase()==this.conf.tags.item){var o=n.childNodes[s],l={id:this.idPrefix+(o.getAttribute("id")||this._genStr(24)),title:o.getAttribute("text")||"",imgen:o.getAttribute("img")||"",imgdis:o.getAttribute("imgdis")||"",tip:"",hotkey:"",type:o.getAttribute("type")||"item"};if(null!=o.getAttribute("cssNormal")&&(l.cssNormal=o.getAttribute("cssNormal")),"checkbox"==l.type&&(l.checked=o.getAttribute("checked")),"radio"==l.type&&(l.checked=o.getAttribute("checked"),l.group=o.getAttribute("group")),l.state="enabled",null!=o.getAttribute("enabled")&&0==window.dhx4.s2b(o.getAttribute("enabled"))?l.state="disabled":null!=o.getAttribute("disabled")&&1==window.dhx4.s2b(o.getAttribute("disabled"))&&(l.state="disabled"),l.parent=null!=e?e:this.idPrefix+this.topId,this.conf.dload)l.complex=null!=o.getAttribute("complex"),l.complex&&(l.loaded="no");else{var r=this._xmlToJson(o,l.id);l.items=r.items,l.complex=l.items.length>0}for(var a=0;a<o.childNodes.length;a++)if(void 0!==o.childNodes[a].tagName){var h=String(o.childNodes[a].tagName||"").toLowerCase();if(h==this.conf.tags.userdata){var d=o.childNodes[a];null!=d.getAttribute("name")&&(this.userData[l.id+"_"+d.getAttribute("name")]=null!=d.firstChild&&null!=d.firstChild.nodeValue?d.firstChild.nodeValue:"")}h==this.conf.tags.text_ext&&(l.title=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.tooltip&&(l.tip=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.hotkey&&(l.hotkey=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.href&&"item"==l.type&&(l.href_link=o.childNodes[a].firstChild.nodeValue,null!=o.childNodes[a].getAttribute("target")&&(l.href_target=o.childNodes[a].getAttribute("target")))}i.push(l)}return o={parentId:e,items:i}},dhtmlXMenuObject.prototype.enableDynamicLoading=function(t,e){this.conf.dload=!0,this.conf.dload_url=t,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=e,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(t,e){if(null!=this.idPull[t]&&!(String(this.idPull[t].className).search("TopLevel_Item")>=0)){var i=this.conf.rtl?0:2;if(this.idPull[t].childNodes[i]&&this.idPull[t].childNodes[i].childNodes[0]){var n=this.idPull[t].childNodes[i].childNodes[0];0===String(n.className).search("complex_arrow")&&(n.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(t,e,i,n,s,o){var l=this.idPrefix+(null!=e?e:this._genStr(24)),r=this.idPrefix+(null!=t?this.getParentId(t):this.topId);this._addItemIntoGlobalStrorage(l,r,i,"item",n,s,o),r!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(l,this.getItemPosition(t)):this._renderToplevelItem(l,this.getItemPosition(t))},dhtmlXMenuObject.prototype.addNewChild=function(t,e,i,n,s,o,l){if(null==t){if(!this.conf.context)return this.addNewSibling(t,i,n,s,o,l),void(null!=e&&this.setItemPosition(i,e));t=this.topId}i=this.idPrefix+(null!=i?i:this._genStr(24)),this.setHotKey&&this.setHotKey(t,""),t=this.idPrefix+t,this._addItemIntoGlobalStrorage(i,t,n,"item",s,o,l),null==this.idPull["polygon_"+t]&&this._renderSublevelPolygon(t,t),this._renderSublevelItem(i,e-1),this._redefineComplexState(t)},dhtmlXMenuObject.prototype.removeItem=function(t,e,i){e||(t=this.idPrefix+t);var n=null;if(t!=this.idPrefix+this.topId){if(null==this.itemPull[t])return;this.idPull["polygon_"+t]&&this.idPull["polygon_"+t]._tmShow&&window.clearTimeout(this.idPull["polygon_"+t]._tmShow);var s=this.itemPull[t].type;if("separator"==s){var o=this.idPull["separator_"+t];this.itemPull[t].parent==this.idPrefix+this.topId?(o.onclick=null,o.onselectstart=null,o.id=null,o.parentNode.removeChild(o)):(o.childNodes[0].childNodes[0].onclick=null,o.childNodes[0].childNodes[0].onselectstart=null,o.childNodes[0].childNodes[0].id=null,o.childNodes[0].removeChild(o.childNodes[0].childNodes[0]),o.removeChild(o.childNodes[0]),o.parentNode.removeChild(o)),this.idPull["separator_"+t]=null,this.itemPull[t]=null,delete this.idPull["separator_"+t],delete this.itemPull[t],o=null}else{n=this.itemPull[t].parent;for((o=this.idPull[t]).onclick=null,o.oncontextmenu=null,o.onmouseover=null,o.onmouseout=null,o.onselectstart=null,o.id=null;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.parentNode.removeChild(o),this.idPull[t]=null,this.itemPull[t]=null,delete this.idPull[t],delete this.itemPull[t],o=null}s=null}for(var l in this.itemPull)this.itemPull[l].parent==t&&this.removeItem(l,!0,!0);var r=new Array(t);null==n||i||null!=this.idPull["polygon_"+n]&&0==this.idPull["polygon_"+n].tbd.childNodes.length&&(r.push(n),this._updateItemComplexState(n,!1,!1));for(var a=0;a<r.length;a++)if(this.idPull["polygon_"+r[a]]){var h=this.idPull["polygon_"+r[a]];if(h.onclick=null,h.oncontextmenu=null,h.tbl.removeChild(h.tbd),h.tbd=null,h.childNodes[1].removeChild(h.tbl),h.tbl=null,h.id=null,h.parentNode.removeChild(h),h=null,window.dhx4.isIE6){var d="polygon_"+r[a]+"_ie6cover";null!=this.idPull[d]&&(document.body.removeChild(this.idPull[d]),delete this.idPull[d])}null!=this.idPull["arrowup_"+t]&&this._removeArrow&&this._removeArrow("arrowup_"+t),null!=this.idPull["arrowdown_"+t]&&this._removeArrow&&this._removeArrow("arrowdown_"+t),this.idPull["polygon_"+r[a]]=null,delete this.idPull["polygon_"+r[a]]}r=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(t,e,i,n,s,o,l){var r={id:t,title:i,imgen:null!=o?o:"",imgdis:null!=l?l:"",type:n,state:1==s?"disabled":"enabled",parent:e,complex:!1,hotkey:"",tip:""};this.itemPull[r.id]=r},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(t){if(t==document.body){t="document.body."+this.idPrefix;var e=document.body}else if("string"==typeof t)e=document.getElementById(t);else e=t;var i=!1;for(var n in this.conf.ctx_zones)i=i||n==t||this.conf.ctx_zones[n]==e;if(1==i)return!1;this.conf.ctx_zones[t]=e;var s=this;window.dhx4.isOpera?(this.operaContext=function(t){s._doOnContextMenuOpera(t,s)},e.addEventListener("mouseup",this.operaContext,!1)):(null==e.oncontextmenu||e._oldContextMenuHandler||(e._oldContextMenuHandler=e.oncontextmenu),e.oncontextmenu=function(t){for(var e in dhtmlXMenuObject.prototype.liveInst)e!=s.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[e].context&&dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu();return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,s._doOnContextBeforeCall(t,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(t,e){for(var i in dhtmlXMenuObject.prototype.liveInst)i!=e.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[i].context&&dhtmlXMenuObject.prototype.liveInst[i]._hideContextMenu();return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,0==t.button&&1==t.ctrlKey&&e._doOnContextBeforeCall(t,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(t){if(!this.isContextZone(t))return!1;t==document.body&&(t="document.body."+this.idPrefix);var e=this.conf.ctx_zones[t];window.dhx4.isOpera?e.removeEventListener("mouseup",this.operaContext,!1):(e.oncontextmenu=null!=e._oldContextMenuHandler?e._oldContextMenuHandler:null,e._oldContextMenuHandler=null);try{this.conf.ctx_zones[t]=null,delete this.conf.ctx_zones[t]}catch(t){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(t){if(t==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var e=!1;return null!=this.conf.ctx_zones[t]&&this.conf.ctx_zones[t]==document.getElementById(t)&&(e=!0),e},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null!=this.idPull["polygon_"+this.idPrefix+this.topId]&&""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(t,e,i){if(this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(t,e),this._showPolygon(this.idPrefix+this.topId,"bottom"),this.callEvent("onContextMenu",[i])},dhtmlXMenuObject.prototype._hideContextMenu=function(){if(null==this.idPull["polygon_"+this.idPrefix+this.topId])return!1;this._clearAndHide(),this._hidePolygon(this.idPrefix+this.topId)},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(t,e){if(this.conf.ctx_zoneid=e.id,this._clearAndHide(),this._hideContextMenu(),1==window.dhx4.isChrome||1==window.dhx4.isEdge||1==window.dhx4.isOpera||1==window.dhx4.isIE11)var i=window.dhx4.absLeft(t.target)+t.offsetX,n=window.dhx4.absTop(t.target)+t.offsetY;else if(1==window.dhx4.isIE6||1==window.dhx4.isIE7||1==window.dhx4.isIE)i=window.dhx4.absLeft(t.srcElement)+t.x||0,n=window.dhx4.absTop(t.srcElement)+t.y||0;else{var s=t.srcElement||t.target,o=window.dhx4.isIE||window.dhx4.isKHTML?t.offsetX:t.layerX,l=window.dhx4.isIE||window.dhx4.isKHTML?t.offsetY:t.layerY;i=window.dhx4.absLeft(s)+o,n=window.dhx4.absTop(s)+l}this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[e.id,t])&&this.conf.ctx_autoshow&&(this._showContextMenu(i,n,e.id),this.callEvent("onAfterContextMenu",[e.id,t])):this.conf.ctx_autoshow&&(this._showContextMenu(i,n,e.id),this.callEvent("onAfterContextMenu",[e.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(t,e){this._showContextMenu(t,e,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(t){this.conf.ctx_autoshow=1==t},dhtmlXMenuObject.prototype.setAutoHideMode=function(t){this.conf.ctx_autohide=1==t},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(t){this.conf.ctx_hideall=1==t},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var t in this.itemPull)if(this.itemPull[t].parent==this.idPrefix+this.topId&&null!=this.idPull[t]){var e=!1,i=!1;this.idPull[t].parentNode.firstChild==this.idPull[t]&&(e=!0),this.idPull[t].parentNode.lastChild==this.idPull[t]&&(i=!0);for(var n in this.itemPull)"separator"==this.itemPull[n].type&&this.itemPull[n].parent==this.idPrefix+this.topId&&(this.idPull[t].nextSibling==this.idPull["separator_"+n]&&(i=!0),this.idPull[t].previousSibling==this.idPull["separator_"+n]&&(e=!0));this.idPull[t].style.borderLeftWidth=e?"1px":"0px",this.idPull[t].style.borderTopLeftRadius=this.idPull[t].style.borderBottomLeftRadius=e?"3px":"0px",this.idPull[t].style.borderTopRightRadius=this.idPull[t].style.borderBottomRightRadius=i?"3px":"0px",this.idPull[t]._bl=e,this.idPull[t]._br=i}},dhtmlXMenuObject.prototype._improveTerraceButton=function(t,e){e?(this.idPull[t].style.borderBottomLeftRadius=this.idPull[t]._bl?"3px":"0px",this.idPull[t].style.borderBottomRightRadius=this.idPull[t]._br?"3px":"0px"):(this.idPull[t].style.borderBottomLeftRadius="0px",this.idPull[t].style.borderBottomRightRadius="0px")},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_menu=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),t},dhtmlXCellObject.prototype.attachMenu=function(t){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(t),this._adjustCont(this._idd),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){null!=this.dataNodes.menu&&("function"==typeof this.dataNodes.menu.unload&&this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu}),dhtmlXMenuObject.prototype.setItemEnabled=function(t){this._changeItemState(t,"enabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.setItemDisabled=function(t){this._changeItemState(t,"disabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.isItemEnabled=function(t){return null!=this.itemPull[this.idPrefix+t]&&"enabled"==this.itemPull[this.idPrefix+t].state},dhtmlXMenuObject.prototype._changeItemState=function(t,e,i){var n=this.idPrefix+t;return null!=this.itemPull[n]&&null!=this.idPull[n]&&this.itemPull[n].state!=e&&(this.itemPull[n].state=e,this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context?this.idPull[n].className="sub_item"+("enabled"==this.itemPull[n].state?"":"_dis"):this.idPull[n].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[n].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+t,this.itemPull[this.idPrefix+t].complex,!1),this._updateItemImage(t,i),this.idPrefix+this.conf.last_click==n&&"TopLevel"!=i&&this._redistribSubLevelSelection(n,this.itemPull[n].parent),"TopLevel"==i&&this.conf.context),!1},dhtmlXMenuObject.prototype.getItemText=function(t){return null!=this.itemPull[this.idPrefix+t]?this.itemPull[this.idPrefix+t].title:""},dhtmlXMenuObject.prototype.setItemText=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t])if(this._clearAndHide(),this.itemPull[t].title=e,this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context){for(i=null,n=0;n<this.idPull[t].childNodes[1].childNodes.length;n++)"sub_item_text"==String(this.idPull[t].childNodes[1].childNodes[n].className||"")&&(i=this.idPull[t].childNodes[1].childNodes[n]);""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?i&&(i.parentNode.removeChild(i),i=null,this.idPull[t].childNodes[1].innerHTML="&nbsp;"):(i||((i=document.createElement("DIV")).className="sub_item_text",this.idPull[t].childNodes[1].innerHTML="",this.idPull[t].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[t].title)}else{for(var i=null,n=0;n<this.idPull[t].childNodes.length;n++)try{"top_level_text"==this.idPull[t].childNodes[n].className&&(i=this.idPull[t].childNodes[n])}catch(t){}""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?null!=i&&i.parentNode.removeChild(i):(i||((i=document.createElement("DIV")).className="top_level_text",this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)),i.innerHTML=this.itemPull[t].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(t,e,i){var n=this.conf.tags.item;this.conf.tags.item="div";var s="string"==typeof t?document.getElementById(t):t,o=this._xmlToJson(s,this.idPrefix+this.topId);this._initObj(o),this.conf.tags.item=n,e&&s.parentNode.removeChild(s),s=objOd=null,null!=onload&&("function"==typeof i?i():"function"==typeof window[i]&&window[i]())},dhtmlXMenuObject.prototype.hideItem=function(t){this._changeItemVisible(t,!1)},dhtmlXMenuObject.prototype.showItem=function(t){this._changeItemVisible(t,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(t){var e=null;return null!=this.idPull[this.idPrefix+t]&&(e="none"==this.idPull[this.idPrefix+t].style.display),e},dhtmlXMenuObject.prototype._changeItemVisible=function(t,e){var i=this.idPrefix+t;null!=this.itemPull[i]&&("separator"==this.itemPull[i].type&&(i="separator_"+i),null!=this.idPull[i]&&(this.idPull[i].style.display=e?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+t].parent)))},dhtmlXMenuObject.prototype.setUserData=function(t,e,i){this.userData[this.idPrefix+t+"_"+e]=i},dhtmlXMenuObject.prototype.getUserData=function(t,e){return null!=this.userData[this.idPrefix+t+"_"+e]?this.userData[this.idPrefix+t+"_"+e]:null},dhtmlXMenuObject.prototype.setOpenMode=function(t){this.conf.mode="win"==t?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(t){this.conf.tm_sec=isNaN(t)?400:t},dhtmlXMenuObject.prototype.getItemImage=function(t){var e=new Array(null,null);return t=this.idPrefix+t,"item"==this.itemPull[t].type&&(e[0]=this.itemPull[t].imgen,e[1]=this.itemPull[t].imgdis),e},dhtmlXMenuObject.prototype.setItemImage=function(t,e,i){"item"==this.itemPull[this.idPrefix+t].type&&(this.itemPull[this.idPrefix+t].imgen=e,this.itemPull[this.idPrefix+t].imgdis=i,this._updateItemImage(t,this._getItemLevelType(t)))},dhtmlXMenuObject.prototype.clearItemImage=function(t){this.setItemImage(t,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(t,e,i,n){this.conf.v_enabled=!0,this.conf.v.x1=t,this.conf.v.x2=e,this.conf.v.y1=i,this.conf.v.y2=n},dhtmlXMenuObject.prototype.setTooltip=function(t,e){t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.idPull[t].title=e.length>0?e:null,this.itemPull[t].tip=e)},dhtmlXMenuObject.prototype.getTooltip=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].tip},dhtmlXMenuObject.prototype.setTopText=function(t){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=t)},dhtmlXMenuObject.prototype.setAlign=function(t){this.conf.align!=t&&("left"!=t&&"right"!=t||(this.conf.align=t,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left"))))},dhtmlXMenuObject.prototype.setHref=function(t,e,i){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].href_link=e,null!=i&&(this.itemPull[this.idPrefix+t].href_target=i))},dhtmlXMenuObject.prototype.clearHref=function(t){null!=this.itemPull[this.idPrefix+t]&&(delete this.itemPull[this.idPrefix+t].href_link,delete this.itemPull[this.idPrefix+t].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(t){for(var e=new Array(t);this.getParentId(t)!=this.topId;)t=this.getParentId(t),e[e.length]=t;return e.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(t,e){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].checked=e)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(t){if(null!=this.idPull[this.idPrefix+t]){this.itemPull[this.idPrefix+t].imgen="chbx_"+(this._getCheckboxState(t)?"1":"0"),this.itemPull[this.idPrefix+t].imgdis=this.itemPull[this.idPrefix+t].imgen;try{this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+t].imgen}catch(t){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t]){var n=this._getCheckboxState(t);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[t,n,this.conf.ctx_zoneid,i])&&this.setCheckboxState(t,!n):this.setCheckboxState(t,!n),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.setCheckboxState=function(t,e){this._setCheckboxState(t,e),this._updateCheckboxImage(t)},dhtmlXMenuObject.prototype.getCheckboxState=function(t){return this._getCheckboxState(t)},dhtmlXMenuObject.prototype.addCheckbox=function(t,e,i,n,s,o,l){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var r="chbx_"+(o?"1":"0"),a=r;if("sibling"==t){var h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,this._renderSublevelItem(h,this.getItemPosition(e))}else{h=this.idPrefix+(null!=n?n:this._genStr(24)),d=this.idPrefix+e;this._addItemIntoGlobalStrorage(h,d,s,"checkbox",l,r,a),this.itemPull[h].checked=o,null==this.idPull["polygon_"+d]&&this._renderSublevelPolygon(d,d),this._renderSublevelItem(h,i-1),this._redefineComplexState(d)}},dhtmlXMenuObject.prototype.setHotKey=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[t].complex){var i=this.itemPull[t].type;if("item"==i||"checkbox"==i||"radio"==i){var n=null;try{"sub_item_hk"==this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(n=this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(t){}if(0==e.length)this.itemPull[t].hotkey_backup=this.itemPull[t].hotkey,this.itemPull[t].hotkey="",null!=n&&n.parentNode.removeChild(n);else{if(this.itemPull[t].hotkey=e,this.itemPull[t].hotkey_backup=null,null==n){(n=document.createElement("DIV")).className="sub_item_hk";for(var s=this.idPull[t].childNodes[this.conf.rtl?0:2];s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(n)}n.innerHTML=e}}}},dhtmlXMenuObject.prototype.getHotKey=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(t){for(var e=this._getSubItemToDeselectByPolygon(t),i=0;i<this.conf.opened_poly.length;i++)this.conf.opened_poly[i]!=t&&this._hidePolygon(this.conf.opened_poly[i]);for(i=0;i<e.length;i++)null!=this.idPull[e[i]]&&"enabled"==this.itemPull[e[i]].state&&(this.idPull[e[i]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(t){var e=this.idPull["polygon_"+t].childNodes[1],i=this.idPull["arrowup_"+t],n=this.idPull["arrowdown_"+t];0==e.scrollTop?i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":""),e.scrollTop+e.offsetHeight<e.scrollHeight?n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(n.over?"_Over":""):n.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",e=i=n=null},dhtmlXMenuObject.prototype._addUpArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowup_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,e._canScrollUp=!0,e._doScrollUp(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollUp=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(e.conf.of_utm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[0].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._addDownArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowdown_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",i.over=!1,i.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,e._canScrollDown=!0,e._doScrollDown(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollDown=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(e.conf.of_dtm))},i.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var n=this.idPull["polygon_"+this.idPrefix+t];n.childNodes[2].appendChild(i),this.idPull[i.id]=i,n=i=null},dhtmlXMenuObject.prototype._removeUpArrow=function(t){var e="arrowup_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeDownArrow=function(t){var e="arrowdown_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeArrow=function(t){var e=this.idPull[t];e.onselectstart=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onclick=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(t){}},dhtmlXMenuObject.prototype._isArrowExists=function(t){return null!=this.idPull["arrowup_"+t]&&null!=this.idPull["arrowdown_"+t]},dhtmlXMenuObject.prototype._doScrollUp=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollUp&&i.scrollTop>0){var n=!1,s=i.scrollTop-this.conf.of_ustep;if(s<0&&(n=!0,s=0),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_utm=window.setTimeout(function(){o._doScrollUp(t,!1),o=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._doScrollDown=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight){var n=!1,s=i.scrollTop+this.conf.of_dstep;if(s+i.offsetHeight>=i.scrollHeight&&(n=!0,s=i.scrollHeight-i.offsetHeight),i.scrollTop=s,n)e=!0;else{var o=this;this.conf.of_dtm=window.setTimeout(function(){o._doScrollDown(t,!1),o=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._countPolygonItems=function(t){var e=0;for(var i in this.itemPull){var n=this.itemPull[i].parent,s=this.itemPull[i].type;n!=this.idPrefix+t||"item"!=s&&"radio"!=s&&"checkbox"!=s||e++}return e},dhtmlXMenuObject.prototype.setOverflowHeight=function(t){if("auto"===t)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&t<=0))if(this._clearAndHide(),this.conf.overflow_limit>=0&&t>0)this.conf.overflow_limit=t;else if(this.conf.overflow_limit>0&&t<=0){for(var e in this.itemPull)if(this._isArrowExists(e)){var i=String(e).replace(this.idPrefix,"");this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+e].childNodes[1].style.height=""}this.conf.overflow_limit=0}else;},dhtmlXMenuObject.prototype._getRadioImgObj=function(t){try{var e=this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(t){e=null}return e},dhtmlXMenuObject.prototype._setRadioState=function(t,e){var i=this._getRadioImgObj(t);if(null!=i){var n=this.itemPull[this.idPrefix+t];n.checked=e,n.imgen="rdbt_"+(n.checked?"1":"0"),n.imgdis=n.imgen,i.className="sub_icon "+n.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t].group){var n=this.itemPull[this.idPrefix+t].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[n,this.getRadioChecked(n),t,this.conf.ctx_zoneid,i])&&this.setRadioChecked(n,t):this.setRadioChecked(n,t),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.getRadioChecked=function(t){for(var e=null,i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,""),s=this._getRadioImgObj(n);if(null!=s){null!=s.className.match(/rdbt_1$/gi)&&(e=n)}}return e},dhtmlXMenuObject.prototype.setRadioChecked=function(t,e){if(null!=this.radio[t])for(var i=0;i<this.radio[t].length;i++){var n=this.radio[t][i].replace(this.idPrefix,"");this._setRadioState(n,n==e)}},dhtmlXMenuObject.prototype.addRadioButton=function(t,e,i,n,s,o,l,r){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var a=this.idPrefix+(null!=n?n:this._genStr(24)),h="rdbt_"+(l?"1":"0"),d=h;if("sibling"==t){var c=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),this._renderSublevelItem(a,this.getItemPosition(e))}else{c=this.idPrefix+e;this._addItemIntoGlobalStrorage(a,c,s,"radio",r,h,d),null==this.idPull["polygon_"+c]&&this._renderSublevelPolygon(c,c),this._renderSublevelItem(a,i-1),this._redefineComplexState(c)}var u=null!=o?o:this._genStr(24);this.itemPull[a].group=u,null==this.radio[u]&&(this.radio[u]=new Array),this.radio[u][this.radio[u].length]=a,1==l&&this.setRadioChecked(u,String(a).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>"},dhtmlXMenuObject.prototype._readLevel=function(t){var e="";for(var i in this.itemPull)if(this.itemPull[i].parent==t){var n="",s="",o="",l=String(this.itemPull[i].id).replace(this.idPrefix,""),r="",a=""!=this.itemPull[i].title?' text="'+this.itemPull[i].title+'"':"",h="";"item"==this.itemPull[i].type&&(""!=this.itemPull[i].imgen&&(n=' img="'+this.itemPull[i].imgen+'"'),""!=this.itemPull[i].imgdis&&(s=' imgdis="'+this.itemPull[i].imgdis+'"'),""!=this.itemPull[i].hotkey&&(o="<hotkey>"+this.itemPull[i].hotkey+"</hotkey>")),"separator"==this.itemPull[i].type?r=' type="separator"':"disabled"==this.itemPull[i].state&&(h=' enabled="false"'),"checkbox"==this.itemPull[i].type&&(r=' type="checkbox"'+(this.itemPull[i].checked?' checked="true"':"")),"radio"==this.itemPull[i].type&&(r=' type="radio" group="'+this.itemPull[i].group+'" '+(this.itemPull[i].checked?' checked="true"':"")),e+="<item id='"+l+"'"+a+r+n+s+h+">",e+=o,this.itemPull[i].complex&&(e+=this._readLevel(i)),e+="</item>"}return e},dhtmlXMenuObject.prototype.enableEffect=function(t,e,i){this._menuEffect=("opacity"==t||"slide"==t||"slide+"==t)&&t,this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0;for(var n in this.idPull)0===n.search(/polygon/)&&(this._pOpacityApply(n,this._pOpStyleIE?100:1),this.idPull[n].style.height="");this._pOpMax=(void 0===e?100:e)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=i||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(t){this._pShowHide(t,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(t){this._pShowHide(t,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(t,e){this.idPull[t].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",e||this.idPull[t]._op)},dhtmlXMenuObject.prototype._pShowHide=function(t,e){if(this.idPull){if(null!=this.idPull[t]._tmShow){if(this.idPull[t]._step_h>0&&1==e||this.idPull[t]._step_h<0&&0==e)return;window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._tmShow=null,this.idPull[t]._max_h=null}if(0!=e||"hidden"!=this.idPull[t].style.visibility&&"none"!=this.idPull[t].style.display){if(1==e&&"none"==this.idPull[t].style.display&&(this.idPull[t].style.visibility="hidden",this.idPull[t].style.display=""),null==this.idPull[t]._max_h){if(this.idPull[t]._max_h=parseInt(this.idPull[t].offsetHeight),this.idPull[t]._h=1==e?0:this.idPull[t]._max_h,this.idPull[t]._step_h=Math.round(this.idPull[t]._max_h/this._pSlSteps)*(1==e?1:-1),0==this.idPull[t]._step_h)return;this.idPull[t]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[t].op_tm=this.idPull[t]._step_tm,this.idPull[t].op_step=this._pOpMax/this._pSlSteps*(1==e?1:-1),this._pOpStyleIE&&(this.idPull[t].op_step=Math.round(this.idPull[t].op_step)),this.idPull[t]._op=1==e?0:this._pOpMax,this._pOpacityApply(t)):(this.idPull[t]._op=this._pOpStyleIE?100:1,this._pOpacityApply(t)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height="0px"),this.idPull[t].style.visibility="visible"}this._pEffectSet(t,this.idPull[t]._h+this.idPull[t]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(t,e){if(this.idPull)if(this.idPull[t]._tmShow&&window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._h=Math.max(0,Math.min(e,this.idPull[t]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=this.idPull[t]._h+"px"),e+=this.idPull[t]._step_h,"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[t]._op+this.idPull[t].op_step)),this._pOpacityApply(t)),this.idPull[t]._step_h>0&&e<=this.idPull[t]._max_h||this.idPull[t]._step_h<0&&e>=0){var i=this;this.idPull[t]._tmShow=window.setTimeout(function(){i._pEffectSet(t,e)},this.idPull[t]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=""),this.idPull[t]._step_h<0&&(this.idPull[t].style.visibility="hidden"),"slide+"!=this._menuEffect&&"opacity"!=this._menuEffect||(this.idPull[t]._op=this.idPull[t]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(t)),this.idPull[t]._tmShow=null,this.idPull[t]._h=null,this.idPull[t]._max_h=null,this.idPull[t]._step_tm=null},dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()},dhtmlXRibbon.prototype._renderData=function(t){var e=this._base.firstChild;null!=t&&(this.conf.icons_path=t.icons_path||this.conf.icons_path,this.conf.icons_css="awesome"==t.iconset,t.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),e.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(e),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),null!=this.conf.arrows_mode&&this._tabbar.setArrowsMode(this.conf.arrows_mode),this.childIds=this._appendTabs(t.tabs)):t.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(e.className)&&(e.className="dhxrb_background_area"),e.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(t.items,e.firstChild)),this.callEvent("_onHeightChanged",[]))},dhtmlXRibbon.prototype._xmlToJson=function(t){var e=t.lastChild||null,i={},n=[];return e&&"ribbon"==e.tagName&&(n=this._convertXmlNodeListIntoObject(e.childNodes)),n[0]&&n[0].type&&"block"==n[0].type.toLowerCase()?i.items=n:i.tabs=n,i},dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(t){var e,i,n,s=[];for(i=t.length,e=0;e<i;e++)(n=this._covertXmlNodeToObject(t[e]))&&s.push(n);return s},dhtmlXRibbon.prototype._covertXmlNodeToObject=function(t){if(!t||!t.tagName||"item"!=t.tagName.toLowerCase()&&"tab"!=t.tagName.toLowerCase())return null;var e,i,n=t.attributes,s={};for(i=n.length,e=0;e<i;e++)switch(n[e].name){case"isbig":s.isbig=dhx4.s2b(n[e].value);break;case"state":s.state=dhx4.s2b(n[e].value);break;default:s[n[e].name]=n[e].value}return t.childNodes.length&&("buttonCombo"==t.getAttribute("type")||"buttonSelect"==t.getAttribute("type")?s.data=t:"tab"==t.tagName.toLowerCase()?s.items=this._convertXmlNodeListIntoObject(t.childNodes):s.list=this._convertXmlNodeListIntoObject(t.childNodes)),s},dhtmlXRibbon.prototype._appendTabs=function(t){var e,i,n,s=[];for(i=t.length,e=0;e<i;e++)n=this._addTab(t[e]),t[e].items instanceof Array&&(n.childIds=this._appendBlocks(t[e].items,n.base,n)),s.push(n.id);return s},dhtmlXRibbon.prototype._addTab=function(t){var e,i={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(e in t)"items"!=e&&(i.conf[e]=t[e]);for(t.id?i.id=t.id:i.id=dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return this._tabbar.addTab(i.id,i.conf.text,i.conf.width,i.conf.position,i.conf.active),i.base.className="dhxrb_g_area",i.base._dhx_ribbonId=i.id,this.tabs(i.id).attachObject(i.base),this._changeApiForTab(this.tabs(i.id)),this._items[i.id]=i,i},dhtmlXRibbon.prototype._changeApiForTab=function(t){var e;for(e in this._tabOriginalApi)this._tabOriginalApi[e]=this._tabOriginalApi[e]||t[e],t[e]=this._tabCustomApi[e]},dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null},dhtmlXRibbon.prototype._appendBlocks=function(t,e,i){var n,s,o,l,r,a,h=[];for(i=i||null,s=t.length,n=0;n<s;n++)if("object"==typeof t[n]&&"block"==t[n].type){if(o=this._addBlock(t[n],e),t[n].list&&t[n].list instanceof Array)for(r=(l=t[n].list).length,a=0;a<r;a++)this._addItem(o.id,null,null,l[a]);null!=i&&(o.parentId=i.id),o.conf.disable&&this.disable(o.id),h.push(o.id)}return h},dhtmlXRibbon.prototype._addBlock=function(t,e){var i,n;i={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(n in t)"list"!=n&&"type"!=n&&"id"!=n&&(i.conf[n]=t[n]);for(t.id?i.id=t.id:i.id=dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return i.base.className="dhxrb_block_base",e.appendChild(i.base),i.contForItems.className="dhxrb_block_items",i.contForText.className="dhxrb_block_label",i.base.appendChild(i.contForItems),i.conf.text&&(i.contForText.innerHTML=i.conf.text,"top"==i.conf.text_pos?i.base.insertBefore(i.contForText,i.contForItems):i.base.appendChild(i.contForText)),i.base._dhx_ribbonId=i.id,this._items[i.id]=i,i},dhtmlXRibbon.prototype._addItem=function(t,e,i,n){var s,o,l,r=this._items[t],a=null,h=this;if("newLevel"!=n.type&&!this.items[n.type])return null;if("newLevel"==n.type?this._addNewLevel(r):"group"==r.type?((s=document.createElement("div")).className="dhxrb_in_group",r.base.appendChild(s)):n.isbig?((s=document.createElement("div")).className="dhxrb_big_button",r.contForItems.appendChild(s)):(o=this._getContainerForSmallItem(r),(s=document.createElement("div")).className="rows"==r.conf.mode?"dhxrb_in_row":"dhxrb_3rows_button",o.appendChild(s)),s){this._attachEventForItem(s),l={icons_path:n.icons_path||this.conf.icons_path,icons_css:this.conf.icons_css,skin:this.conf.skin};for(var d in n)l[d]=n[d];for(l.id||(l.id=dhx4.newId());this._items[l.id];)l.id=dhx4.newId();a=this.items[l.type]&&this.items[l.type].render?this.items[l.type].render(s,l):null}return null!=a&&(this._items[a.id]=a,a.parentId=r.id,r.childIds.push(a.id),s._dhx_ribbonId=a.id,l.onclick&&"function"==typeof l.onclick&&(this._eventHandlers[a.id]=this._eventHandlers[a.id]||{},this._eventHandlers[a.id].onclick=l.onclick),a.callEvent=function(){h.callEvent.apply(h,arguments)},a._callHandler=function(){h._callHandler.apply(h,arguments)},this.items[l.type]&&"function"==typeof this.items[l.type].callAfterInit&&this.items[l.type].callAfterInit.apply(this,[a])),a},dhtmlXRibbon.prototype._callHandler=function(t,e){this._eventHandlers[t]&&this._eventHandlers[t].onclick&&this._eventHandlers[t].onclick.apply(this,e)},dhtmlXRibbon.prototype.items={},dhtmlXRibbon.prototype.items.button={render:function(t,e){var i,n;n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin,icons_css:e.icons_css}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);if(1==n.conf.icons_css)var s="<i class='"+n.conf.icons_path+(n.conf.img||"")+"'></i>";else s="<img class='dhxrb_image"+(n.conf.img?"'":" dhxrb_invisible'")+" src='"+(n.conf.img?n.conf.icons_path+n.conf.img:"")+"' />";return t.innerHTML=s+"<div class='dhxrb_label_button'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n},getText:function(t){return t.conf.text},setText:function(t,e){var i=t.base.childNodes[1];t.conf.text=e,i.innerHTML=e},setImage:function(t,e){t.conf.img=e,0==t.conf.disable&&(t.base.childNodes[0][t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.img)},setImageDis:function(t,e){t.conf.imgdis=e,1==t.conf.disable&&(t.base.childNodes[0][t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.imgdis)},mousedown:function(t,e,i){return!0},click:function(t,e,i){return 0==i.button&&(e._callHandler(t.id,[t.id]),t.callEvent("onClick",[t.id]),!1)},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.imgdis&&(e[t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.imgdis,/\s?dhxrb_invisible/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.img?e[t.conf.icons_css?"className":"src"]=t.conf.icons_path+t.conf.img:/\s?dhxrb_invisible/i.test(e.className)||(e.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.buttonTwoState={click:function(t,e,i){return!1},afterRender:function(t){t.conf.state&&this.setState(t,t.conf.state)},mouseover:function(t){return/dhxrb_highlight0/.test(t.base.className)||(t.base.className+=" dhxrb_highlight0"),!1},mouseout:function(t){return/dhxrb_highlight0/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(t,e,i){return e._callHandler(t.id,[t.id,!t.conf.state]),this.setState(t,!t.conf.state,!0),!1},mouseup:function(t){return!1},setState:function(t,e,i){i=i||!1,(e=dhx4.s2b(e))?/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=e,i&&t.callEvent("onStateChange",[t.id,t.conf.state])},getState:function(t){return 1==t.conf.state}},dhtmlXRibbon.prototype.items.buttonSegment={click:function(t,e,i){return!1},mousedown:function(t,e,i){return this.setState(t,e,!0),!1},callAfterInit:function(t){(t.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(t,this))&&(t.conf.state&&(t.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(t,this,!1))},afterRender:function(){},setState:function(t,e,i){i=i||!1;var n=null;0==dhx4.s2b(t.conf.state)&&(null!=(n=this._getSelectedNeighbor(t,e))&&this._unSelect(n),/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"),t.conf.state=!0,i&&(e._callHandler(t.id,[t.id,n?n.id:null]),e.callEvent("onStateChange",[t.id,n?n.id:null])))},remove:function(t,e){var i,n=dhx4.s2b(t.conf.state),s=null,o=0,l=e._items[t.parentId];if(n){for(;l.childIds[o]&&null==s;)"buttonSegment"==(i=e._items[l.childIds[o]]).type&&i!=t&&(s=i),o++;s&&this.setState(s,e)}},_unSelect:function(t){dhx4.s2b(t.conf.state)&&(/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=!1)},_getSelectedNeighbor:function(t,e){var i,n,s,o=e._items[t.parentId],l=null;for(n=o.childIds.length,i=0;i<n;i++)if("buttonSegment"==(s=e._items[o.childIds[i]]).type&&s.conf.state){l=s;break}return l}},dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(t){var e=t.base.childNodes[1];e.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>",t.menu=null,this.itemCollection.push(t),this._attachEventToWindow(),e=null},setText:function(t,e){var i=t.base.childNodes[1].lastChild;t.conf.text=e,t.base.childNodes[1].innerHTML=e,t.base.childNodes[1].appendChild(i)},setOptionText:function(t,e,i){null!=t.menu?t.menu.setItemText(e,i):this._loopThroughItems(t.conf.items,e,i,!1)},getOptionText:function(t,e){return null!=t.menu?t.menu.getItemText(e):this._loopThroughItems(t.conf.items,e,null,!0)},_loopThroughItems:function(t,e,i,n){for(var s=0;s<t.length;s++){if(t[s].id==e)return 1!=n?(t[s].text=i,!0):t[s].text;if(null!=t[s].items){var o=this._loopThroughItems(t[s].items,e,i,n);if(null!=o)return o}}return null},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!1},_hideAllMenus:function(t){for(var e=(t=t||event).target||t.srcElement,i=!0;null!=e&&1==i;)null!=e.className&&/SubLevelArea_Polygon/i.test(e.className)?i=!1:e=e.parentNode;if(0!=i){var n=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var s in n){var o=n[s];o.menu instanceof dhtmlXMenuObject&&(o._skipHiding?o._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(o))}}},mousedown:function(t,e,i){return t._skipHiding=!0,this.showMenu(t),!1},mouseup:function(t){return!1},click:function(){},setState:function(){},showMenu:function(t){var e=dhx4.absLeft(t.base),i=dhx4.absTop(t.base)+t.base.offsetHeight;t.menu instanceof dhtmlXMenuObject?t.menu.showContextMenu(e,i):(t.menu=new dhtmlXMenuObject({parent:t.base,icons_path:t.conf.icons_path,context:!0,items:t.conf.items,skin:t.conf.skin}),t.conf.data&&(t.menu.loadStruct(t.conf.data),delete t.conf.data),t.menu.setAutoHideMode(!1),t.menu.attachEvent("onHide",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(t)}),t.menu.attachEvent("onShow",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(t)}),t.menu.attachEvent("onClick",function(e){t.callEvent("onClick",[e,t.id])}),t.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(t))},hideMenu:function(t){t.menu instanceof dhtmlXMenuObject&&t.menu.hideContextMenu()},remove:function(t){var e;t.menu instanceof dhtmlXMenuObject&&(t.menu.unload(),t.menu=null),t.base.oncontextmenu=null,-1!=(e=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,t))&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(e,1),0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&this._detachEventFromWindow()},setSkin:function(t,e){t.menu instanceof dhtmlXMenuObject&&t.menu.setSkin(e)},_doOnHideMenu:function(t){t._skipHiding?t._skipHiding=!1:/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(t){/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1")}},dhtmlXRibbon.prototype.items.group={render:function(t,e){var i,n;n={base:t,id:e.id,type:e.type,conf:{disable:!1,skin:e.skin},childIds:[]},t.className="dhxrb_group";for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return n},callAfterInit:function(t){this._detachEventFromItem(t.base);var e,i,n,s,o=t.conf.list;for(i=o?o.length:0,e=0;e<i;e++)null!=(n=this._addItem(t.id,null,null,o[e]))&&(!(s=n.base.childNodes[1])||s.innerHTML||/\s?dhxrb_label_hide/i.test(s.className)||(s.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(t),t.conf.disable&&this.disable(t.id),o=void 0},normalize:function(t){for(var e,i,n=t.base.children,s=n.length,o=!1,l=0,r=0;r<s;r++)if(/dhxrb_separator_group/i.test(n[r].className)||!/dhxrb_item_hide/i.test(n[r].className)){if(Math.ceil((r-l)/2)-Math.floor((r-l)/2)==0){if(/dhxrb_separator_group/i.test(n[r].className)){n[r].parentNode.removeChild(n[r]),o=!0;break}}else if(!/dhxrb_separator_group/i.test(n[r].className)){(e=document.createElement("div")).className="dhxrb_separator_groupp",t.base.insertBefore(e,n[r]),o=!0;break}}else l++;o?this.normalize(t):(i=t.base.lastChild)&&/dhxrb_separator_group/i.test(i.className)&&i.parentNode.removeChild(i)},hideChild:function(t,e){var i=dhtmlXRibbon.prototype._indexOf(t.base.children,e.base);if(0==i)i++;else{if(-1==i)return;i--}var n=t.base.children[i];n&&/dhxrb_separator_group/i.test(n.className)&&n.parentNode.removeChild(n)},showChild:function(t){this.normalize(t)}},dhtmlXRibbon.prototype.items.input={render:function(t,e){var i,n;n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin,value:""}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return t.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n.conf.width&&this.setWidth(n,n.conf.width),n.conf.value&&this.setValue(n,n.conf.value),n},callAfterInit:function(t){var e=t.base.childNodes[0];this._detachEventFromItem(t.base),this._attachEventsToInput(e)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(t){var e=t.base.childNodes[0];t.conf.value=e.value},keydown:function(t,e,i){if(13==i.keyCode){var n=t.base.childNodes[0];t.conf.value=n.value,e.callEvent("onEnter",[t.id,t.conf.value])}},remove:function(t,e){var i=t.base.childNodes[0];e._detachEventsFromInput(i)},getValue:function(t){var e,i=t.base.childNodes[0];return e=i.value,i=void 0,e},setValue:function(t,e){t.base.childNodes[0].value=e,t.conf.value=e},setWidth:function(t,e){t.base.childNodes[0].style.width=parseInt(e)+"px"},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!0,/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!1,/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},getInput:function(t){return t.base.childNodes[0]}},dhtmlXRibbon.prototype.getInput=function(t){var e=this._items[t];return null==e||"input"!=e.type?null:this.items[e.type].getInput(e)},dhtmlXRibbon.prototype.items.checkbox={render:function(t,e){var i,n;n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",disable:!1,checked:!1}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);return t.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+n.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(n),n.conf.checked&&this.check(n),n},callAfterInit:function(t){t.conf.disable&&this.disable(t.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(t){return!1},mouseup:function(t){return!1},click:function(t,e,i){if(0!=i.button)return!1;"checkbox"==t.type&&(t.conf.checked?this.uncheck(t,!0):this.check(t,!0))},check:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!0,/\s?dhxrb_checked/i.test(t.base.className)||(t.base.className+=" dhxrb_checked"),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},uncheck:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!1,/\s?dhxrb_checked/i.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_checked/i,"")),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},isChecked:function(t){return"checkbox"==t.type&&1==t.conf.checked},disable:function(t){return!0},enable:function(t){return!0}},dhtmlXRibbon.prototype.items.text={render:function(t,e){var i={base:t,id:e.id,type:e.type,conf:{text:""}};for(var n in e)"id"!=n&&"type"!=n&&(i.conf[n]=e[n]);return t.innerHTML="<div class='dhxrb_item_text'>"+i.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(i),i},callAfterInit:function(t){this._detachEventFromItem(t.base)},getText:function(t){return t.conf.text},setText:function(t,e){t.conf.text=e,t.base.firstChild.innerHTML=t.conf.text}},dhtmlXRibbon.prototype.items.buttonCombo={render:function(t,e){var i,n,s={};n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",width:140,skin:e.skin,callEvent:!0,mode:e.comboType,image_path:e.comboImagePath,default_image:e.comboDefaultImage,default_image_dis:e.comboDefaultImageDis}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);for(i in n.conf)"text"!=i&&"text_pos"!=i&&"disable"!=i&&"data"!=i&&(s[i]=n.conf[i]);return n.base.className+=" dhxrb_buttoncombo_cont",n.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+n.conf.text+"</div>",s.parent=n.base.firstChild,n.combo=new dhtmlXCombo(s),n.combo.setSkin(s.skin),n.combo.attachEvent("onChange",function(t,e){n._callHandler(n.id,[t,e]),1==n.conf.callEvent&&n.callEvent("onSelectOption",[n.id,t,e]),n.conf.callEvent=!0}),n.conf.data&&(n.combo.load(n.conf.data),delete n.conf.data),"function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n},callAfterInit:function(t){this._detachEventFromItem(t.base)},disable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.combo instanceof dhtmlXCombo&&(t.combo.unload(),t.combo=null)},getValue:function(t){var e=null;return t.combo instanceof dhtmlXCombo&&(e=t.combo.getSelectedValue()),e},setValue:function(t,e,i){t.combo instanceof dhtmlXCombo&&(t.conf.callEvent=i,t.combo.setComboValue(e),t.conf.callEvent=!0)},setSkin:function(t,e){t.combo instanceof dhtmlXCombo&&t.combo.setSkin(e)}},dhtmlXRibbon.prototype.items.slider={render:function(t,e){var i,n,s={};n={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(n.conf[i]=e[i]);for(i in n.conf)"text"!=i&&"text_pos"!=i&&"isbig"!=i&&(s[i]=n.conf[i]);return n.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+n.conf.text+"</div>",s.parent=n.base.firstChild.firstChild,n.slider=new dhtmlXSlider(s),"function"==typeof this.afterRender&&this.afterRender(n),n.conf.disable&&this.disable(n),n.slider.attachEvent("onChange",function(t){n._callHandler(n.id,[t]),n.callEvent("onValueChange",[n.id,t])}),n},callAfterInit:function(t){this._detachEventFromItem(t.base)},setSkin:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setSkin(e)},disable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.slider instanceof dhtmlXSlider&&(t.slider.unload(),t.slider=null)},getValue:function(t){var e=null;return t.slider instanceof dhtmlXSlider&&(e=t.slider.getValue()),e},setValue:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setValue(e)}},dhtmlXRibbon.prototype.items._extends=function(t,e){var i;for(i in e)t[i]=t[i]||e[i];return t},dhtmlXRibbon.prototype._addNewLevel=function(t){var e;if("rows"==t.conf.mode)(e=t.contForItems.lastChild)&&/dhxrb_block_rows/i.test(e.className)&&e.childNodes.length<3?((i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):((e=document.createElement("div")).className="dhxrb_block_rows",t.contForItems.appendChild(e),(i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i));else{var i;(i=document.createElement("div")).className="dhxrb_3rows_block",t.contForItems.appendChild(i)}},dhtmlXRibbon.prototype._attachEventForItem=function(t){"function"==typeof window.addEventListener?(t.addEventListener("mouseover",this._doOnHighlight0,!1),t.addEventListener("mouseout",this._doOffHighlight0,!1),t.addEventListener("mousedown",this._doOnHighlight1,!1),t.addEventListener("mouseup",this._doOffHighlight1,!1),t.addEventListener("click",this._doOnClick,!1)):(t.attachEvent("onmouseover",this._doOnHighlight0),t.attachEvent("onmouseout",this._doOffHighlight0),t.attachEvent("onmousedown",this._doOnHighlight1),t.attachEvent("onmouseup",this._doOffHighlight1),t.attachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._detachEventFromItem=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("mouseover",this._doOnHighlight0,!1),t.removeEventListener("mouseout",this._doOffHighlight0,!1),t.removeEventListener("mousedown",this._doOnHighlight1,!1),t.removeEventListener("mouseup",this._doOffHighlight1,!1),t.removeEventListener("click",this._doOnClick,!1)):(t.detachEvent("onmouseover",this._doOnHighlight0),t.detachEvent("onmouseout",this._doOffHighlight0),t.detachEvent("onmousedown",this._doOnHighlight1),t.detachEvent("onmouseup",this._doOffHighlight1),t.detachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._attachEventsToInput=function(t){"function"==typeof window.addEventListener?(t.addEventListener("focus",this._doOnFocus,!1),t.addEventListener("blur",this._doOnBlur,!1),t.addEventListener("change",this._doOnChange,!1),t.addEventListener("keydown",this._doOnKeydown,!1)):(t.attachEvent("onfocus",this._doOnFocus),t.attachEvent("onblur",this._doOnBlur),t.attachEvent("onchange",this._doOnChange),t.attachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._detachEventsFromInput=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("focus",this._doOnFocus,!1),t.removeEventListener("blur",this._doOnBlur,!1),t.removeEventListener("change",this._doOnChange,!1),t.removeEventListener("keydown",this._doOnKeydown,!1)):(t.detachEvent("onfocus",this._doOnFocus),t.detachEvent("onblur",this._doOnBlur),t.detachEvent("onchange",this._doOnChange),t.detachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._getContainerForSmallItem=function(t){var e=t.contForItems.lastChild,i=null;return"rows"==t.conf.mode?e&&/\s?dhxrb_block_rows/i.test(e.className)?(i=e.lastChild)||((i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):((e=document.createElement("div")).className="dhxrb_block_rows",t.contForItems.appendChild(e),(i=document.createElement("div")).className="dhxrb_block_row",e.appendChild(i)):e&&/dhxrb_3rows_block/i.test(e.className)&&e.childNodes.length<3?i=e:((i=document.createElement("div")).className="dhxrb_3rows_block",t.contForItems.appendChild(i)),i},dhtmlXRibbon.prototype._findItemByNode=function(t){for(;t&&!t._dhx_ribbonId;)t=t.parentNode;return t},dhtmlXRibbon.prototype._indexOf=function(t,e){var i,n;for(n=t.length,i=0;i<n;i++)if(t[i]==e)return i;return-1},dhtmlXRibbon.prototype._removeItem=function(t){var e,i=-1,n=this._items[t.parentId];"group"!=t.type?(delete this._items[t.id],e=t.base.parentNode,this._detachEventFromItem(t.base),e.removeChild(t.base),"block"==n.type?e!=n.contForItems&&0==e.childNodes.length&&e.parentNode.removeChild(e):"group"==n.type&&dhtmlXRibbon.prototype.items.group.normalize(n),-1!=(i=this._indexOf(n.childIds,t.id))&&n.childIds.splice(i,1),this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t,this)):this._removeGroup(t)},dhtmlXRibbon.prototype._removeGroup=function(t){for(var e,i=[],n=this._items[t.parentId],s=t.base.parentNode,o=0;o<t.childIds.length;o++)i.push(this._items[t.childIds[o]]);for(o=0;o<i.length;o++)this._removeItem(i[o]);delete this._items[t.id],t.base.parentNode&&s.removeChild(t.base),0==s.childNodes.length&&s.parentNode.removeChild(s),-1!=(e=this._indexOf(n.childIds,t.id))&&n.childIds.splice(e,1),this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t)},dhtmlXRibbon.prototype._removeBlock=function(t){for(var e,i,n=[],s=0;s<t.childIds.length;s++)n.push(this._items[t.childIds[s]]);for(s=0;s<n.length;s++)this._removeItem(n[s]);delete this._items[t.id],t.base.parentNode.removeChild(t.base),i=t.parentId?this._items[t.parentId]:this,-1!=(e=this._indexOf(i.childIds,t.id))&&i.childIds.splice(e,1)},dhtmlXRibbon.prototype._removeTab=function(t,e){for(var i,n=[],s=0;s<t.childIds.length;s++)n.push(this._items[t.childIds[s]]);for(s=0;s<n.length;s++)this._removeBlock(n[s]);delete this._items[t.id],-1!=(i=this._indexOf(this.childIds,t.id))&&this.childIds.splice(i,1)},dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0},dhtmlXRibbon.prototype._setSkinForItems=function(t){var e,i;for(e in this._items)(i=this._items[e]).conf.skin=t,dhtmlXRibbon.prototype.items[i.type]&&"function"==typeof dhtmlXRibbon.prototype.items[i.type].setSkin&&dhtmlXRibbon.prototype.items[i.type].setSkin(i,t);i=void 0,e=void 0},dhtmlXRibbon.prototype._setBlockText=function(t,e){t.conf.text=e,t.contForText.innerHTML=e,!e&&0!=e&&t.contForText.parentNode?t.contForText.parentNode.removeChild(t.contForText):t.contForText.parentNode||("top"==t.conf.text_pos?t.base.insertBefore(t.contForText,t.contForItems):t.base.appendChild(t.contForText))},dhtmlXRibbon.prototype.hide=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].hide||1==this.items[e.type].hide(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)||(e.base.className+=" dhxrb_item_hide");var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].hideChild&&this.items[i.type].hideChild(i,e)}},dhtmlXRibbon.prototype.show=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].show||1==this.items[e.type].show(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)&&(e.base.className=e.base.className.replace(/\s?dhxrb_item_hide/i,""));var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].showChild&&this.items[i.type].showChild(i,e)}},dhtmlXRibbon.prototype.check=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&!i.conf.checked&&"function"==typeof this.items[i.type].check&&(this.items[i.type].check(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.uncheck=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&i.conf.checked&&"function"==typeof this.items[i.type].uncheck&&(this.items[i.type].uncheck(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.isChecked=function(t){var e=this._items[t];if(e&&"function"==typeof this.items[e.type].isChecked)return this.items[e.type].isChecked(e)},dhtmlXRibbon.prototype.disable=function(t,e){var i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].disable||1==this.items[i.type].disable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(var n=0;n<i.childIds.length;n++)this.disable(i.childIds[n]);/\s?dhxrb_item_disable/i.test(i.base.className)||(i.base.className+=" dhxrb_item_disable"),null!=i.base.className.match(/dhxrb_highlight/gi)&&("buttonTwoState"==i.type?i.base.className=i.base.className.replace(/\s*dhxrb_highlight0/gi,""):i.base.className=i.base.className.replace(/\s*dhxrb_highlight\d/gi,"")),i.conf.disable=!0}},dhtmlXRibbon.prototype.enable=function(t,e){var i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].enable||1==this.items[i.type].enable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(q=0;q<i.childIds.length;q++)this.enable(i.childIds[q]);/\s?dhxrb_item_disable/i.test(i.base.className)&&(i.base.className=i.base.className.replace(/\s?dhxrb_item_disable/i,"")),i.conf.disable=!1}},dhtmlXRibbon.prototype.isEnabled=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isEnabled?this.items[e.type].isEnabled(e):"tab"==e.type?void 0:1!=e.conf.disable},dhtmlXRibbon.prototype.isVisible=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isVisible?this.items[e.type].isVisible(e):"tab"==e.type?void 0:!/\s?dhxrb_item_hide/i.test(e.base.className)},dhtmlXRibbon.prototype.setItemState=function(t,e,i){e=dhx4.s2b(e),i=dhx4.s2b(i);var n=this._items[t];if(n&&"function"==typeof this.items[n.type].setState)switch(n.type){case"buttonSegment":this.items[n.type].setState(n,this,i);break;default:this.items[n.type].setState(n,e,i)}},dhtmlXRibbon.prototype.getItemState=function(t){var e=this._items[t];if(e&&"function"==typeof this.items[e.type].getState)switch(e.type){case"buttonTwoState":case"buttonSegment":return this.items[e.type].getState(e)}return null},dhtmlXRibbon.prototype.setIconPath=function(t){this.conf.icons_path=t},dhtmlXRibbon.prototype.setIconset=function(t){this.conf.icons_css="awesome"==t},dhtmlXRibbon.prototype.removeItem=function(t){var e=this._items[t];if(null!=e)switch(e.type){case"tab":break;case"block":this._removeBlock(e);break;case"group":this._removeGroup(e);break;default:this._removeItem(e)}},dhtmlXRibbon.prototype.setSkin=function(t){if(t="string"==typeof t?t.toLowerCase():"",1==this._skinCollection[t]){var e,i,n=-1;if((e=this._base.className.match(/\S\w+/gi))instanceof Array){for(i in this._skinCollection){if(-1!=n)break;n=this._indexOf(e,"dhtmlxribbon_"+i)}n=-1==n?e.length:n}else e=[],n=0;e[n]="dhtmlxribbon_"+t,this._base.className=e.join(" "),this.conf.skin=t,null!=this._tabbar&&this._tabbar.setSkin(t),this._setSkinForItems(t)}},dhtmlXRibbon.prototype.tabs=function(t){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(t):void 0},dhtmlXRibbon.prototype.getItemType=function(t){var e=this._items[t];return e?e.type:void 0},dhtmlXRibbon.prototype.getValue=function(t){var e=this._items[t],i=void 0;return e&&this.items[e.type]&&"function"==typeof this.items[e.type].getValue&&(i=this.items[e.type].getValue(e)),i},dhtmlXRibbon.prototype.setValue=function(t,e,i){var n=this._items[t];i=!1!==i,n&&this.items[n.type]&&"function"==typeof this.items[n.type].setValue&&this.items[n.type].setValue(n,e,i)},dhtmlXRibbon.prototype.getItemText=function(t){var e=this._items[t];return e?"tab"==e.type?this.tabs(e.id).getText():"block"==e.type?this.items.button.getText(e):this.items[e.type]&&"function"==typeof this.items[e.type].getText?this.items[e.type].getText(e):null:null},dhtmlXRibbon.prototype.setItemText=function(t,e){var i=this._items[t];i&&("tab"==i.type?this.tabs(i.id).setText(e):"block"==i.type?this._setBlockText(i,e):this.items[i.type]&&"function"==typeof this.items[i.type].setText&&this.items[i.type].setText(i,e))},dhtmlXRibbon.prototype.setItemOptionText=function(t,e,i){var n=this._items[t];"buttonSelect"==n.type&&this.items[n.type].setOptionText(n,e,i)},dhtmlXRibbon.prototype.getItemOptionText=function(t,e){var i=this._items[t];return"buttonSelect"==i.type?this.items[i.type].getOptionText(i,e):null},dhtmlXRibbon.prototype.setItemImage=function(t,e){var i=this._items[t];null!=i&&null!=this.items[i.type]&&"function"==typeof this.items[i.type].setImage&&this.items[i.type].setImage(i,e)},dhtmlXRibbon.prototype.setItemImageDis=function(t,e){var i=this._items[t];null!=i&&null!=this.items[i.type]&&"function"==typeof this.items[i.type].setImageDis&&this.items[i.type].setImageDis(i,e)},dhtmlXRibbon.prototype.getCombo=function(t){var e=this._items[t];return null!=e&&"buttonCombo"==e.type?e.combo:null},function(){var t=dhtmlXRibbon.prototype.items;t.buttonTwoState=t._extends(t.buttonTwoState,t.button),t.buttonSelect=t._extends(t.buttonSelect,t.buttonTwoState),t.buttonSegment=t._extends(t.buttonSegment,t.buttonTwoState)}(),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_ribbon=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),t},dhtmlXCellObject.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.callEvent("_onBeforeContentAttach",["ribbon"]),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("ribbon").firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t);var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e._adjustCont(e._idd)}),this._adjustCont(),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&("function"==typeof this.dataNodes.ribbon.unload&&this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon}),dhtmlXToolbarObject.prototype.addSpacer=function(t){var e=this.idPrefix+t;if(null!=this._spacer){if(this._spacer.idd==t)return;if(this._spacer==this.objPull[e].obj.parentNode){for(var i=!0;i;){var n=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]),n!=t&&0!=this._spacer.childNodes.length||(null!=this.objPull[e].arw&&this.base.appendChild(this.objPull[e].arw),i=!1)}return this._spacer.idd=t,void this._fixSpacer()}if(this.base==this.objPull[e].obj.parentNode){i=!0;for(var s=null!=this.objPull[e].arw;i;){var o=this.base.childNodes.length-1;1==s&&this.base.childNodes[o]==this.objPull[e].arw&&(i=!1),this.base.childNodes[o].idd==t&&(i=!1),i&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[o],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[o]))}return this._spacer.idd=t,void this._fixSpacer()}}else{var l=null;for(o=0;o<this.base.childNodes.length;o++)this.base.childNodes[o]==this.objPull[this.idPrefix+t].obj&&(l=o,null!=this.objPull[this.idPrefix+t].arw&&(l=o+1));if(null!=l){for(this._spacer=document.createElement("DIV"),this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=t;this.base.childNodes.length>l+1;)this._spacer.appendChild(this.base.childNodes[l+1]);this.cont.appendChild(this._spacer),this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;this._spacer.childNodes.length>0;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer),this._spacer=null,"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}},dhtmlXToolbarObject.prototype._fixSpacer=function(){if(void 0===window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var t=this._spacer;window.setTimeout(function(){t.style.borderLeft="0px solid #a4bed4",t=null},1)}},dhtmlXToolbarObject.prototype.getType=function(t){var e=this.getParentId(t);if(null!=e){var i=null,n=this.objPull[this.idPrefix+e]._listOptions[t];return null!=n&&(i=null!=n.sep?"buttonSelectSeparator":"buttonSelectButton"),i}return null==this.objPull[this.idPrefix+t]?null:this.objPull[this.idPrefix+t].type},dhtmlXToolbarObject.prototype.getTypeExt=function(t){var e=this.getType(t);return"buttonSelectButton"==e||"buttonSelectSeparator"==e?e="buttonSelectButton"==e?"button":"separator":null},dhtmlXToolbarObject.prototype.inArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},dhtmlXToolbarObject.prototype.getParentId=function(t){var e=null;for(var i in this.objPull)if(this.objPull[i]._listOptions)for(var n in this.objPull[i]._listOptions)n==t&&(e=String(i).replace(this.idPrefix,""));return e},dhtmlXToolbarObject.prototype._addItem=function(t,e){"string"==typeof t.text&&(t.text=window.dhx4.trim(t.text),0==t.text.length&&(t.text=null)),this._addItemToStorage(t,e),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.addButton=function(t,e,i,n,s){this._addItem({id:t,type:"button",text:i,img:n,imgdis:s},e)},dhtmlXToolbarObject.prototype.addText=function(t,e,i){this._addItem({id:t,type:"text",text:i},e)},dhtmlXToolbarObject.prototype.addButtonSelect=function(t,e,i,n,s,o,l,r,a,h){for(var d=[],c=0;c<n.length;c++){var u={};n[c]instanceof Array?(u.id=n[c][0],u.type="obj"==n[c][1]?"button":"separator",u.text=n[c][2]||null,u.img=n[c][3]||null):n[c]instanceof Object&&null!=n[c]&&void 0!==n[c].id&&void 0!==n[c].type&&(u.id=n[c].id,u.type="obj"==n[c].type?"button":"separator",u.text=n[c].text,u.img=n[c].img),d.push(u)}this._addItem({id:t,type:"buttonSelect",text:i,img:s,imgdis:o,renderSelect:l,openAll:r,options:d,maxOpen:a,mode:h},e)},dhtmlXToolbarObject.prototype.addButtonTwoState=function(t,e,i,n,s){this._addItem({id:t,type:"buttonTwoState",img:n,imgdis:s,text:i},e)},dhtmlXToolbarObject.prototype.addSeparator=function(t,e){this._addItem({id:t,type:"separator"},e)},dhtmlXToolbarObject.prototype.addSlider=function(t,e,i,n,s,o,l,r,a){this._addItem({id:t,type:"slider",length:i,valueMin:n,valueMax:s,valueNow:o,textMin:l,textMax:r,toolTip:a},e)},dhtmlXToolbarObject.prototype.addInput=function(t,e,i,n){this._addItem({id:t,type:"buttonInput",value:i,width:n},e)},dhtmlXToolbarObject.prototype.forEachItem=function(t){for(var e in this.objPull)this.inArray(this.rootTypes,this.objPull[e].type)&&t(this.objPull[e].id.replace(this.idPrefix,""))},function(){for(var t="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),e=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],i=function(t,e){return function(i,n,s){return i=this.idPrefix+i,null!=this.objPull[i][t]?this.objPull[i][t].call(this.objPull[i],n,s):e}},n=0;n<t.length;n++){var s=t[n],o=e[n];dhtmlXToolbarObject.prototype[s]=i(s,o)}}(),dhtmlXToolbarObject.prototype.showItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].showItem&&(this.objPull[t].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.hideItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].hideItem&&(this.objPull[t].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.getPosition=function(t){return this._getPosition(t)},dhtmlXToolbarObject.prototype._getPosition=function(t,e){if(null==this.objPull[this.idPrefix+t])return null;for(var i=null,n=0,s=0;s<this.base.childNodes.length;s++)null!=this.base.childNodes[s].idd&&(this.base.childNodes[s].idd==t&&(i=n),n++);if(!i&&null!=this._spacer)for(s=0;s<this._spacer.childNodes.length;s++)null!=this._spacer.childNodes[s].idd&&(this._spacer.childNodes[s].idd==t&&(i=n),n++);return i},dhtmlXToolbarObject.prototype.setPosition=function(t,e){this._setPosition(t,e)},dhtmlXToolbarObject.prototype._setPosition=function(t,e){if(null!=this.objPull[this.idPrefix+t]){var i=null;this._spacer&&(i=this._spacer.idd,this.removeSpacer()),isNaN(e)&&(e=this.base.childNodes.length),e<0&&(e=0);var n=this.objPull[this.idPrefix+t];this.base.removeChild(n.obj),n.arw&&this.base.removeChild(n.arw);var s=this._getIdByPosition(e,!0);null==s[0]?(this.base.appendChild(n.obj),n.arw&&this.base.appendChild(n.arw)):(this.base.insertBefore(n.obj,this.base.childNodes[s[1]]),n.arw&&this.base.insertBefore(n.arw,this.base.childNodes[s[1]+1])),null!=i&&this.addSpacer(i)}},dhtmlXToolbarObject.prototype._getIdByPosition=function(t,e){for(var i=null,n=0,s=0,o=0;o<this.base.childNodes.length;o++)null!=this.base.childNodes[o].idd&&null==i&&n++==t&&(i=this.base.childNodes[o].idd),null==i&&s++;return s=null==i?null:s,1==e?new Array(i,s):i},dhtmlXToolbarObject.prototype.removeItem=function(t){this._removeItem(t),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._removeItem=function(t){var e=this.getType(t);t=this.idPrefix+t;var i=this.objPull[t];if(1=={button:1,buttonTwoState:1}[e]){window.dhx4.isIE&&(i.obj.onselectstart=null),this._evs.clear.apply(i,[i.obj.evs,i.obj]);for(var n in i.obj)"function"==typeof i.obj[n]&&(i.obj[n]=null);i.obj.parentNode.removeChild(i.obj),i.obj=null;for(var n in i)i[n]=null}if("buttonSelect"==e){for(var n in i._listOptions)this.removeListOption(t,n);i._listOptions=null,i.polygon._ie6cover&&(document.body.removeChild(i.polygon._ie6cover),i.polygon._ie6cover=null),i.p_tbl.removeChild(i.p_tbody),i.polygon.removeChild(i.p_tbl),i.polygon.onselectstart=null,document.body.removeChild(i.polygon),window.dhx4.isIE&&(i.obj.onselectstart=null,i.arw.onselectstart=null),this._evs.clear.apply(i,[i.obj.evs,i.obj]),this._evs.clear.apply(i,[i.arw.evs,i.arw]);for(var n in i.obj)"function"==typeof i.obj[n]&&(i.obj[n]=null);i.obj.parentNode.removeChild(i.obj),i.obj=null;for(var n in i.arw)"function"==typeof i.arw[n]&&(i.arw[n]=null);i.arw.parentNode.removeChild(i.arw),i.arw=null;for(var n in i)i[n]=null}if("buttonInput"==e&&(i.obj.childNodes[0].onkeydown=null,i.obj.removeChild(i.obj.childNodes[0]),i.obj.w=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemToolTip=null,i.getItemToolTip=null,i.setWidth=null,i.getWidth=null,i.setValue=null,i.getValue=null,i.setItemText=null,i.getItemText=null),"slider"==e){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",i.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",i.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",i.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",i.pen._doOnMouseMoveEnd)),i.pen.allowMove=null,i.pen.initXY=null,i.pen.maxX=null,i.pen.minX=null,i.pen.nowX=null,i.pen.newNowX=null,i.pen.valueMax=null,i.pen.valueMin=null,i.pen.valueNow=null,i.pen._definePos=null,i.pen._detectLimits=null,i.pen._doOnMouseMoveStart=null,i.pen._doOnMouseMoveEnd=null,i.pen.onmousedown=null,i.obj.removeChild(i.pen),i.pen=null,i.label.tip=null,document.body.removeChild(i.label),i.label=null,i.obj.onselectstart=null,i.obj.idd=null;i.obj.childNodes.length>0;)i.obj.removeChild(i.obj.childNodes[0]);i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.state=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.setItemToolTipTemplate=null,i.getItemToolTipTemplate=null,i.setMaxValue=null,i.setMinValue=null,i.getMaxValue=null,i.getMinValue=null,i.setValue=null,i.getValue=null,i.showItem=null,i.hideItem=null,i.isVisible=null}"separator"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null),"text"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setWidth=null,i.setItemText=null,i.getItemText=null),e=null,i=null,this.objPull[this.idPrefix+t]=null,delete this.objPull[this.idPrefix+t]},function(){for(var t="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),e=function(t){return function(e,i,n,s,o,l){if(e=this.idPrefix+e,null!=this.objPull[e]&&"buttonSelect"==this.objPull[e].type)return this.objPull[e][t].call(this.objPull[e],i,n,s,o,l)}},i=0;i<t.length;i++){var n=t[i];dhtmlXToolbarObject.prototype[n]=e(n)}}(),dhtmlXToolbarObject.prototype._rtlParseBtn=function(t,e){return t+e},dhtmlXToolbarObject.prototype._separatorObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.ontouchstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this},dhtmlXToolbarObject.prototype._textObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.ontouchstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},this.obj.innerHTML=i.text||"",t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(t){this.obj.innerHTML=t},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(t){this.obj.style.width=t+"px"},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1;var n=t.conf.icons_css?"<i class='"+t.conf.icons_path+this.img+"'></i>":"<img src='"+t.conf.icons_path+this.img+"'>";this.obj.innerHTML=t._rtlParseBtn(""!=this.img?n:"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1});var s=this;return this._doOnMouseOver=function(t){t=t||event,0!=s.state&&1!=s.obj.pressed&&1!=s.obj.over&&(null==s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),s.obj.over=!0)},this._doOnMouseOut=function(t){t=t||event,0!=s.state&&(null!=s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),s.obj.over=s.obj.pressed=!1)},this._doOnMouseDown=function(e){if("touchstart"==(e=e||event).type){if(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,null!=t.conf.touch_id&&t.conf.touch_id!=s.id)return;t.conf.touch_id=s.id}0!=s.state&&(null==s.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"),s.obj.pressed=!0)},this._doOnMouseUp=function(e){"touchend"==(e=e||event).type&&(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,t.conf.touch_id==s.id&&(t.conf.touch_id=null)),0!=s.state&&0!=s.obj.pressed&&(null!=s.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(s.obj.over?"over":"def")),s.obj.pressed=!1,s.obj.extAction&&window.setTimeout(function(){try{s&&s.obj&&window[s.obj.extAction](s.id)}catch(t){}},1),t.callEvent("onClick",[s.obj.idd.replace(t.idPrefix,"")]))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},t._evs.add.apply(this,[this.obj.evs,this.obj]),this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonSelectObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled||"true"==i.enabled,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.mode=i.mode||"button","select"==this.mode?(this.openAll=!0,this.renderSelect=!1,i.text&&0!=i.text.length||(i.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(i.openAll),this.renderSelect=null==i.renderSelect||window.dhx4.s2b(i.renderSelect)),this.maxOpen=isNaN(i.maxOpen?i.maxOpen:"")?null:i.maxOpen,this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!t._sbw){var e=document.createElement("DIV");e.className="dhxtoolbar_maxopen_test",document.body.appendChild(e);var i=document.createElement("DIV");i.className="dhxtoolbar_maxopen_test2",e.appendChild(i),t._sbw=e.offsetWidth-i.offsetWidth,e.removeChild(i),i=null,document.body.removeChild(e),e=null}},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1,this.callEvent=!1;var n=t.conf.icons_css?"<i class='"+t.conf.icons_path+this.img+"'></i>":"<img src='"+t.conf.icons_path+this.img+"'>";this.obj.innerHTML=t._rtlParseBtn(""!=this.img?n:"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},t.base.appendChild(this.arw);var s=this;if(window.dhx4.isIE&&(this.arw.onselectstart=this.obj.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1}),this._doOnMouseOver=function(e){e=e||event,0!=s.state&&1!=s.obj.over&&t.anyUsed!=s.obj.idd&&(null==s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"),s.obj.over=!0)},this._doOnMouseOut=function(e){e=e||event,0!=s.state&&t.anyUsed!=s.obj.idd&&t.anyUsed!=s.obj.idd&&(null!=s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),s.obj.over=s.obj.pressed=!1)},this._doOnMouseDown=function(e){if("touchstart"==(e=e||event).type){if(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,null!=t.conf.touch_id&&t.conf.touch_id!=s.id)return;t.conf.touch_id=s.id}if(0!=s.state)if(t.anyUsed==s.obj.idd)1==s.obj.over?(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"):(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),s._hidePoly(!0),t.anyUsed=null;else{var i=e.target||e.srcElement;1==s.openAll||i==s.arw||i.parentNode==s.arw?("touchstart"==e.type&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",s.arw._skip=!0,s._showPoly(!0),t.anyUsed=s.obj.idd):(null==s.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"),s.obj.pressed=!0)}},this._doOnMouseUp=function(i){if("touchend"==(i=i||event).type){if(""==s.polygon.style.display)return;i.preventDefault&&i.preventDefault(),i.cancelBubble=!0,t.conf.touch_id==s.id&&(t.conf.touch_id=null)}if(0!=s.state&&0!=s.obj.pressed){if(null!=s.obj.className.match(/dhxtoolbar_btn_pres/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(s.obj.over?"over":"def"),s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(s.obj.over?"over":"def")),this.extAction){var n=this;window.setTimeout(function(){try{window[n.extAction](e)}catch(t){}n=null},1)}t.callEvent("onClick",[s.obj.idd.replace(t.idPrefix,"")])}},this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"},t._evs.add.apply(this,[this.arw.evs,this.arw]),this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},t._evs.add.apply(this,[this.obj.evs,this.obj]),this._showPoly=function(e){if(null!=t.anyUsed&&"buttonSelect"==t.objPull[t.idPrefix+t.anyUsed].type){var i=t.objPull[t.idPrefix+t.anyUsed];"none"!=i.polygon.style.display&&(i.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",i.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",i.obj.over=!1,window.dhx4.zim.clear(i.polygon._idd),i.polygon.style.display="none",i.polygon._ie6cover&&(i.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(i.id,!0),t.callEvent("onButtonSelectHide",[i.obj.idd]))}this.polygon.style.top="0px",this.polygon.style.visibility="hidden",this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd),this.polygon.style.display="","dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(this.id,!1),this._fixMaxOpenHeight(this.maxOpen||null),t._autoDetectVisibleArea();var n=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+t.conf.sel_ofs_y,s=this.polygon.offsetHeight;if(n+s>t.tY2){var o=null!=this.maxOpen?Math.floor((t.tY2-n)/22):0;o>=1?this._fixMaxOpenHeight(o):(n=window.dhx4.absTop(this.obj)-s-t.conf.sel_ofs_y)<0&&(n=0)}if(this.polygon.style.top=n+"px",t.rtl)this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+t.conf.sel_ofs_x+"px";else{var l=document.body.scrollLeft+(window.innerWidth||document.body.clientWidth),r=window.dhx4.absLeft(this.obj)+t.conf.sel_ofs_x;r+this.polygon.offsetWidth>l&&(r=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth),this.polygon.style.left=Math.max(r,5)+"px"}this.polygon.style.visibility="visible",this.polygon._ie6cover&&(this.polygon._ie6cover.style.left=this.polygon.style.left,this.polygon._ie6cover.style.top=this.polygon.style.top,this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px",this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px",this.polygon._ie6cover.style.display=""),e&&t.callEvent("onButtonSelectShow",[this.obj.idd])},this._hidePoly=function(e){window.dhx4.zim.clear(this.polygon._idd),this.polygon.style.display="none",this.polygon._ie6cover&&(this.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(this.id,!0),e&&t.callEvent("onButtonSelectHide",[this.obj.idd]),t.conf.touch_id=null},this.obj.iddPrefix=t.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(e){var i="auto",n=!1;if(null!==e){var o=0;for(var l in this._listOptions)o++;o>e?(this._ph=22*e,i=this._ph+"px"):n=!0}this.polygon.style.width="auto",this.polygon.style.height="auto",n||null==s.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+t._sbw+"px",this.polygon.style.height=i)},this._separatorButtonSelectObject=function(t,e,i){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},isNaN(i)?i=s.p_tbody.childNodes.length+1:i<1&&(i=1),i>s.p_tbody.childNodes.length?s.p_tbody.appendChild(this.obj.tr):s.p_tbody.insertBefore(this.obj.tr,s.p_tbody.childNodes[i-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),s._listOptions[t]=this.obj,this},this._buttonButtonSelectObject=function(e,i,n){var o=!0;void 0!==i.enabled?o=window.dhx4.s2b(i.enabled):void 0!==i.disabled&&(o=window.dhx4.s2b(i.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=o,this.obj.tr.extAction=i.action||null,this.obj.tr._selected=null!=i.selected,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&s.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.tr.idd=String(e),isNaN(n)?n=s.p_tbody.childNodes.length+1:n<1&&(n=1),n>s.p_tbody.childNodes.length?s.p_tbody.appendChild(this.obj.tr):s.p_tbody.insertBefore(this.obj.tr,s.p_tbody.childNodes[n-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},t.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),null!=i.img?(1==t.conf.icons_css?this.obj.td_a.innerHTML="<i class='"+t.conf.icons_path+i.img+"'></i>":this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+t.conf.icons_path+i.img+"' border='0'>",this.obj.tr._img=i.img):this.obj.td_a.innerHTML="&nbsp;";var l=null!=i.text?i.text:i.itemText||"";return this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+l+"</div>",this.obj.tr.onmouseover=function(t){null==(t=t||event).type.match(/touch/)&&(!this.en||this._selected&&s.renderSelect||(this.className="tr_btn tr_btn_over"))},this.obj.tr.onmouseout=function(t){null==(t=t||event).type.match(/touch/)&&this.en&&(this._selected&&s.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(t){t=t||event,null==this._etype&&(this._etype=t.type)},this.obj.tr.onclick=function(e){if(e=e||event,e.cancelBubble=!0,this.en){if(s.setListOptionSelected(this.idd.replace(t.idPrefix,"")),s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",s.obj.over=!1,null!=this._etype&&null==this._etype.match(/touch/))window.dhx4.zim.clear(s.polygon._idd),s.polygon.style.display="none",s.polygon._ie6cover&&(s.polygon._ie6cover.style.display="none");else{var i=s.polygon;window.setTimeout(function(){window.dhx4.zim.clear(i._idd),i.style.display="none",i=null},500)}this._etype=null,"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(s.id,!0),t.anyUsed=null,t.conf.touch_id=null,t.callEvent("onButtonSelectHide",[s.obj.idd]);var n=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](n)}catch(e){}t.callEvent("onClick",[n])}},s._listOptions[e]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+t.conf.skin+" dhxtoolbar_icons_"+t.conf.iconSize+t.conf.cssShadow,this.polygon.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.polygon.onmousedown=function(t){(t=t||event).cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),this.polygon.ontouchstart=function(t){(t=t||event).cancelBubble=!0},this.polygon.ontouchend=function(t){(t=t||event).cancelBubble=!0},this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),null!=i.options)for(var o=0;o<i.options.length;o++){var l="_"+(i.options[o].type||"")+"ButtonSelectObject";null==i.options[o].id&&(i.options[o].id=t._genStr(24)),"function"==typeof this[l]&&new this[l](i.options[o].id,i.options[o])}return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(t){this.obj.style.width=t-this.arw.offsetWidth+"px",this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px",this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="",this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none",this.arw.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t,this.arw.title=t},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(t,e,i,n,s){if("button"==i||"separator"==i){var o={id:t,type:i,text:n,img:s};new this["_"+i+"ButtonSelectObject"](t,o,e)}},this.removeListOption=function(t){if(this._isListButton(t,!0)){var e=this._listOptions[t];if(null!=e.td_a&&null!=e.td_b){for(e.td_a.onselectstart=null,e.td_b.onselectstart=null;e.td_a.childNodes.length>0;)e.td_a.removeChild(e.td_a.childNodes[0]);for(;e.td_b.childNodes.length>0;)e.td_b.removeChild(e.td_b.childNodes[0]);for(e.tr.onselectstart=null,e.tr.onmouseover=null,e.tr.onmouseout=null,e.tr.onclick=null,e.tr.ontouchstart=null,e.tr.onmousedown=null;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.td_a=null,e.td_b=null,e.tr=null}else{for(e.sep.onselectstart=null,e.td.onselectstart=null,e.tr.onselectstart=null;e.td.childNodes.length>0;)e.td.removeChild(e.td.childNodes[0]);for(;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.sep=null,e.td=null,e.tr=null}e=null,this._listOptions[t]=null;try{delete this._listOptions[t]}catch(t){}}},this.showListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="")},this.hideListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="none")},this.isListOptionVisible=function(t){if(this._isListButton(t,!0))return"none"!=this._listOptions[t].tr.style.display},this.enableListOption=function(e){this._isListButton(e)&&(this._listOptions[e].tr.en=!0,this._listOptions[e].tr.className="tr_btn"+(this._listOptions[e].tr._selected&&t.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(t){this._isListButton(t)&&(this._listOptions[t].tr.en=!1,this._listOptions[t].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(t){if(this._isListButton(t))return this._listOptions[t].tr.en},this.setListOptionPosition=function(t,e){if(this._listOptions[t]&&this.getListOptionPosition(t)!=e&&!isNaN(e)){e<1&&(e=1);var i=this._listOptions[t].tr;this.p_tbody.removeChild(i),e>this.p_tbody.childNodes.length?this.p_tbody.appendChild(i):this.p_tbody.insertBefore(i,this.p_tbody.childNodes[e-1]),i=null}},this.getListOptionPosition=function(t){var e=-1;if(!this._listOptions[t])return e;for(var i=0;i<this.p_tbody.childNodes.length;i++)this.p_tbody.childNodes[i]==this._listOptions[t].tr&&(e=i+1);return e},this.setListOptionImage=function(e,i){if(this._isListButton(e)){var n=this._listOptions[e].tr.childNodes[t.rtl?1:0];n.innerHTML=t.conf.icons_css?"<i class='"+t.conf.icons_path+i+"'></i>":"<img src='"+t.conf.icons_path+i+"' class='btn_sel_img'>",n=null}},this.getListOptionImage=function(e){if(this._isListButton(e)){var i=this._listOptions[e].tr.childNodes[t.rtl?1:0],n=null;return i.childNodes.length>0&&(n=i.childNodes[0][t.conf.icons_css?"className":"src"]),i=null,n}},this.clearListOptionImage=function(e){if(this._isListButton(e)){for(var i=this._listOptions[e].tr.childNodes[t.rtl?1:0];i.childNodes.length>0;)i.removeChild(i.childNodes[0]);i.innerHTML="&nbsp;",i=null}},this.setListOptionText=function(e,i){this._isListButton(e)&&(this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML=i)},this.getListOptionText=function(e){if(this._isListButton(e))return this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML},this.setListOptionToolTip=function(t,e){this._isListButton(t)&&(this._listOptions[t].tr.title=e)},this.getListOptionToolTip=function(t){if(this._isListButton(t))return this._listOptions[t].tr.title},this.forEachListOption=function(t){for(var e in this._listOptions)t(e)},this.getAllListOptions=function(){var t=new Array;for(var e in this._listOptions)t[t.length]=e;return t},this.setListOptionSelected=function(t){for(var e in this._listOptions){var i=this._listOptions[e];null!=i.td_a&&null!=i.td_b&&i.tr.en&&(e==t?(i.tr._selected=!0,i.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(i.tr._img?this.setItemImage(i.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(t)))):(i.tr._selected=!1,i.tr.className="tr_btn")),i=null}},this.getListOptionSelected=function(){var t=null;for(var e in this._listOptions)1==this._listOptions[e].tr._selected&&(t=e);return t},this._isListButton=function(t,e){return null!=this._listOptions[t]&&!(!e&&"tr_sep"==this._listOptions[t].tr.className)},this.setMaxOpen=function(t){if(this._ph=null,"number"==typeof t)return this.maxOpen=t,void this._maxOpenTest();this.maxOpen=null},i.width&&this.setWidth(i.width),"select"==this.mode&&void 0!==i.selected&&this.setListOptionSelected(i.selected),this},dhtmlXToolbarObject.prototype._buttonInputObject=function(t,e,i){this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.w=null!=i.width?i.width:100,this.obj.title=null!=i.title?i.title:"",this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=i.value?" value='"+i.value+"'":"")+">";var n=t,s=this;return this.obj.childNodes[0].onkeydown=function(t){13==(t=t||event).keyCode&&n.callEvent("onEnter",[s.obj.idd,this.value])},t.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return"none"!=this.obj.style.display},this.setValue=function(t){this.obj.childNodes[0].value=t},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(t){this.obj.w=t,this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},void 0!==i.enabled&&0==window.dhx4.s2b(i.enabled)&&this.disableItem(),this},dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled,this.imgEn=null!=i.img?i.img:"",this.imgDis=null!=i.imgdis?i.imgdis:"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=null!=i.selected,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");var n=t.conf.icons_css?"<i class='"+t.conf.icons_path+this.img+"'></i>":"<img src='"+t.conf.icons_path+this.img+"'>";this.obj.innerHTML=t._rtlParseBtn(""!=this.img?n:"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1});var s=this;return this._doOnMouseOver=function(t){t=t||event,0!=s.state&&1!=s.obj.over&&(1!=s.obj.pressed&&null==s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),s.obj.over=!0)},this._doOnMouseOut=function(t){t=t||event,0!=s.state&&(1!=s.obj.pressed&&null!=s.obj.className.match(/dhxtoolbar_btn_over/gi)&&(s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),s.obj.over=!1)},this._doOnMouseDown=function(e){if("touchstart"==(e=e||event).type){if(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,null!=t.conf.touch_id&&t.conf.touch_id!=s.id)return;t.conf.touch_id=s.id}if(0!=s.state&&!0===t.callEvent("onBeforeStateChange",[s.obj.idd.replace(t.idPrefix,""),s.obj.pressed])){s.obj.pressed=!s.obj.pressed,s.obj.className="dhx_toolbar_btn "+(1==s.obj.pressed?"dhxtoolbar_btn_pres":1==s.obj.over?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def");var i=s.obj.idd.replace(t.idPrefix,"");if(s.obj.extAction)try{window[s.obj.extAction](idd,s.obj.pressed)}catch(e){}t.callEvent("onStateChange",[i,s.obj.pressed])}},this._doOnMouseUp=function(e){"touchend"==(e=e||event).type&&(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,t.conf.touch_id==s.id&&(t.conf.touch_id=null))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},t._evs.add.apply(this,[this.obj.evs,this.obj]),this.setItemState=function(e,i){if(this.obj.pressed!=e&&(1==e?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")),1==i)){var n=this.obj.idd.replace(t.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](n,this.obj.pressed)}catch(t){}t.callEvent("onStateChange",[n,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._sliderObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null==i.enabled||"true"==i.enabled,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.onselectstart=function(t){(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.len=null!=i.length?Number(i.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(i.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(i.textMax||"")+"</div>",t.base.appendChild(this.obj);var n=this;this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen);var s=this.pen;this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+t.conf.skin+(t.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=i.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label);var o=this.label;return this.pen.valueMin=null!=i.valueMin?Number(i.valueMin):0,this.pen.valueMax=null!=i.valueMax?Number(i.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=null!=i.valueNow?Number(i.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=n.obj.childNodes[1].offsetLeft+2,this.maxX=n.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX),this.style.left=this.nowX+"px",this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){0!=n.state&&(t=t||event,this.initXY=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=o.tip&&(o.style.visibility="hidden",o.style.display="",o.innerHTML=o.tip.replace("%v",this.valueNow),o.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(this)-o.offsetHeight-3+"px",o.style.visibility="",o.style.zIndex=window.dhx4.zim.reserve(o._zi)))},this.pen._doOnMouseMoveStart=function(t){if(t=t||event,s.allowMove){var e=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,i=e-s.initXY;if(!(e<window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.minX||e>window.dhx4.absLeft(s)+Math.round(s.offsetWidth/2)&&s.nowX==s.maxX))return s.newNowX=s.nowX+i,s.newNowX<s.minX&&(s.newNowX=s.minX),s.newNowX>s.maxX&&(s.newNowX=s.maxX),s.nowX=s.newNowX,s.style.left=s.nowX+"px",s.initXY=e,s.newValueNow=Math.round((s.valueMax-s.valueMin)*(s.newNowX-s.minX)/(s.maxX-s.minX)+s.valueMin),""!=o.tip&&(o.innerHTML=o.tip.replace(/%v/gi,s.newValueNow),o.style.left=Math.round(window.dhx4.absLeft(s)+s.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(s)-o.offsetHeight-3+"px"),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},this.pen._doOnMouseMoveEnd=function(){s.allowMove&&(s.className="dhxtoolbar_sl_pen",s.allowMove=!1,s.nowX=s.newNowX,s.valueNow=s.newValueNow,""!=o.tip&&(o.style.display="none",window.dhx4.zim.clear(o._zi)),t.callEvent("onValueChange",[n.obj.idd.replace(t.idPrefix,""),s.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",s._doOnMouseMoveStart,!1),document.addEventListener("touchend",s._doOnMouseMoveEnd,!1)):void 0!==window.addEventListener?(window.addEventListener("mousemove",s._doOnMouseMoveStart,!1),window.addEventListener("mouseup",s._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",s._doOnMouseMoveStart),document.body.attachEvent("onmouseup",s._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setValue=function(e,i){(e=Number(e))<this.pen.valueMin&&(e=this.pen.valueMin),e>this.pen.valueMax&&(e=this.pen.valueMax),this.pen.valueNow=e,this.pen._definePos(),1==i&&t.callEvent("onValueChange",[this.obj.idd.replace(t.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(t,e){(t=Number(t))>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=e,this.obj.childNodes[0].style.display=e.length>0?"":"none",this.pen.valueMin=t,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(t,e){(t=Number(t))<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=e,this.obj.childNodes[4].style.display=e.length>0?"":"none",this.pen.valueMax=t,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var t=this.obj.childNodes[0].innerHTML,e=this.pen.valueMin;return new Array(e,t)},this.getMaxValue=function(){var t=this.obj.childNodes[4].innerHTML,e=this.pen.valueMax;return new Array(e,t)},this.setItemToolTipTemplate=function(t){this.label.tip=t},this.getItemToolTipTemplate=function(){return this.label.tip},this},dhtmlXToolbarObject.prototype.unload=function(){for("function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._doOnClick,!1),window.removeEventListener("touchstart",this._doOnClick,!1)):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="",this.cont=null,window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.tX1=null,this.tX2=null,this.tY1=null,this.tY2=null,this.anyUsed=null,this.idPrefix=null,this.rootTypes=null,this._rtl=null,this._rtlParseBtn=null,this.setRTL=null,this._sbw=null,this._getObj=null,this._addImgObj=null,this._setItemImage=null,this._clearItemImage=null,this._setItemText=null,this._getItemText=null,this._enableItem=null,this._disableItem=null,this._xmlParser=null,this._addItemToStorage=null,this._genStr=null,this._addItem=null,this._getPosition=null,this._setPosition=null,this._getIdByPosition=null,this._separatorObject=null,this._textObject=null,this._buttonObject=null,this._buttonSelectObject=null,this._buttonInputObject=null,this._buttonTwoStateObject=null,this._sliderObject=null,this._autoDetectVisibleArea=null,this._removeItem=null,this.setAlign=null,this.setSkin=null,this.setIconsPath=null,this.setIconPath=null,this.loadXML=null,this.loadXMLString=null,this.clearAll=null,this.addSpacer=null,this.removeSpacer=null,this.getType=null,this.getTypeExt=null,this.inArray=null,this.getParentId=null,this.addButton=null,this.addText=null,this.addButtonSelect=null,this.addButtonTwoState=null,this.addSeparator=null,this.addSlider=null,this.addInput=null,this.forEachItem=null,this.showItem=null,this.hideItem=null,this.isVisible=null,this.enableItem=null,this.disableItem=null,this.isEnabled=null,this.setItemText=null,this.getItemText=null,this.setItemToolTip=null,this.getItemToolTip=null,this.setItemImage=null,this.setItemImageDis=null,this.clearItemImage=null,this.clearItemImageDis=null,this.setItemState=null,this.getItemState=null,this.setItemToolTipTemplate=null,this.getItemToolTipTemplate=null,this.setValue=null,this.getValue=null,this.setMinValue=null,this.getMinValue=null,this.setMaxValue=null,this.getMaxValue=null,this.setWidth=null,this.getWidth=null,this.getPosition=null,this.setPosition=null,this.removeItem=null,this.addListOption=null,this.removeListOption=null,this.showListOption=null,this.hideListOption=null,this.isListOptionVisible=null,this.enableListOption=null,this.disableListOption=null,this.isListOptionEnabled=null,this.setListOptionPosition=null,this.getListOptionPosition=null,this.setListOptionText=null,this.getListOptionText=null,this.setListOptionToolTip=null,this.getListOptionToolTip=null,this.setListOptionImage=null,this.getListOptionImage=null,this.clearListOptionImage=null,this.forEachListOption=null,this.getAllListOptions=null,this.setListOptionSelected=null,this.getListOptionSelected=null,this.unload=null,this.setUserData=null,this.getUserData=null,this.setMaxOpen=null,this.items=null,this.conf=null},dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var t=window.dhx4.screenDim();this.tX1=t.left,this.tX2=t.right,this.tY1=t.top,this.tY2=t.bottom},dhtmlXToolbarObject.prototype.setIconset=function(t){this.conf.icons_css="awesome"==t},dhtmlXToolbarObject.prototype._evs={add:function(t,e){for(var i in t)"function"==typeof window.addEventListener?e.addEventListener(i,this[t[i]],!1):null==i.match(/^touch/)&&e.attachEvent("on"+i,this[t[i]]);e=t=null},clear:function(t,e){for(var i in t)"function"==typeof window.addEventListener?e.removeEventListener(i,this[t[i]],!1):null==i.match(/^touch/)&&e.detachEvent("on"+i,this[t[i]]);e=t=null}},dhtmlXToolbarObject.prototype._initObj=function(t){for(var e=0;e<t.length;e++)this._addItemToStorage(t[e]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._xmlToJson=function(t){var e=[],i=t.getElementsByTagName("toolbar");if(null!=i&&null!=i[0]){i=i[0];for(var n=function(t){for(var e=null,i=0;i<t.childNodes.length;i++)if(null==e&&"itemText"==t.childNodes[i].tagName){e=window.dhx4._xmlNodeValue(t.childNodes[i]);break}return e},s=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],o=["id","type","enabled","disabled","action","selected","img","text"],l=0;l<i.childNodes.length;l++)if("item"==i.childNodes[l].tagName){for(var r={},a=0;a<s.length;a++){null!=(c=i.childNodes[l].getAttribute(s[a]))&&(r[s[a]]=c)}for(var h=0;h<i.childNodes[l].childNodes.length;h++){if("item"==i.childNodes[l].childNodes[h].tagName&&"buttonSelect"==r.type){var d={};for(a=0;a<o.length;a++){var c;null!=(c=i.childNodes[l].childNodes[h].getAttribute(o[a]))&&(d[o[a]]=c)}var u=i.childNodes[l].childNodes[h].getElementsByTagName("userdata");for(a=0;a<u.length;a++){d.userdata||(d.userdata={});var f={};try{f.name=u[a].getAttribute("name")}catch(t){f.name=null}try{f.value=u[a].firstChild.nodeValue}catch(t){f.value=""}null!=f.name&&(d.userdata[f.name]=f.value)}d.text=n(i.childNodes[l].childNodes[h])||d.text,null==r.options&&(r.options=[]),r.options.push(d)}if("userdata"==i.childNodes[l].childNodes[h].tagName){null==r.userdata&&(r.userdata={});d={};try{d.name=i.childNodes[l].childNodes[h].getAttribute("name")}catch(t){d.name=null}try{d.value=i.childNodes[l].childNodes[h].firstChild.nodeValue}catch(t){d.value=""}null!=d.name&&(r.userdata[d.name]=d.value)}}r.text=n(i.childNodes[l])||r.text,e.push(r)}n=null}return e},dhtmlXToolbarObject.prototype._addItemToStorage=function(t,e){var i=t.id||this._genStr(24),n=t.type||"";if("spacer"==n?this.addSpacer(this._lastId):this._lastId=i,""!=n&&null!=this["_"+n+"Object"]){if("buttonSelect"==n&&null!=t.options)for(var s=0;s<t.options.length;s++)"obj"==t.options[s].type&&(t.options[s].type="button"),"sep"==t.options[s].type&&(t.options[s].type="separator");if("slider"==n){var o={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var l in o)null==t[o[l]]&&null!=t[l]&&(t[o[l]]=t[l])}"buttonInput"==n&&null==t.value&&null!=t.text&&(t.value=t.text),"buttonTwoState"==n&&void 0===t.selected&&void 0!==t.pressed&&window.dhx4.s2b(t.pressed)&&(t.selected=!0),void 0===t.enabled&&void 0!==t.disabled&&window.dhx4.s2b(t.disabled)&&(t.enabled=!1),null==t.imgDis&&null!=t.img_disabled&&(t.imgdis=t.img_disabled),void 0!==t.openAll&&null!=t.openAll||"dhx_terrace"!=this.conf.skin||(t.openAll=!0),this.objPull[this.idPrefix+i]=new this["_"+n+"Object"](this,i,t),this.objPull[this.idPrefix+i].type=n,this.setPosition(i,e)}if(null!=t.userdata)for(var l in t.userdata)this.setUserData(i,l,t.userdata[l]);if(null!=t.options)for(s=0;s<t.options.length;s++)if(null!=t.options[s].userdata)for(var l in t.options[s].userdata)this.setListOptionUserData(t.id,t.options[s].id,l,t.options[s].userdata[l])},dhtmlXToolbarObject.prototype.setSkin=function(t,e){!0===e?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=t,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),"material"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow);for(var i in this.objPull){var n=this.objPull[i];"slider"==n.type&&(n.pen._detectLimits(),n.pen._definePos(),n.label.className="dhx_toolbar_slider_label_"+this.conf.skin),"buttonSelect"==n.type&&(n.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow)}"dhx_terrace"==t&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.setAlign=function(t){this.conf.align="right"==t?"right":"left",this.base.className="right"==t?"dhxtoolbar_float_right":"dhxtoolbar_float_left",this._spacer&&(this._spacer.className="right"==t?" dhxtoolbar_float_left":" dhxtoolbar_float_right")},dhtmlXToolbarObject.prototype.setIconSize=function(t){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[t]?t:18,this.setSkin(this.conf.skin,!0),this.callEvent("_onIconSizeChange",[this.conf.iconSize])},dhtmlXToolbarObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXToolbarObject.prototype.setUserData=function(t,e,i){t=this.idPrefix+t,null!=this.objPull[t]&&(null==this.objPull[t].userData&&(this.objPull[t].userData={}),this.objPull[t].userData[e]=i)},dhtmlXToolbarObject.prototype.getUserData=function(t,e){return t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].userData?this.objPull[t].userData[e]||null:null},dhtmlXToolbarObject.prototype._isListOptionExists=function(t,e){if(null==this.objPull[this.idPrefix+t])return!1;var i=this.objPull[this.idPrefix+t];return"buttonSelect"==i.type&&null!=i._listOptions[e]},dhtmlXToolbarObject.prototype.setListOptionUserData=function(t,e,i,n){if(this._isListOptionExists(t,e)){var s=this.objPull[this.idPrefix+t]._listOptions[e];null==s.userData&&(s.userData={}),s.userData[i]=n}},dhtmlXToolbarObject.prototype.getListOptionUserData=function(t,e,i){if(!this._isListOptionExists(t,e))return null;var n=this.objPull[this.idPrefix+t]._listOptions[e];return n.userData&&n.userData[i]?n.userData[i]:null},dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var t=[],e={separator:!0,text:!0},i=[this.base];null!=this._spacer&&i.push(this._spacer);for(var n=0;n<i.length;n++){t[n]=[];for(var s=0;s<i[n].childNodes.length;s++)if(null!=i[n].childNodes[s].idd&&"none"!=i[n].childNodes[s].style.display){var o=this.idPrefix+i[n].childNodes[s].idd;null!=this.objPull[o]&&this.objPull[o].obj==i[n].childNodes[s]&&t[n].push({a:o,type:this.objPull[o].type,node:this.objPull[o]["buttonSelect"==this.objPull[o].type?"arw":"obj"]})}i[n]=null}for(n=0;n<t.length;n++)for(s=0;s<t[n].length;s++){var l=t[n][s],r=!1,a=!1;e[l.type]||((s==t[n].length-1||null!=t[n][s+1]&&e[t[n][s+1].type])&&(r=!0),(0==s||s-1>=0&&null!=t[n][s-1]&&e[t[n][s-1].type])&&(a=!0)),l.node.style.borderRightWidth=r?"1px":"0px",l.node.style.borderTopRightRadius=l.node.style.borderBottomRightRadius=r?this.conf.terrace_radius:"0px","buttonSelect"==l.type?(l.node.previousSibling.style.borderTopLeftRadius=l.node.previousSibling.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node.previousSibling._br=r,l.node.previousSibling._bl=a):l.node.style.borderTopLeftRadius=l.node.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node._br=r,l.node._bl=a}for(n=0;n<t.length;n++){for(s=0;s<t[n].length;s++){for(var o in t[n][s])t[n][s][o]=null;t[n][s]=null}t[n]=null}t=i=null},dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(t,e){var i=this.objPull[t];1==e?(i.obj.style.borderBottomLeftRadius=i.obj._bl?this.conf.terrace_radius:"0px",i.arw.style.borderBottomRightRadius=i.obj._br?this.conf.terrace_radius:"0px"):(i.obj.style.borderBottomLeftRadius="0px",i.arw.style.borderBottomRightRadius="0px"),i=null},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype._createNode_toolbar=function(t,e,i,n,s){return void 0!==s?t=s:((t=document.createElement("DIV")).className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV")),t.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),t},dhtmlXCellObject.prototype.attachToolbar=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar)return this.callEvent("_onBeforeContentAttach",["toolbar"]),void 0===t?t={}:"string"==typeof t&&(t={skin:t}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,"function"==typeof this.dataNodes.toolbar.unload&&this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar}),dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight),null!=this.editor&&(this.editor.style.left="5px",this.editor.style.width=this.base.clientWidth-5+"px")},dhtmlXEditor.prototype.setReadonly=function(t){this.conf.roMode=!0===t,this._prepareContent(!0,this.conf.roMode),this.cBlock.style.display=this.conf.roMode?"":"none"},dhtmlXEditor.prototype.isReadonly=function(t){return this.conf.roMode||!1},dhtmlXEditor.prototype.setSkin=function(t){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+t),this.conf.skin=this.cell.conf.skin=t,this.tb&&(this.cell.detachToolbar(t),this.tb=null,this.attachToolbar()),this.setSizes()},dhtmlXEditor.prototype._fontConf=function(){if(""==this.conf.skin)var t={family:this.conf.font.family,size:this.conf.font.size,color:this.conf.font.color};else t={family:"Roboto, Arial, Helvetica",size:"14px",color:"#404040"};return window.dhx4.template("font-size: #size#; font-family: #family#; color: #color#;",t)},window.dhtmlXEditorCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_editor"]);return this.editor=e,this.conf.skin=this.editor.conf.skin,this.attachEvent("_onCellUnload",function(){this._stbUnload(),this.editor=null,null}),this._stbInit(),this},dhtmlXEditorCell.prototype=new dhtmlXCellObject,dhtmlXEditorCell.prototype._stbInit=function(){var t=this,e=document.createElement("DIV");e.className="dhx_cell_stb"+(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_cell_stb_shadow"),this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]),e.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1};var i={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var n in i){var s=document.createElement("A");s.href="javascript:void(0);",s.tabIndex=-1,e.appendChild(s),s.onmousedown=s.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1};var o=document.createElement("DIV");o.className="dhx_cell_stb_button btn_"+n,o._actv=n.charAt(0),o._cmd=i[n],s.appendChild(o),o.onclick=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},o.onmousedown=function(e){(e=e||event).preventDefault?e.preventDefault():e.returnValue=!1,t.editor[this._cmd](),t.editor.callEvent("onToolbarClick",[this._actv])},o=s=null}e=null,this._stbUnload=function(){var e=this.cell.childNodes[this.conf.idx.stb];for(e.onselectstart=null;e.childNodes.length>0;)e.lastChild.onmousedown=e.lastChild.onclick=null,e.lastChild.firstChild.onmousedown=e.lastChild.firstChild.onclick=null,e.lastChild.firstChild._actv=e.lastChild.firstChild._cmd=null,e.lastChild.removeChild(e.lastChild.firstChild),e.removeChild(e.lastChild);e.parentNode.removeChild(e),e=t=null,this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null,delete this.conf.ofs_nodes.t._getStbHeight,delete this.conf.idx_data.stb,this._updateIdx()},this.conf.stb_visible=!0,this.conf.ofs_nodes.t._getStbHeight="func",this.conf.idx_data.stb="dhx_cell_stb",this._updateIdx()},dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none",this.conf.stb_visible=!1},dhtmlXEditorCell.prototype._getStbHeight=function(){return 1==this.conf.stb_visible&&"material"==this.conf.skin?(null==this.conf.stb_height&&(this.conf.stb_height=window.dhx4.readFromCss("dhxeditor_material stb_height_detect","scrollHeight","<div class='dhx_cell_editor'><div class='dhx_cell_stb'></div></div>")),this.conf.stb_height):this.cell.childNodes[this.conf.idx.stb].offsetHeight},dhtmlXCellObject.prototype.attachEditor=function(t){this.callEvent("_onBeforeContentAttach",["editor"]);var e=document.createElement("DIV");if(e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),"object"==typeof t&&null!=t||(t={}),t.parent=e,this.dataType="editor",this.dataObj=new dhtmlXEditor(t),e=null,t.parent=null,t=null,"function"==typeof window.dhtmlXPortalCell&&this instanceof window.dhtmlXPortalCell){if(null==this.portal.conf.editor_ev){var i=this.portal.attachEvent("onBeforeDrag",function(t){return"editor"==this.cdata[t].dataType&&(this.cdata[t].conf.editor_cont=this.cdata[t].dataObj.getContent()),!0}),n=this.portal.attachEvent("onDrop",function(t){"editor"==this.cdata[t].dataType&&(this.cdata[t].dataObj.setContent(this.cdata[t].conf.editor_cont),this.cdata[t].dataObj._prepareContent(!0),this.cdata[t].conf.editor_cont=null)});this.portal.conf.editor_ev=[i,n]}this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){if(this.detachEvent(this.conf.editor_ev),this.conf.editor_ev=null,this instanceof window.dhtmlXPortalCell){var t=!1;for(var e in this.portal.cdata)this.portal.cdata[e]!=this&&"editor"==this.portal.cdata[e].dataType&&(t=!0);if(0==t){for(var i=0;i<this.portal.conf.editor_ev.length;i++)this.portal.detachEvent(this.portal.conf.editor_ev[i]);this.portal.conf.editor_ev=null}}})}return this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXEditor.prototype.attachToolbar=function(t){if(null==this.tb){null!=t&&(this.conf.iconsPath=t),this.cell._stbHide(),this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin}),this.setSizes();var e="material"==this.conf.skin?"png":"gif";this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana"),this._initFont=this._availFonts[0],this._xmlFonts="";for(var i=0;i<this._availFonts.length;i++){var n=String(this._availFonts[i]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+n+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(n).toLowerCase()+"."+e+'" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"},this._xmlSizes="";for(var s in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+s+":"+this._availSizes[s]+'" text="'+this._availSizes[s]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.'+e+'" imgdis="h4_dis.'+e+'" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.'+e+'" imgdis="h4_dis.'+e+'" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.'+e+'" imgdis="h4_dis.'+e+'" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.'+e+'" imgdis="h4_dis.'+e+'" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.'+e+'" imgdis="bold_dis.'+e+'" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.'+e+'" imgdis="italic_dis.'+e+'" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.'+e+'" imgdis="underline_dis.'+e+'" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.'+e+'" imgdis="strike_dis.'+e+'" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.'+e+'" imgdis="align_left_dis.'+e+'" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.'+e+'" imgdis="align_center_dis.'+e+'" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.'+e+'" imgdis="align_right_dis.'+e+'" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.'+e+'" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.'+e+'" imgdis="script_sub.'+e+'" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.'+e+'" imgdis="script_super_dis.'+e+'" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.'+e+'" imgdis="list_number_dis.'+e+'" title="Number List"/><item id="createBulList" type="button" img="list_bullet.'+e+'" imgdis="list_bullet_dis.'+e+'" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.'+e+'" imgdis="indent_inc_dis.'+e+'" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.'+e+'" imgdis="indent_dec_dis.'+e+'" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.'+e+'" title="Clear Formatting"/></toolbar>',this.tb.loadStruct(this.tbXML),this._checkAlign=function(t){this.tb.setItemState("alignCenter",!1),this.tb.setItemState("alignRight",!1),this.tb.setItemState("alignJustify",!1),this.tb.setItemState("alignLeft",!1),t&&this.tb.setItemState(t,!0)},this._checkH=function(t){this.tb.setItemState("applyH1",!1),this.tb.setItemState("applyH2",!1),this.tb.setItemState("applyH3",!1),this.tb.setItemState("applyH4",!1),t&&this.tb.setItemState(t,!0)},this._doOnFocusChanged=function(t){if(t.h1||t.h2||t.h3||t.h4)this.tb.setItemState("applyBold",!1);else{var e=-1!=String(t.fontWeight).search(/bold/i)||Number(t.fontWeight)>=700;this.tb.setItemState("applyBold",e)}var i="alignLeft";-1!=String(t.textAlign).search(/center/)&&(i="alignCenter"),-1!=String(t.textAlign).search(/right/)&&(i="alignRight"),-1!=String(t.textAlign).search(/justify/)&&(i="alignJustify"),this.tb.setItemState(i,!0),this._checkAlign(i),this.tb.setItemState("applyH1",t.h1),this.tb.setItemState("applyH2",t.h2),this.tb.setItemState("applyH3",t.h3),this.tb.setItemState("applyH4",t.h4),window._KHTMLrv&&(t.sub="sub"==t.vAlign,t.sup="super"==t.vAlign),this.tb.setItemState("applyItalic","italic"==t.fontStyle),this.tb.setItemState("applyStrikethrough",t.del),this.tb.setItemState("applySub",t.sub),this.tb.setItemState("applySuper",t.sup),this.tb.setItemState("applyUnderscore",t.u)},this._doOnToolbarClick=function(t){var e=String(t).split(":");null!=this[e[0]]&&"function"==typeof this[e[0]]&&(this[e[0]](e[1]),this.callEvent("onToolbarClick",[t]))},this._doOnStateChange=function(t,e){switch(this[t](),t){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(t);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(t)}this.callEvent("onToolbarClick",[t])},this._doOnBeforeStateChange=function(t,e){return"alignLeft"!=t&&"alignCenter"!=t&&"alignRight"!=t&&"alignJustify"!=t||1!=e};var o=this;this.tb.attachEvent("onClick",function(t){o._doOnToolbarClick(t)}),this.tb.attachEvent("onStateChange",function(t,e){o._doOnStateChange(t,e)}),this.tb.attachEvent("onBeforeStateChange",function(t,e){return o._doOnBeforeStateChange(t,e)}),this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.applyStrikethrough=function(){this._runCommand("StrikeThrough")},this.alignLeft=function(){this._runCommand("JustifyLeft")},this.alignRight=function(){this._runCommand("JustifyRight")},this.alignCenter=function(){this._runCommand("JustifyCenter")},this.alignJustify=function(){this._runCommand("JustifyFull")},this.applySub=function(){this._runCommand("Subscript")},this.applySuper=function(){this._runCommand("Superscript")},this.applyH1=function(){this._runCommand("FormatBlock","<H1>")},this.applyH2=function(){this._runCommand("FormatBlock","<H2>")},this.applyH3=function(){this._runCommand("FormatBlock","<H3>")},this.applyH4=function(){this._runCommand("FormatBlock","<H4>")},this.createNumList=function(){this._runCommand("InsertOrderedList")},this.createBulList=function(){this._runCommand("InsertUnorderedList")},this.increaseIndent=function(){this._runCommand("Indent")},this.decreaseIndent=function(){this._runCommand("Outdent")},this.clearFormatting=function(){this._runCommand("RemoveFormat"),this.tb.setItemState("applyBold",!1),this.tb.setItemState("applyItalic",!1),this.tb.setItemState("applyStrikethrough",!1),this.tb.setItemState("applySub",!1),this.tb.setItemState("applySuper",!1),this.tb.setItemState("applyUnderscore",!1);var t=this.getContent();t=t.replace(/<\/?h\d>/gi,""),this.setContent(t)}}},dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping"),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this)),this.attachEvent("onBeforeRender",dhtmlx.bind(function(t){this._settings.sort&&(t.block(),t.sort(this._settings.sort),t.unblock())},this)),this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this)),this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(t,e){t.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1),this.block(),this.clearAll(),this.unblock()},e))},sum:function(t,e){t=dhtmlx.Template.setter(t);var i=0;return(e=e||this.data).each(function(e){i+=1*t(e)}),i},min:function(t,e){t=dhtmlx.Template.setter(t);var i=1/0;return(e=e||this.data).each(function(e){1*t(e)<i&&(i=1*t(e))}),1*i},max:function(t,e){t=dhtmlx.Template.setter(t);var i=-1/0;return(e=e||this.data).each(function(e){1*t(e)>i&&(i=1*t(e))}),i},_split_data_by:function(t){var e=function(t,e){return(t=dhtmlx.Template.setter(t))(e[0])},i=dhtmlx.Template.setter(t.by);t.map[i]||(t.map[i]=[i,e]);var n={},s=[];this.data.each(function(t){var e=i(t);n[e]||(s.push({id:e}),n[e]=dhtmlx.toArray()),n[e].push(t)});for(var o in t.map){var l=t.map[o][1]||e;"function"!=typeof l&&(l=this[l]);for(var r=0;r<s.length;r++)s[r][o]=l.call(this,t.map[o][0],n[s[r].id])}this.data._not_grouped_order=this.data.order,this.data._not_grouped_pull=this.data.pull,this.data.order=dhtmlx.toArray(),this.data.pull={};for(r=0;r<s.length;r++){var a=this.data.id(s[r]);this.data.pull[a]=s[r],this.data.order.push(a)}this.callEvent("onStoreUpdated",[])},group:function(t,e){this.ungroup(!1),this._split_data_by(t),!1!==e&&this.data.callEvent("onStoreUpdated",[])},ungroup:function(t){this.data._not_grouped_order&&(this.data.order=this.data._not_grouped_order,this.data.pull=this.data._not_grouped_pull,this.data._not_grouped_pull=this.data._not_grouped_order=null),!1!==t&&this.data.callEvent("onStoreUpdated",[])},group_setter:function(t){return dhtmlx.assert("object"==typeof t,"Incorrect group value"),dhtmlx.assert(t.by,"group.by is mandatory"),dhtmlx.assert(t.map,"group.map is mandatory"),t},sort_setter:function(t){return"object"!=typeof t&&(t={by:t}),this._mergeSettings(t,{as:"string",dir:"asc"}),t}},dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(t){var e=t.getDay();return this.config.start_on_monday&&(0===e?e=6:e--),this.date_part(this.add(t,-1*e,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n.setDate(n.getDate()+e);break;case"week":n.setDate(n.getDate()+7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setHours(n.getHours()+e);break;case"minute":n.setMinutes(n.getMinutes()+e);break;default:return dhtmlx.Date["add_"+i](t,e,i)}return n},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(t,e){return t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return t}}),e&&(t=t.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+t+'";')},str_to_date:function(t,e){for(var i="var temp=date.split(/[^0-9a-zA-Z]+/g);",n=t.match(/%[a-zA-Z]/g),s=0;s<n.length;s++)switch(n[s]){case"%j":case"%d":i+="set[2]=temp["+s+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+s+"]||1)-1;";break;case"%y":i+="set[0]=temp["+s+"]*1+(temp["+s+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+s+"]||0;";break;case"%i":i+="set[4]=temp["+s+"]||0;";break;case"%Y":i+="set[0]=temp["+s+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+s+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+s+"]||0;"}var o="set[0],set[1],set[2],set[3],set[4],set[5]";return e&&(o=" Date.UTC("+o+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+o+");")},getISOWeek:function(t){if(!t)return!1;var e=t.getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var n=i.getFullYear(),s=Math.floor((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(s/7)},getUTCISOWeek:function(t){return this.getISOWeek(t)}},dhtmlx.math={},dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],dhtmlx.math.toHex=function(t,e){for(t=parseInt(t,10),str="";t>0;)str=this._toHex[t%16]+str,t=Math.floor(t/16);for(;str.length<e;)str="0"+str;return str},dhtmlx.math.hexToDec=function(t){return parseInt(t,16)},dhtmlx.math.toRgb=function(t){var e,i,n,s;return"string"!=typeof t?(e=t[0],i=t[1],n=t[2]):-1!=t.indexOf("rgb")?(e=(s=t.substr(t.indexOf("(")+1,t.lastIndexOf(")")-t.indexOf("(")-1).split(","))[0],i=s[1],n=s[2]):("#"==t.substr(0,1)&&(t=t.substr(1)),e=this.hexToDec(t.substr(0,2)),i=this.hexToDec(t.substr(2,2)),n=this.hexToDec(t.substr(4,2))),e=parseInt(e,10)||0,i=parseInt(i,10)||0,n=parseInt(n,10)||0,(e<0||e>255)&&(e=0),(i<0||i>255)&&(i=0),(n<0||n>255)&&(n=0),[e,i,n]},dhtmlx.math.hsvToRgb=function(t,e,i){var n,s,o,l,r,a,h,d;switch(n=Math.floor(t/60)%6,s=t/60-n,o=i*(1-e),l=i*(1-s*e),r=i*(1-(1-s)*e),a=0,h=0,d=0,n){case 0:a=i,h=r,d=o;break;case 1:a=l,h=i,d=o;break;case 2:a=o,h=i,d=r;break;case 3:a=o,h=l,d=i;break;case 4:a=r,h=o,d=i;break;case 5:a=i,h=o,d=l}return a=Math.floor(255*a),h=Math.floor(255*h),d=Math.floor(255*d),[a,h,d]},dhtmlx.math.rgbToHsv=function(t,e,i){var n,s,o,l,r,a;n=t/255,s=e/255,o=i/255;var h,d=Math.min(n,s,o);return r=0,l=0==(h=Math.max(n,s,o))?0:1-d/h,a=h,h==d?r=0:h==n&&s>=o?r=60*(s-o)/(h-d)+0:h==n&&s<o?r=60*(s-o)/(h-d)+360:h==s?r=60*(o-n)/(h-d)+120:h==o&&(r=60*(n-s)/(h-d)+240),[r,l,a]},dhtmlx.presets||(dhtmlx.presets={}),dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}},dhtmlx.ui.Map=function(t){this.name="Map",this._id="map_"+dhtmlx.uid(),this._key=t,this._map=[],this._areas=[]},dhtmlx.ui.Map.prototype={addRect:function(t,e,i){this._areas.push({index:i,points:e}),this._createMapArea(t,"RECT",e,i)},addPoly:function(t,e,i){this._createMapArea(t,"POLY",e,i)},_createMapArea:function(t,e,i,n){var s="";4==arguments.length&&(s="userdata='"+n+"'"),this._map.push("<area "+this._key+"='"+t+"' shape='"+e+"' coords='"+i.join()+"' "+s+"></area>")},addSector:function(t,e,i,n,s,o,l,r){var a=[];a.push(n),a.push(Math.floor(s*l));for(var h=e;h<i;h+=Math.PI/18)a.push(Math.floor(n+o*Math.cos(h))),a.push(Math.floor((s+o*Math.sin(h))*l));return a.push(Math.floor(n+o*Math.cos(i))),a.push(Math.floor((s+o*Math.sin(i))*l)),a.push(n),a.push(Math.floor(s*l)),this.addPoly(t,a,r)},render:function(t){var e=dhtmlx.html.create("DIV");e.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",t.appendChild(e);var i=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";e.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+i+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>",t._htmlmap=e,this._map=[]}},dhtmlx.chart={},dhtmlx.chart.scatter={pvt_render_scatter:function(t,e,i,n,s,o){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var l=this._getLimits(),r=this._getLimits("h","xValue");s||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),e,i,n,l.min,l.max),this._drawHXAxis(this.canvases.x.getCanvas(),e,i,n,r.min,r.max)),l={min:this._settings.yAxis.start,max:this._settings.yAxis.end},r={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var a=this._getScatterParams(t,e,i,n,r,l);this._mapStart=i;for(var h=0;h<e.length;h++)this._drawScatterItem(t,o,i,n,a,r,l,e[h],s)},_getScatterParams:function(t,e,i,n,s,o){var l={};return l.totalHeight=n.y-i.y,l.totalWidth=n.x-i.x,this._calcScatterUnit(l,s.min,s.max,l.totalWidth,"X"),this._calcScatterUnit(l,o.min,o.max,l.totalHeight,"Y"),l},_drawScatterItem:function(t,e,i,n,s,o,l,r,a){var h=this._calculateScatterItemPosition(s,n,i,o,r,"X"),d=this._calculateScatterItemPosition(s,i,n,l,r,"Y");this._drawItem(t,h,d,r,this._settings.label.call(this,r),a,e)},_calculateScatterItemPosition:function(t,e,i,n,s,o){var l=this._settings["X"==o?"xValue":"value"].call(this,s),r=t["valueFactor"+o],a=(parseFloat(l||0)-n.min)*r,h=t["unit"+o],d=i[o.toLowerCase()]-("X"==o?-1:1)*Math.floor(h*a);return a<0&&(d=i[o.toLowerCase()]),l>n.max&&(d=e[o.toLowerCase()]),l<n.min&&(d=i[o.toLowerCase()]),d},_calcScatterUnit:function(t,e,i,n,s){var o=this._getRelativeValue(e,i);t["relValue"+(s=s||"")]=o[0],t["valueFactor"+s]=o[1],t["unit"+s]=t["relValue"+s]?n/t["relValue"+s]:10}},dhtmlx.chart.radar={pvt_render_radar:function(t,e,i,n,s,o){this._renderRadarChart(t,e,i,n,s,o)},_renderRadarChart:function(t,e,i,n,s,o){if(e.length){for(var l=this._getPieParameters(i,n),r=this._settings.radius?this._settings.radius:l.radius,a=this._settings.x?this._settings.x:l.x,h=this._settings.y?this._settings.y:l.y,d=[],c=0;c<e.length;c++)d.push(1);var u=this._getRatios(d,e.length);this._mapStart=i,s||this._drawRadarAxises(u,a,h,r,e),this._drawRadarData(t,u,a,h,r,e,s,o)}},_drawRadarData:function(t,e,i,n,s,o,l,r){var a,h,d,c,u,f,p,_,m,g,v,b,y,x,w,C,N,k,I;for(u=(d=this._settings).yAxis.start,f=d.yAxis.end,k=(b=(I=this._getRelativeValue(u,f))[0])?s/b:s/2,N=I[1],a=h=y=-Math.PI/2,m=[],_=0,c=0;c<o.length;c++)C?w=C:(x=d.value(o[c]),w=(parseFloat(x||0)-u)*N),g=Math.floor(k*w),x=d.value(c!=o.length-1?o[c+1]:o[0]),C=(parseFloat(x||0)-u)*N,v=Math.floor(k*C),a=h,h=c!=o.length-1?y+e[c]-1e-4:y,p=_||this._getPositionByAngle(a,i,n,g),_=this._getPositionByAngle(h,i,n,v),m.push(p);d.fill&&this._fillRadarChart(t,m,o),d.disableLines||this._strokeRadarChart(t,m,o),d.disableItems||this._drawRadarItemMarkers(t,m,o,l,r),m=null},_drawRadarItemMarkers:function(t,e,i,n,s){for(var o=0;o<e.length;o++)this._drawItem(t,e[o].x,e[o].y,i[o],this._settings.label.call(this,i),n,s)},_fillRadarChart:function(t,e,i){var n,s;t.globalAlpha=this._settings.alpha.call(this,{}),t.beginPath();for(var o=0;o<e.length;o++)t.fillStyle=this._settings.fill.call(this,i[o]),n=e[o],s=e[o+1]||e[0],o||t.moveTo(n.x,n.y),t.lineTo(s.x,s.y);t.fill(),t.globalAlpha=1},_strokeRadarChart:function(t,e,i){for(var n,s,o=0;o<e.length;o++)n=e[o],s=e[o+1]||e[0],this._drawLine(t,n.x,n.y,s.x,s.y,this._settings.line.color.call(this,i[o]),this._settings.line.width)},_drawRadarAxises:function(t,e,i,n,s){var o=this._settings.yAxis,l=this._settings.xAxis,r=o.start,a=o.end,h=o.step,d={},c=this._configYAxis;if(void 0===c.step||void 0===c.start||void 0===c.end){var u=this._getLimits();r=(d=this._calculateScale(u.min,u.max)).start,a=d.end,h=d.step,o.end=a,o.start=r}var f,p,_,m,g,v=[],b=0,y=n*h/(a-r);h<1&&(m=Math.min(this._log10(h),r<=0?0:this._log10(r)),g=Math.pow(10,-m));var x=[];this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale"));var w=this.canvases.scale.getCanvas();for(f=a;f>=r;f-=h){d.fixNum&&(f=parseFloat(new Number(f).toFixed(d.fixNum))),v.push(Math.floor(b*y)+.5),g&&(f=Math.round(f*g)/g);var C=i-n+v[v.length-1];if(this.canvases.scale.renderTextAt("middle","left",e,C,o.template(f.toString()),"dhx_axis_item_y dhx_radar"),t.length<2)return void this._drawScaleSector(w,"arc",e,i,n-v[v.length-1],-Math.PI/2,3*Math.PI/2,f);var N,k=-Math.PI/2,I=k;for(p=0;p<t.length;p++)f==a&&x.push(I),N=k+t[p]-1e-4,this._drawScaleSector(w,c.lineShape||"line",e,i,n-v[v.length-1],I,N,f,p,s[f]),I=N;b++}for(f=0;f<x.length;f++)_=this._getPositionByAngle(x[f],e,i,n),l.lines.call(this,s[f],f)&&this._drawLine(w,e,i,_.x,_.y,l?l.lineColor.call(this,s[f]):"#cfcfcf",1),this._drawRadarScaleLabel(w,e,i,n,x[f],l?l.template.call(this,s[f]):"&nbsp;")},_drawScaleSector:function(t,e,i,n,s,o,l,r,a){var h,d;if(s<0)return!1;h=this._getPositionByAngle(o,i,n,s),d=this._getPositionByAngle(l,i,n,s);var c=this._settings.yAxis;c.bg&&(t.beginPath(),t.moveTo(i,n),"arc"==e?t.arc(i,n,s,o,l,!1):(t.lineTo(h.x,h.y),t.lineTo(d.x,d.y)),t.fillStyle=c.bg(r,a),t.moveTo(i,n),t.fill(),t.closePath()),c.lines.call(this,r)&&(t.lineWidth=1,t.beginPath(),"arc"==e?t.arc(i,n,s,o,l,!1):(t.moveTo(h.x,h.y),t.lineTo(d.x,d.y)),t.strokeStyle=c.lineColor.call(this,r),t.stroke())},_drawRadarScaleLabel:function(t,e,i,n,s,o){var l=this.canvases.scale.renderText(0,0,o,"dhx_axis_radar_title",1),r=l.scrollWidth,a=l.offsetHeight,h=this._getPositionByAngle(s,e,i,n+5),d=0,c=0;(s<0||s>Math.PI)&&(c=-a),s>Math.PI/2&&(d=-r),Math.abs(s+Math.PI/2)<.001||Math.abs(s-Math.PI/2)<.001?d=-r/2:(Math.abs(s)<.001||Math.abs(s-Math.PI)<.001)&&(c=-a/2),l.style.top=h.y+c+"px",l.style.left=h.x+d+"px",l.style.width=r+"px",l.style.whiteSpace="nowrap"}},dhtmlx.chart.area={pvt_render_area:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g,v,b,y;if(c=this._calculateLineParams(t,e,i,n,s),r=this._settings,h=r.eventRadius||Math.floor(c.cellWidth/2),e.length){for(u=[],_=r.offset?i.x+.5*c.cellWidth:i.x,a=0;a<e.length;a++)if(d=e[a],p=this._getPointY(d,i,n,c),v=_+c.cellWidth*a,p){if(b="object"==typeof p?p.y0:p,a&&this._settings.fixOverflow){if((f=this._getPointY(e[a-1],i,n,c)).out&&f.out==p.out)continue;m=c.cellWidth*(a-1)-.5+_,g="object"==typeof f?f.y0:f,f.out&&(y="min"==f.out?n.y:i.y,u.push([this._calcOverflowX(m,v,g,b,y),y])),p.out&&(y="min"==p.out?n.y:i.y,u.push([this._calcOverflowX(m,v,g,b,y),y]),a==e.length-1&&y==i.y&&u.push([v,i.y]))}p.out||(u.push([v,b]),o.addRect(d.id,[v-h-i.x,b-h-i.y,v+h-i.x,b+h-i.y],s)),r.yAxis||(l=r.offset||a!=e.length-1?"center":"left",this.canvases[s].renderTextAt(!1,l,v,b-r.labelOffset,r.label(d)))}u.length&&(u.push([v,n.y]),u.push([u[0][0],n.y])),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,u),t.fill(),r.border&&(t.lineWidth=r.borderWidth||1,r.borderColor?t.strokeStyle=r.borderColor.call(this,e[0]):this._setBorderStyles(t,t.fillStyle),t.beginPath(),this._path(t,u),t.stroke()),t.lineWidth=1,t.globalAlpha=1}}},dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g,v;if(p=this._calculateLineParams(t,e,i,n,s),h=this._settings,u=h.eventRadius||Math.floor(p.cellWidth/2),e.length){_=[],v=[],m=h.offset?i.x+.5*p.cellWidth:i.x;var b=function(t,i){return s?e[t].$startY?i-n.y+e[t].$startY:0:i},y=function(t,e,i){var n=(i.y-e.y)/(i.x-e.x);return n*t+e.y-n*e.x};for(d=0;d<e.length;d++)f=e[d],d?m+=p.cellWidth:(g=b(d,n.y),_.push([m,g])),g=b(d,this._getPointY(f,i,n,p)),v.push(isNaN(g)&&!d?e[d].$startY||n.y:g),g&&(_.push([m,g]),o.addRect(f.id,[m-u-i.x,g-u-i.y,m+u-i.x,g+u-i.y],s),h.yAxis||(h.offset,a="center",this.canvases[s].renderTextAt(!1,a,m,g-h.labelOffset,h.label(f))));if(_.push([m,b(d-1,n.y)]),s)for(d=e.length-2;d>0;d--)m-=p.cellWidth,(g=e[d].$startY)&&_.push([m,g]);for(_.push([_[0][0],_[0][1]]),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,_),t.fill(),d=0;d<e.length;d++){if(!(g=v[d]))for(d==e.length-1&&(g=e[d].$startY),c=d+1;c<e.length;c++)if(v[c]){l={x:i.x,y:v[0]},r={x:i.x+p.cellWidth*c,y:v[c]},g=y(i.x+p.cellWidth*d,l,r);break}e[d].$startY=g}}}},dhtmlx.chart.spline={pvt_render_spline:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g,v;if(d=this._calculateLineParams(t,e,i,n,s),l=this._settings,this._mapStart=i,a=[],e.length){for(f=l.offset?i.x+.5*d.cellWidth:i.x,r=0;r<e.length;r++)(m=this._getPointY(e[r],i,n,d))&&(u=r?d.cellWidth*r-.5+f:f,a.push({x:u,y:m,index:r}));for(c=this._getSplineParameters(a),r=0;r<a.length;r++){if(p=a[r].x,g=a[r].y,r<a.length-1){for(_=a[r+1].x,v=a[r+1].y,h=p;h<_;h++){var b=this._getSplineYPoint(h,p,r,c.a,c.b,c.c,c.d);b<i.y&&(b=i.y),b>n.y&&(b=n.y);var y=this._getSplineYPoint(h+1,p,r,c.a,c.b,c.c,c.d);y<i.y&&(y=i.y),y>n.y&&(y=n.y),this._drawLine(t,h,b,h+1,y,l.line.color(e[r]),l.line.width)}this._drawLine(t,_-1,this._getSplineYPoint(h,p,r,c.a,c.b,c.c,c.d),_,v,l.line.color(e[r]),l.line.width)}this._drawItem(t,p,g,e[a[r].index],l.label(e[a[r].index]),s,o)}}},_getSplineParameters:function(t){var e,i,n,s,o,l,r,a,h=[],d=[],c=t.length;for(e=0;e<c-1;e++)h[e]=t[e+1].x-t[e].x,d[e]=(t[e+1].y-t[e].y)/h[e];for(n=[],(i=[])[0]=0,i[1]=2*(h[0]+h[1]),n[0]=0,n[1]=6*(d[1]-d[0]),e=2;e<c-1;e++)i[e]=2*(h[e-1]+h[e])-h[e-1]*h[e-1]/i[e-1],n[e]=6*(d[e]-d[e-1])-h[e-1]*n[e-1]/i[e-1];for((s=[])[c-1]=s[0]=0,e=c-2;e>=1;e--)s[e]=(n[e]-h[e]*s[e+1])/i[e];for(o=[],l=[],r=[],a=[],e=0;e<c-1;e++)o[e]=t[e].y,l[e]=-h[e]*s[e+1]/6-h[e]*s[e]/3+(t[e+1].y-t[e].y)/h[e],r[e]=s[e]/2,a[e]=(s[e+1]-s[e])/(6*h[e]);return{a:o,b:l,c:r,d:a}},_getSplineYPoint:function(t,e,i,n,s,o,l){return n[i]+(t-e)*(s[i]+(t-e)*(o[i]+(t-e)*l[i]))}},dhtmlx.chart.barH={pvt_render_barH:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g,v,b,y,x,w,C,N,k,I;a=(n.y-i.y)/e.length,f=(u=this._getLimits("h")).max,p=u.min,x=n.x-i.x,I=!!this._settings.yAxis,s||this._drawHScales(t,e,i,n,p,f,a),I&&(f=parseFloat(this._settings.xAxis.end),p=parseFloat(this._settings.xAxis.start)),g=(b=this._getRelativeValue(p,f))[0],m=b[1],C=g?x/g:10,I||(y=10,C=g?(x-y)/g:10),r=parseInt(this._settings.width,10);var S=this._series.length,T=this._settings.seriesMargin,E=this._settings.seriesPadding;for(this._series&&r*S+E+(S>2?T*S:0)>a&&(r=a/S-E-(S>2?T:0)),l=(a-r*S-T*(S-1))/2,this._settings.border&&(r=parseInt(r,10),l=parseInt(l,10)),v=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(r/5),_=!1,(d=this._settings.gradient)&&"function"!=typeof d?(_=d,d=!1):d&&(d=t.createLinearGradient(i.x,i.y,n.x,i.y),this._settings.gradient(d)),I||this._drawLine(t,i.x-.5,i.y,i.x-.5,n.y,"#000000",1),c=0;c<e.length;c++)if((w=parseFloat(this._settings.value(e[c]||0)))>f&&(w=f),w-=p,w*=m,N=i.x,k=i.y+l+(S>2?T*s:0)+parseInt(c*a,10)+r*s,w<0&&"auto"==this._settings.origin||this._settings.xAxis&&0===w&&!("auto"!=this._settings.origin&&this._settings.origin>p))this.canvases[s].renderTextAt("middle","right",N+10,k+r/2+l,this._settings.label(e[c]));else{w<0&&"auto"!=this._settings.origin&&this._settings.origin>p&&(w=0),I||(w+=y/C),h=d||this._settings.color.call(this,e[c]),this._settings.border&&this._drawBarHBorder(t,N,k,r,p,v,C,w,h),t.globalAlpha=this._settings.alpha.call(this,e[c]);var O=this._drawBarH(t,n,N,k,r,p,v,C,w,h,d,_);0!=_&&this._drawBarHGradient(t,N,k,r,p,v,C,w,h,_),t.globalAlpha=1,O[3]==k?(this.canvases[s].renderTextAt("middle","left",O[0]-5,O[3]+Math.floor(r/2),this._settings.label(e[c])),o.addRect(e[c].id,[O[0]-i.x,O[3]-i.y,O[2]-i.x,O[3]+r-i.y],s)):(this.canvases[s].renderTextAt("middle",!1,O[2]+5,O[1]+Math.floor(r/2),this._settings.label(e[c])),o.addRect(e[c].id,[O[0]-i.x,k-i.y,O[2]-i.x,O[3]-i.y],s))}},_setBarHPoints:function(t,e,i,n,s,o,l,r,a){var h=0;if(s>o*l){var d=(s-o*l)/s;h=-Math.asin(d)+Math.PI/2}t.moveTo(e,i+r);var c=e+o*l-s-(s?0:r);s<o*l&&t.lineTo(c,i+r);var u=i+s;s&&s>0&&t.arc(c,u,s-r,-Math.PI/2+h,0,!1);var f=i+n-s-(s?0:r),p=c+s-(s?r:0);t.lineTo(p,f),s&&s>0&&t.arc(c,f,s-r,0,Math.PI/2-h,!1);var _=i+n-r;return t.lineTo(e,_),a||t.lineTo(e,i+r),[p,_]},_drawHScales:function(t,e,i,n,s,o,l){var r=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),r=this._drawHXAxis(this.canvases.x.getCanvas(),e,i,n,s,o)),this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),e,i,n,l,r))},_drawHYAxis:function(t,e,i,n,s,o){if(this._settings.yAxis){var l,r=parseInt(o||i.x,10)-.5,a=n.y+.5,h=i.y;this._drawLine(t,r,a,r,h,this._settings.yAxis.color,1);for(var d=0;d<e.length;d++){var c="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(e[d]))<this._settings.origin;l=h+s/2+d*s,this.canvases.y.renderTextAt("middle",!c&&"left",c?r+5:r-5,l,this._settings.yAxis.template(e[d]),"dhx_axis_item_y",c?0:r-10),this._settings.yAxis.lines.call(this,e[d])&&this._drawLine(t,i.x,l,n.x,l,this._settings.yAxis.lineColor.call(this,e[d]),1)}this._drawLine(t,i.x+.5,h+.5,n.x,h+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(i,n)}},_drawHXAxis:function(t,e,i,n,s,o){var l,r={},a=this._settings.xAxis;if(a){var h=n.y+.5,d=i.x-.5,c=n.x-.5,u=i.x;if(this._drawLine(t,d,h,c,h,a.color,1),a.step&&(l=parseFloat(a.step)),void 0!==this._configXAxis.step&&void 0!==this._configXAxis.start&&void 0!==this._configXAxis.end||(s=(r=this._calculateScale(s,o)).start,o=r.end,l=r.step,this._settings.xAxis.end=o,this._settings.xAxis.start=s,this._settings.xAxis.step=l),0!==l){for(var f=(c-d)*l/(o-s),p=0,_=s;_<=o;_+=l){r.fixNum&&(_=parseFloat(new Number(_).toFixed(r.fixNum)));var m=Math.floor(d+p*f)+.5;_==s&&"auto"==this._settings.origin||!a.lines.call(this,_)||this._drawLine(t,m,h,m,i.y,this._settings.xAxis.lineColor.call(this,_),1),_==this._settings.origin&&(u=m+1);var g=_;if(l<1){var v=Math.min(this._log10(l),s<=0?0:this._log10(s)),b=Math.pow(10,-v);g=Math.round(_*b)/b}this.canvases.x.renderTextAt(!1,!0,m,h+2,a.template(g.toString()),"dhx_axis_item_x"),p++}return this.canvases.x.renderTextAt(!0,!1,d,n.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",n.x-i.x),a.lines.call(this,{})||this._drawLine(t,d,i.y-.5,c,i.y-.5,this._settings.xAxis.color,.2),u}}},_correctBarHParams:function(t,e,i,n,s,o,l){var r=e;return this._settings.yAxis&&"auto"!=this._settings.origin&&this._settings.origin>l&&(r=e+=(this._settings.origin-l)*s,(n-=this._settings.origin-l)<0&&(n*=-1,t.translate(e,i+o),t.rotate(Math.PI),e=.5,i=0),e+=.5),{value:n,x0:e,y0:i,start:r}},_drawBarH:function(t,e,i,n,s,o,l,r,a,h,d,c){var u;t.save();var f=this._correctBarHParams(t,i,n,a,r,s,o);t.fillStyle=h,t.beginPath(),r*f.value>0?(u=this._setBarHPoints(t,f.x0,f.y0,s,l,r,f.value,this._settings.border?1:0),d&&!c&&t.lineTo(e.x,f.y0+(this._settings.border?1:0))):u=[f.x0,f.y0+1],t.fill(),t.restore();var p=f.y0,_=f.y0!=n?n:u[1];return[f.y0!=n?f.start-u[0]:f.start,p,f.y0!=n?f.start:u[0],_]},_drawBarHBorder:function(t,e,i,n,s,o,l,r,a){t.save();var h=this._correctBarHParams(t,e,i,r,l,n,s);t.beginPath(),this._setBorderStyles(t,a),t.globalAlpha=.9,l*h.value>0&&this._setBarHPoints(t,h.x0,h.y0,n,o,l,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarHGradient:function(t,e,i,n,s,o,l,r,a,h){t.save();var d=this._correctBarHParams(t,e,i,r,l,n,s),c=this._setBarGradient(t,d.x0,d.y0+n,d.x0+l*d.value,d.y0,h,a,"x");t.fillStyle=c.gradient,t.beginPath(),l*d.value>0&&this._setBarHPoints(t,d.x0,d.y0+c.offset,n-2*c.offset,o,l,d.value,c.offset),t.fill(),t.globalAlpha=1,t.restore()}},dhtmlx.assert(dhtmlx.chart.barH),dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(t,e,i,n,s,o){var l,r,a,h,d=n.x-i.x,c=!!this._settings.yAxis,u=this._getStackedLimits(e);l=u.max,r=u.min;var f=Math.floor((n.y-i.y)/e.length);s||this._drawHScales(t,e,i,n,r,l,f),c&&(l=parseFloat(this._settings.xAxis.end),r=parseFloat(this._settings.xAxis.start));var p=this._getRelativeValue(r,l);h=p[0],a=p[1];var _=h?d/h:10;if(!c){var m=10;_=h?(d-m)/h:10}var g=parseInt(this._settings.width,10);g+4>f&&(g=f-4);var v=(f-g)/2,b=!1,y=this._settings.gradient;y&&(b=!0),c||this._drawLine(t,i.x-.5,i.y,i.x-.5,n.y,"#000000",1);var x=0,w=0;for(C=0;C<this._series.length;C++)C==s&&(w=x),"stackedBarH"==this._series[C].view&&x++;for(var C=0;C<e.length;C++){w||(e[C].$startX=i.x);var N=parseFloat(this._settings.value(e[C]||0));N>l&&(N=l),N-=r,N*=a;var k=i.x,I=i.y+v+C*f;if(w?k=e[C].$startX:e[C].$startX=k,N<0||this._settings.yAxis&&0===N)this.canvases.y.renderTextAt("middle",!0,k+10,I+g/2,this._settings.label(e[C]));else{c||(N+=m/_);var S=this._settings.color.call(this,e[C]);t.globalAlpha=this._settings.alpha.call(this,e[C]),t.fillStyle=this._settings.color.call(this,e[C]),t.beginPath();var T=this._setBarHPoints(t,k,I,g,0,_,N,this._settings.border?1:0);if(y&&!b&&t.lineTo(i.x+d,I+(this._settings.border?1:0)),t.fill(),0!=b){var E=this._setBarGradient(t,k,I+g,k,I,b,S,"x");t.fillStyle=E.gradient,t.beginPath(),T=this._setBarHPoints(t,k,I,g,0,_,N,0),t.fill()}this._settings.border&&this._drawBarHBorder(t,k,I,g,r,0,_,N,S),t.globalAlpha=1,this.canvases[s].renderTextAt("middle",!0,e[C].$startX+(T[0]-e[C].$startX)/2-1,I+(T[1]-I)/2,this._settings.label(e[C])),o.addRect(e[C].id,[e[C].$startX-i.x,I-i.y,T[0]-i.x,T[1]-i.y],s),e[C].$startX=T[0]}}}},dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f=this._settings,p=n.y-i.y,_=!!f.yAxis,m=!!f.xAxis,g=this._getStackedLimits(e),v=0===f.origin;if(l=g.max,r=g.min,e.length){var b=(n.x-i.x)/e.length;s||(a=this._drawScales(e,i,n,r,l,b)),_&&(l=parseFloat(f.yAxis.end),r=parseFloat(f.yAxis.start));var y=this._getRelativeValue(r,l);u=y[0],c=y[1];var x=u?p/u:10,w=parseInt(f.width,10);w+4>b&&(w=b-4);var C=Math.floor((b-w)/2),N=!!f.gradient&&f.gradient;m||this._drawLine(t,i.x,n.y+.5,n.x,n.y+.5,"#000000",1);for(var k=0;k<e.length;k++){var I=parseFloat(f.value(e[k]||0));this._logScaleCalc&&(I=this._log10(I)),h=i.x+C+k*b;var S=v&&I<0;if(s?d=S?e[k].$startYN:e[k].$startY:(d=a-1,e[k].$startY=d,v&&(S&&(d=a+1),e[k].$startYN=a+1)),I&&(s||v||(I-=r),I*=c,!(d<i.y+1)))if(f.yAxis&&0===I)this.canvases.y.renderTextAt(!0,!0,h+Math.floor(w/2),d,this._settings.label(e[k]));else{var T=this._settings.color.call(this,e[k]),E=Math.abs(d-(v?n.y+r*x:n.y))<3;t.globalAlpha=f.alpha.call(this,e[k]),t.fillStyle=t.strokeStyle=f.color.call(this,e[k]),t.beginPath();var O=d-x*I+(E?S?-1:1:0),j=this._setStakedBarPoints(t,h-(f.border?.5:0),d,w+(f.border?.5:0),O,0,i.y);if(t.fill(),t.stroke(),N){t.save();var A=this._setBarGradient(t,h,d,h+w,j[1],N,T,"y");t.fillStyle=A.gradient,t.beginPath(),j=this._setStakedBarPoints(t,h+A.offset,d,w-2*A.offset,O,f.border?1:0,i.y),t.fill(),t.restore()}f.border&&(t.save(),"string"==typeof f.border?t.strokeStyle=f.border:this._setBorderStyles(t,T),t.beginPath(),this._setStakedBarPoints(t,h-.5,parseInt(d,10)+.5,w+1,parseInt(O,10)+.5,0,i.y,E),t.stroke(),t.restore()),t.globalAlpha=1,this.canvases[s].renderTextAt(!1,!0,h+Math.floor(w/2),j[1]+(d-j[1])/2-7,this._settings.label(e[k])),o.addRect(e[k].id,[h-i.x,j[1]-i.y,j[0]-i.x,e[k][S?"$startYN":"$startY"]-i.y],s),e[k][S?"$startYN":"$startY"]=j[1]}}}},_setStakedBarPoints:function(t,e,i,n,s,o,l,r){t.moveTo(e,i),s<l&&(s=l),t.lineTo(e,s);var a=e+n,h=s;t.lineTo(a,h);var d=e+n;return t.lineTo(d,i),r||t.lineTo(e,i),[d,h]}},dhtmlx.chart.line={pvt_render_line:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g;if(h=this._calculateLineParams(t,e,i,n,s),l=this._settings,e.length){for(d=l.offset?i.x+.5*h.cellWidth:i.x,a=[],r=0;r<e.length;r++)if(g=this._getPointY(e[r],i,n,h)){if(u=r?h.cellWidth*r-.5+d:d,p="object"==typeof g?g.y0:g,r&&this._settings.fixOverflow){if((m=this._getPointY(e[r-1],i,n,h)).out&&m.out==g.out)continue;c=h.cellWidth*(r-1)-.5+d,f="object"==typeof m?m.y0:m,m.out&&(_="min"==m.out?n.y:i.y,a.push({x:this._calcOverflowX(c,u,f,p,_),y:_})),g.out&&(_="min"==g.out?n.y:i.y,a.push({x:this._calcOverflowX(c,u,f,p,_),y:_}))}g.out||a.push({x:u,y:g,index:r})}for(this._mapStart=i,r=1;r<=a.length;r++)c=a[r-1].x,f=a[r-1].y,r<a.length&&(u=a[r].x,p=a[r].y,this._drawLine(t,c,f,u,p,l.line.color.call(this,e[r-1]),l.line.width),l.line&&l.line.shadow&&(t.globalAlpha=.3,this._drawLine(t,c+2,f+l.line.width+8,u+2,p+l.line.width+8,"#eeeeee",l.line.width+3),t.globalAlpha=1)),void 0!==a[r-1].index&&this._drawItem(t,c,f,e[a[r-1].index],l.label(e[a[r-1].index]),s,o,i)}},_calcOverflowX:function(t,e,i,n,s){return t+(s-i)*(e-t)/(n-i)},_drawItem:function(t,e,i,n,s,o,l){var r=this._settings.item,a=parseInt(r.radius.call(this,n),10)||0,h=this._mapStart;if(a){if(t.save(),r.shadow){t.lineWidth=1,t.strokeStyle="#bdbdbd",t.fillStyle="#bdbdbd";for(var d=[.1,.2,.3],c=d.length-1;c>=0;c--)t.globalAlpha=d[c],t.strokeStyle="#d0d0d0",t.beginPath(),this._strokeChartItem(t,e,i+2*a/3,a+c+1,r.type),t.stroke();t.beginPath(),t.globalAlpha=.3,t.fillStyle="#bdbdbd",this._strokeChartItem(t,e,i+2*a/3,a+1,r.type),t.fill()}t.restore(),"image"==r.type&&r.src?this._drawImage(t,e-a,i-a,r.src,2*a,2*a):(t.lineWidth=r.borderWidth,t.fillStyle=r.color.call(this,n),t.strokeStyle=r.borderColor.call(this,n),t.globalAlpha=r.alpha.call(this,n),t.beginPath(),this._strokeChartItem(t,e,i,a+1,r.type),t.fill(),t.stroke(),t.globalAlpha=1)}s&&this.canvases[o].renderTextAt(!1,!0,e,i-a-this._settings.labelOffset,this._settings.label.call(this,n));var u=this._settings.eventRadius||a+1;l.addRect(n.id,[e-u-h.x,i-u-h.y,e+u-h.x,i+u-h.y],o)},_drawImage:function(t,e,i,n,s,o){var l=document.createElement("img");l.style.display="none",l.style.width=s+"px",l.style.height=o+"px",document.body.appendChild(l),l.src=n;var r=function(){t.drawImage(l,e,i)};l.complete?r():l.onload=r},_strokeChartItem:function(t,e,i,n,s){var o=[];if(e=parseInt(e,10),i=parseInt(i,10),!s||"square"!=s&&"s"!=s)if(!s||"diamond"!=s&&"d"!=s)o=!s||"triangle"!=s&&"t"!=s?[[e,i,n,0,2*Math.PI,!0]]:[[e,i-n],[e+Math.sqrt(3)*n/2,i+n/2],[e-Math.sqrt(3)*n/2,i+n/2],[e,i-n]];else{var l=t.lineWidth>1?t.lineWidth*Math.sqrt(2)/4:0;o=[[e,i-n],[e+n,i],[e,i+n],[e-n,i],[e+l,i-n-l]]}else o=[[e-(n*=Math.sqrt(2)/2)-t.lineWidth/2,i-n],[e+n,i-n],[e+n,i+n],[e-n,i+n],[e-n,i-n]];this._path(t,o)},_getPointY:function(t,e,i,n){var s=n.minValue,o=n.maxValue,l=n.unit,r=n.valueFactor,a=this._settings.value(t),h=(parseFloat(a||0)-s)*r;this._settings.yAxis||(h+=n.startValue/l);var d=i.y-l*h;return!this._settings.fixOverflow||"line"!=this._settings.view&&"area"!=this._settings.view?(a>o&&(d=e.y),(h<0||a<s)&&(d=i.y)):a>o?d={y:e.y,y0:d,out:"max"}:(h<0||a<s)&&(d={y:i.y,y0:d,out:"min"}),d},_calculateLineParams:function(t,e,i,n,s){var o,l={};l.totalHeight=n.y-i.y,l.cellWidth=(n.x-i.x)/(this._settings.offset?e.length:e.length-1);var r=!!this._settings.yAxis,a=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(e):this._getLimits();l.maxValue=a.max,l.minValue=a.min,s||this._drawScales(e,i,n,l.minValue,l.maxValue,l.cellWidth),r&&(l.maxValue=parseFloat(this._settings.yAxis.end),l.minValue=parseFloat(this._settings.yAxis.start));var h=this._getRelativeValue(l.minValue,l.maxValue);return o=h[0],l.valueFactor=h[1],l.unit=o?l.totalHeight/o:10,l.startValue=0,r||(l.startValue=10,l.unit!=l.totalHeight&&(l.unit=o?(l.totalHeight-l.startValue)/o:10)),l}},dhtmlx.chart.bar={pvt_render_bar:function(t,e,i,n,s,o){var l,r,a,h,d,c,u,f,p,_,m,g,v,b=n.y-i.y;v=!!this._settings.yAxis,g=!!this._settings.xAxis,d=(h=this._getLimits()).max,c=h.min,r=(n.x-i.x)/e.length,s||"auto"!=this._settings.origin&&!v||this._drawScales(e,i,n,c,d,r),v&&(d=parseFloat(this._settings.yAxis.end),c=parseFloat(this._settings.yAxis.start)),u=(p=this._getRelativeValue(c,d))[0],f=p[1],m=u?b/u:u,v||"auto"!=this._settings.origin&&g||(_=10,m=u?(b-_)/u:_),!s&&"auto"!=this._settings.origin&&!v&&this._settings.origin>c&&this._drawXAxis(t,e,i,n,r,n.y-m*(this._settings.origin-c)),l=parseInt(this._settings.width,10);var y=0,x=0;for(a=0;a<this._series.length;a++)a==s&&(x=y),"bar"==this._series[a].view&&y++;var w=this._settings.seriesMargin,C=this._settings.seriesPadding;this._series&&l*y+C+(y>2?w*y:0)>r&&(l=r/y-C-(y>2?w:0));var N=(r-l*y-w*(y-1))/2;this._settings.border&&(l=parseInt(l,10),N=parseInt(N,10));var k=void 0!==this._settings.radius?parseInt(this._settings.radius,10):Math.round(l/5),I=!1,S=this._settings.gradient;for(S&&"function"!=typeof S?(I=S,S=!1):S&&(S=t.createLinearGradient(0,n.y,0,i.y),this._settings.gradient(S)),g||this._drawLine(t,i.x,n.y+.5,n.x,n.y+.5,"#000000",1),a=0;a<e.length;a++){var T=parseFloat(this._settings.value(e[a])||0);if(!isNaN(T)){T>d&&(T=d),T-=c,T*=f;var E=i.x+N+(y>2?w*x:0)+a*r+l*x,O=n.y;if(T<0||this._settings.yAxis&&0===T&&!("auto"!=this._settings.origin&&this._settings.origin>c))this.canvases[s].renderTextAt(!0,!0,E+Math.floor(l/2),O,this._settings.label(e[a]));else{v||"auto"!=this._settings.origin&&g||(T+=_/m);var j=S||this._settings.color.call(this,e[a]);t.globalAlpha=this._settings.alpha.call(this,e[a]);var A=this._drawBar(t,i,E,O,l,c,k,m,T,j,S,I);I&&this._drawBarGradient(t,E,O,l,c,k,m,T,j,I),this._settings.border&&this._drawBarBorder(t,E,O,l,c,k,m,T,j),t.globalAlpha=1,A[0]!=E?this.canvases[s].renderTextAt(!1,!0,E+Math.floor(l/2),A[1],this._settings.label(e[a])):this.canvases[s].renderTextAt(!0,!0,E+Math.floor(l/2),A[3],this._settings.label(e[a])),o.addRect(e[a].id,[E-i.x,A[3]-i.y,A[2]-i.x,A[1]-i.y],s)}}}},_correctBarParams:function(t,e,i,n,s,o,l){var r=i;return this._settings.xAxis&&"auto"!=this._settings.origin&&this._settings.origin>l&&(r=i-=(this._settings.origin-l)*s,(n-=this._settings.origin-l)<0&&(n*=-1,t.translate(e+o,i),t.rotate(Math.PI),e=0,i=0),i-=.5),{value:n,x0:e,y0:i,start:r}},_drawBar:function(t,e,i,n,s,o,l,r,a,h,d,c){var u;t.save(),t.fillStyle=h;var f=this._correctBarParams(t,i,n,a,r,s,o);u=r*f.value>0?this._setBarPoints(t,f.x0,f.y0,s,l,r,f.value,this._settings.border?1:0):[f.x0,f.y0],d&&!c&&t.lineTo(f.x0+(this._settings.border?1:0),e.y),t.fill(),t.restore();var p=f.x0,_=f.x0!=i?i+u[0]:u[0];return[p,f.x0!=i?f.start-u[1]-f.y0:f.y0,_,f.x0!=i?f.start-f.y0:u[1]]},_drawBarBorder:function(t,e,i,n,s,o,l,r,a){var h;t.save(),h=this._correctBarParams(t,e,i,r,l,n,s),this._setBorderStyles(t,a),l*h.value>0&&this._setBarPoints(t,h.x0,h.y0,n,o,l,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarGradient:function(t,e,i,n,s,o,l,r,a,h){t.save();var d=this._correctBarParams(t,e,i,r,l,n,s),c=this._setBarGradient(t,d.x0,d.y0,d.x0+n,d.y0-l*d.value+2,h,a,"y"),u=this._settings.border?1:0;t.fillStyle=c.gradient,l*d.value>0&&this._setBarPoints(t,d.x0+c.offset,d.y0,n-2*c.offset,o,l,d.value,c.offset+u),t.fill(),t.restore()},_setBarPoints:function(t,e,i,n,s,o,l,r,a){t.beginPath();var h=0;if(s>o*l){var d=(s-o*l)/s;d<=1&&d>=-1&&(h=-Math.acos(d)+Math.PI/2)}t.moveTo(e+r,i);var c=i-Math.floor(o*l)+s+(s?0:r);s<o*l&&t.lineTo(e+r,c);var u=e+s;s&&s>0&&t.arc(u,c,s-r,-Math.PI+h,-Math.PI/2,!1);var f=e+n-s-r,p=c-s+(s?r:0);t.lineTo(f,p),s&&s>0&&t.arc(f,c,s-r,-Math.PI/2,0-h,!1);var _=e+n-r;return t.lineTo(_,i),a||t.lineTo(e+r,i),[_,p]}},dhtmlx.chart.pie={pvt_render_pie:function(t,e,i,n,s,o){this._renderPie(t,e,i,n,1,o,s)},_renderPie:function(t,e,i,n,s,o,l){if(e.length){var r=this._getPieParameters(i,n),a=this._settings.radius?this._settings.radius:r.radius;if(!(a<0)){var h=this._getValues(e),d=this._getTotalValue(h),c=this._getRatios(h,d),u=this._settings.x?this._settings.x:r.x,f=this._settings.y?this._settings.y:r.y;1==s&&this._settings.shadow&&this._addShadow(t,u,f,a),f/=s;var p,_=-Math.PI/2,m=[];if(t.scale(1,s),this._settings.gradient){var g=1!=s?u+a/3:u,v=1!=s?f+a/3:f;this._showRadialGradient(t,u,f,a,g,v)}this._settings.labelLines&&(this._labelMargins=this._getLabelMargins(c,a));for(var b=0;b<e.length;b++)if(h[b]){t.strokeStyle=1==e.length?this._settings.color.call(this,e[b]):this._settings.lineColor.call(this,e[b]),t.beginPath(),t.moveTo(u,f),m.push(_),p=-Math.PI/2+c[b]-1e-4,t.arc(u,f,a,_,p,!1),t.lineTo(u,f);var y=this._settings.color.call(this,e[b]);t.fillStyle=y,t.fill(),this._settings.pieInnerText&&this._drawSectorLabel(u,f,5*a/6,_,p,s,this._settings.pieInnerText(e[b],d),!0),this._settings.label&&this._drawSectorLabel(u,f,a,_,p,s,this._settings.label(e[b]),0,this._labelMargins?this._labelMargins[b]:{},t),1!=s&&(this._createLowerSector(t,u,f,_,p,a,!0),t.fillStyle="#000000",t.globalAlpha=.2,this._createLowerSector(t,u,f,_,p,a,!1),t.globalAlpha=1,t.fillStyle=y),o.addSector(e[b].id,_,p,u-i.x,f-i.y/s,a,s,l),_=p}t.globalAlpha=.8;var x;if(m.length>1)for(b=0;b<m.length;b++)x=this._getPositionByAngle(m[b],u,f,a),this._drawLine(t,u,f,x.x,x.y,this._settings.lineColor.call(this,e[b]),2);1==s&&(t.lineWidth=2,t.strokeStyle="#ffffff",t.beginPath(),t.arc(u,f,a+1,0,2*Math.PI,!1),t.stroke()),t.globalAlpha=1,t.scale(1,1/s)}}},_getLabelMargins:function(t,e){var i,n,s,o={1:[0]};for(s=1;s<t.length;s++){i=-Math.PI/2+(s>1?t[s-1]-(t[s-1]-t[s-2])/2:t[s-1]/2),n=-Math.PI/2+t[s]-(t[s]-t[s-1])/2;var l=Math.cos(n),r=Math.sin(n),a=Math.cos(i),h=Math.sin(i),d=Math.round((e+8)*Math.abs(Math.sin(n)-Math.sin(i))),c=l<0?r<0?4:3:r<0?1:2,u=a<0?h<0?4:3:h<0?1:2;o[c]||(o[c]=[]),o[c].push(u==c?d:0)}var f=[];for(var p in o){o[p].length;var _=0,m=0;if(1==p||3==p){v=p-1;for(var g=0;v>0;)o[v]&&(g+=o[v].length),v--;f[g+o[p].length-1]={y:0,x:0};for(var v=o[p].length-2;v>=0;)(_||v)&&o[p][v+1]-_<18?_+=18-o[p][v+1]:_=0,f[g+v]={y:_*(1==p?-1:1)},v--;for(var b=f.length-o[p].length;b<f.length;b++)0!=f[b].y?(m+=6,f[b].x=m):(f[b].x=0,m=0)}else{v=1;for(f.push({y:0,x:0});v<o[p].length;)o[p][v]-_<18?_+=18-o[p][v]:_=0,f.push({y:_*(4==p?-1:1)}),v++;for(b=f.length-1;b>=f.length-o[p].length;b--)0!=f[b].y?(m+=8,f[b].x=m):(m=0,f[b].x=0)}}return f},_getValues:function(t){for(var e=[],i=0;i<t.length;i++)e.push(parseFloat(this._settings.value(t[i])||0));return e},_getTotalValue:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e},_getRatios:function(t,e){var i,n=[],s=0;e=e||this._getTotalValue(t);for(var o=0;o<t.length;o++)i=t[o],n[o]=2*Math.PI*(e?(i+s)/e:1/t.length),s+=i;return n},_getPieParameters:function(t,e){var i=e.x-t.x,n=e.y-t.y;return{x:t.x+i/2,y:t.y+n/2,radius:Math.min(i/2,n/2)}},_createLowerSector:function(t,e,i,n,s,o,l){if(t.lineWidth=1,n<=0&&s>=0||n>=0&&s<=Math.PI||Math.abs(n-Math.PI)>.003&&n<=Math.PI&&s>=Math.PI){n<=0&&s>=0&&(n=0,l=!1,this._drawSectorLine(t,e,i,o,n,s)),n<=Math.PI&&s>=Math.PI&&(s=Math.PI,l=!1,this._drawSectorLine(t,e,i,o,n,s));var r=(this._settings.height||Math.floor(o/4))/this._settings.cant;t.beginPath(),t.arc(e,i,o,n,s,!1),t.lineTo(e+o*Math.cos(s),i+o*Math.sin(s)+r),t.arc(e,i+r,o,s,n,!0),t.lineTo(e+o*Math.cos(n),i+o*Math.sin(n)),t.fill(),l&&t.stroke()}},_drawSectorLine:function(t,e,i,n,s,o){t.beginPath(),t.arc(e,i,n,s,o,!1),t.stroke()},_addShadow:function(t,e,i,n){t.globalAlpha=.5;for(var s=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],o=s.length-1;o>-1;o--)t.beginPath(),t.fillStyle=s[o],t.arc(e+1,i+1,n+o,0,2*Math.PI,!0),t.fill();t.globalAlpha=1},_getGrayGradient:function(t){return t.addColorStop(0,"#ffffff"),t.addColorStop(.7,"#7a7a7a"),t.addColorStop(1,"#000000"),t},_showRadialGradient:function(t,e,i,n,s,o){t.beginPath();var l;"function"!=typeof this._settings.gradient?(l=t.createRadialGradient(s,o,n/4,e,i,n),l=this._getGrayGradient(l)):l=this._settings.gradient(l),t.fillStyle=l,t.arc(e,i,n,0,2*Math.PI,!0),t.fill(),t.globalAlpha=.7},_drawSectorLabel:function(t,e,i,n,s,o,l,r,a,h){var d=this.canvases[0].renderText(0,0,l,0,1);if(d){var c=d.scrollWidth;d.style.width=c+"px",c>t&&(c=t);var u=s-n<.2?4:8;r&&(u=c/1.8);var f=n+(s-n)/2,p=i;i=r?5*i/6:i+this._settings.labelOffset,i-=(u-8)/2;var _=-u,m="right";(f>=Math.PI/2&&f<Math.PI||f<=3*Math.PI/2&&f>=Math.PI)&&(_=-c-_,m="left");var g=0;!r&&o<1&&f>0&&f<Math.PI&&(g=(this._settings.height||Math.floor(i/4))/o);var v=(e+Math.floor(i+g)*Math.sin(f))*o-8,b=t+Math.floor(i+u/2)*Math.cos(f)+_,y=s<Math.PI/2+.01,x=n<Math.PI/2;if(x&&y?b=Math.max(b,t+3):x||y?r||this._settings.labelLines||!(f>=Math.PI/2&&f<Math.PI||f<=3*Math.PI/2&&f>=Math.PI)||(b+=c/3):b=Math.min(b,t-c),this._settings.labelLines&&!r){Math.abs((Math.abs(a||0)+Math.abs(p*Math.sin(f)))/Math.sin(f));a.y&&(v+=a.y),"left"==m?b-=a.x:b+=a.x,h.beginPath(),h.strokeStyle="#555";var w=t+p*Math.cos(f),C=e+p*Math.sin(f);h.moveTo(w,C);var N=b-("left"==m?_-8:2),k=v;"left"==m&&N>w?(N=w-Math.abs(k-C+16)/Math.tan(f-Math.PI),k+=16,f<Math.PI&&(k-=8)):k+=8,h.lineTo(N,k),h.lineTo(N+("left"==m?-5:5),k),h.stroke(),v=k-8,b=N+_+("left"==m?-15:15)}d.style.top=v+"px",d.style.left=b+"px",d.style.width=c+"px",d.style.textAlign=m,d.style.whiteSpace="nowrap"}}},dhtmlx.chart.pie3D={pvt_render_pie3D:function(t,e,i,n,s,o){this._renderPie(t,e,i,n,this._settings.cant,o)}},dhtmlx.chart.donut={pvt_render_donut:function(t,e,i,n,s,o){if(e.length){this._renderPie(t,e,i,n,1,o);var l=this._settings,r=this._getPieParameters(i,n),a=l.radius?l.radius:r.radius,h=l.innerRadius&&l.innerRadius<a?l.innerRadius:a/3,d=l.x?l.x:r.x,c=l.y?l.y:r.y;t.fillStyle="#ffffff",t.beginPath(),t.arc(d,c,h,0,2*Math.PI,!0),t.fill()}}},dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(t){return this._grid=t,t},getRecords:function(t){return t.rowsBuffer},getDetails:function(t){for(var e={},i=0;i<this._grid.getColumnsNum();i++)e["data"+i]=this._grid[this._grid_getter](t,i);return e},getInfo:function(t){return{_size:0,_from:0}}},dhtmlx.ui.Canvas=function(t,e,i){this._canvas_labels=[],this._canvas_name=e,this._obj=t;var n=t.offsetWidth*(window.devicePixelRatio||1),s=t.offsetHeight*(window.devicePixelRatio||1);i=i||"";i+=";width:"+t.offsetWidth+"px;height:"+t.offsetHeight+"px;",this._prepareCanvas(e,i,n,s)},dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(t,e,i,n){return this._canvas=dhtmlx.html.create("canvas",{width:i,height:n,canvas_id:t,style:e||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(t){var e=(this._canvas||this._prepareCanvas()).getContext(t||"2d");return this._dhtmlxDevicePixelRatio||(this._dhtmlxDevicePixelRatio=!0,e.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),e},_resizeCanvas:function(){if(this._canvas){var t=this._canvas.parentNode.offsetWidth,e=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",t*(window.devicePixelRatio||1)),this._canvas.setAttribute("height",e*(window.devicePixelRatio||1)),this._canvas.style.width=t+"px",this._canvas.style.height=e+"px",this._dhtmlxDevicePixelRatio=!1}},renderText:function(t,e,i,n,s){if(i){var o=dhtmlx.html.create("DIV",{class:"dhx_canvas_text"+(n?" "+n:""),style:"left:"+t+"px; top:"+e+"px;"},i);return this._obj.appendChild(o),this._canvas_labels.push(o),s&&(o.style.width=s+"px"),o}},renderTextAt:function(t,e,i,n,s,o,l){var r=this.renderText.call(this,i,n,s,o,l);return r&&(t&&(r.style.top="middle"==t?parseInt(n-r.offsetHeight/2,10)+"px":n-r.offsetHeight+"px"),e&&(r.style.left="left"==e?i-r.offsetWidth+"px":parseInt(i-r.offsetWidth/2,10)+"px")),r},clearCanvas:function(t){var e,i=[];for(e=0;e<this._canvas_labels.length;e++)this._obj.removeChild(this._canvas_labels[e]);if(this._canvas_labels=[],!t&&this._obj._htmlmap){for(i=this._getMapAreas();i.length;)i[0].parentNode.removeChild(i[0]),i.splice(0,1);i=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._canvas.width,this._canvas.height)},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(t){var e,i;for(i=0;i<this._canvas_labels.length;i++)this._canvas_labels[i].style.display=t?"":"none";if(this._obj._htmlmap)for(e=this._getMapAreas(),i=0;i<e.length;i++)t?e[i].removeAttribute("disabled"):e[i].setAttribute("disabled","true");this._canvas.style.display=t?"":"none"},_getMapAreas:function(){var t,e,i=[];for(t=this._obj._htmlmap.getElementsByTagName("AREA"),e=0;e<t.length;e++)t[e].getAttribute("userdata")==this._canvas_name&&i.push(t[e]);return i}},dhtmlXChart=function(t){this.name="Chart",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_chart"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),this.data.provideApi(this,!0),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.destructors.push(this),dhtmlx.extend(this,dhtmlx.Group),dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var e in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[e]);t.preset&&this.definePreset(t),this._parseSettings(t,this.defaults),this._series=[this._settings],this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this)),this.attachEvent("onLocateData",this._switchSerie)},dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(t,e,i){var n=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[t,n,i])){var s=this._settings,o=s.legend.values,l=o&&void 0!==o[n].toggle?o[n].toggle:s.legend.toggle;void 0!==n&&this._series.length>1&&l&&(-1!=i.className.indexOf("hidden")?this.showSeries(n):this.hideSeries(n))}}},on_dblclick:{},on_mouse_move:{},destructor:function(){if(dhtmlx.Destruction.destructor.apply(this,arguments),this.canvases){for(var t in this.canvases)this.canvases[t]._obj=null,this.canvases[t]=null;this.canvases=null}this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),this.config.tooltip&&(this.config.tooltip._obj=null,this.config.tooltip._dataobj=null)},bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var t in this.canvases)this.canvases[t]._resizeCanvas();this.render()},view_setter:function(t){return dhtmlx.chart[t]||dhtmlx.error("Chart type extension is not loaded: "+t),void 0===this._settings.offset&&(this._settings.offset=!("area"==t||"stackedArea"==t)),"radar"!=t||this._settings.yAxis||this.define("yAxis",{}),"scatter"==t&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),t},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var t in this.canvases)this.canvases[t].clearCanvas()},render:function(){var t,e,i,n,s;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(e in this.canvases)this.canvases[e].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),t=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),this._map=n=new dhtmlx.ui.Map(this._id),s=this._settings,i=this._getChartData(),e=0;e<this._series.length;e++)this._settings=this._series[e],this.canvases[e]||(this.canvases[e]=new dhtmlx.ui.Canvas(this._obj,e,"z-index:"+(2+e))),this["pvt_render_"+this._settings.view](this.canvases[e].getCanvas(),i,t.start,t.end,e,n);n.render(this._obj),this._obj.lastChild.style.zIndex=1e3,this._applyBounds(this._obj.lastChild,t),this.callEvent("onAfterRender",[]),this._settings=s}},_applyBounds:function(t,e){var i={};i.left=e.start.x,i.top=e.start.y,i.width=e.end.x-e.start.x,i.height=e.end.y-e.start.y;for(var n in i)t.style[n]=i[n]+"px"},_getChartData:function(){var t,e,i,n,s,o,l,r,a,h;if(n=this.data.getRange(),t=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis",(e=this._settings[t])&&e.units&&"object"==typeof e.units){if(i=e.units,r=[],void 0!==i.start&&void 0!==i.end&&void 0!==i.next)for(l=i.start;l<=i.end;)r.push(l),l=i.next.call(this,l);else"[object Array]"===Object.prototype.toString.call(i)&&(r=i);if(o=[],r.length){for(a=e.value,h={},s=0;s<n.length;s++)h[a(n[s])]=s;for(s=0;s<r.length;s++)void 0!==h[r[s]]?(n[h[r[s]]].$unit=r[s],o.push(n[h[r[s]]])):o.push({$unit:r[s]})}return o}return n},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(t){this.define("value",t)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(t){return"function"!=typeof t&&t&&!0===t&&(t="light"),t},colormap:{RAINBOW:function(t){var e=Math.floor(this.indexById(t.id)/this.dataCount()*1536);return 1536==e&&(e-=1),this._rainbow[Math.floor(e/256)](e%256)}},color_setter:function(t){return this.colormap[t]||dhtmlx.Template.obj_setter(t)},fill_setter:function(t){return!(!t||0==t)&&dhtmlx.Template.obj_setter(t)},definePreset:function(t){this.define("preset",t.preset),delete t.preset},preset_setter:function(t){var e,i,n;if(this.defaults=dhtmlx.extend({},this.defaults),"object"==typeof dhtmlx.presets.chart[t]){n=dhtmlx.presets.chart[t];for(e in n)if("object"==typeof n[e])if(this.defaults[e]&&"object"==typeof this.defaults[e]){this.defaults[e]=dhtmlx.extend({},this.defaults[e]);for(i in n[e])this.defaults[e][i]=n[e][i]}else this.defaults[e]=dhtmlx.extend({},n[e]);else this.defaults[e]=n[e];return t}return!1},legend_setter:function(t){return t?("object"!=typeof t&&(t={template:t}),this._mergeSettings(t,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),t.template=dhtmlx.Template.setter(t.template),t):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(t){"object"!=typeof t&&(t={color:t,borderColor:t}),this._mergeSettings(t,dhtmlx.extend({},this.defaults.item));for(var e=["alpha","borderColor","color","radius"],i=0;i<e.length;i++)t[e[i]]=dhtmlx.Template.setter(t[e[i]]);return t},line_setter:function(t){return"object"!=typeof t&&(t={color:t}),dhtmlx.extend(this.defaults.line,t),t=dhtmlx.extend({},this.defaults.line),t.color=dhtmlx.Template.setter(t.color),t},padding_setter:function(t){return"object"!=typeof t&&(t={left:t,right:t,top:t,bottom:t}),this._mergeSettings(t,{left:50,right:20,top:35,bottom:40}),t},xAxis_setter:function(t){if(!t)return!1;"object"!=typeof t&&(t={template:t}),t.value||(t.value=t.template),this._mergeSettings(t,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});return this._converToTemplate(["lineColor","template","lines","value"],t),this._configXAxis=dhtmlx.extend({},t),t},yAxis_setter:function(t){if(!t)return!1;this._mergeSettings(t,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});return this._converToTemplate(["lineColor","template","lines","bg"],t),this._configYAxis=dhtmlx.extend({},t),t},_converToTemplate:function(t,e){for(var i=0;i<t.length;i++)e[t[i]]=dhtmlx.Template.setter(e[t[i]])},_drawScales:function(t,e,i,n,s,o){var l=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),l=this._drawYAxis(this.canvases.y.getCanvas(),t,e,i,n,s)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),t,e,i,o,l)),l},_drawXAxis:function(t,e,i,n,s,o){for(var l,r=i.x-.5,a=parseInt(o||n.y,10)+.5,h=n.x,d=!0,c=0===this._settings.origin&&"stackedBar"==this._settings.view?n.y+.5:a,u=0;u<e.length;u++){!0===this._settings.offset?l=r+s/2+u*s:(l=u==e.length-1?n.x:r+u*s,d=!!u),l=Math.ceil(l)-.5;var f="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(e[u]))<this._settings.origin;this._drawXAxisLabel(l,c,e[u],d,f),(this._settings.offset||u)&&this._settings.xAxis.lines.call(this,e[u])&&this._drawXAxisLine(t,l,n.y,i.y,e[u])}this.canvases.x.renderTextAt(!0,!1,r,n.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",n.x-i.x),this._drawLine(t,r,a,h,a,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset&&this._drawLine(t,h+.5,n.y,h+.5,i.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(t,e,i,n,s,o){var l,r={};if(this._settings.yAxis){var a=i.x-.5,h=n.y,d=i.y,c=n.y;this._settings.yAxis.step&&(l=parseFloat(this._settings.yAxis.step)),void 0!==this._configYAxis.step&&void 0!==this._configYAxis.start&&void 0!==this._configYAxis.end||(s=(r=this._calculateScale(s,o)).start,o=r.end,l=r.step,this._settings.yAxis.end=o,this._settings.yAxis.start=s),this._setYAxisTitle(i,n),0===l&&(o=s,l=1);for(var u=o==s?h-d:(h-d)*l/(o-s),f=0,p=s;p<=o;p+=l){r.fixNum&&(p=parseFloat(new Number(p).toFixed(r.fixNum)));var _=Math.floor(h-f*u)+.5;p==s&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,p)||this._drawLine(t,a,_,n.x,_,this._settings.yAxis.lineColor.call(this,p),1),p==this._settings.origin&&(c=_);var m=p;if(l<1){var g=Math.min(this._log10(l),s<=0?0:this._log10(s)),v=Math.pow(10,-g);p=m=Math.round(p*v)/v}this.canvases.y.renderText(0,_-5,this._settings.yAxis.template(m.toString()),"dhx_axis_item_y",i.x-5),f++}return this._drawLine(t,a,h+1,a,d,this._settings.yAxis.color,1),c}},_setYAxisTitle:function(t,e){var i="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":""),n=this.canvases.y.renderTextAt("middle",!1,0,parseInt((e.y-t.y)/2+t.y,10),this._settings.yAxis.title,i);n&&(n.style.left=(dhtmlx.env.transform?(n.offsetHeight-n.offsetWidth)/2:0)+"px")},_calculateScale:function(t,e){"auto"!=this._settings.origin&&this._settings.origin<t&&(t=this._settings.origin);var i,n,s;i=(e-t)/8||1;var o=Math.floor(this._log10(i)),l=Math.pow(10,o),r=i/l;if(r=r>5?10:5,(i=parseInt(r,10)*l)>Math.abs(t))n=t<0?-i:0;else{var a=Math.abs(t),h=Math.floor(this._log10(a)),d=a/Math.pow(10,h);for(n=Math.ceil(10*d)/10*Math.pow(10,h)-i,a>1&&i>.1&&(n=Math.ceil(n));t<0?n<=t:n>=t;)n-=i;t<0&&(n=-n-2*i)}for(s=n;s<e;)s+=i,s=parseFloat(new Number(s).toFixed(Math.abs(o)));return{start:n,end:s,step:i,fixNum:Math.abs(o)}},_getLimits:function(t,e){var i,n,s=arguments.length&&"h"==t?this._configXAxis:this._configYAxis;if(e=e||"value",s&&void 0!==s.end&&void 0!==s.start&&s.step)i=parseFloat(s.end),n=parseFloat(s.start);else if(i=this.max(this._series[0][e]),n=s&&void 0!==s.start?parseFloat(s.start):this.min(this._series[0][e]),this._series.length>1)for(var o=1;o<this._series.length;o++){var l=this.max(this._series[o][e]),r=this.min(this._series[o][e]);l>i&&(i=l),r<n&&(n=r)}return{max:i,min:n}},_log10:function(t){return Math.floor(Math.log(t)/Math.LN10)},_drawXAxisLabel:function(t,e,i,n,s){if(this._settings.xAxis){var o=this.canvases.x.renderTextAt(s,n,t,e-(s?2:0),this._settings.xAxis.template(i));o&&(o.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(t,e,i,n,s){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(t,e,i,e,n,this._settings.xAxis.lineColor.call(this,s),1)},_drawLine:function(t,e,i,n,s,o,l){t.strokeStyle=o,t.lineWidth=l,t.beginPath(),t.moveTo(e,i),t.lineTo(n,s),t.stroke(),t.lineWidth=1},_getRelativeValue:function(t,e){var i;return i=e!=t?e-t:t,[i,1]},_rainbow:[function(t){return"#FF"+dhtmlx.math.toHex(t/2,2)+"00"},function(t){return"#FF"+dhtmlx.math.toHex(t/2+128,2)+"00"},function(t){return"#"+dhtmlx.math.toHex(255-t,2)+"FF00"},function(t){return"#00FF"+dhtmlx.math.toHex(t,2)},function(t){return"#00"+dhtmlx.math.toHex(255-t,2)+"FF"},function(t){return"#"+dhtmlx.math.toHex(t,2)+"00FF"}],addSeries:function(t){var e=this._settings;this._settings=dhtmlx.extend({},e),this._parseSettings(t,{}),this._series.push(this._settings),this._settings=e},_switchSerie:function(t,e,i){var n;if(this._active_serie=1==this._series.length?e.getAttribute("userdata"):this._getActiveSeries(i),this._series[this._active_serie]){for(var s=0;s<this._series.length;s++)(n=this._series[s].tooltip)&&n.disable();e.getAttribute("disabled")||(n=this._series[this._active_serie].tooltip)&&n.enable()}},_getActiveSeries:function(t){var e,i,n,s,o,l,r,a;for(i=this._map._areas,s=dhtmlx.html.offset(this._obj._htmlmap),r=(o=dhtmlx.html.pos(t)).x-s.x,a=o.y-s.y,n=0;n<i.length;n++)r<=(e=i[n].points)[2]&&r>=e[0]&&a<=e[3]&&a>=e[1]&&(l?i[n].index>l.index&&(l=i[n]):l=i[n]);return l?l.index:0},hideSeries:function(t){this.canvases[t].hideCanvas(),this._settings.legend.values&&this._settings.legend.values[t]&&(this._settings.legend.values[t].$hidden=!0),this._drawLegend()},showSeries:function(t){this.canvases[t].showCanvas(),this._settings.legend.values&&this._settings.legend.values[t]&&delete this._settings.legend.values[t].$hidden,this._drawLegend()},_changeColorSV:function(t,e,i){var n,s;return s=dhtmlx.math.toRgb(t),n=dhtmlx.math.rgbToHsv(s[0],s[1],s[2]),n[1]*=e,n[2]*=i,"rgb("+dhtmlx.math.hsvToRgb(n[0],n[1],n[2])+")"},_setBorderStyles:function(t,e){var i,n;n=dhtmlx.math.toRgb(e),(i=dhtmlx.math.rgbToHsv(n[0],n[1],n[2]))[2]/=2,e="rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")",t.strokeStyle=e,1==t.globalAlpha&&(t.globalAlpha=.9)},_drawLegend:function(t,e){var i,n,s,o,l,r,a,h,d,c,u,f=0,p=0;if(t=t||[],e=e||this._obj.offsetWidth,h=this.canvases.legend.getCanvas(),n=this._settings.legend,a="x"!=this._settings.legend.layout?"width:"+n.width+"px":"",this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)),this.canvases.legend.clearCanvas(!0),s=dhtmlx.html.create("DIV",{class:"dhx_chart_legend",style:"left:"+f+"px; top:"+p+"px;"+a},""),n.padding&&(s.style.padding=n.padding+"px"),this.legendObj=s,this._obj.appendChild(s),l=[],n.values)for(i=0;i<n.values.length;i++)l.push(this._drawLegendText(s,n.values[i].text,void 0!==n.values[i].id?typeof n.values[i].id:i,n.values[i].$hidden));else for(i=0;i<t.length;i++)l.push(this._drawLegendText(s,n.template(t[i])));for(r=s.offsetWidth,o=s.offsetHeight,r<this._obj.offsetWidth&&("x"==n.layout&&"center"==n.align&&(f=(this._obj.offsetWidth-r)/2),"right"==n.align&&(f=this._obj.offsetWidth-r),n.margin&&"center"!=n.align&&(f+=("left"==n.align?1:-1)*n.margin)),o<this._obj.offsetHeight&&("middle"==n.valign&&"center"!=n.align&&"x"!=n.layout?p=(this._obj.offsetHeight-o)/2:"bottom"==n.valign&&(p=this._obj.offsetHeight-o),n.margin&&"middle"!=n.valign&&(p+=("top"==n.valign?1:-1)*n.margin)),s.style.left=f+"px",s.style.top=p+"px",h.save(),i=0;i<l.length;i++){u=l[i],n.values&&n.values[i].$hidden?(c=!0,d=n.values[i].disableColor?n.values[i].disableColor:"#d9d9d9"):(c=!1,d=n.values?n.values[i].color:this._settings.color.call(this,t[i]));var _="right"==n.marker.position?u.offsetWidth-n.marker.width:0;this._drawLegendMarker(h,u.offsetLeft+f+_,u.offsetTop+p,d,u.offsetHeight,c,i)}h.restore(),l=null},_drawLegendText:function(t,e,i,n){var s="",o=this._settings.legend;"x"==o.layout&&(s="float:left;");var l=o.marker.position,r=dhtmlx.html.create("DIV",{style:s+"padding-"+(l&&"right"==l?"right":"left")+":"+(10+o.marker.width)+"px",class:"dhx_chart_legend_item"+(n?" hidden":"")},e);return arguments.length>2&&r.setAttribute("series_id",i),t.appendChild(r),r},_drawLegendMarker:function(t,e,i,n,s,o,l){var r=[],a=this._settings.legend.marker,h=this._settings.legend.values,d=h&&h[l].markerType?h[l].markerType:a.type;if(n&&(t.fillStyle=n,t.strokeStyle=this._getDarkenColor(n,.75)),t.beginPath(),"round"!=d&&a.radius)if("item"==d){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){t.beginPath(),t.lineWidth=this._series[l].line.width,t.strokeStyle=o?n:this._series[l].line.color.call(this,{});var c=e+5,u=i+s/2;t.moveTo(c,u);_=c+a.width;t.lineTo(_,u),t.stroke()}var f=this._series[l].item,p=parseInt(f.radius.call(this,{}),10)||0;if(p){if("image"==f.type&&f.src)return void this._drawImage(t,e+5,i+a.height/2-5,f.src,2*p,2*p);t.beginPath(),o?(t.lineWidth=f.borderWidth,t.strokeStyle=n,t.fillStyle=n):(t.lineWidth=f.borderWidth,t.fillStyle=f.color.call(this,{}),t.strokeStyle=f.borderColor.call(this,{}),t.globalAlpha=f.alpha.call(this,{})),t.beginPath(),e+=a.width/2+5,i+=s/2,this._strokeChartItem(t,e,i,p+1,f.type),t.fill(),t.stroke()}t.globalAlpha=1}else t.lineWidth=1,e+=5,i+=parseInt(s/2-a.height/2,10),r=[[e+a.radius,i+a.radius,a.radius,Math.PI,3*Math.PI/2,!1],[e+a.width-a.radius,i],[e+a.width-a.radius,i+a.radius,a.radius,-Math.PI/2,0,!1],[e+a.width,i+a.height-a.radius],[e+a.width-a.radius,i+a.height-a.radius,a.radius,0,Math.PI/2,!1],[e+a.radius,i+a.height],[e+a.radius,i+a.height-a.radius,a.radius,Math.PI/2,Math.PI,!1],[e,i+a.radius]],this._path(t,r);else{t.lineWidth=a.height,t.lineCap=d,e+=t.lineWidth/2+5,i+=s/2,t.moveTo(e,i);var _=e+a.width-a.height+1;t.lineTo(_,i)}t.stroke(),t.fill()},_getDarkenColor:function(t,e){var i,n;return n=dhtmlx.math.toRgb(t),i=dhtmlx.math.rgbToHsv(n[0],n[1],n[2]),i[2]=i[2]*e,"rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")"},_getChartBounds:function(t,e){var i,n,s,o;if(i=this._settings.padding.left,n=this._settings.padding.top,s=t-this._settings.padding.right,o=e-this._settings.padding.bottom,this._settings.legend){var l=this._settings.legend,r=this._settings.legend.width,a=this._settings.legend.height;"x"==l.layout?"center"==l.valign?"right"==l.align?s-=r:"left"==l.align&&(i+=r):"bottom"==l.valign?o-=a:n+=a:"right"==l.align?s-=r:"left"==l.align&&(i+=r)}return{start:{x:i,y:n},end:{x:s,y:o}}},_getStackedLimits:function(t){var e,i,n,s,o;if(this._settings.yAxis&&void 0!==this._settings.yAxis.end&&void 0!==this._settings.yAxis.start&&this._settings.yAxis.step)n=parseFloat(this._settings.yAxis.end),s=parseFloat(this._settings.yAxis.start);else{for(e=0;e<t.length;e++)for(t[e].$sum=0,t[e].$min=1/0,i=0;i<this._series.length;i++)o=parseFloat(this._series[i].value(t[e])||0),isNaN(o)||(-1!=this._series[i].view.toLowerCase().indexOf("stacked")&&(t[e].$sum+=o),o<t[e].$min&&(t[e].$min=o));for(n=-1/0,s=1/0,e=0;e<t.length;e++)t[e].$sum>n&&(n=t[e].$sum),t[e].$min<s&&(s=t[e].$min);s>0&&(s=0)}return{max:n,min:s}},_setBarGradient:function(t,e,i,n,s,o,l,r){var a,h,d,c,u,f;return"light"==o?(a="x"==r?t.createLinearGradient(e,i,n,i):t.createLinearGradient(e,i,e,s),f=[[0,"#FFFFFF"],[.9,l],[1,l]],h=2):"falling"==o||"rising"==o?(a="x"==r?t.createLinearGradient(e,i,n,i):t.createLinearGradient(e,i,e,s),d=dhtmlx.math.toRgb(l),(c=dhtmlx.math.rgbToHsv(d[0],d[1],d[2]))[1]*=.5,u="rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")","falling"==o?f=[[0,u],[.7,l],[1,l]]:"rising"==o&&(f=[[0,l],[.3,l],[1,u]]),h=0):(t.globalAlpha=.37,h=0,a="x"==r?t.createLinearGradient(e,s,e,i):t.createLinearGradient(e,i,n,i),f=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(a,f),{gradient:a,offset:h}},_getPositionByAngle:function(t,e,i,n){return t*=-1,e+=Math.cos(t)*n,i-=Math.sin(t)*n,{x:e,y:i}},_gradient:function(t,e){for(var i=0;i<e.length;i++)t.addColorStop(e[i][0],e[i][1])},_path:function(t,e){var i,n;for(i=0;i<e.length;i++)n=i?"lineTo":"moveTo",e[i].length>2&&(n="arc"),t[n].apply(t,e[i])},_circle:function(t,e,i,n){t.arc(e,i,n,2*Math.PI,!0)},_addMapRect:function(t,e,i,n,s){t.addRect(e,[i[0].x-n.x,i[0].y-n.y,i[1].x-n.x,i[1].y-n.y],s)}},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachChart=function(t){this.callEvent("_onBeforeContentAttach",["chart"]);var e=document.createElement("DIV");return e.id="dhxChartObj_"+window.dhx4.newId(),e.style.width="100%",e.style.height="100%",document.body.appendChild(e),this._attachObject(e),t.container=e.id,this.dataType="chart",this.dataObj=new dhtmlXChart(t),this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()}),this.dataObj}),dhtmlx.ui.pager=function(t){this.name="Pager",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_pager"),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.SingleRender),dhtmlx.extend(this,dhtmlx.MouseEvents),this._parseSettings(t,{size:10,page:-1,group:5,count:0,type:"default"}),this.data=this._settings,this.refresh()},dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(t,e){this.select(e)}},select:function(t){switch(t){case"next":t=this._settings.page+1;break;case"prev":t=this._settings.page-1;break;case"first":t=0;break;case"last":t=this._settings.limit-1}t<0&&(t=0),t>=this.data.limit&&(t=this.data.limit-1),this.callEvent("onBeforePageChange",[this._settings.page,t])&&(this.data.page=1*t,this.refresh(),this.callEvent("onAfterPageChange",[t]))},types:{default:{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(t){var e="";if(-1==t.page)return"";t.min=t.page-Math.round((t.group-1)/2),t.max=t.min+t.group-1,t.min<0&&(t.max+=-1*t.min,t.min=0),t.max>=t.limit&&(t.min-=Math.min(t.min,t.max-t.limit+1),t.max=t.limit-1);for(var i=t.min||0;i<=t.max;i++)e+=this.button({id:i,index:i+1,selected:i==t.page?"_selected":""});return e},page:function(t){return t.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var t=this._settings;t.limit=Math.ceil(t.count/t.size),t.limit&&t.limit!=t.old_limit&&(t.page=Math.min(t.limit-1,t.page));var e=t.page;(-1!=e&&e!=t.old_page||t.limit!=t.old_limit)&&(this.render(),this.callEvent("onRefresh",[]),t.old_limit=t.limit,t.old_page=t.page)},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.DataProcessor={_dp_init:function(t){var e="_methods";t[e]=["setItemStyle","","changeId","remove"],this.attachEvent("onAfterAdd",function(e){t.setUpdated(e,!0,"inserted")}),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(t,e){t.getUserData&&t.getUserData(e,this._userdata)},this)),this.attachEvent("onBeforeDelete",function(e){if(t._silent_mode)return!0;var i=t.getState(e);return"inserted"==i?(t.setUpdated(e,!1),!0):"deleted"!=i&&("true_deleted"==i||(t.setUpdated(e,!0,"deleted"),!1))}),this.attachEvent("onAfterEditStop",function(e){t.setUpdated(e,!0,"updated")}),this.attachEvent("onBindUpdate",function(e){window.setTimeout(function(){t.setUpdated(e.id,!0,"updated")},1)}),t[e="_getRowData"]=function(t,e){var i=this.obj.data.get(t),n={};for(var s in i)0!==s.indexOf("_")&&(n[s]=i[s]);return n},t[e="_clearUpdateFlag"]=function(){},this._userdata={},t.attachEvent("insertCallback",this._dp_callback),t.attachEvent("updateCallback",this._dp_callback),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.remove(e)}),dhtmlx.compat("dataProcessor",t)},_dp_callback:function(t,e){this.obj.data.set(e,dhtmlx.DataDriver.xml.getDetails(t.firstChild)),this.obj.data.refresh(e)},setItemStyle:function(t,e){var i=this._locateHTML(t);i&&(i.style.cssText+=";"+e)},changeId:function(t,e){this.data.changeId(t,e),this.refresh()},setUserData:function(t,e,i){t?this.data.get(t)[e]=i:this._userdata[e]=i},getUserData:function(t,e){return t?this.data.get(t)[e]:this._userdata[e]}},dhtmlx.DataProcessor._dp_init=dhtmlx.DataProcessor._dp_init,dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var t=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(e,i,n){if(t.apply(this,arguments),!n){var s=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};s.from||(s.from=this.dragStartObject),dhtmlx.DragControl._checkLand(e,i,!0)}};var e=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(t,n,s){s||dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=i.dragStartNode,dhtmlx.DragControl._stopDrag(t,!0)),e.apply(this,arguments)};var i=new dhtmlDragAndDropObject,n=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){n.apply(this,arguments);var t=dhtmlx.DragControl._drag_context;if(t){for(var e=[],s=[],o=0;o<t.source.length;o++)e[o]={idd:t.source[o]},s.push(t.source[o]);i.dragStartNode={parentNode:{},parentObject:{idd:e,id:1==s.length?s[0]:s,treeNod:{object:t.from}}},i.dragStartNode.parentObject.treeNod._dragged=e,i.dragStartObject=t.from}};var s=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(t,e,n){s.apply(this,arguments),this._last||n||(t=i.checkLanding(t,e,!0))};var o=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(t,e){o.apply(this,arguments),i.lastLanding&&!e&&i.stopDrag(t,!1,!0)};var l=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(t){var e=null;if(t&&(e=l.apply(this,arguments)),!e){for(var n=[],s=(e=i.dragStartObject)._dragged,o=0;o<s.length;o++)n.push(s[o].idd||s[o].id);dhtmlx.DragControl._drag_context.source=n}return e}}},dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(t,e,i,n){var s=this.get(t);{if(s)return i&&(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),s=i.externalData(s)),(i=i||this).add(i.externalData(s,n),e);dhtmlx.log("Warning","Incorrect ID in DataMove::copy")}},move:function(t,e,i,n){if(t instanceof Array)for(var s=0;s<t.length;s++){var o=(i||this).indexById(this.move(t[s],e,i,t[s]));t[s+1]&&(e=o+(this.indexById(t[s+1])<o?0:1))}else if(nid=t,e<0)dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");else{var l=this.get(t);if(l)return i&&i!=this?(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),nid=i.add(i.externalData(l,n),e),this.remove(t)):this.data.move(this.indexById(t),e),nid;dhtmlx.log("Warning","Incorrect ID in DataMove::move")}},moveUp:function(t,e){return this.move(t,this.indexById(t)-(e||1))},moveDown:function(t,e){return this.moveUp(t,-1*(e||1))},moveTop:function(t){return this.move(t,0)},moveBottom:function(t){return this.move(t,this.data.dataCount()-1)},externalData:function(t,e){var i=dhtmlx.extend({},t);return i.id=e||dhtmlx.uid(),i.$selected=i.$template=null,i}},dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(t,e,i){(t=dhtmlx.toNode(t)).dhx_drop=this._getCtrl(e),i&&(t.dhx_master=!0)},_getCtrl:function(t){t=t||dhtmlx.DragControl;var e=this._drag_masters.find(t);return e<0&&(e=this._drag_masters.length,this._drag_masters.push(t)),e},addDrag:function(t,e){(t=dhtmlx.toNode(t)).dhx_drag=this._getCtrl(e),dhtmlx.event(t,"mousedown",this._preStart,t)},_preStart:function(t){return dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.destroyDrag()),dhtmlx.DragControl._active=this,dhtmlx.DragControl._start_pos={x:t.pageX,y:t.pageY},dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse),t.cancelBubble=!0,!1},_preStartFalse:function(t){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(t){var e=t.pageX,i=t.pageY;Math.abs(e-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(i-dhtmlx.DragControl._start_pos.y)<5||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(t)&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(t)))},_stopDrag:function(t){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._last&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,t),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,t)),dhtmlx.DragControl.destroyDrag(),dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(t){var e=dhtmlx.html.pos(t);return dhtmlx.DragControl._html.style.top=e.y+dhtmlx.DragControl.top+"px",dhtmlx.DragControl._html.style.left=e.x+dhtmlx.DragControl.left+"px",dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(t.srcElement||t.target,t),t.cancelBubble=!0,!1},_checkLand:function(t,e){for(;t&&"BODY"!=t.tagName;){if(t.dhx_drop){if(this._last&&(this._last!=t||t.dhx_master)&&this.onDragOut(this._active,this._last,t,e),!this._last||this._last!=t||t.dhx_master)return this._last=null,this._landing=this.onDragIn(dhtmlx.DragControl._active,t,e),void(this._landing&&(this._last=t));return}t=t.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,e))},sendSignal:function(t){dhtmlx.DragControl.active="start"==t},getMaster:function(t){return this._drag_masters[t.dhx_drag||t.dhx_drop]},getContext:function(t){return this._drag_context},createDrag:function(t){var e=dhtmlx.DragControl._active,i=this._drag_masters[e.dhx_drag];if(i.onDragCreate)(s=i.onDragCreate(e,t)).style.position="absolute",s.style.zIndex=dhtmlx.zIndex.drag,s.onmousemove=dhtmlx.DragControl._skip_mark;else{var n=dhtmlx.DragControl.onDrag(e,t);if(!n)return!1;var s;(s=document.createElement("DIV")).innerHTML=n,s.className="dhx_drag_zone",s.onmousemove=dhtmlx.DragControl._skip_mark,document.body.appendChild(s)}return dhtmlx.DragControl._html=s,!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var t=dhtmlx.DragControl._active,e=this._drag_masters[t.dhx_drag];e&&e.onDragDestroy?e.onDragDestroy(t,dhtmlx.DragControl._html):dhtmlx.html.remove(dhtmlx.DragControl._html),dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(t,e,i){var n=this._drag_masters[e.dhx_drop];return n.onDragIn&&n!=this?n.onDragIn(t,e,i):(e.className=e.className+" dhx_drop_zone",e)},onDragOut:function(t,e,i,n){var s=this._drag_masters[e.dhx_drop];return s.onDragOut&&s!=this?s.onDragOut(t,e,i,n):(e.className=e.className.replace("dhx_drop_zone",""),null)},onDrop:function(t,e,i,n){var s=this._drag_masters[e.dhx_drop];if(dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(t),s.onDrop&&s!=this)return s.onDrop(t,e,i,n);e.appendChild(t)},onDrag:function(t,e){var i=this._drag_masters[t.dhx_drag];return i.onDrag&&i!=this?i.onDrag(t,e):(dhtmlx.DragControl._drag_context={source:t,from:t},"<div style='"+t.style.cssText+"'>"+t.innerHTML+"</div>")}},dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface"),dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface"),dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included"),!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(t){return t&&(this._initHandlers(this),delete this.drag_setter),t}),this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(t){dhtmlx.DragControl.addDrop(t._obj,t,!0),dhtmlx.DragControl.addDrag(t._obj,t)},onDragIn:function(t,e,i){var n=this.locate(i)||null,s=dhtmlx.DragControl._drag_context,o=dhtmlx.DragControl.getMaster(t),l=this._locateHTML(n)||this._obj;return l==dhtmlx.DragControl._landing?l:(s.target=n,s.to=o,this.callEvent("onBeforeDragIn",[s,i])?(dhtmlx.html.addCss(l,"dhx_drag_over"),l):(s.id=null,null))},onDragOut:function(t,e,i,n){var s=this.locate(n)||null;i!=this._dataobj&&(s=null);if((this._locateHTML(s)||(i?dhtmlx.DragControl.getMaster(i)._obj:window.undefined))==dhtmlx.DragControl._landing)return null;var o=dhtmlx.DragControl._drag_context;return dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over"),o.target=o.to=null,this.callEvent("onDragOut",[o,n]),null},onDrop:function(t,e,i,n){var s=dhtmlx.DragControl._drag_context;s.to=this,s.index=s.target?this.indexById(s.target):this.dataCount(),s.new_id=dhtmlx.uid(),this.callEvent("onBeforeDrop",[s,n])&&(s.from==s.to?this.move(s.source,s.index):s.from?s.from.move(s.source,s.index,s.to,s.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[s,n]))},onDrag:function(t,e){var i=this.locate(e),n=[i];if(i){if(this.getSelected){var s=this.getSelected();-1!=dhtmlx.PowerArray.find.call(s,i)&&(n=s)}var o=dhtmlx.DragControl._drag_context={source:n,start:i};if(o.from=this,this.callEvent("onBeforeDrag",[o,e]))return o.html||this._toHTML(this.get(i))}return null}},dhtmlx.EditAbility={_init:function(t){this._edit_id=null,this._edit_bind=null,dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore"),dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack"),this.attachEvent("onEditKeyPress",function(t,e,i){13!=t||i?27==t&&this.stopEdit(!0):this.stopEdit()}),this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(t){if(this.stopEdit(!1,t)){if(!this.callEvent("onBeforeEditStart",[t]))return;var e=this.data.get(t);if(e.$template)return;e.$template="edit",this.data.refresh(t),this._edit_id=t,this._save_binding(t),this._edit_bind(!0,e),this.callEvent("onAfterEditStart",[t])}},stopEdit:function(t,e){if(!this._edit_id)return!0;if(this._edit_id==e)return!1;var i={};if(t?i=null:this._edit_bind(!1,i),!this.callEvent("onBeforeEditStop",[this._edit_id,i]))return!1;var n=this.data.get(this._edit_id);n.$template=null,t||this._edit_bind(!1,n);var s=this._edit_id;return this._edit_bind=this._edit_id=null,this.data.refresh(s),this.callEvent("onAfterEditStop",[s,i]),!0},_save_binding:function(t){var e=this._locateHTML(t),i="",n="",s=[];if(e){for(var o=e.getElementsByTagName("*"),l="",r=0;r<o.length;r++)1==o[r].nodeType&&(l=o[r].getAttribute("bind"))&&(i+="els["+s.length+"].value="+l+";",n+=l+"=els["+s.length+"].value;",s.push(o[r]),o[r].className+=" dhx_allow_selection",o[r].onselectstart=this._block_native);o=null}i=Function("obj","els",i),n=Function("obj","els",n),this._edit_bind=function(t,e){t?(i(e,s),s.length&&s[0].select&&s[0].select()):n(e,s)}},_block_native:function(t){return(t||event).cancelBubble=!0,!0}},dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray(),dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore"),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this)),this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this)),this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this)),this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(t,e){for(var i=this._selected.length-1;i>=0;i--)this._selected[i]==t&&(this._selected[i]=e)},_data_filtered:function(){for(var t=this._selected.length-1;t>=0;t--)if(this.data.indexById(this._selected[t])<0){var e=this._selected[t],i=this.item(e);i&&delete i.$selected,this._selected.splice(t,1),this.callEvent("onSelectChange",[e])}},_data_updated:function(t,e,i){"delete"==i?this._selected.remove(t):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(t){t.$selected&&this.select(t.id)},this)},_select_mark:function(t,e,i){return!(!i&&!this.callEvent("onBeforeSelect",[t,e]))&&(this.data.item(t).$selected=e,i?i.push(t):(e?this._selected.push(t):this._selected.remove(t),this._refresh_selection(t)),!0)},select:function(t,e,i){if(!t)return this.selectAll();if(t instanceof Array)for(var n=0;n<t.length;n++)this.select(t[n],e,i);else if(this.data.exists(t)){if(i&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],t);e||1==this._selected.length&&this._selected[0]==t||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),this.isSelected(t)?e&&this.unselect(t):this._select_mark(t,!0)&&this.callEvent("onAfterSelect",[t])}else dhtmlx.error("Incorrect id in select command: "+t)},unselect:function(t){if(!t)return this.unselectAll();this.isSelected(t)&&this._select_mark(t,!1)},selectAll:function(t,e){var i=[];(t||e?this.data.getRange(t||null,e||null):this.data.getRange()).each(function(t){return this.data.item(t.id).$selected||(this._selected.push(t.id),this._select_mark(t.id,!0,i)),t.id},this),this._refresh_selection(i)},unselectAll:function(){var t=[];this._selected.each(function(e){this._select_mark(e,!1,t)},this),this._selected=dhtmlx.toArray(),this._refresh_selection(t)},isSelected:function(t){return-1!=this._selected.find(t)},getSelected:function(t){switch(this._selected.length){case 0:return t?[]:"";case 1:return t?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(t){return t.length>100||t.length>this.data.dataCount/2},_refresh_selection:function(t){if("object"!=typeof t&&(t=[t]),t.length){if(this._is_mass_selection(t))this.data.refresh();else for(var e=0;e<t.length;e++)this.render(t[e],this.data.item(t[e]),"update");this._silent_selection||this.callEvent("onSelectChange",[t])}}},dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore"),dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible"),this._html=document.createElement("DIV")},_toHTML:function(t){return dhtmlx.assert(!t.$template||this.type["template_"+t.$template],"RenderStack :: Unknown template: "+t.$template),this.callEvent("onItemRender",[t]),this.type._item_start(t,this.type)+(t.$template?this.type["template_"+t.$template]:this.type.template)(t,this.type)+this.type._item_end},_toHTMLObject:function(t){return this._html.innerHTML=this._toHTML(t),this._html.firstChild},_locateHTML:function(t){if(this._htmlmap)return this._htmlmap[t];this._htmlmap={};for(var e=this._dataobj.childNodes,i=0;i<e.length;i++){var n=e[i].getAttribute(this._id);n&&(this._htmlmap[n]=e[i])}return this._locateHTML(t)},locate:function(t){return dhtmlx.html.locate(t,this._id)},show:function(t){var e=this._locateHTML(t);e&&(this._dataobj.scrollTop=e.offsetTop-this._dataobj.offsetTop)},render:function(t,e,i,n){if(t){var s=this._locateHTML(t);switch(i){case"update":if(!s)return;var o=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(o,s),dhtmlx.html.remove(s);break;case"delete":if(!s)return;dhtmlx.html.remove(s),delete this._htmlmap[t];break;case"add":o=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(o,this._locateHTML(this.data.next(t)),this._dataobj);break;case"move":this.render(t,e,"delete"),this.render(t,e,"add");break;default:dhtmlx.error("Unknown render command: "+i)}}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(t){this.attachEvent("onBeforeRender",function(){var t=this._settings.pager._settings;return-1!=t.page&&(this.data.min=t.page*t.size,this.data.max=(t.page+1)*t.size-1,!0)});var e=new dhtmlx.ui.pager(t),i=dhtmlx.bind(function(){this.data.refresh()},this);return e.attachEvent("onRefresh",i),this.data.attachEvent("onStoreUpdated",function(t){var i=this.dataCount();i!=e._settings.count&&(e._settings.count=i,-1==e._settings.page&&(e._settings.page=0),e.refresh())}),e},height_setter:function(t){return"auto"==t&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))),t},_correct_height:function(){this._dataobj.style.overflow="hidden",this._dataobj.style.height="1px";var t=this._dataobj.scrollHeight;if(this._dataobj.style.height=t+"px",dhtmlx._isFF){var e=this._dataobj.scrollHeight;e!=t&&(this._dataobj.style.height=e+"px")}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var t=this.type,e=(t.border||0)+2*(t.padding||0)+2*(t.margin||0);return{x:t.width+e,y:t.height+e}},x_count_setter:function(t){var e=this._getDimension(),i=dhtmlx.$customScroll?0:18;return this._dataobj.style.width=e.x*t+("auto"!=this._settings.height?i:0)+"px",t},y_count_setter:function(t){var e=this._getDimension();return this._dataobj.style.height=e.y*t+"px",t}},dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first"),this._htmlmap={},this._dataobj.style.overflowY="scroll",dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this)),dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this)),this.data._unrendered_area=[],this.data.getIndexRange=this._getIndexRange},_locateHTML:function(t){return this._htmlmap[t]},show:function(t){range=this._getVisibleRange();var e=this.data.indexById(t),i=Math.floor(e/range._dx)*range._y;this._dataobj.scrollTop=i},_getIndexRange:function(t,e){0!==e&&(e=Math.min(e||1/0,this.dataCount()-1));for(var i=dhtmlx.toArray(),n=t||0;n<=e;n++){var s=this.item(this.order[n]);this.order.length>n&&(s?"loading"==s.$template&&this._unrendered_area.push(this.order[n]):(this.order[n]=dhtmlx.uid(),s={id:this.order[n],$template:"loading"},this._unrendered_area.push(this.order[n])),i.push(s))}return i},render:function(t,e,i,n){if(t){var s=this._locateHTML(t);switch(i){case"update":if(!s)return;var o=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(o,s),dhtmlx.html.remove(s);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(t){var e=document.createElement("DIV");return e.className="dhxdataview_placeholder",e.style.cssText="height:"+t+"px; width:100%; overflow:hidden;",e},_render_visible_rows:function(t,e){this.data._unrendered_area=[];var i=this._getVisibleRange();this._dataobj.firstChild&&!e||(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(i._max)),this._htmlrows=[this._dataobj.firstChild]);for(var n=Math.max(i._from,0),s=this.data.max||0===this.data.max?this.data.max:1/0;n<=i._height;){for(;this._htmlrows[n]&&this._htmlrows[n]._filled&&n<=i._height;)n++;if(n>i._height)break;for(var o=n;!this._htmlrows[o];)o--;var l=this._htmlrows[o],r=n*i._dx+(this.data.min||0);if(r>s)break;var a=Math.min(r+i._dx-1,s),h=this._create_placeholder(i._y),d=this.data.getIndexRange(r,a);if(!d.length)break;h.innerHTML=d.map(this._toHTML,this).join("");for(var c=0;c<d.length;c++)this._htmlmap[this.data.idByIndex(r+c)]=h.childNodes[c];var u=parseInt(l.style.height,10),f=(n-o)*i._y,p=u-f-i._y;if(dhtmlx.html.insertBefore(h,f?l.nextSibling:l,this._dataobj),this._htmlrows[n]=h,h._filled=!0,f<=0&&p>0)l.style.height=p+"px",this._htmlrows[n+1]=l;else if(f<0?dhtmlx.html.remove(l):l.style.height=f+"px",p>0){var _=this._htmlrows[n+1]=this._create_placeholder(p);dhtmlx.html.insertBefore(_,h.nextSibling,this._dataobj)}n++}if(this.data._unrendered_area.length){var m=this.indexById(this.data._unrendered_area[0]),g=this.indexById(this.data._unrendered_area.pop())+1;if(g>m){if(!this.callEvent("onDataRequest",[m,g-m]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed"),this.data.feed.call(this,m,g-m)}}if(dhtmlx._isIE){this._getVisibleRange()._from!=i._from&&this._render_visible_rows()}},_getVisibleRange:function(){dhtmlx.$customScroll;var t=this._dataobj.scrollTop,e=this._dataobj.scrollWidth,i=this._dataobj.offsetHeight,n=(this.type,this._getDimension()),s=Math.floor(e/n.x)||1,o=Math.floor(t/n.y),l=Math.ceil((i+t)/n.y)-1,r=this.data.max?this.data.max-this.data.min:this.data.dataCount();return{_from:o,_height:l,_top:t,_max:Math.ceil(r/s)*n.y,_y:n.y,_dx:s}}},dhtmlXDataView=function(t){this.name="DataView",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_dataview"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(t,{drag:!1,edit:!1,select:"multiselect",type:"default"}),"auto"==this._settings.height||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack),this.data.provideApi(this,!0),this.config.autowidth&&(this.attachEvent("onBeforeRender",function(){this.type.width=Math.floor(this._dataobj.scrollWidth/(1*this.config.autowidth||1))-2*this.type.padding-2*this.type.margin-2*this.type.border,this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type)}),dhtmlx.event(window,"resize",function(){this.refresh()},this)),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXDataView.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(t,e){var i=this._locateHTML(t.target);if(this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),i&&(i.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",i.style.backgroundRepeat="no-repeat",this._drag_marker=i)),i&&this._settings.auto_scroll){var n=i.offsetTop,s=i.offsetHeight,o=this._obj.scrollTop,l=this._obj.offsetHeight;n-s>=0&&n-.75*s<o?o=Math.max(n-s,0):n+s/.75>o+l&&(o+=s),this._obj.scrollTop=o}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(t,e){this.stopEdit(!1,e)&&this._settings.select&&("multiselect"==this._settings.select?this.select(e,t.ctrlKey,t.shiftKey):this.select(e))}},on_dblclick:{dhx_dataview_item:function(t,e){this._settings.edit&&this.edit(e)}},on_mouse_move:{},types:{default:{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachDataView=function(t){this.callEvent("_onBeforeContentAttach",["dataview"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),void 0===t&&(t={}),e.id="DataViewObject_"+(new Date).getTime(),t.container=e.id,t.skin=this.conf.skin,this.dataType="dataview",this.dataObj=new dhtmlXDataView(t),this.dataObj.setSizes=function(){this.render()},e=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXList=function(t){this.name="List",dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_list"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this._getDimension=function(){var t=this.type,e=2*(t.margin||0);return{x:t.width+e,y:t.height+e}},this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(t,{drag:!1,edit:!1,select:"multiselect",type:"default"}),this.data.provideApi(this,!0),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXList.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(t,e){var i=this._locateHTML(t.target);if(i&&this._settings.auto_scroll){var n=i.offsetTop,s=i.offsetHeight,o=this._obj.scrollTop,l=this._obj.offsetHeight;n-s>=0&&n-.75*s<o?o=Math.max(n-s,0):n+s/.75>o+l&&(o+=s),this._obj.scrollTop=o}return!0},_id:"dhx_f_id",on_click:{dhx_list_item:function(t,e){this.stopEdit(!1,e)&&this._settings.select&&("multiselect"==this._settings.select?this.select(e,t.ctrlKey,t.shiftKey):this.select(e))}},on_dblclick:{dhx_list_item:function(t,e){this._settings.edit&&this.edit(e)}},on_mouse_move:{},types:{default:{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),height:50,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_list_item dhx_list_{obj.css}_item{-obj.$selected?_selected:}' style='width:100%; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachList=function(t){this.callEvent("_onBeforeContentAttach",["list"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflowX="hidden",this._attachObject(e),void 0===t&&(t={}),e.id="ListObject_"+(new Date).getTime(),t.container=e.id,t.skin=this.conf.skin,this.dataType="list",this.dataObj=new dhtmlXList(t),this.dataObj.setSizes=function(){this.render()},e=null,this.callEvent("_onContentAttach",[]),this.dataObj}),xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;return(new XMLSerializer).serializeToString(this.d)},get:function(t){return this.d.getAttribute(t)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(t,e,i,n){var s=this.d.childNodes,o=new xmlPointer;if(s.length)for(n=n||0;n<s.length;n++)if(s[n].tagName==t&&(o.d=s[n],-1==e.apply(i,[o,n])))return},get_all:function(){for(var t={},e=this.d.attributes,i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},sub:function(t){var e=this.d.childNodes,i=new xmlPointer;if(e.length)for(var n=0;n<e.length;n++)if(e[n].tagName==t)return i.d=e[n],i},up:function(t){return new xmlPointer(this.d.parentNode)},set:function(t,e){this.d.setAttribute(t,e)},clone:function(t){return new xmlPointer(this.d)},sub_exists:function(t){var e=this.d.childNodes;if(e.length)for(var i=0;i<e.length;i++)if(e[i].tagName==t)return!0;return!1},through:function(t,e,i,n,s){var o=this.d.childNodes;if(o.length)for(var l=0;l<o.length;l++){if(o[l].tagName==t&&null!=o[l].getAttribute(e)&&""!=o[l].getAttribute(e)&&(!i||o[l].getAttribute(e)==i)){var r=new xmlPointer(o[l]);n.apply(s,[r,l])}var a=this.d;this.d=o[l],this.through(t,e,i,n,s),this.d=a}}},dhtmlXTreeObject.prototype.setDataMode=function(t){this._datamode=t},dhtmlXTreeObject.prototype._doContClick=function(t,e){if(!e&&2!=t.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var i=_isIE?t.srcElement:t.target;i&&"BODY"!=i.tagName&&!i.parentObject;)i=i.parentNode;if(!i||!i.parentObject)return!0;var n=i.parentObject;if(this.callEvent("onRightClick",[n.id,t])||((t.srcElement||t.target).oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1}),this._acMenu=n.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[n.id]))return!0;if(_isMacOS||((t.srcElement||t.target).oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1}),this._acMenu.showContextMenu){var s=window.document.documentElement,o=window.document.body,l=new Array(s.scrollLeft||o.scrollLeft,s.scrollTop||o.scrollTop);if(_isIE)var r=t.clientX+l[0],a=t.clientY+l[1];else r=t.pageX,a=t.pageY;this._acMenu.showContextMenu(r-1,a-1),this.contextID=n.id,t.cancelBubble=!0,this._acMenu._skip_hide=!0}else i.contextMenuId=n.id,i.contextMenu=this._acMenu,i.a=this._acMenu._contextStart,i.a(i,t),i.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(t){t?(this._getImg=function(){var t=document.createElement("DIV");return t.innerHTML="&nbsp;",t.className="dhx_bg_img_fix",t},this._setSrc=function(t,e){t.style.backgroundImage="url("+e+")"},this._getSrc=function(t){var e=t.style.backgroundImage;return e.substr(4,e.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(t){return document.createElement(t==this.rootId?"div":"img")},this._setSrc=function(t,e){t.src=e},this._getSrc=function(t){return t.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var t in this._idpull){var e=this._idpull[t];e&&(e.parentObject=null,e.treeNod=null,e.childNodes=null,e.span=null,e.tr.nodem=null,e.tr=null,e.htmlNode.objBelong=null,e.htmlNode=null,this._idpull[t]=null)}this.parentObject.innerHTML="",this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null;for(var t in this)this[t]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function t(){}return t.prototype=this,new t},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(t,e){return this._globalIdStorageFind(t,1,1)?(t=t+"_"+(new Date).valueOf(),this._globalIdStorageAdd(t,e)):(this._idpull[t]=e,this._pullSize++,t)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(t){this._idpull[t]&&(this._unselectItem(this._idpull[t]),this._idpull[t]=null,this._pullSize--),this._locker&&this._locker[t]&&(this._locker[t]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(t,e,i,n){var s=this._idpull[t];if(s){if(s.unParsed&&!i&&this.reParse(s,0),this._srnd&&!s.htmlNode&&this._buildSRND(s,i),n&&this._edsbpsA)for(var o=0;o<this._edsbpsA.length;o++)if(this._edsbpsA[o][2]==t)return dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",t]),null;return s}return this.slowParse&&0!=t&&!e?this.preParse(t):null},dhtmlXTreeObject.prototype._getSubItemsXML=function(t){var e=[];return t.each("item",function(t){e.push(t.get("id"))},this),e.join(this.dlmtr)},dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(t){this.slowParse=dhx4.s2b(t)},dhtmlXTreeObject.prototype.findXML=function(t,e,i){},dhtmlXTreeObject.prototype._getAllCheckedXML=function(t,e,i){var n=[];return 2==i&&t.through("item","checked",-1,function(t){n.push(t.get("id"))},this),1==i&&t.through("item","id",null,function(t){t.get("checked")&&-1!=t.get("checked")&&n.push(t.get("id"))},this),0==i&&t.through("item","id",null,function(t){t.get("checked")&&0!=t.get("checked")||n.push(t.get("id"))},this),n.length?e+(e?this.dlmtr:"")+n.join(this.dlmtr):e||""},dhtmlXTreeObject.prototype._setSubCheckedXML=function(t,e){var i=t?"1":"";e.through("item","id",null,function(t){t.get("disabled")&&0!=t.get("disabled")||t.set("checked",i)},this)},dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(t,e){var i=[],n=function(t){t.sub_exists("item")?t.each("item",n,this):i.push(t.get("id"))};return n(t),i.join(",")},dhtmlXTreeObject.prototype._getAllFatItemsXML=function(t,e){var i=[],n=function(t){t.sub_exists("item")&&(i.push(t.get("id")),t.each("item",n,this))};return n(t),i.join(",")},dhtmlXTreeObject.prototype._getAllSubItemsXML=function(t,e,i){e=[];return i.through("item","id",null,function(t){e.push(t.get("id"))},this),e.join(",")},dhtmlXTreeObject.prototype.reParse=function(t){this.parsCount||this.callEvent("onXLS",[this,t.id]),this.xmlstate=1;var e=t.unParsed;t.unParsed=0,this.XMLloadingWarning=1;var i=this.parsingOn,n=this.waitUpdateXML,s=this.parsedArray;this.parsedArray=new Array,this.waitUpdateXML=!1,this.parsingOn=t.id,this.parsedArray=new Array,this.setCheckList="",this._parse(e,t.id,2);for(var o=this.setCheckList.split(this.dlmtr),l=0;l<this.parsedArray.length;l++)t.htmlNode.childNodes[0].appendChild(this.parsedArray[l]);e.get("order")&&"none"!=e.get("order")&&this._reorderBranch(t,e.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1;for(var r=0;r<o.length;r++)o[r]&&this.setCheck(o[r],1);return this.smcheck=this.oldsmcheck,this.parsingOn=i,this.waitUpdateXML=n,this.parsedArray=s,this.XMLloadingWarning=0,this._redrawFrom(this,t),this._srnd&&!t._sready&&this.prepareSR(t.id),this.xmlstate=0,!0},dhtmlXTreeObject.prototype.preParse=function(t){if(!t||!this._p)return null;var e=!1;if(this._p.clone().through("item","id",t,function(t){return this._globalIdStorageFind(t.up().get("id")),e=!0},this),e){var i=this._globalIdStorageFind(t,!0,!1);i||dhx4.callEvent("ongetItemError",["The item "+t+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",t])}return i},dhtmlXTreeObject.prototype._escape=function(t){switch(this.utfesc){case"none":return t;case"utf8":return encodeURIComponent(t);default:return escape(t)}},dhtmlXTreeObject.prototype._drawNewTr=function(t,e){var i=document.createElement("tr"),n=document.createElement("td"),s=document.createElement("td");return n.appendChild(document.createTextNode(" ")),s.colSpan=3,s.appendChild(t),i.appendChild(n),i.appendChild(s),i},dhtmlXTreeObject.prototype.parse=function(t,e,i){if("string"==typeof e&&(i=e,e=null),"json"===i)return this._loadJSONObject(t,e);if("csv"===i)return this._loadCSVString(t,e);if("jsarray"===i)return this._loadJSArray(t,e);this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1,this.XMLLoader({responseXML:dhx4.ajax.parse(t)},e)},dhtmlXTreeObject.prototype.loadXMLString=function(){return window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse.apply(this,arguments)},dhtmlXTreeObject.prototype.load=function(t,e,i){if("string"==typeof e&&(i=e,e=null),"json"===(i=i||this._datamode))return this._loadJSON(t,e);if("csv"===i)return this._loadCSV(t,e);if("jsarray"===i)return this._loadJSArrayFile(xmlString,e);this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=this._parseXMLTree;var n=this;dhx4.ajax.get(t,function(t){n.XMLLoader(t.xmlDoc,e),n=null})},dhtmlXTreeObject.prototype.loadXML=function(){return window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load.apply(this,arguments)},dhtmlXTreeObject.prototype._attachChildNode=function(t,e,i,n,s,o,l,r,a,h,d){h&&h.parentObject&&(t=h.parentObject),0==t.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(t.XMLload=1,this._loadDynXML(t.id));var c=t.childsCount,u=t.childNodes;if(d&&d.tr.previousSibling&&(d.tr.previousSibling.previousSibling?h=d.tr.previousSibling.nodem:r=r.replace("TOP","")+",TOP"),h){var f,p;for(f=0;f<c;f++)if(u[f]==h){for(p=c;p!=f;p--)u[1+p]=u[p];break}c=++f}if(r)for(var _=r.split(","),m=0;m<_.length;m++)switch(_[m]){case"TOP":for(t.childsCount>0&&((h=new Object).tr=t.childNodes[0].tr.previousSibling),t._has_top=!0,f=c;f>0;f--)u[f]=u[f-1];c=0}var g;(g=this._idpull[e])&&-1==g.span||(g=u[c]=new dhtmlXTreeItemObject(e,i,t,this,n,1),e=u[c].id,t.childsCount++),g.htmlNode||(g.label=i,g.htmlNode=this._createItem(this.checkBoxOff?1:0,g),g.htmlNode.objBelong=g),s&&(g.images[0]=s),o&&(g.images[1]=o),l&&(g.images[2]=l);var v=this._drawNewTr(g.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(g.htmlNode.parentNode.parentNode.style.display="none"),h&&h.tr&&h.tr.nextSibling?t.htmlNode.childNodes[0].insertBefore(v,h.tr.nextSibling):this.parsingOn==t.id?this.parsedArray[this.parsedArray.length]=v:t.htmlNode.childNodes[0].appendChild(v),h&&!h.span&&(h=null),this.XMLsource&&(g.XMLload=a&&0!=a?0:1),g.tr=v,v.nodem=g,0==t.itemId&&(v.childNodes[0].className="hiddenRow"),(t._r_logic||this._frbtr)&&this._setSrc(g.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),r)for(_=r.split(","),m=0;m<_.length;m++)switch(_[m]){case"SELECT":this.selectItem(e,!1);break;case"CALL":this.selectItem(e,!0);break;case"CHILD":g.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+e:this.setCheck(e,1);break;case"HCHECKED":this._setCheck(g,"unsure");break;case"OPEN":g.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(t)<0&&!this._hAdI&&this.openItem(t.id),h&&(this._correctPlus(h),this._correctLine(h)),this._correctPlus(t),this._correctLine(t),this._correctPlus(g),t.childsCount>=2&&(this._correctPlus(u[t.childsCount-2]),this._correctLine(u[t.childsCount-2])),2!=t.childsCount&&this._correctPlus(u[0]),this.tscheck&&this._correctCheckStates(t),this._onradh))if(1==this.xmlstate){var b=this.onXLE;this.onXLE=function(t){this._onradh(e),b&&b(t)}}else this._onradh(e);return g},dhtmlXTreeObject.prototype.enableContextMenu=function(t){t&&(this.cMenu=t)},dhtmlXTreeObject.prototype.setItemContextMenu=function(t,e){for(var i=t.toString().split(this.dlmtr),n=0;n<i.length;n++){var s=this._globalIdStorageFind(i[n]);s&&(s.cMenu=e)}},dhtmlXTreeObject.prototype.insertNewItem=function(t,e,i,n,s,o,l,r,a){var h=this._globalIdStorageFind(t);if(!h)return-1;var d=this._attachChildNode(h,e,i,n,s,o,l,r,a);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h),d},dhtmlXTreeObject.prototype.insertNewChild=function(t,e,i,n,s,o,l,r,a){return this.insertNewItem(t,e,i,n,s,o,l,r,a)},dhtmlXTreeObject.prototype._parseXMLTree=function(t,e){var i=new xmlPointer(dhx4.ajax.xmltop("tree",t));this._parse(i),this._p=i,e&&e.call(this,t)},dhtmlXTreeObject.prototype._parseItem=function(t,e,i,n){var s;if(!this._srnd||this._idpull[s=t.get("id")]&&this._idpull[s].span){var o=t.get_all();if("object"!=typeof this.waitUpdateXML||this.waitUpdateXML[o.id]){null!==o.text&&void 0!==o.text||(o.text=t.sub("itemtext"),o.text&&(o.text=o.text.content()));var l=[];if(o.select&&l.push("SELECT"),o.top&&l.push("TOP"),o.call&&(this.nodeAskingCall=o.id),-1==o.checked?l.push("HCHECKED"):o.checked&&l.push("CHECKED"),o.open&&l.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(o.id))var r=this.updateItem(o.id,o.text,o.im0,o.im1,o.im2,o.checked,o.child);else{0==this.npl?l.push("TOP"):i=e.childNodes[this.npl];r=this._attachChildNode(e,o.id,o.text,0,o.im0,o.im1,o.im2,l.join(","),o.child,0,i);o.id=r.id,i=null}else r=this._attachChildNode(e,o.id,o.text,0,o.im0,o.im1,o.im2,l.join(","),o.child,n||0,i);if(o.tooltip&&(r.span.parentNode.parentNode.title=o.tooltip),o.style&&(r.span.style.cssText?r.span.style.cssText+=";"+o.style:r.span.setAttribute("style",r.span.getAttribute("style")+"; "+o.style)),o.radio&&(r._r_logic=!0),o.nocheckbox){r.span.parentNode.previousSibling.previousSibling.style.display="none",r.nocheckbox=!0}o.disabled&&(null!=o.checked&&this._setCheck(r,o.checked),this.disableCheckbox(r,1)),r._acc=o.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,t,o,e?e.id:0),this.setItemColor(r,o.aCol,o.sCol),"1"==o.locked&&this.lockItem(r.id,!0,!0),(o.imwidth||o.imheight)&&this.setIconSize(o.imwidth,o.imheight,r),"0"!=o.closeable&&"1"!=o.closeable||this.setItemCloseable(r,o.closeable);var a="";o.topoffset&&this.setItemTopOffset(r,o.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML?(!r.childsCount&&t.sub_exists("item")&&(r.unParsed=t.clone()),t.each("userdata",function(t){this.setUserData(o.id,t.get("name"),t.content())},this)):t.sub_exists("item")&&(a=this._parse(t,o.id,1)),""!=a&&(this.nodeAskingCall=a),t.each("userdata",function(e){this.setUserData(t.get("id"),e.get("name"),e.content())},this)}else this._parse(t,o.id,1)}else this._addItemSRND(e.id,s,t)},dhtmlXTreeObject.prototype._parse=function(t,e,i,n){if(this._srnd&&!this.parentObject.offsetHeight){var s=this;return window.setTimeout(function(){s._parse(t,e,i,n)},100)}if(t.exists()){if(this.skipLock=!0,!e){e=t.get("id"),this._dynDeleteBranches[e]&&(this.deleteChildItems(e),this._dynDeleteBranches[e]--,this._dynDeleteBranches[e]||delete this._dynDeleteBranches[e]);var o=t.get("dhx_security");o&&(dhtmlx.security_key=o),t.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=e,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var l=this._globalIdStorageFind(e);if(!l)return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"]);if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!l.childsCount||n||this._edsbps||l._has_top)r=0;else var r=0;if(this.npl=0,t.each("item",function(n,s){if(l.XMLload=1,this._parseItem(n,l,0,r),this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(t,s+1,e,i,l.childsCount),-1;this.npl++},this,n),!i){if(t.each("userdata",function(e){this.setUserData(t.get("id"),e.get("name"),e.content())},this),l.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var a=l.childsCount-1;a>=0;a--)l.childNodes[a]._dmark&&this.deleteItem(l.childNodes[a].id)}for(this._globalIdStorageFind(this.parsingOn),a=0;a<this.parsedArray.length;a++)l.htmlNode.childNodes[0].appendChild(this.parsedArray[a]);this.parsedArray=[],this.lastLoadedXMLId=e,this.XMLloadingWarning=0;for(var h=this.setCheckList.split(this.dlmtr),d=0;d<h.length;d++)h[d]&&this.setCheck(h[d],1);this.XMLsource&&this.tscheck&&this.smcheck&&l.id!=this.rootId&&(0===l.checkstate?this._setSubChecked(0,l):1===l.checkstate&&this._setSubChecked(1,l)),this._redrawFrom(this,null,n),t.get("order")&&"none"!=t.get("order")&&this._reorderBranch(l,t.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(t)}if(1==this.parsCount){if(this.parsingOn=null,this._srnd&&l.id!=this.rootId&&(this.prepareSR(l.id),this.XMLsource&&this.openItem(l.id)),t.through("item","open",null,function(t){this.openItem(t.get("id"))},this),!this._edsbps||!this._edsbpsA.length){var c=this;window.setTimeout(function(){c.callEvent("onXLE",[c,e])},1),this.xmlstate=0}this.skipLock=!1}this.parsCount--;c=this;return this._edsbps&&window.setTimeout(function(){c._distributedStep(e)},this._edsbpsD),!i&&this.onXLE&&this.onXLE(this,e),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(t){t.each("item",function(t){var e=t.get("id");this._idpull[e]&&!this._idpull[e].XMLload||(this._branchUpdate++,this.smartRefreshItem(t.get("id"),t))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(t,e){if(1==t.nodeType&&"userdata"==t.tagName){var i=t.getAttribute("name");i&&t.childNodes[0]&&this.setUserData(e,i,t.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(t,e,i,n){if(e)s=e;else{var s=t._globalIdStorageFind(t.lastLoadedXMLId);if(t.lastLoadedXMLId=-1,!s)return 0}for(var o=0,l=i?i-1:0;l<s.childsCount;l++)if(this._branchUpdate&&1!=this._getOpenState(s)||e&&1!=n||(s.childNodes[l].htmlNode.parentNode.parentNode.style.display=""),1==s.childNodes[l].openMe&&(this._openItem(s.childNodes[l]),s.childNodes[l].openMe=0),t._redrawFrom(t,s.childNodes[l]),null!=this.childCalc){if((s.childNodes[l].unParsed||!s.childNodes[l].XMLload&&this.XMLsource)&&(s.childNodes[l]._acc?s.childNodes[l].span.innerHTML=s.childNodes[l].label+this.htmlcA+s.childNodes[l]._acc+this.htmlcB:s.childNodes[l].span.innerHTML=s.childNodes[l].label),s.childNodes[l].childNodes.length&&this.childCalc){if(1==this.childCalc&&(s.childNodes[l].span.innerHTML=s.childNodes[l].label+this.htmlcA+s.childNodes[l].childsCount+this.htmlcB),2==this.childCalc){(r=s.childNodes[l].childsCount-(s.childNodes[l].pureChilds||0))&&(s.childNodes[l].span.innerHTML=s.childNodes[l].label+this.htmlcA+r+this.htmlcB),s.pureChilds?s.pureChilds++:s.pureChilds=1}if(3==this.childCalc&&(s.childNodes[l].span.innerHTML=s.childNodes[l].label+this.htmlcA+s.childNodes[l]._acc+this.htmlcB),4==this.childCalc){var r;(r=s.childNodes[l]._acc)&&(s.childNodes[l].span.innerHTML=s.childNodes[l].label+this.htmlcA+r+this.htmlcB)}}else 4==this.childCalc&&o++;o+=s.childNodes[l]._acc,3==this.childCalc&&o++}s.unParsed||!s.XMLload&&this.XMLsource||(s._acc=o),t._correctLine(s),t._correctPlus(s),this.childCalc&&!e&&t._fixChildCountLabel(s)},dhtmlXTreeObject.prototype._createSelf=function(){var t=document.createElement("div");return t.className="containerTableStyle",t.style.width=this.width,t.style.height=this.height,this.parentObject.appendChild(t),t},dhtmlXTreeObject.prototype._xcloseAll=function(t){if(!t.unParsed){if(this.rootId!=t.id){if(!t.htmlNode)return;for(var e=t.htmlNode.childNodes[0].childNodes,i=e.length,n=1;n<i;n++)e[n].style.display="none";this._correctPlus(t)}for(n=0;n<t.childsCount;n++)t.childNodes[n].childsCount&&this._xcloseAll(t.childNodes[n])}},dhtmlXTreeObject.prototype._xopenAll=function(t){this._HideShow(t,2);for(var e=0;e<t.childsCount;e++)this._xopenAll(t.childNodes[e])},dhtmlXTreeObject.prototype._correctPlus=function(t){if(t.htmlNode){var e=t.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,i=t.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],n=this.lineArray;if(this.XMLsource&&!t.XMLload){n=this.plusArray;if(this._setSrc(i,this.iconURL+t.images[2]),this._txtimg)return e.innerHTML="[+]"}else if(t.childsCount||t.unParsed)if(t.htmlNode.childNodes[0].childNodes[1]&&"none"!=t.htmlNode.childNodes[0].childNodes[1].style.display){if(!t.wsign)n=this.minusArray;if(this._setSrc(i,this.iconURL+t.images[1]),this._txtimg)return e.innerHTML="[-]"}else{if(!t.wsign)n=this.plusArray;if(this._setSrc(i,this.iconURL+t.images[2]),this._txtimg)return e.innerHTML="[+]"}else this._setSrc(i,this.iconURL+t.images[0]);var s=2;t.treeNod.treeLinesOn?(t.parentObject&&(s=this._getCountStatus(t.id,t.parentObject)),this._setSrc(e,this.imPath+n[s])):this._setSrc(e,this.imPath+n[3])}},dhtmlXTreeObject.prototype._correctLine=function(t){if(t.htmlNode){var e=t.parentObject;if(e)if(0!=this._getLineStatus(t.id,e)&&this.treeLinesOn)for(i=1;i<=t.childsCount&&t.htmlNode.childNodes[0].childNodes[i];i++)t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat="repeat-y";else for(var i=1;i<=t.childsCount&&t.htmlNode.childNodes[0].childNodes[i];i++)t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="",t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(t,e){return e.childsCount<=1?e.id==this.rootId?4:0:e.childNodes[0].id==t?e.id==this.rootId?2:1:e.childNodes[e.childsCount-1].id==t?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(t,e){return e.childNodes[e.childsCount-1].id==t?0:1},dhtmlXTreeObject.prototype._HideShow=function(t,e){if(!this._locker||this.skipLock||!this._locker[t.id]){if(this.XMLsource&&!t.XMLload){if(1==e)return;return t.XMLload=1,void this._loadDynXML(t.id)}t.unParsed&&this.reParse(t);var i=t.htmlNode.childNodes[0].childNodes,n=i.length;if(n>1){"none"==i[1].style.display&&1!=e||2==e?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var s=1;s<n;s++)i[s].style.display=nodestyle}this._correctPlus(t)}},dhtmlXTreeObject.prototype._getOpenState=function(t){if(!t.htmlNode)return 0;var e=t.htmlNode.childNodes[0].childNodes;return e.length<=1?0:"none"!=e[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var t=this.parentObject.treeNod;return!!t.callEvent("onDblClick",[this.parentObject.id,t])&&(this.parentObject.closeble&&"0"!=this.parentObject.closeble?t._HideShow(this.parentObject):t._HideShow(this.parentObject,2),t.checkEvent("onOpenEnd")&&(t.xmlstate?(t._oie_onXLE.push(t.onXLE),t.onXLE=t._epnFHe):t.callEvent("onOpenEnd",[this.parentObject.id,t._getOpenState(this.parentObject)])),!1)},dhtmlXTreeObject.prototype.onRowClick=function(){var t=this.parentObject.treeNod;if(!t.callEvent("onOpenStart",[this.parentObject.id,t._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&"0"!=this.parentObject.closeble?t._HideShow(this.parentObject):t._HideShow(this.parentObject,2),t.checkEvent("onOpenEnd")&&(t.xmlstate?(t._oie_onXLE.push(t.onXLE),t.onXLE=t._epnFHe):t.callEvent("onOpenEnd",[this.parentObject.id,t._getOpenState(this.parentObject)]))},dhtmlXTreeObject.prototype._epnFHe=function(t,e,i){e!=this.rootId&&this.callEvent("onOpenEnd",[e,t.getOpenState(e)]),t.onXLE=t._oie_onXLE.pop(),i||t._oie_onXLE.length||t.onXLE&&t.onXLE(t,e)},dhtmlXTreeObject.prototype.onRowClickDown=function(t){t=t||window.event;this.parentObject.treeNod._selectItem(this.parentObject,t)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var t=new Array,e=0;e<this._selected.length;e++)t[e]=this._selected[e].id;return t.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(t,e){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&e&&(e.ctrlKey||e.metaKey||e.shiftKey)||this._unselectItems(),t.i_sel&&this._amsel&&e&&(e.ctrlKey||e.metaKey))this._unselectItem(t);else if(!(t.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=t.parentObject))if(this._amsel&&e&&e.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==t.parentObject){var i=this._getIndex(this._selected[this._selected.length-1]),n=this._getIndex(t);if(n<i){var s=i;i=n,n=s}for(var o=i;o<=n;o++)t.parentObject.childNodes[o].i_sel||this._markItem(t.parentObject.childNodes[o])}else this._markItem(t);if(this.checkEvent("onSelect")){var l=this.getSelectedItemId();l!=this._onSSCFold&&this.callEvent("onSelect",[l])}},dhtmlXTreeObject.prototype._markItem=function(t){t.scolor&&(t.span.style.color=t.scolor),t.span.className="selectedTreeRow",t.span.parentNode.parentNode.className="selectedTreeRowFull",t.i_sel=!0,this._selected[this._selected.length]=t},dhtmlXTreeObject.prototype.getIndexById=function(t){var e=this._globalIdStorageFind(t);return e?this._getIndex(e):null},dhtmlXTreeObject.prototype._getIndex=function(t){for(var e=t.parentObject,i=0;i<e.childsCount;i++)if(e.childNodes[i]==t)return i},dhtmlXTreeObject.prototype._unselectItem=function(t){if(t&&t.i_sel){t.span.className="standartTreeRow",t.span.parentNode.parentNode.className="",t.acolor&&(t.span.style.color=t.acolor),t.i_sel=!1;for(var e=0;e<this._selected.length;e++)if(!this._selected[e].i_sel){this._selected.splice(e,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var t=0;t<this._selected.length;t++){var e=this._selected[t];e.span.className="standartTreeRow",e.span.parentNode.parentNode.className="",e.acolor&&(e.span.style.color=e.acolor),e.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(t,e,i){t=t||window.event;var n=this.parentObject;e&&(n=e.parentObject);var s=n.treeNod,o=s.getSelectedItemId();t&&t.skipUnSel||s._selectItem(n,t),i||(n.actionHandler?n.actionHandler(n.id,o):s.callEvent("onClick",[n.id,o]))},dhtmlXTreeObject.prototype._correctCheckStates=function(t){if(this.tscheck&&t&&t.id!=this.rootId){var e=t.childNodes,i=0,n=0;if(0!=t.childsCount){for(var s=0;s<t.childsCount;s++)if(!e[s].dscheck)if(0==e[s].checkstate)i=1;else{if(1!=e[s].checkstate){i=1,n=1;break}n=1}i&&n?this._setCheck(t,"unsure"):i?this._setCheck(t,!1):this._setCheck(t,!0),this._correctCheckStates(t.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(t){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate]))return!!this.parentObject.dscheck||(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate]))},dhtmlXTreeObject.prototype._createItem=function(t,e,i){var n=document.createElement("table");n.cellSpacing=0,n.cellPadding=0,n.border=0,this.hfMode&&(n.style.tableLayout="fixed"),n.style.margin=0,n.style.padding=0;var s=document.createElement("tbody"),o=document.createElement("tr"),l=document.createElement("td");if(l.className="standartTreeImage",this._txtimg){var r=document.createElement("div");l.appendChild(r),r.className="dhx_tree_textSign"}else{(r=this._getImg(e.id)).border="0","IMG"==r.tagName&&(r.align="absmiddle"),l.appendChild(r),r.style.padding=0,r.style.margin=0,r.style.width=this.def_line_img_x}var a=document.createElement("td"),h=this._getImg(this.cBROf?this.rootId:e.id);h.checked=0,this._setSrc(h,this.imPath+this.checkArray[0]),h.style.width="18px",h.style.height="18px",t||(a.style.display="none"),a.appendChild(h),this.cBROf||"IMG"!=h.tagName||(h.align="absmiddle"),h.onclick=this.onCheckBoxClick,h.treeNod=this,h.parentObject=e,window._KHTMLrv?a.width="16px":a.width="20px";var d=document.createElement("td");d.className="standartTreeImage";var c=this._getImg(this.timgen?e.id:this.rootId);c.onmousedown=this._preventNsDrag,c.ondragstart=this._preventNsDrag,c.border="0",this._aimgs&&(c.parentObject=e,"IMG"==c.tagName&&(c.align="absmiddle"),c.onclick=this.onRowSelect),i||this._setSrc(c,this.iconURL+this.imageArray[0]),d.appendChild(c),c.style.padding=0,c.style.margin=0,this.timgen?(d.style.width=c.style.width=this.def_img_x,c.style.height=this.def_img_y):(c.style.width="0px",c.style.height="0px",(_isOpera||window._KHTMLrv)&&(d.style.display="none"));var u=document.createElement("td");return u.className="dhxTextCell standartTreeRow",e.span=document.createElement("span"),e.span.className="standartTreeRow",this.mlitems?(e.span.style.width=this.mlitems,e.span.style.display="block"):u.noWrap=!0,dhx4.isIE8?u.style.width="99999px":window._KHTMLrv||(u.style.width="100%"),e.span.innerHTML=e.label,u.appendChild(e.span),u.parentObject=e,l.parentObject=e,u.onclick=this.onRowSelect,l.onclick=this.onRowClick,u.ondblclick=this.onRowClick2,this.ettip&&(o.title=e.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(d,this),d.parentObject=e),this.dragger.addDraggableItem(u,this)),e.span.style.paddingLeft="5px",e.span.style.paddingRight="5px",u.style.verticalAlign="",u.style.fontSize="10pt",u.style.cursor=this.style_pointer,o.appendChild(l),o.appendChild(a),o.appendChild(d),o.appendChild(u),s.appendChild(o),n.appendChild(s),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(o.onmousemove=this._itemMouseIn,o[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),n},dhtmlXTreeObject.prototype.setImagePath=function(t){this.imPath=t,this.iconURL=t},dhtmlXTreeObject.prototype.setIconPath=function(t){this.iconURL=t},dhtmlXTreeObject.prototype._getLeafCount=function(t){for(var e=0,i=0;i<t.childsCount;i++)0==t.childNodes[i].childsCount&&e++;return e},dhtmlXTreeObject.prototype._getChildCounterValue=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;if(e.unParsed||!e.XMLload&&this.XMLsource)return e._acc;switch(this.childCalc){case 1:return e.childsCount;case 2:return this._getLeafCount(e);case 3:case 4:return e._acc}},dhtmlXTreeObject.prototype._fixChildCountLabel=function(t,e){if(null!=this.childCalc)if(t.unParsed||!t.XMLload&&this.XMLsource)t._acc?t.span.innerHTML=t.label+this.htmlcA+t._acc+this.htmlcB:t.span.innerHTML=t.label;else switch(this.childCalc){case 1:0!=t.childsCount?t.span.innerHTML=t.label+this.htmlcA+t.childsCount+this.htmlcB:t.span.innerHTML=t.label;break;case 2:var i=this._getLeafCount(t);t.span.innerHTML=0!=i?t.label+this.htmlcA+i+this.htmlcB:t.label;break;case 3:if(0!=t.childsCount){for(var n=0,s=0;s<t.childsCount;s++)t.childNodes[s]._acc||(t.childNodes[s]._acc=0),n+=1*t.childNodes[s]._acc;n+=1*t.childsCount,t.span.innerHTML=t.label+this.htmlcA+n+this.htmlcB,t._acc=n}else t.span.innerHTML=t.label,t._acc=0;t.parentObject&&t.parentObject!=this.htmlNode&&this._fixChildCountLabel(t.parentObject);break;case 4:if(0!=t.childsCount){for(n=0,s=0;s<t.childsCount;s++)t.childNodes[s]._acc||(t.childNodes[s]._acc=1),n+=1*t.childNodes[s]._acc;t.span.innerHTML=t.label+this.htmlcA+n+this.htmlcB,t._acc=n}else t.span.innerHTML=t.label,t._acc=1;t.parentObject&&t.parentObject!=this.htmlNode&&this._fixChildCountLabel(t.parentObject)}},dhtmlXTreeObject.prototype.setChildCalcMode=function(t){switch(t){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}},dhtmlXTreeObject.prototype.setChildCalcHTML=function(t,e){this.htmlcA=t,this.htmlcB=e},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(t){this.attachEvent("onRightClick",t)},dhtmlXTreeObject.prototype.setOnClickHandler=function(t){this.attachEvent("onClick",t)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(t){this.attachEvent("onSelect",t)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(t){this.XMLsource=t},dhtmlXTreeObject.prototype.setOnCheckHandler=function(t){this.attachEvent("onCheck",t)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(t){this.attachEvent("onOpenEnd",t)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(t){this.attachEvent("onDblClick",t)},dhtmlXTreeObject.prototype.openAllItems=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;this._xopenAll(e)},dhtmlXTreeObject.prototype.getOpenState=function(t){var e=this._globalIdStorageFind(t);return e?this._getOpenState(e):""},dhtmlXTreeObject.prototype.closeAllItems=function(t){t===window.undefined&&(t=this.rootId);var e=this._globalIdStorageFind(t);if(!e)return 0;this._xcloseAll(e),this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype.setUserData=function(t,e,i){var n=this._globalIdStorageFind(t,0,!0);n&&("hint"==e&&(n.htmlNode.childNodes[0].childNodes[0].title=i),void 0===n.userData["t_"+e]&&(n._userdatalist?n._userdatalist+=","+e:n._userdatalist=e),n.userData["t_"+e]=i)},dhtmlXTreeObject.prototype.getUserData=function(t,e){var i=this._globalIdStorageFind(t,0,!0);if(i)return i.userData["t_"+e]},dhtmlXTreeObject.prototype.getItemColor=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;var i=new Object;return e.acolor&&(i.acolor=e.acolor),e.scolor&&(i.scolor=e.scolor),i},dhtmlXTreeObject.prototype.setItemColor=function(t,e,i){if(t&&t.span)var n=t;else n=this._globalIdStorageFind(t);if(!n)return 0;n.i_sel?(i||e)&&(n.span.style.color=i||e):e&&(n.span.style.color=e),i&&(n.scolor=i),e&&(n.acolor=e)};dhtmlXTreeObject.prototype.getItemText=function(t){var e=this._globalIdStorageFind(t);return e?e.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(t){var e=this._globalIdStorageFind(t);return e&&e.parentObject?e.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(t,e){if(t!=e){var i=this._globalIdStorageFind(t);if(!i)return 0;i.id=e,i.span.contextMenuId=e,this._idpull[e]=this._idpull[t],delete this._idpull[t]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var t=0;t<this.nodeCut.length;t++){var e=this.nodeCut[t];e._cimgs=new Array,e._cimgs[0]=e.images[0],e._cimgs[1]=e.images[1],e._cimgs[2]=e.images[2],e.images[0]=e.images[1]=e.images[2]=this.cutImage,this._correctPlus(e)}},dhtmlXTreeObject.prototype.doPaste=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;for(var i=0;i<this.nodeCut.length;i++)this._checkPNodes(e,this.nodeCut[i])||this._moveNode(this.nodeCut[i],e);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var t=0;t<this.nodeCut.length;t++){var e=this.nodeCut[t];e.images[0]=e._cimgs[0],e.images[1]=e._cimgs[1],e.images[2]=e._cimgs[2],this._correctPlus(e)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(t,e){if(1==this.dadmodec){var i=e;if(this.dadmodefix<0){for(;;){if(-1==(i=this._getPrevNode(i))){i=this.htmlNode;break}if(0==i.tr||""==i.tr.style.display||!i.parentObject)break}var n=i,s=e}else{i.tr&&i.tr.nextSibling&&i.tr.nextSibling.nodem&&this._getOpenState(i)<1?i=i.tr.nextSibling.nodem:this._getOpenState(i)<1?i=this.htmlNode:-1==(i=this._getNextNode(i))&&(i=this.htmlNode);s=i,n=e}return this._getNodeLevel(n,0)>this._getNodeLevel(s,0)?this.dropLower?s.id!=this.rootId?this._moveNodeTo(t,s.parentObject,s):this._moveNodeTo(t,this.htmlNode,null):this._moveNodeTo(t,n.parentObject):this._moveNodeTo(t,s.parentObject,s)}return this._moveNodeTo(t,e)},dhtmlXTreeObject.prototype._fixNodesCollection=function(t,e){var i=0,n=t.childNodes,s=t.childsCount-1;if(e!=n[s]){for(var o=0;o<s;o++)n[o]==n[s]&&(n[o]=n[o+1],n[o+1]=n[s]);for(o=0;o<s+1;o++)if(i){var l=n[o];n[o]=i,i=l}else n[o]==e&&(i=n[o],n[o]=n[s])}},dhtmlXTreeObject.prototype._recreateBranch=function(t,e,i,n){var s="";if(i){for(a=0;a<e.childsCount&&e.childNodes[a]!=i;a++);0!=a?i=e.childNodes[a-1]:(s="TOP",i="")}var o=this._onradh;this._onradh=null;var l=this._attachChildNode(e,t.id,t.label,0,t.images[0],t.images[1],t.images[2],s,0,i);if(l._userdatalist=t._userdatalist,l.userData=t.userData.clone(),t._attrs){l._attrs={};for(var r in t._attrs)l._attrs[r]=t._attrs[r]}l.XMLload=t.XMLload,o&&(this._onradh=o,this._onradh(l.id)),t.treeNod.dpcpy?t.treeNod._globalIdStorageFind(t.id):l.unParsed=t.unParsed,this._correctPlus(l);for(var a=0;a<t.childsCount;a++)this._recreateBranch(t.childNodes[a],l,0,1);return!n&&this.childCalc&&this._redrawFrom(this,e),l},dhtmlXTreeObject.prototype._moveNodeTo=function(t,e,i){if(t.treeNod._nonTrivialNode)return t.treeNod._nonTrivialNode(this,e,i,t);if(this._checkPNodes(e,t))return!1;if(e.mytype)var n=t.treeNod.lWin!=e.lWin;else n=t.treeNod.lWin!=e.treeNod.lWin;if(!this.callEvent("onDrag",[t.id,e.id,i?i.id:null,t.treeNod,e.treeNod]))return!1;0==e.XMLload&&this.XMLsource&&(e.XMLload=1,this._loadDynXML(e.id)),this.openItem(e.id);var s=t.treeNod,o=t.parentObject.childsCount,l=t.parentObject;if(n||s.dpcpy){var r=t.id;t=this._recreateBranch(t,e,i),s.dpcpy||s.deleteItem(r)}else{var a=e.childsCount,h=e.childNodes;0==a&&(e._open=!0),s._unselectItem(t),h[a]=t,t.treeNod=e.treeNod,e.childsCount++;var d=this._drawNewTr(h[a].htmlNode);i?(e.htmlNode.childNodes[0].insertBefore(d,i.tr),this._fixNodesCollection(e,i),h=e.childNodes):(e.htmlNode.childNodes[0].appendChild(d),1==this.dadmode&&this._fixNodesCollection(e,i))}if(!s.dpcpy&&!n){var c=t.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){c.parentNode.removeChild(c)},250):t.parentObject.htmlNode.childNodes[0].removeChild(t.tr),i&&e==t.parentObject)l.childNodes[l.childsCount-1]=0;else for(var u=0;u<l.childsCount;u++)if(l.childNodes[u].id==t.id){l.childNodes[u]=0;break}s._compressChildList(l.childsCount,l.childNodes),l.childsCount--}if(!n&&!s.dpcpy){if(t.tr=d,d.nodem=t,t.parentObject=e,s!=e.treeNod){if(t.treeNod._registerBranch(t,s))return;this._clearStyles(t),this._redrawFrom(this,t.parentObject),this._onradh&&this._onradh(t.id)}this._correctPlus(e),this._correctLine(e),this._correctLine(t),this._correctPlus(t),i?this._correctPlus(i):e.childsCount>=2&&(this._correctPlus(h[e.childsCount-2]),this._correctLine(h[e.childsCount-2])),this._correctPlus(h[e.childsCount-1]),this.tscheck&&this._correctCheckStates(e),s.tscheck&&s._correctCheckStates(l)}return o>1&&(s._correctPlus(l.childNodes[o-2]),s._correctLine(l.childNodes[o-2])),s._correctPlus(l),s._correctLine(l),this._fixChildCountLabel(e),s._fixChildCountLabel(l),this.callEvent("onDrop",[t.id,e.id,i?i.id:null,s,e.treeNod]),t.id},dhtmlXTreeObject.prototype._clearStyles=function(t){if(t.htmlNode){var e=t.htmlNode.childNodes[0].childNodes[0].childNodes[1],i=e.nextSibling.nextSibling;t.span.innerHTML=t.label,t.i_sel=!1,t._aimgs&&this.dragger.removeDraggableItem(e.nextSibling),this.checkBoxOff?(e.childNodes[0].style.display="",e.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(e.childNodes[0],this.imPath+this.checkArray[t.checkstate])):e.style.display="none",e.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(i),this.dragAndDropOff&&this.dragger.addDraggableItem(i,this),this._aimgs&&this.dragger.addDraggableItem(e.nextSibling,this),i.childNodes[0].className="standartTreeRow",i.parentNode.className="",i.onclick=this.onRowSelect,i.ondblclick=this.onRowClick2,e.previousSibling.onclick=this.onRowClick,this._correctLine(t),this._correctPlus(t);for(var n=0;n<t.childsCount;n++)this._clearStyles(t.childNodes[n])}},dhtmlXTreeObject.prototype._registerBranch=function(t,e){e&&e._globalIdStorageSub(t.id),t.id=this._globalIdStorageAdd(t.id,t),t.treeNod=this;for(var i=0;i<t.childsCount;i++)this._registerBranch(t.childNodes[i],e);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(t){this.tscheck=dhx4.s2b(t)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(t){this.ehlt=!0,this.attachEvent("onMouseIn",t)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(t){this.ehlt=!0,this.attachEvent("onMouseOut",t)},dhtmlXTreeObject.prototype.enableMercyDrag=function(t){this.dpcpy=dhx4.s2b(t)},dhtmlXTreeObject.prototype.enableTreeImages=function(t){this.timgen=dhx4.s2b(t)},dhtmlXTreeObject.prototype.enableFixedMode=function(t){this.hfMode=dhx4.s2b(t)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(t,e){this.checkBoxOff=dhx4.s2b(t),this.cBROf=!(this.checkBoxOff||dhx4.s2b(e))},dhtmlXTreeObject.prototype.setStdImages=function(t,e,i){this.imageArray[0]=t,this.imageArray[1]=e,this.imageArray[2]=i},dhtmlXTreeObject.prototype.enableTreeLines=function(t){this.treeLinesOn=dhx4.s2b(t)},dhtmlXTreeObject.prototype.setImageArrays=function(t,e,i,n,s,o){switch(t){case"plus":this.plusArray[0]=e,this.plusArray[1]=i,this.plusArray[2]=n,this.plusArray[3]=s,this.plusArray[4]=o;break;case"minus":this.minusArray[0]=e,this.minusArray[1]=i,this.minusArray[2]=n,this.minusArray[3]=s,this.minusArray[4]=o}},dhtmlXTreeObject.prototype.openItem=function(t){this.skipLock=!0;var e=this._globalIdStorageFind(t);return e?this._openItem(e):0},dhtmlXTreeObject.prototype._openItem=function(t){var e=this._getOpenState(t);if(e<0||this.XMLsource&&!t.XMLload){if(!this.callEvent("onOpenStart",[t.id,e]))return 0;this._HideShow(t,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,t.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[t.id,this._getOpenState(t)]))}else this._srnd&&this._HideShow(t,2);t.parentObject&&!this._skip_open_parent&&this._openItem(t.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(t){if(this.rootId==t)return 0;this.skipLock=!0;var e=this._globalIdStorageFind(t);if(!e)return 0;e.closeble&&this._HideShow(e,1),this.skipLock=!1},dhtmlXTreeObject.prototype.getLevel=function(t){var e=this._globalIdStorageFind(t);return e?this._getNodeLevel(e,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(t,e){if(e=dhx4.s2b(e),t&&t.span)var i=t;else i=this._globalIdStorageFind(t);if(!i)return 0;i.closeble=e},dhtmlXTreeObject.prototype._getNodeLevel=function(t,e){return t.parentObject?this._getNodeLevel(t.parentObject,e+1):e},dhtmlXTreeObject.prototype.hasChildren=function(t){var e=this._globalIdStorageFind(t);return e?!(!this.XMLsource||e.XMLload)||e.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(t){for(var e=0,i=0;i<t.childsCount;i++)0==t.childNodes[i].childsCount&&e++;return e},dhtmlXTreeObject.prototype.setItemText=function(t,e,i){var n=this._globalIdStorageFind(t);if(!n)return 0;n.label=e,n.span.innerHTML=e,this.childCalc&&this._fixChildCountLabel(n),n.span.parentNode.parentNode.title=i||""},dhtmlXTreeObject.prototype.getItemTooltip=function(t){var e=this._globalIdStorageFind(t);return e?e.span.parentNode.parentNode._dhx_title||e.span.parentNode.parentNode.title||"":""},dhtmlXTreeObject.prototype.refreshItem=function(t){t||(t=this.rootId);this._globalIdStorageFind(t);this._dynDeleteBranches[t]=(this._dynDeleteBranches[t]||0)+1,this._loadDynXML(t)},dhtmlXTreeObject.prototype.setItemImage2=function(t,e,i,n){var s=this._globalIdStorageFind(t);if(!s)return 0;s.images[1]=i,s.images[2]=n,s.images[0]=e,this._correctPlus(s)},dhtmlXTreeObject.prototype.setItemImage=function(t,e,i){var n=this._globalIdStorageFind(t);if(!n)return 0;i?(n.images[1]=e,n.images[2]=i):n.images[0]=e,this._correctPlus(n)},dhtmlXTreeObject.prototype.getSubItems=function(t){var e=this._globalIdStorageFind(t,0,1);if(!e)return 0;if(e.unParsed)return this._getSubItemsXML(e.unParsed);var n="";for(i=0;i<e.childsCount;i++)n?n+=this.dlmtr+e.childNodes[i].id:n=""+e.childNodes[i].id;return n},dhtmlXTreeObject.prototype._getAllScraggyItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(t.childNodes[i].unParsed)var n=this._getAllScraggyItemsXML(t.childNodes[i].unParsed,1);else n=this._getAllScraggyItems(t.childNodes[i]);n&&(e?e+=this.dlmtr+n:e=n)}else e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id;return e},dhtmlXTreeObject.prototype._getAllFatItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id,t.childNodes[i].unParsed)var n=this._getAllFatItemsXML(t.childNodes[i].unParsed,1);else n=this._getAllFatItems(t.childNodes[i]);n&&(e+=this.dlmtr+n)}return e},dhtmlXTreeObject.prototype._getAllSubItems=function(t,e,i){if(i)n=i;else var n=this._globalIdStorageFind(t);if(!n)return 0;e="";for(var s=0;s<n.childsCount;s++){e?e+=this.dlmtr+n.childNodes[s].id:e=""+n.childNodes[s].id;var o=this._getAllSubItems(0,e,n.childNodes[s]);o&&(e+=this.dlmtr+o)}return n.unParsed&&(e=this._getAllSubItemsXML(t,e,n.unParsed)),e},dhtmlXTreeObject.prototype.selectItem=function(t,e,i){e=dhx4.s2b(e);var n=this._globalIdStorageFind(t);if(!n||!n.parentObject)return 0;this.XMLloadingWarning?n.parentObject.openMe=1:this._openItem(n.parentObject);var s=null;i&&((s=new Object).ctrlKey=!0,n.i_sel&&(s.skipUnSel=!0)),e?this.onRowSelect(s,n.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(s,n.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var t=new Array,e=0;e<this._selected.length;e++)t[e]=this._selected[e].span.innerHTML;return t.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(t,e){t--;for(var i=0;i<t;i++)0==e[i]&&(e[i]=e[i+1],e[i+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(t,e,i){if(!e||!e.parentObject)return 0;var n=0,s=0;e.tr.nextSibling&&(n=e.tr.nextSibling.nodem),e.tr.previousSibling&&(s=e.tr.previousSibling.nodem);for(var o=e.parentObject,l=o.childsCount,r=o.childNodes,a=0;a<l;a++)if(r[a].id==t){i||o.htmlNode.childNodes[0].removeChild(r[a].tr),r[a]=0;break}this._compressChildList(l,r),i||o.childsCount--,n&&(this._correctPlus(n),this._correctLine(n)),s&&(this._correctPlus(s),this._correctLine(s)),this.tscheck&&this._correctCheckStates(o),i||this._globalIdStorageRecSub(e)},dhtmlXTreeObject.prototype.setCheck=function(t,e){var i=this._globalIdStorageFind(t,0,1);i&&("unsure"===e?this._setCheck(i,e):(e=dhx4.s2b(e),this.tscheck&&this.smcheck?this._setSubChecked(e,i):this._setCheck(i,e)),this.smcheck&&this._correctCheckStates(i.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(t,e){if(t){if((t.parentObject._r_logic||this._frbtr)&&e)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=t;else for(var i=0;i<t.parentObject.childsCount;i++)this._setCheck(t.parentObject.childNodes[i],0);var n=t.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];t.checkstate="unsure"==e?2:e?1:0,t.dscheck&&(t.checkstate=t.dscheck),this._setSrc(n,this.imPath+(t.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[t.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(t,e){var i=this._globalIdStorageFind(t);this._setSubChecked(e,i),this._correctCheckStates(i.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(t,e){if(t=dhx4.s2b(t),e){if((e.parentObject._r_logic||this._frbtr)&&t)for(var i=0;i<e.parentObject.childsCount;i++)this._setSubChecked(0,e.parentObject.childNodes[i]);if(e.unParsed&&this._setSubCheckedXML(t,e.unParsed),e._r_logic||this._frbtr)this._setSubChecked(t,e.childNodes[0]);else for(i=0;i<e.childsCount;i++)this._setSubChecked(t,e.childNodes[i]);var n=e.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];e.checkstate=t?1:0,e.dscheck&&(e.checkstate=e.dscheck),this._setSrc(n,this.imPath+(e.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[e.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(t){var e=this._globalIdStorageFind(t);if(e)return e.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(t){var e=this._globalIdStorageFind(t);if(e)for(var i=e.childsCount,n=0;n<i;n++)this._deleteNode(e.childNodes[0].id,e.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(t,e){if(!this._onrdlh||this._onrdlh(t)){var i=this._deleteItem(t,e);i&&this._fixChildCountLabel(i)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(t,e,i){e=dhx4.s2b(e);var n=this._globalIdStorageFind(t);if(n){var s=this.getParentId(t),o=n.parentObject;return this._deleteNode(t,n,i),this._editCell&&this._editCell.id==t&&(this._editCell=null),this._correctPlus(o),this._correctLine(o),e&&s!=this.rootId&&this.selectItem(s,1),o}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(t){for(var e=0;e<t.childsCount;e++)this._globalIdStorageRecSub(t.childNodes[e]),this._globalIdStorageSub(t.childNodes[e].id);this._globalIdStorageSub(t.id);var i=t;i.span=null,i.tr.nodem=null,i.tr=null,i.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(t,e,i,n,s,o,l,r,a){var h=this._globalIdStorageFind(t);if(!h||!h.parentObject)return 0;var d=this._attachChildNode(0,e,i,n,s,o,l,r,a,h);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h.parentObject),d},dhtmlXTreeObject.prototype.getItemIdByIndex=function(t,e){var i=this._globalIdStorageFind(t);return!i||e>=i.childsCount?null:i.childNodes[e].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(t,e){var i=this._globalIdStorageFind(t);return!i||e>=i.childsCount?null:i.childNodes[e].id},dhtmlXTreeObject.prototype.setDragHandler=function(t){this.attachEvent("onDrag",t)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.selectionBar.style.display="none",this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(t,e){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=dhx4.s2b(t),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),arguments.length>1&&(this._ddronr=!dhx4.s2b(e))},dhtmlXTreeObject.prototype._setMove=function(t,e,i){if(t.parentObject.span){var n=dhx4.absTop(t),s=dhx4.absTop(this.allTree)-this.allTree.scrollTop;if(this.dadmodec=this.dadmode,this.dadmodefix=0,2==this.dadmode){var o=i-n+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(o)-t.offsetHeight/6>0?(this.dadmodec=1,o<0&&(this.dadmodefix=0-t.offsetHeight)):this.dadmodec=0}if(0==this.dadmodec){var l=t.parentObject.span;l.className+=" dragAndDropRow",this._lastMark=l}else this._clearMove(),this.selectionBar.style.top=n-s+((parseInt(t.parentObject.span.parentNode.parentNode.offsetHeight)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",this.allTree.offsetWidth>20&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="";this._autoScroll(null,n,s)}},dhtmlXTreeObject.prototype._autoScroll=function(t,e,i){this.autoScroll&&(t&&(e=dhx4.absTop(t),i=dhx4.absTop(this.allTree)-this.allTree.scrollTop),e-i-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),e-i<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(t,e){if(!this.dADTempOff)return null;var i=t.parentObject;if(!this.callEvent("onBeforeDrag",[i.id,e]))return null;i.i_sel||this._selectItem(i,e),this._checkMSelectionLogic();var n=document.createElement("div"),s=new Array;if(this._itim_dg)for(var o=0;o<this._selected.length;o++)s[o]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[o].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[o].span.innerHTML+"</td></tr></table>";else s=this.getSelectedItemText().split(this.dlmtr);return n.innerHTML=s.join(""),n.style.position="absolute",n.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),n},dhtmlXTreeObject.prototype._focusNode=function(t){var e=dhx4.absTop(t.htmlNode)-dhx4.absTop(this.allTree);(e>this.allTree.offsetHeight-30||e<0)&&(this.allTree.scrollTop=e+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(t){return!(!t||!t.preventDefault)&&(t.preventDefault(),!1)},dhtmlXTreeObject.prototype._drag=function(t,e,i){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),i.parentObject||(i=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var n=t.parentObject.treeNod;if(n&&n._clearMove&&n._clearMove(""),!this.dragMove||this.dragMove()){if(n&&n._clearMove&&n._dragged)s=n._dragged;else var s=new Array(t.parentObject);for(var o=i.parentObject,l=0;l<s.length;l++){var r=this._moveNode(s[l],o);this.dadmodec&&!1!==r&&(o=this._globalIdStorageFind(r,!0,!0)),r&&!this._sADnD&&this.selectItem(r,0,1)}}n&&(n._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(t,e,i,n){if(!this.dADTempOff)return 0;var s=e.parentObject,o=t.parentObject;if(o||!this._ddronr){if(!this.callEvent("onDragIn",[s.id,o?o.id:null,s.treeNod,this]))return o&&this._autoScroll(t),0;if(o){if(null==s.childNodes)return this._setMove(t,i,n),t;for(var l=s.treeNod,r=0;r<l._dragged.length;r++)if(this._checkPNodes(o,l._dragged[r]))return this._autoScroll(t),0;if(this.selectionBar.parentNode.removeChild(this.selectionBar),o.span.parentNode.appendChild(this.selectionBar),this._setMove(t,i,n),this._getOpenState(o)<=0){var a=this;this._autoOpenId=o.id,this._autoOpenTimer=window.setTimeout(function(){a._autoOpenItem(null,a),a=null},1e3)}}else this.allTree.className+=" selectionBox";return t}},dhtmlXTreeObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(t){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype._getNextNode=function(t,e){return!e&&t.childsCount?t.childNodes[0]:t==this.htmlNode?-1:t.tr&&t.tr.nextSibling&&t.tr.nextSibling.nodem?t.tr.nextSibling.nodem:this._getNextNode(t.parentObject,!0)},dhtmlXTreeObject.prototype._lastChild=function(t){return t.childsCount?this._lastChild(t.childNodes[t.childsCount-1]):t},dhtmlXTreeObject.prototype._getPrevNode=function(t,e){return t.tr&&t.tr.previousSibling&&t.tr.previousSibling.nodem?this._lastChild(t.tr.previousSibling.nodem):t.parentObject?t.parentObject:-1},dhtmlXTreeObject.prototype.findItem=function(t,e,i){var n=this._findNodeByLabel(t,e,i?this.htmlNode:null);return n?(this.selectItem(n.id,!0),this._focusNode(n),n.id):null},dhtmlXTreeObject.prototype.findItemIdByLabel=function(t,e,i){var n=this._findNodeByLabel(t,e,i?this.htmlNode:null);return n?n.id:null},dhtmlXTreeObject.prototype.findStrInXML=function(t,e,i){if(!t.childNodes&&t.item)return this.findStrInJSON(t,e,i);if(!t.childNodes)return!1;for(var n=0;n<t.childNodes.length;n++)if(1==t.childNodes[n].nodeType){var s=t.childNodes[n].getAttribute(e);if(s||"itemtext"!=t.childNodes[n].tagName||(s=t.childNodes[n].firstChild.data),s&&-1!=s.toLowerCase().search(i))return!0;if(this.findStrInXML(t.childNodes[n],e,i))return!0}return!1},dhtmlXTreeObject.prototype.findStrInJSON=function(t,e,i){for(var n=0;n<t.item.length;n++){var s=t.item[n].text;if(s&&-1!=s.toLowerCase().search(i))return!0;if(t.item[n].item&&this.findStrInJSON(t.item[n],e,i))return!0}return!1},dhtmlXTreeObject.prototype._findNodeByLabel=function(t,e,i){t=t.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");t=new RegExp(t.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),i||(i=this._selected[0])||(i=this.htmlNode);var n=i;if(e){-1==(s=this._getPrevNode(n))&&(s=this._lastChild(this.htmlNode)),s.unParsed&&this.findStrInXML(s.unParsed.d,"text",t)?(this.reParse(s),i=this._getPrevNode(n)):i=s,-1==i&&(i=this._lastChild(this.htmlNode))}else i.unParsed&&this.findStrInXML(i.unParsed.d,"text",t)&&this.reParse(i),-1==(i=this._getNextNode(n))&&(i=this.htmlNode.childNodes[0]);for(;i&&i!=n;){if(i.label&&-1!=i.label.search(t))return i;if(e){var s;-1==(s=this._getPrevNode(i))&&(s=this._lastChild(this.htmlNode)),s.unParsed&&this.findStrInXML(s.unParsed.d,"text",t)?(this.reParse(s),i=this._getPrevNode(i)):i=s,-1==i&&(i=this._lastChild(this.htmlNode))}else{if(-1==i){if(n==this.htmlNode)break;i=this.htmlNode.childNodes[0]}i.unParsed&&this.findStrInXML(i.unParsed.d,"text",t)&&this.reParse(i),-1==(i=this._getNextNode(i))&&(i=this.htmlNode)}}return null},dhtmlXTreeObject.prototype.moveItem=function(t,e,i,n){var s=this._globalIdStorageFind(t);if(!s)return 0;var o=null;switch(e){case"right":alert("Not supported yet");break;case"item_child":if(!(l=(n||this)._globalIdStorageFind(i)))return 0;o=(n||this)._moveNodeTo(s,l,0);break;case"item_sibling":if(!(l=(n||this)._globalIdStorageFind(i)))return 0;o=(n||this)._moveNodeTo(s,l.parentObject,l);break;case"item_sibling_next":var l;if(!(l=(n||this)._globalIdStorageFind(i)))return 0;o=l.tr&&l.tr.nextSibling&&l.tr.nextSibling.nodem?(n||this)._moveNodeTo(s,l.parentObject,l.tr.nextSibling.nodem):(n||this)._moveNodeTo(s,l.parentObject);break;case"left":s.parentObject.parentObject&&(o=this._moveNodeTo(s,s.parentObject.parentObject,s.parentObject));break;case"up":if(-1==(r=this._getPrevNode(s))||!r.parentObject)return null;o=this._moveNodeTo(s,r.parentObject,r);break;case"up_strict":0!=(r=this._getIndex(s))&&(o=this._moveNodeTo(s,s.parentObject,s.parentObject.childNodes[r-1]));break;case"down_strict":var r=this._getIndex(s),a=s.parentObject.childsCount-2;r==a?o=this._moveNodeTo(s,s.parentObject):r<a&&(o=this._moveNodeTo(s,s.parentObject,s.parentObject.childNodes[r+2]));break;case"down":if(-1==(r=this._getNextNode(this._lastChild(s)))||!r.parentObject)return;if(r.parentObject==s.parentObject)r=this._getNextNode(r);if(-1==r)o=this._moveNodeTo(s,s.parentObject);else{if(-1==r||!r.parentObject)return;o=this._moveNodeTo(s,r.parentObject,r)}}return _isIE&&_isIE<8&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),o},dhtmlXTreeObject.prototype.setDragBehavior=function(t,e){switch(this._sADnD=!dhx4.s2b(e),t){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}},dhtmlXTreeObject.prototype._loadDynXML=function(t,e){e=e||this.XMLsource;var i=(new Date).valueOf();this._ld_id=t,"function"==this.xmlalb?e&&e(this._escape(t)):"name"==this.xmlalb?this.load(e+this._escape(t)):"xmlname"==this.xmlalb?this.load(e+this._escape(t)+".xml?uid="+i):this.load(e+dhtmlx.url(e)+"uid="+i+"&id="+this._escape(t))},dhtmlXTreeObject.prototype.enableMultiselection=function(t,e){this._amsel=dhx4.s2b(t),this._amselS=dhx4.s2b(e)},dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var t=new Array,e=0;e<this._selected.length;e++)for(var i=0;i<this._selected.length;i++)e!=i&&this._checkPNodes(this._selected[i],this._selected[e])&&(t[t.length]=this._selected[i]);for(e=0;e<t.length;e++)this._unselectItem(t[e])},dhtmlXTreeObject.prototype._checkPNodes=function(t,e){return!this._dcheckf&&(e==t?1:t.parentObject?this._checkPNodes(t.parentObject,e):0)},dhtmlXTreeObject.prototype.disableDropCheck=function(t){this._dcheckf=dhx4.s2b(t)},dhtmlXTreeObject.prototype.enableDistributedParsing=function(t,e,i){this._edsbps=dhx4.s2b(t),this._edsbpsA=new Array,this._edsbpsC=e||10,this._edsbpsD=i||250},dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)},dhtmlXTreeObject.prototype.getItemParsingState=function(t){if(!this._globalIdStorageFind(t,!0,!0))return 0;if(this._edsbpsA)for(var e=0;e<this._edsbpsA.length;e++)if(this._edsbpsA[e][2]==t)return-1;return 1},dhtmlXTreeObject.prototype._distributedStart=function(t,e,i,n,s){this._edsbpsA||(this._edsbpsA=new Array),this._edsbpsA[this._edsbpsA.length]=[t,e,i,n,s]},dhtmlXTreeObject.prototype._distributedStep=function(t){var e=this;if(this._edsbpsA&&this._edsbpsA.length){var i=this._edsbpsA[0];this.parsedArray=new Array,this._parse(i[0],i[2],i[3],i[1]);var n=this._globalIdStorageFind(i[2]);this._redrawFrom(this,n,i[4],this._getOpenState(n));for(var s=this.setCheckList.split(this.dlmtr),o=0;o<s.length;o++)s[o]&&this.setCheck(s[o],1);this._edsbpsA=(new Array).concat(this._edsbpsA.slice(1)),this._edsbpsA.length||(window.setTimeout(function(){e.onXLE&&e.onXLE(e,t),e.callEvent("onXLE",[e,t])},1),e.xmlstate=0)}else e.XMLloadingWarning=0},dhtmlXTreeObject.prototype.enableTextSigns=function(t){this._txtimg=dhx4.s2b(t)},dhtmlXTreeObject.prototype.preventIECaching=function(t){dhx4.ajax.cache=!t},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(t,e){if("object"!=typeof t)var i=this._globalIdStorageFind(t,0,1);else i=t;i&&(i.dscheck=dhx4.s2b(e)?(i.checkstate||0)%3+3:i.checkstate>2?i.checkstate-3:i.checkstate,this._setCheck(i),i.dscheck<3&&(i.dscheck=!1))},dhtmlXTreeObject.prototype.smartRefreshBranch=function(t,e){this._branchUpdate=1,this.smartRefreshItem(t,e)},dhtmlXTreeObject.prototype.smartRefreshItem=function(t,e){for(var i=this._globalIdStorageFind(t),n=0;n<i.childsCount;n++)i.childNodes[n]._dmark=!0;this.waitUpdateXML=!0,e&&e.exists?this._parse(e,t):this._loadDynXML(t,e)},dhtmlXTreeObject.prototype.refreshItems=function(t,e){var i=t.toString().split(this.dlmtr);this.waitUpdateXML=new Array;for(var n=0;n<i.length;n++)this.waitUpdateXML[i[n]]=!0;this.load((e||this.XMLsource)+dhtmlx.url(e||this.XMLsource)+"ids="+this._escape(t))},dhtmlXTreeObject.prototype.updateItem=function(t,e,i,n,s,o,l){var r=this._globalIdStorageFind(t);return r.userData=new cObject,e&&(r.label=e),r.images=new Array(i||this.imageArray[0],n||this.imageArray[1],s||this.imageArray[2]),this.setItemText(t,e),o&&this._setCheck(r,!0),"1"!=l||this.hasChildren(t)||(r.XMLload=0),this._correctPlus(r),r._dmark=!1,r},dhtmlXTreeObject.prototype.setDropHandler=function(t){this.attachEvent("onDrop",t)},dhtmlXTreeObject.prototype.setOnLoadingStart=function(t){this.attachEvent("onXLS",t)},dhtmlXTreeObject.prototype.setOnLoadingEnd=function(t){this.attachEvent("onXLE",t)},dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(t){this.xmlalb=t},dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(t){this.smcheck=dhx4.s2b(t)},dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate},dhtmlXTreeObject.prototype.setItemTopOffset=function(t,e){var i,n=(i="object"!=typeof t?this._globalIdStorageFind(t):t).span.parentNode.parentNode;i.span.style.paddingBottom="1px";for(var s=0;s<n.childNodes.length;s++){if(0!=s)_isIE?(n.childNodes[s].style.height="18px",n.childNodes[s].style.paddingTop=parseInt(e)+"px"):n.childNodes[s].style.height=18+parseInt(e)+"px";else{var o=n.childNodes[s].firstChild;"DIV"!=n.childNodes[s].firstChild.tagName&&(o=document.createElement("DIV"),n.childNodes[s].insertBefore(o,n.childNodes[s].firstChild)),i.parentObject.id==this.rootId&&i.parentObject.childNodes[0]==i||!this.treeLinesOn||(n.childNodes[s].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),o.innerHTML="&nbsp;",o.style.overflow="hidden"}o.style.verticalAlign=n.childNodes[s].style.verticalAlign="bottom",_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}},dhtmlXTreeObject.prototype.setIconSize=function(t,e,i){if(i){if(i&&i.span)var n=i;else n=this._globalIdStorageFind(i);if(!n)return 0;var s=n.span.parentNode.previousSibling.childNodes[0];t&&(s.style.width=t+"px",window._KHTMLrv&&(s.parentNode.style.width=t+"px")),e&&(s.style.height=e+"px",window._KHTMLrv&&(s.parentNode.style.height=e+"px"))}else this.def_img_x=t+"px",this.def_img_y=e+"px"},dhtmlXTreeObject.prototype.getItemImage=function(t,e,i){var n=this._globalIdStorageFind(t);if(!n)return"";var s=n.images[e||0];return i&&(s=this.iconURL+s),s},dhtmlXTreeObject.prototype.enableRadioButtons=function(t,e){if(1==arguments.length)return this._frbtr=dhx4.s2b(t),void(this.checkBoxOff=this.checkBoxOff||this._frbtr);var i=this._globalIdStorageFind(t);if(!i)return"";if((e=dhx4.s2b(e))&&!i._r_logic){i._r_logic=!0;for(var n=0;n<i.childsCount;n++)this._setCheck(i.childNodes[n],i.childNodes[n].checkstate)}if(!e&&i._r_logic){i._r_logic=!1;for(n=0;n<i.childsCount;n++)this._setCheck(i.childNodes[n],i.childNodes[n].checkstate)}},dhtmlXTreeObject.prototype.enableSingleRadioMode=function(t){this._frbtrs=dhx4.s2b(t)},dhtmlXTreeObject.prototype.openOnItemAdded=function(t){this._hAdI=!dhx4.s2b(t)},dhtmlXTreeObject.prototype.openOnItemAdding=function(t){this._hAdI=!dhx4.s2b(t)},dhtmlXTreeObject.prototype.enableMultiLineItems=function(t){this.mlitems=!0===t?"100%":t},dhtmlXTreeObject.prototype.enableAutoTooltips=function(t){this.ettip=dhx4.s2b(t)},dhtmlXTreeObject.prototype.clearSelection=function(t){t?this._unselectItem(this._globalIdStorageFind(t)):this._unselectItems()},dhtmlXTreeObject.prototype.showItemSign=function(t,e){var i=this._globalIdStorageFind(t);if(!i)return 0;i.span.parentNode.previousSibling.previousSibling.previousSibling;dhx4.s2b(e)?(i.closeble=!0,i.wsign=!1):(this._openItem(i),i.closeble=!1,i.wsign=!0),this._correctPlus(i)},dhtmlXTreeObject.prototype.showItemCheckbox=function(t,e){if(!t)for(var i in this._idpull)this.showItemCheckbox(this._idpull[i],e);if("object"!=typeof t&&(t=this._globalIdStorageFind(t,0,0)),!t)return 0;t.nocheckbox=!dhx4.s2b(e);t.span.parentNode.previousSibling.previousSibling.childNodes[0].parentNode.style.display=t.nocheckbox?"none":""},dhtmlXTreeObject.prototype.setListDelimeter=function(t){this.dlmtr=t},dhtmlXTreeObject.prototype.setEscapingMode=function(t){this.utfesc=t},dhtmlXTreeObject.prototype.enableHighlighting=function(t){this.ehlt=!0,this.ehlta=dhx4.s2b(t)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var t=this.childNodes[3].parentObject,e=t.treeNod;e.callEvent("onMouseOut",[t.id]),t.id==e._l_onMSI&&(e._l_onMSI=null),e.ehlta&&(t.span.className=t.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var t=this.childNodes[3].parentObject,e=t.treeNod;e._l_onMSI!=t.id&&e.callEvent("onMouseIn",[t.id]),e._l_onMSI=t.id,e.ehlta&&(t.span.className=t.span.className.replace("_lor",""),t.span.className=t.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(t){this._aimgs=dhx4.s2b(t)},dhtmlXTreeObject.prototype.focusItem=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;this._focusNode(e)},dhtmlXTreeObject.prototype.getAllSubItems=function(t){return this._getAllSubItems(t)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(t.childNodes[i].unParsed)var n=this._getAllScraggyItemsXML(t.childNodes[i].unParsed,1);else n=this._getAllScraggyItems(t.childNodes[i]);n&&(e?e+=this.dlmtr+n:e=n)}else e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id;return e},dhtmlXTreeObject.prototype._getAllFatItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id,t.childNodes[i].unParsed)var n=this._getAllFatItemsXML(t.childNodes[i].unParsed,1);else n=this._getAllFatItems(t.childNodes[i]);n&&(e+=this.dlmtr+n)}return e},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(t){return t&&(t=this._globalIdStorageFind(t)),this._getAllChecked(t,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var t=[this._getAllChecked("","",1)],e=this._getAllChecked("","",2);return e&&t.push(e),t.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(t,e,i){t||(t=this.htmlNode),t.checkstate==i&&(t.nocheckbox||(e?e+=this.dlmtr+t.id:e=""+t.id));for(var n=t.childsCount,s=0;s<n;s++)e=this._getAllChecked(t.childNodes[s],e,i);return t.unParsed&&(e=this._getAllCheckedXML(t.unParsed,e,i)),e||""},dhtmlXTreeObject.prototype.setItemStyle=function(t,e,i){i=i||!1;var n=this._globalIdStorageFind(t);if(!n)return 0;n.span.style.cssText?n.span.style.cssText=i?e:n.span.style.cssText+";"+e:n.span.setAttribute("style",n.span.getAttribute("style")+"; "+e)},dhtmlXTreeObject.prototype.enableImageDrag=function(t){this._itim_dg=dhx4.s2b(t)},dhtmlXTreeObject.prototype.setOnDragIn=function(t){this.attachEvent("onDragIn",t)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(t){this.autoScroll=dhx4.s2b(t)},dhtmlXTreeObject.prototype.setSkin=function(t){var e=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=e+" dhxtree_"+t,"dhx_terrace"!=t&&"dhx_web"!=t&&"material"!=t||this.enableTreeLines(!1),"material"==t&&this.setIconSize("25","25")},dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(t){return[t.parent,t.width||"100%",t.height||"100%",t.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{}),dhtmlXTreeObject.prototype._dp_init=function(t){t.attachEvent("insertCallback",function(t,e,i){var n=dhx4.ajax.xpath(".//item",t)[0].getAttribute("text");this.obj.insertNewItem(i,e,n,0,0,0,0,"CHILD")}),t.attachEvent("updateCallback",function(t,e,i){var n=dhx4.ajax.xpath(".//item",t)[0].getAttribute("text");this.obj.setItemText(e,n),this.obj.getParentId(e)!=i&&this.obj.moveItem(e,"item_child",i),this.setUpdated(e,!0,"updated")}),t.attachEvent("deleteCallback",function(t,e,i){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteItem(e,!1)}),t._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(e,i){return 3==e&&t.setUpdated(i,!0),!0}),this.attachEvent("onDrop",function(e,i,n,s,o){s==o&&t.setUpdated(e,!0)}),this._onrdlh=function(e){var i=t.getState(e);return"inserted"==i?(t.set_invalid(e,!1),t.setUpdated(e,!1),!0):"true_deleted"==i?(t.setUpdated(e,!1),!0):(t.setUpdated(e,!0,"deleted"),!1)},this._onradh=function(e){t.setUpdated(e,!0,"inserted")},t._getRowData=function(t){var e={},i=this.obj._globalIdStorageFind(t),n=i.parentObject,s=0;for(s=0;s<n.childsCount&&n.childNodes[s]!=i;s++);for(e.tr_id=i.id,e.tr_pid=n.id,e.tr_order=s,e.tr_text=i.span.innerHTML,n=(i._userdatalist||"").split(","),s=0;s<n.length;s++)e[n[s]]=i.userData["t_"+n[s]];return e}},void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTree=function(t){this.callEvent("_onBeforeContentAttach",["tree"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),this.dataType="tree",this.dataObj=new dhtmlXTreeObject(e,"100%","100%",t||0),this.dataObj.setSkin(this.conf.skin),this.dataObj.allTree.childNodes[0].style.marginTop="2px",this.dataObj.allTree.childNodes[0].style.marginBottom="2px",e=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXTreeObject.prototype.makeDraggable=function(t,e){"object"!=typeof t&&(t=document.getElementById(t)),dragger=new dhtmlDragAndDropObject,dropper=new dhx_dragSomethingInTree,dragger.addDraggableItem(t,dropper),t.dragLanding=null,t.ondragstart=dropper._preventNsDrag,t.onselectstart=new Function("return false;"),t.parentObject=new Object,t.parentObject.img=t,t.parentObject.treeNod=dropper,dropper._customDrop=e},dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable,dhtmlXTreeObject.prototype.makeAllDraggable=function(t){for(var e=document.getElementsByTagName("div"),i=0;i<e.length;i++)e[i].getAttribute("dragInDhtmlXTree")&&this.makeDragable(e[i],t)},dhtmlXTreeObject.prototype.enableItemEditor=function(t){this._eItEd=dhx4.s2b(t),this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(t,e){return this._edn_dblclick&&this._editItem(t,e),!0}),this.setOnClickHandler(function(t,e){return this._stopEditItem(t,e),this.ed_hist_clcik==t&&this._edn_click_IE&&this._editItem(t,e),this.ed_hist_clcik=t,!0}),this._eItEdFlag=!0)},dhtmlXTreeObject.prototype.setOnEditHandler=function(t){this.attachEvent("onEdit",t)},dhtmlXTreeObject.prototype.setEditStartAction=function(t,e){this._edn_click_IE=dhx4.s2b(t),this._edn_dblclick=dhx4.s2b(e)},dhtmlXTreeObject.prototype._stopEdit=function(t,e){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=t)){var i=!0;e?(i=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):i=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),!0===i?i=this._editCell.span.childNodes[0].value:!1===i&&(i=this._editCell._oldValue);var n=i!=this._editCell._oldValue;this._editCell.span.innerHTML=i,this._editCell.label=this._editCell.span.innerHTML;var s=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=s,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var o=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,e||this.callEvent("onEdit",[3,o,this,n]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}},dhtmlXTreeObject.prototype._stopEditItem=function(t,e){this._stopEdit(t)},dhtmlXTreeObject.prototype.stopEdit=function(t){this._editCell&&this._stopEdit(this._editCell.id+"_non",t)},dhtmlXTreeObject.prototype.editItem=function(t){this._editItem(t,this)},dhtmlXTreeObject.prototype._editItem=function(t,e){if(this._eItEd){this._stopEdit();var i=this._globalIdStorageFind(t);if(!i)return;var n=this.callEvent("onEdit",[0,t,this,i.span.innerHTML]);if(!0===n)n=void 0!==i.span.innerText?i.span.innerText:i.span.textContent;else if(!1===n)return;this.dADTempOffEd=this.dADTempOff,this.dADTempOff=!1,this._editCell=i,i._oldValue=n,i.span.innerHTML="<input type='text' class='intreeeditRow' />",i.span.style.paddingRight=i.span.style.paddingLeft="0px",i.span.onclick=i.span.ondblclick=function(t){(t||event).cancelBubble=!0},i.span.childNodes[0].value=n,i.span.childNodes[0].onselectstart=function(t){return(t||event).cancelBubble=!0,!0},i.span.childNodes[0].onmousedown=function(t){return(t||event).cancelBubble=!0,!0},i.span.childNodes[0].focus(),i.span.childNodes[0].focus(),i.span.onclick=function(t){return(t||event).cancelBubble=!0,!1},i.span.className="",i.span.parentNode.className="";var s=this;i.span.childNodes[0].onkeydown=function(t){t||(t=window.event),13==t.keyCode?(t.cancelBubble=!0,s._stopEdit(window.undefined)):27==t.keyCode&&s._stopEdit(window.undefined,!0),(t||event).cancelBubble=!0},this.callEvent("onEdit",[1,t,this])}},jsonPointer.prototype={text:function(){var t=function(t){for(var i=[],n=0;n<t.length;n++)i.push("{"+e(t[n])+"}");return i.join(",")},e=function(i){var n=[];for(var s in i)"object"==typeof i[s]?s.length?n.push('"'+s+'":['+t(i[s])+"]"):n.push('"'+s+'":{'+e(i[s])+"}"):n.push('"'+s+'":"'+i[s]+'"');return n.join(",")};return"{"+e(this.d)+"}"},get:function(t){return this.d[t]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(t,e,i){var n=this.d[t],s=new jsonPointer;if(n)for(var o=0;o<n.length;o++)s.d=n[o],e.apply(i,[s,o])},get_all:function(){return this.d},sub:function(t){return new jsonPointer(this.d[t],this.d)},sub_exists:function(t){return!!this.d[t]},each_x:function(t,e,i,n,s){var o=this.d[t],l=new jsonPointer(0,this.d);if(o)for(s=s||0;s<o.length;s++)if(o[s][e]&&(l.d=o[s],-1==i.apply(n,[l,s])))return},up:function(t){return new jsonPointer(this.dp,this.d)},set:function(t,e){this.d[t]=e},clone:function(t){return new jsonPointer(this.d,this.dp)},through:function(t,e,i,n,s){var o=this.d[t];if(o.length)for(var l=0;l<o.length;l++){if(null!=o[l][e]&&""!=o[l][e]&&(!i||o[l][e]==i)){var r=new jsonPointer(o[l],this.d);n.apply(s,[r,l])}var a=this.d;this.d=o[l],this.sub_exists(t)&&this.through(t,e,i,n,s),this.d=a}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(t,e){return window.console&&window.console.info&&window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArrayFile(t,e)},dhtmlXTreeObject.prototype._loadJSArrayFile=function(file,callback){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){eval("var z="+xml.responseText),this._loadJSArray(z),callback&&callback.call(this,xml)},dhx4.ajax.get(file,function(t){that.XMLLoader(t.xmlDoc,callback)})},dhtmlXTreeObject.prototype.loadCSV=function(t,e){return window.console&&window.console.info&&window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSV(t,e)},dhtmlXTreeObject.prototype._loadCSV=function(t,e){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var i=this;this.XMLLoader=function(t,e){this._loadCSVString(t.responseText),e&&e.call(this,t)},dhx4.ajax.get(t,function(t){i.XMLLoader(t.xmlDoc,e)})},dhtmlXTreeObject.prototype.loadJSArray=function(t,e){return window.console&&window.console.info&&window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArray(t,e)},dhtmlXTreeObject.prototype._loadJSArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i[t[n][1]]||(i[t[n][1]]=[]),i[t[n][1]].push({id:t[n][0],text:t[n][2]});var s={id:this.rootId},o=function(t,e){if(i[t.id]){t.item=i[t.id];for(var n=0;n<t.item.length;n++)e(t.item[n],e)}};o(s,o),this._loadJSONObject(s,e)},dhtmlXTreeObject.prototype.loadCSVString=function(t,e){return window.console&&window.console.info&&window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSVString(t,e)},dhtmlXTreeObject.prototype._loadCSVString=function(t,e){for(var i=[],n=t.split("\n"),s=0;s<n.length;s++){var o=n[s].split(",");i[o[1]]||(i[o[1]]=[]),i[o[1]].push({id:o[0],text:o[2]})}var l={id:this.rootId},r=function(t,e){if(i[t.id]){t.item=i[t.id];for(var n=0;n<t.item.length;n++)e(t.item[n],e)}};r(l,r),this._loadJSONObject(l,e)},dhtmlXTreeObject.prototype.loadJSONObject=function(t,e){return window.console&&window.console.info&&window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSONObject(t,e)},dhtmlXTreeObject.prototype._loadJSONObject=function(t,e){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var i=new jsonPointer(t);this._parse(i),this._p=i,e&&e()},dhtmlXTreeObject.prototype.loadJSON=function(t,e){return window.console&&window.console.info&&window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSON(t,e)},dhtmlXTreeObject.prototype._loadJSON=function(file,callback){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=function(xml,callback){try{eval("var t="+xml.responseText)}catch(t){return void dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",xml,this])}var p=new jsonPointer(t);this._parse(p),this._p=p,callback&&callback.call(this,xml)},dhx4.ajax.get(file,function(t){that.XMLLoader(t.xmlDoc,callback)})},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var t=['{"id":"'+this.rootId+'", "item":['],e=[],i=0;i<this.htmlNode.childsCount;i++)e.push(this._serializeItemJSON(this.htmlNode.childNodes[i]));return t.push(e.join(",")),t.push("]}"),t.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(t){var e=[];if(t.unParsed)return t.unParsed.text();if(this._selected.length)var i=this._selected[0].id;else i="";var n=t.span.innerHTML;if(n=n.replace(/\"/g,'\\"',n),this._xfullXML?e.push('{ "id":"'+t.id+'", '+(1==this._getOpenState(t)?' "open":"1", ':"")+(i==t.id?' "select":"1",':"")+' "text":"'+n+'", "im0":"'+t.images[0]+'", "im1":"'+t.images[1]+'", "im2":"'+t.images[2]+'" '+(t.acolor?', "aCol":"'+t.acolor+'" ':"")+(t.scolor?', "sCol":"'+t.scolor+'" ':"")+(1==t.checkstate?', "checked":"1" ':2==t.checkstate?', "checked":"-1"':"")+(t.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==t.XMLload?', "child":"1" ':"")):e.push('{ "id":"'+t.id+'", '+(1==this._getOpenState(t)?' "open":"1", ':"")+(i==t.id?' "select":"1",':"")+' "text":"'+n+'"'+(this.XMLsource&&0==t.XMLload?', "child":"1" ':"")),this._xuserData&&t._userdatalist){e.push(', "userdata":[');for(var s=t._userdatalist.split(","),o=[],l=0;l<s.length;l++)o.push('{ "name":"'+s[l]+'" , "content":"'+t.userData["t_"+s[l]]+'" }');e.push(o.join(",")),e.push("]")}if(t.childsCount){e.push(', "item":[');for(o=[],l=0;l<t.childsCount;l++)o.push(this._serializeItemJSON(t.childNodes[l]));e.push(o.join(",")),e.push("]\n")}return e.push("}\n"),e.join("")},window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees),dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(t,e,i){this._idpull[e.id]._attrs=e}},dhtmlXTreeObject.prototype.getAttribute=function(t,e){this._globalIdStorageFind(t);var i=this._idpull[t]._attrs;return i?i[e]:window.undefined},dhtmlXTreeObject.prototype.setAttribute=function(t,e,i){this._globalIdStorageFind(t);var n=this._idpull[t]._attrs||{};n[e]=i,this._idpull[t]._attrs=n},dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(t){if(this._enblkbrd=dhx4.s2b(t),this._enblkbrd){if(_isFF){"absolute"!=(e=window.getComputedStyle(this.parentObject,null).position)&&"relative"!=e&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var e,i=this;(e=document.createElement("INPUT")).className="a_dhx_hidden_input",e.autocomplete="off",window._KHTMLrv&&(e.style.color="white"),this.parentObject.appendChild(e),this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(t){if(i.callEvent("onKeyPress",[(t||window.event).keyCode,t||window.event]))return i._onKeyDown(t||window.event)},this.parentObject.onclick=function(t){(_isFF||_isIE)&&e.select(),(window._KHTMLrv||_isOpera)&&e.focus()}}else this.parentObject.onkeydown=null},dhtmlXTreeObject.prototype._onKeyDown=function(t){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(var e=0;e<this._navKeys.length;e++)if(this._navKeys[e][1]==t.keyCode)return this["_onkey_"+this._navKeys[e][0]].apply(this,[this.getSelectedItemId()]),t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1;return!this._textSearch||this._searchItemByKey(t)},dhtmlXTreeObject.prototype._onkey_up=function(t){var e=this._globalIdStorageFind(t);if(e){var i=this._getPrevVisibleNode(e);i.id!=this.rootId&&(this.focusItem(i.id),this.selectItem(i.id,!1))}},dhtmlXTreeObject.prototype._onkey_down=function(t){var e=this._globalIdStorageFind(t);if(e){var i=this._getNextVisibleNode(e);i.id!=this.rootId&&(this.focusItem(i.id),this.selectItem(i.id,!1))}},dhtmlXTreeObject.prototype._onkey_open=function(t){this.openItem(t)},dhtmlXTreeObject.prototype._onkey_close=function(t){this.closeItem(t)},dhtmlXTreeObject.prototype._onkey_call=function(t){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(t,!0)):this.selectItem(this.getSelectedItemId(),!0)},dhtmlXTreeObject.prototype._onkey_edit=function(t){this.editItem&&this.editItem(t)},dhtmlXTreeObject.prototype._getNextVisibleNode=function(t,e){return!e&&this._getOpenState(t)>0?t.childNodes[0]:t.tr&&t.tr.nextSibling&&t.tr.nextSibling.nodem?t.tr.nextSibling.nodem:t.parentObject?this._getNextVisibleNode(t.parentObject,1):t},dhtmlXTreeObject.prototype._getPrevVisibleNode=function(t){return t.tr&&t.tr.previousSibling&&t.tr.previousSibling.nodem?this._lastVisibleChild(t.tr.previousSibling.nodem):t.parentObject?t.parentObject:t},dhtmlXTreeObject.prototype._lastVisibleChild=function(t){return this._getOpenState(t)>0?this._lastVisibleChild(t.childNodes[t.childsCount-1]):t},dhtmlXTreeObject.prototype._searchItemByKey=function(t){if(8==t.keyCode)return this._textSearchString="",!0;var e=String.fromCharCode(t.keyCode).toUpperCase();return!e.match(/[A-Z,a-z,0-9\ ]/)||(this._textSearchString+=e,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1)},dhtmlXTreeObject.prototype.assignKeys=function(t){this._navKeys=t},dhtmlXTreeObject.prototype.enableKeySearch=function(t){if(this._textSearch=dhx4.s2b(t),this._textSearch){this._textSearchString="";var e=this;this._markItem2=this._markItem,this._markItem=function(t){e._textSearchInProgress||(e._textSearchString=""),e._markItem2(t)}}},dhtmlXTreeObject.prototype.enableLoadingItem=function(t){this.attachEvent("onXLS",this._showFakeItem),this.attachEvent("onXLE",this._hideFakeItem),this._tfi_text=t||"Loading..."},dhtmlXTreeObject.prototype._showFakeItem=function(t,e){if(null!==e&&!this._globalIdStorageFind("fake_load_xml_"+e)){var i=this.XMLsource;this.XMLsource=null,this.insertNewItem(e,"fake_load_xml_"+e,this._tfi_text),this.XMLsource=i}},dhtmlXTreeObject.prototype._hideFakeItem=function(t,e){null!==e&&this.deleteItem("fake_load_xml_"+e)},dhtmlXTreeObject.prototype.isLocked=function(t){return this._locker||this._init_lock(),1==this._locker[t]},dhtmlXTreeObject.prototype._lockItem=function(t,e,i){if(this._locker||this._init_lock(),e){if(1==this._locker[t.id])return;this._locker[t.id]=!0,t.bIm0=t.images[0],t.bIm1=t.images[1],t.bIm2=t.images[2],t.images[0]=this.lico0,t.images[1]=this.lico1,t.images[2]=this.lico2;var n=(s=t.span.parentNode).previousSibling;this.dragger.removeDraggableItem(s),this.dragger.removeDraggableItem(n)}else{if(1!=this._locker[t.id])return;this._locker[t.id]=!1,t.images[0]=t.bIm0,t.images[1]=t.bIm1,t.images[2]=t.bIm2;var s;n=(s=t.span.parentNode).previousSibling;this.dragger.addDraggableItem(s,this),this.dragger.addDraggableItem(n,this)}i||this._correctPlus(t)},dhtmlXTreeObject.prototype.lockItem=function(t,e){this._locker||this._init_lock(),this._lockOn=!1;var i=this._globalIdStorageFind(t);this._lockOn=!0,this._lockItem(i,dhx4.s2b(e))},dhtmlXTreeObject.prototype.setLockedIcons=function(t,e,i){this._locker||this._init_lock(),this.lico0=t,this.lico1=e,this.lico2=i},dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array,this._locker_count="0",this._lockOn=!0,this._globalIdStorageFindA=this._globalIdStorageFind,this._globalIdStorageFind=this._lockIdFind,this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree),this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])},dhtmlXTreeObject.prototype._lockIdFind=function(t,e,i){return this.skipLock||i||1!=this._lockOn||1!=this._locker[t]?this._globalIdStorageFindA(t,e,i):null},dhtmlXTreeObject.prototype._serializeLockItem=function(t){return 1==this._locker[t.id]?"":this._serializeItemA(t)},dhtmlXTreeObject.prototype._serializeLockTree=function(){return this._serializeTreeA().replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")},dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo,dhtmlXTreeObject.prototype._moveNodeTo=function(t,e,i){return(!e.treeNod.isLocked||!e.treeNod.isLocked(e.id))&&this._moveNodeToA(t,e,i)},dhtmlXTreeObject.prototype.lockTree=function(t){dhx4.s2b(t)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)},dhtmlXTreeObject.prototype._initTreeLocker=function(t){if(!this._TreeLocker){this.parentObject.style.overflow="hidden","absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.className="dhx_tree_opacity",e.style.width=this.allTree.offsetWidth+"px",e.style.backgroundColor="#FFFFFF",e.style.height=this.allTree.offsetHeight+"px",this._TreeLocker=e,this.parentObject.appendChild(this._TreeLocker)}},dhtmlXTreeObject.prototype.enableRTL=function(t){var e=dhx4.s2b(t);(e&&!this.rtlMode||!e&&this.rtlMode)&&(this.rtlMode=e,this._switchToRTL(this.rtlMode))},dhtmlXTreeObject.prototype._switchToRTL=function(t){t?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"),this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"),this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"),this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus),this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)},dhtmlXTreeObject.prototype.sortTree=function(t,e,i){var n=this._globalIdStorageFind(t);if(!n)return!1;this._reorderBranch(n,"asc"==e.toString().toLowerCase(),dhx4.s2b(i))},dhtmlXTreeObject.prototype.setCustomSortFunction=function(t){this._csfunca=t},dhtmlXTreeObject.prototype._reorderBranch=function(t,e,i){var n=[],s=t.childsCount;if(s){for(var o=t.childNodes[0].tr.parentNode,l=0;l<s;l++)n[l]=t.childNodes[l],o.removeChild(n[l].tr);var r=this;1==e?this._csfunca?n.sort(function(t,e){return r._csfunca(t.id,e.id)}):n.sort(function(t,e){return t.span.innerHTML.toUpperCase()>e.span.innerHTML.toUpperCase()?1:t.span.innerHTML.toUpperCase()==e.span.innerHTML.toUpperCase()?0:-1}):this._csfunca?n.sort(function(t,e){return r._csfunca(e.id,t.id)}):n.sort(function(t,e){return t.span.innerHTML.toUpperCase()<e.span.innerHTML.toUpperCase()?1:t.span.innerHTML.toUpperCase()==e.span.innerHTML.toUpperCase()?0:-1});for(l=0;l<s;l++)o.appendChild(n[l].tr),t.childNodes[l]=n[l],i&&n[l].unParsed?n[l].unParsed.set("order",e?1:-1):i&&n[l].childsCount&&this._reorderBranch(n[l],e,i);for(l=0;l<s;l++)this._correctPlus(n[l]),this._correctLine(n[l])}},dhtmlXTreeObject.prototype._reorderXMLBranch=function(t){var e=t.getAttribute("order");if("none"!=e){var i=1==e,n=t.childNodes.length;if(n){for(var s=new Array,o=0,l=0;l<n;l++)1==t.childNodes[l].nodeType&&(s[o]=t.childNodes[l],o++);for(l=n-1;0!=l;l--)t.removeChild(t.childNodes[l]);i?s.sort(function(t,e){return t.getAttribute("text")>e.getAttribute("text")?1:t.getAttribute("text")==e.getAttribute("text")?0:-1}):s.sort(function(t,e){return t.getAttribute("text")<e.getAttribute("text")?1:t.getAttribute("text")==e.getAttribute("text")?0:-1});for(l=0;l<o;l++)s[l].setAttribute("order",e),t.appendChild(s[l]);t.setAttribute("order","none")}}},dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],dhtmlXTreeObject.prototype.registerXMLEntity=function(t,e){this._serEnts[this._serEnts.length]=[t,e,new RegExp(t,"g")]},dhtmlXTreeObject.prototype.setSerializationLevel=function(t,e,i,n,s){this._xuserData=dhx4.s2b(t),this._xfullXML=dhx4.s2b(e),this._dtd=s,this._xescapeEntities=dhx4.s2b(i),dhx4.s2b(n)&&(this._apreUC="<![CDATA[",this._apstUC="]]>");for(var o=0;o<this._serEnts.length;o++)this._serEnts[o][2]=new RegExp(this._serEnts[o][0],"g")},dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"";var t='<?xml version="1.0"?>';if(this._dtd&&(t+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),t+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var e=this._idpull[this.rootId]._userdatalist.split(","),i=0;i<e.length;i++)t+='<userdata name="'+e[i]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+e[i]]+this._apstUC+"</userdata>";for(i=0;i<this.htmlNode.childsCount;i++)t+=this._serializeItem(this.htmlNode.childNodes[i]);return t+="</tree>"},dhtmlXTreeObject.prototype._serializeItem=function(t){if(t.unParsed){if(dhx4.isIE)return t.unParsed.d.xml;return(new XMLSerializer).serializeToString(t.unParsed.d)}var e="";if(this._selected.length)var i=this._selected[0].id;else i='"';var n=t.span.innerHTML;if(this._xescapeEntities)for(var s=0;s<this._serEnts.length;s++)n=n.replace(this._serEnts[s][2],this._serEnts[s][1]);if(e=this._xfullXML?'<item id="'+t.id+'" '+(1==this._getOpenState(t)?' open="1" ':"")+(i==t.id?' select="1"':"")+' text="'+n+'" im0="'+t.images[0]+'" im1="'+t.images[1]+'" im2="'+t.images[2]+'" '+(t.acolor?'aCol="'+t.acolor+'" ':"")+(t.scolor?'sCol="'+t.scolor+'" ':"")+(1==t.checkstate?'checked="1" ':2==t.checkstate?'checked="-1"':"")+(t.closeable?'closeable="1" ':"")+(this.XMLsource&&0==t.XMLload?' child="1" ':"")+">":'<item id="'+t.id+'" '+(1==this._getOpenState(t)?' open="1" ':"")+(i==t.id?' select="1"':"")+' text="'+n+'"'+(this.XMLsource&&0==t.XMLload?' child="1" ':"")+">",this._xuserData&&t._userdatalist){var o=t._userdatalist.split(",");for(s=0;s<o.length;s++)e+='<userdata name="'+o[s]+'">'+this._apreUC+t.userData["t_"+o[s]]+this._apstUC+"</userdata>"}for(s=0;s<t.childsCount;s++)e+=this._serializeItem(t.childNodes[s]);return e+="</item>"},dhtmlXTreeObject.prototype.saveSelectedItem=function(t,e){t=t||"",this.setCookie("treeStateSelected"+t,this.getSelectedItemId(),e)},dhtmlXTreeObject.prototype.restoreSelectedItem=function(t){t=t||"";var e=this.getCookie("treeStateSelected"+t);this.selectItem(e,!1)},dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(t,e){this.assMode=dhx4.s2b(t),this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(t,e,i){e||(e=this),e.parentObject.treeNod.oldOnSelect(t,e,i),e.parentObject.treeNod.assMode&&e.parentObject.treeNod.saveSelectedItem(e.parentObject.treeNod.assCookieName)}),this.assCookieName=e},dhtmlXTreeObject.prototype.saveState=function(t,e){if((n=this._escape(this.serializeTree())).length>4e3){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+t,Math.ceil(n.length/4e3));for(var i=0;i<Math.ceil(n.length/4e3);i++)this.setCookie("treeStatex"+t+"x"+i,n.substr(4e3*i,4e3),e)}else this.setCookie("treeStatex"+t,n,e);var n;return!!(n=this.getCookie("treeStatex"+t))||(this.setCookie("treeStatex"+t,"",e),!1)},dhtmlXTreeObject.prototype.loadState=function(t){var e=this.getCookie("treeStatex"+t);if(!e)return!1;if(e.length){if(e.toString().length<4){for(var i="",n=0;n<e;n++)i+=this.getCookie("treeStatex"+t+"x"+n);e=i}this.parse("utf8"==this.utfesc?decodeURI(e):unescape(e))}return!0},dhtmlXTreeObject.prototype.setCookie=function(t,e,i){var n=t+"="+e+(i?"; "+i:"");document.cookie=n},dhtmlXTreeObject.prototype.getCookie=function(t){var e=t+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(e);if(-1!=i){i+=e.length;var n=document.cookie.indexOf(";",i);return-1==n&&(n=document.cookie.length),document.cookie.substring(i,n)}}},dhtmlXTreeObject.prototype.saveOpenStates=function(t,e){for(var i=[],n=0;n<this.htmlNode.childsCount;n++)i=i.concat(this._collectOpenStates(this.htmlNode.childNodes[n]));i=i.join(this.dlmtr),this.setCookie("treeOpenStatex"+t,i,e)},dhtmlXTreeObject.prototype.loadOpenStates=function(t){for(var e=0;e<this.htmlNode.childsCount;e++)this._xcloseAll(this.htmlNode.childNodes[e]);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var i=getCookie("treeOpenStatex"+t);if(i){var n=i.split(this.dlmtr);for(e=0;e<n.length;e++){var s=this._globalIdStorageFind(n[e]);if(s){if(this.XMLsource&&!s.XMLload&&s.id!=this.rootId)return void this._delayedLoad(s,"loadOpenStates('"+t+"')");this.openItem(n[e])}}}this.callEvent("onAllOpenDynamic",[])},dhtmlXTreeObject.prototype._delayedLoad=function(t,e){this.afterLoadMethod=e,this.onLoadReserve=this.onXLE,this.onXLE=this._delayedLoadStep2,this._loadDynXML(t.id)},dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve,window.setTimeout(function(){dhtmlx.temp=tree,eval("dhtmlx.temp."+tree.afterLoadMethod)},100),tree.onXLE&&tree.onXLE(tree),tree.callEvent("onXLE",[tree])},dhtmlXTreeObject.prototype._collectOpenStates=function(t){var e=[];if(1==this._getOpenState(t)){e.push(t.id);for(var i=0;i<t.childsCount;i++)e=e.concat(this._collectOpenStates(t.childNodes[i]))}return e},dhtmlXTreeObject.prototype.openAllItemsDynamic=function(t){this.ClosedElem=new Array,this.G_node=null;var e=this._globalIdStorageFind(t||this.rootId);e.id!=this.rootId&&0!=this.getOpenState(e.id)&&this.openItem(t),this._openAllNodeChilds(e,0),this.ClosedElem.length>0&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))},dhtmlXTreeObject.prototype._openAllNodeChilds=function(t){(0==t.XMLload||t.unParsed)&&this.ClosedElem.push(t);for(var e=0;e<t.childsCount;e++)this._getOpenState(t.childNodes[e])<0&&this._HideShow(t.childNodes[e],2),t.childNodes[e].childsCount>0&&this._openAllNodeChilds(t.childNodes[e]),(0==t.childNodes[e].XMLload||t.childNodes[e].unParsed)&&this.ClosedElem.push(t.childNodes[e])},dhtmlXTreeObject.prototype._loadAndOpen=function(t){t.G_node&&(t._openItem(t.G_node),t._openAllNodeChilds(t.G_node),t.G_node=null),t.ClosedElem.length>0&&(t.G_node=t.ClosedElem.shift()),t.G_node?t.G_node.unParsed?t.reParse(t.G_node):window.setTimeout(function(){t._loadDynXML(t.G_node.id)},100):(t.onXLE=t.onLoadReserve,t.onXLE&&t.onXLE(t),t.callEvent("onAllOpenDynamic",[t]))},dhtmlXTreeObject.prototype.openItemsDynamic=function(t,e){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=dhx4.s2b(e),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=t.split(",").reverse(),this._stepOpen(this))},dhtmlXTreeObject.prototype._stepOpen=function(t){if(!t.ClosedElem.length)return t.onXLE=t.onLoadReserve,t._opnItmsDnmcFlg&&t.selectItem(t.G_node,!0),t.onXLE&&arguments[1]&&t.onXLE.apply(t,arguments),void t.callEvent("onOpenDynamicEnd",[]);t.G_node=t.ClosedElem.pop(),t.skipLock=!0;var e=t._globalIdStorageFind(t.G_node);e&&(0===e.XMLload?t.openItem(t.G_node):(t.openItem(t.G_node),t._stepOpen(t))),t.skipLock=!1},dhtmlXTreeView.prototype.modules={},dhtmlXTreeView.prototype.setSkin=function(t){this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"")+" dhxtreeview_"+t,this.conf.skin=t,this.conf.icon_width=dhx4.readFromCss("dhxtreeview_"+this.conf.skin+" dhxtreeview_icon_width"),this.conf.ofs="dhx_skyblue"==this.conf.skin?{w:1,h:0}:{w:0,h:0}},dhtmlXTreeView.prototype.setItemText=function(t,e){null!=this.items[t]&&(this.items[t].text=e,this.items[t].item.firstChild.childNodes[this.conf.idx.text].innerHTML=e,this._callPublicEvent("onTextChange",[t,e]))},dhtmlXTreeView.prototype.getItemText=function(t){return this.items[t].text},dhtmlXTreeView.prototype.getParentId=function(t){return this.items[t].pId},dhtmlXTreeView.prototype.getSubItems=function(t){var e=[];for(var i in this.items)this.items[i].pId==t&&e.push(i);return e},dhtmlXTreeView.prototype._refreshItemHtml=function(t,e,i){this.items[t].item.firstChild.innerHTML=this._getItemHtml(t),1==e&&this._signUpdate(t),1==i&&this._iconUpdate(t)},dhtmlXTreeView.prototype._getItemHtml=function(t){var e=[],i=0;for(var n in this.conf.idx){var s=this["_itemHtml_"+n](t,i);!1!==s.nodeText&&(e.push(s.nodeText),i+=s.nodeIndex)}return e.join("")},dhtmlXTreeView.prototype._getIconOfs=function(t,e){return(this.items[t].level-1+e)*this.conf.icon_width},dhtmlXTreeView.prototype._itemHtml_text=function(t,e){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_label' style='left:"+this._getIconOfs(t,e)+"px;'>"+this.items[t].text+"</div>"}},dhtmlXTreeView.prototype.setUserData=function(t,e,i){var n=this.items[t];n&&(n.userdata[e]=i)},dhtmlXTreeView.prototype.getUserData=function(t,e){var i=this.items[t];return i&&!e?i.userdata:i?i.userdata[e]||null:null},dhtmlXTreeView.prototype.silent=function(t){this.conf.silent=!0,"function"==typeof t&&t.apply(window,[this]),this.conf.silent=!1},dhtmlXTreeView.prototype._callPublicEvent=function(){return 0!=this.conf.silent||this.callEvent.apply(this,arguments)},"function"==typeof window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachTreeView=function(t){this.callEvent("_onBeforeContentAttach",["treeview"]);var e=document.createElement("DIV");e.style.position="relative",e.style.overflow="hidden",e.style.width="100%",e.style.height="100%",this._attachObject(e);var i={parent:e,skin:this.conf.skin};if(null!=t&&"object"==typeof t)for(var n in t)void 0===i[n]&&(i[n]=t[n]);return this.dataType="treeview",this.dataObj=new dhtmlXTreeView(i),"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(e.className+=" dhxtreeview_with_border",this.dataObj.conf.adjust_base=!0,this.dataObj.setSizes()),i.parent=null,i=e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXTreeView.prototype.modules.chbx={init:"_chbxInit"},dhtmlXTreeView.prototype.enableCheckboxes=function(t){if(t=1==t,this.conf.enable_chbx!=t){this.conf.enable_chbx=t,this._chbxUpdIndex();for(var e in this.items)this._refreshItemHtml(e,!0,!0)}},dhtmlXTreeView.prototype.getAllChecked=function(t){return this._chbxGetCheckedBranch(t,!0)},dhtmlXTreeView.prototype.getAllUnchecked=function(t){return this._chbxGetCheckedBranch(t,!1)},dhtmlXTreeView.prototype.checkItem=function(t){this._chbxSetChecked(t,!0,!0)},dhtmlXTreeView.prototype.uncheckItem=function(t){this._chbxSetChecked(t,!1,!0)},dhtmlXTreeView.prototype.isItemChecked=function(t){return null==this.items[t]?null:1==this.items[t].checked},dhtmlXTreeView.prototype.enableCheckbox=function(t){this._chbxSetEnabled(t,!0)},dhtmlXTreeView.prototype.disableCheckbox=function(t){this._chbxSetEnabled(t,!1)},dhtmlXTreeView.prototype.isCheckboxEnabled=function(t){return 1==this.items[t].chbx_enabled},dhtmlXTreeView.prototype.showCheckbox=function(t){this._chbxSetVisible(t,!0)},dhtmlXTreeView.prototype.hideCheckbox=function(t){this._chbxSetVisible(t,!1)},dhtmlXTreeView.prototype.isCheckboxVisible=function(t){return 1==this.items[t].chbx_visible},dhtmlXTreeView.prototype._chbxInit=function(t){this.enableCheckboxes(t.checkboxes),this.attachEvent("_onItemRendered",function(t,e){this.items[t].checked=window.dhx4.s2b(e.checked);var i=e.checkbox||"enabled,visible";this.items[t].chbx_enabled=null==i.match(/disabled/),this.items[t].chbx_visible=null==i.match(/hidden/)}),this.attachEvent("_onTreeClick",function(t,e){if(1==this.conf.enable_chbx){var i=t.target||t.srcElement;if("i"==i.tagName.toLowerCase()&&(i=i.parentNode),null!=(i.parentNode.className||"").match(/dhxtreeview_item_text/)&&i==i.parentNode.childNodes[this.conf.idx.chbx]){var n=i.parentNode.parentNode._itemId;1==this.items[n].chbx_enabled&&this._chbxSetChecked(n,!this.items[n].checked,!0),e.stop=!0}}}),t=null},dhtmlXTreeView.prototype._itemHtml_chbx=function(t,e){var i={nodeIndex:0,nodeText:!1};return 1==this.conf.enable_chbx&&(1==this.items[t].chbx_visible&&(i.nodeIndex=1),i.nodeText="<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(t,e)+"px;"+(i.nodeIndex>0?"":"display:none;")+"'>"+this._chbxGenIcon(t)+"</div>"),i},dhtmlXTreeView.prototype._chbxSetChecked=function(t,e){if(1==this.conf.enable_chbx&&(e=1==e,this.items[t].checked!=e)){if(!0!==this._callPublicEvent("onBeforeCheck",[t,1==this.items[t].checked]))return;this.items[t].checked=e,this.items[t].item.childNodes[0].childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(t),this._callPublicEvent("onCheck",[t,e])}},dhtmlXTreeView.prototype._chbxSetEnabled=function(t,e){this.items[t].chbx_enabled!=e&&(this.items[t].chbx_enabled=e,this.items[t].item.firstChild.childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(t))},dhtmlXTreeView.prototype._chbxSetVisible=function(t,e){this.items[t].chbx_visible!=e&&(this.items[t].chbx_visible=e,this._refreshItemHtml(t,!0,!0))},dhtmlXTreeView.prototype._chbxGenIcon=function(t){var e=this.conf.icons["chbx_"+(this.items[t].chbx_enabled?"":"dis_")+(this.items[t].checked?"1":"0")];return'<i class="'+this.conf.icons.prefix+" "+e+'"></i>'},dhtmlXTreeView.prototype._chbxUpdIndex=function(){1==this.conf.enable_chbx?this.conf.idx={sign:0,chbx:1,icon:2,text:3}:this.conf.idx={sign:0,icon:1,text:2}},dhtmlXTreeView.prototype._chbxGetCheckedBranch=function(t,e){var i=[];for(var n in this.items)this.items[n].pId==t&&(this.items[n].checked==e&&i.push(n),1==this.items[n].kids&&(i=i.concat(this._chbxGetCheckedBranch(n,e))));return i},dhtmlXTreeView.prototype.modules.sign={init:"_signInit"},dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(t,e){if(1!=e.stop){var i=t.target||t.srcElement;"i"==i.tagName.toLowerCase()&&(i=i.parentNode),null!=(i.parentNode.className||"").match(/dhxtreeview_item_text/)&&i==i.parentNode.childNodes[this.conf.idx.sign]&&(this._openCloseItem(i.parentNode.parentNode._itemId,!0),e.stop=!0)}})},dhtmlXTreeView.prototype._signUpdate=function(t){var e=this.items[t],i=e.item.childNodes[0].childNodes[this.conf.idx.sign];1==e.kids||1==e.kids_request?i.innerHTML='<i class="'+this.conf.icons.prefix+" "+this.conf.icons[e.opened||e.half_opened?"minus":"plus"]+'"></i>':i.innerHTML="",e=i=null},dhtmlXTreeView.prototype._itemHtml_sign=function(t,e){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(t,e)+"px;'></div>"}},dhtmlXTreeView.prototype.modules.selection={init:"_selectionInit"},dhtmlXTreeView.prototype.selectItem=function(t){if(1==this.conf.msel){var e={};t instanceof Array||(t=[t]);for(var i=0;i<t.length;i++)e[t[i]]=!0;for(var n in this.conf.selected)1==e[n]?delete e[n]:this._setSelected(n,!1);for(var n in e)this._setSelected(n,!0)}else null==t||1==this.conf.selected[t]||t instanceof Array||0==this._clearSelection(t)&&this._setSelected(t,!0)},dhtmlXTreeView.prototype.unselectItem=function(t){if(1==this.conf.msel){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)1==this.conf.selected[t[e]]&&this._setSelected(t[e],!1)}else null!=t&&this._setSelected(t,!1)},dhtmlXTreeView.prototype.getSelectedId=function(){var t=[];for(var e in this.conf.selected)t.push(e);return this.conf.msel?t:t[0]||null},dhtmlXTreeView.prototype.enableMultiselect=function(t){t=1==t,this.conf.msel!=t&&(this._clearSelection(),this.conf.msel=t)},dhtmlXTreeView.prototype._selectionInit=function(t){this.conf.msel=window.dhx4.s2b(t.multiselect),this.attachEvent("_onTreeClick",function(t,e){if(1!=e.stop){var i=t.target||t.srcElement;"i"==i.tagName.toLowerCase()&&(i=i.parentNode);var n=null;null!=i.className.match(/dhxtreeview_item_label/)?n=i.parentNode.parentNode._itemId:null!=i.className.match(/^dhxtreeview_item_text/)?n=i.parentNode._itemId:null!=i.className.match(/^dhxtreeview_item_icon/)&&(n=i.parentNode.parentNode._itemId),null!=n&&(1==this.conf.msel?1!=t.ctrlKey&&1!=this.conf.mac_cmd_key||0!=t.shiftKey||0!=t.altKey?0==t.ctrlKey&&0==t.shiftKey&&0==t.altKey&&0==this.conf.mac_cmd_key&&0==this._clearSelection(n)&&this._setSelected(n,!0):this._setSelected(n,!this._isSelected(n)):0==this._clearSelection(n)&&this._setSelected(n,!0))}})},dhtmlXTreeView.prototype._setSelected=function(t,e){1==e?1!=this.conf.selected[t]&&(this.items[t].item.childNodes[0].className+=" dhxtreeview_item_text_selected",this.conf.selected[t]=!0,this._callPublicEvent("onSelect",[t,!0])):1==this.conf.selected[t]&&(this.items[t].item.childNodes[0].className=String(this.items[t].item.childNodes[0].className).replace(/\s*dhxtreeview_item_text_selected/gi,""),delete this.conf.selected[t],this._callPublicEvent("onSelect",[t,!1]))},dhtmlXTreeView.prototype._clearSelection=function(t){var e=!1;for(var i in this.conf.selected)null!=t&&i==t?e=!0:this._setSelected(i,!1);return e},dhtmlXTreeView.prototype._isSelected=function(t){return 1==this.conf.selected[t]},dhtmlXTreeView.prototype.modules.icons={init:"_iconModuleInit"},dhtmlXTreeView.prototype.setItemIcons=function(t,e){if(null==e&&null!=this.items[t].icons)delete this.items[t].icons;else if(null!=e){null==this.items[t].icons&&(this.items[t].icons={});for(var i in e)null!=e[i]?this.items[t].icons[i]=e[i]:null==e[i]&&null!=this.items[t].icons[i]&&delete this.items[t].icons[i]}this._iconUpdate(t)},dhtmlXTreeView.prototype.setIconColor=function(t,e){var i=this.items[t].item.firstChild.childNodes[this.conf.idx.icon].firstChild;null==e?null!=this.items[t].icon_color&&(delete this.items[t].icon_color,i.style.color="inherit"):this.items[t].icon_color!=e&&(this.items[t].icon_color=e,i.style.color=e),i=null},dhtmlXTreeView.prototype.setIconset=function(t){null!=this.icons[t]&&1==this.icons[t].r&&(this.conf.icons=this.icons[t])},dhtmlXTreeView.prototype._iconModuleInit=function(){this.attachEvent("_onItemRendered",function(t,e){null!=e.icons&&(this.items[t].icons=e.icons),null!=e.icon_color&&(this.items[t].icon_color=e.icon_color)})},dhtmlXTreeView.prototype._iconConf=function(t){var e=this.items[t].icons||{};for(var i in{folder_opened:1,folder_closed:1,file:1})void 0===e[i]&&(e[i]=this.conf.icons[i]);return e},dhtmlXTreeView.prototype._iconHtml=function(t,e){var i=['class="'+this.conf.icons.prefix+" "+e+'"'];return null!=this.items[t].icon_color&&i.push('style="color:'+this.items[t].icon_color+';"'),"<i "+i.join(" ")+"></i>"},dhtmlXTreeView.prototype._itemHtml_icon=function(t,e){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(t,e)+"px;'>"+this._iconHtml(t,this._iconConf(t).file)+"</div>"}},dhtmlXTreeView.prototype._iconUpdate=function(t){var e=this.items[t],i=this._iconConf(t),n=1==e.kids||1==e.kids_request?i[e.opened?"folder_opened":"folder_closed"]:i.file;e.item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML=this._iconHtml(t,n),e=null},dhtmlXTreeView.prototype.icons={tree_native:{r:!0,prefix:"dhxtreeview_icon",plus:"dhxtreeview_icon_plus",minus:"dhxtreeview_icon_minus",file:"dhxtreeview_icon_file",folder_opened:"dhxtreeview_icon_folder_opened",folder_closed:"dhxtreeview_icon_folder_closed",loading:"dhxtreeview_icon_loading",chbx_0:"dhxtreeview_icon_chbx_0",chbx_1:"dhxtreeview_icon_chbx_1",chbx_dis_0:"dhxtreeview_icon_chbx_dis_0",chbx_dis_1:"dhxtreeview_icon_chbx_dis_1"},font_awesome:{r:!(1==window.dhx4.isIE6||1==window.dhx4.isIE7),prefix:"fa",plus:"fa-caret-right",minus:"fa-caret-down",file:"fa-file-o",folder_opened:"fa-folder-open-o",folder_closed:"fa-folder-o",loading:"fa-refresh fa-spin",chbx_0:"fa-square-o",chbx_1:"fa-check-square-o",chbx_dis_0:"fa-square-o dhx-disabled",chbx_dis_1:"fa-check-square-o dhx-disabled"}},dhtmlXTreeView.prototype.modules.loading={init:"_loadingInit",unload:"_loadingUnload"},dhtmlXTreeView.prototype._loadingInit=function(t){window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tree",{struct:!0}),this.conf.root_id=void 0===t.root_id||null==t.root_id?"0":t.root_id,this._dhxdataload.onBeforeXLS=function(t){return null==this.conf.autoload.url&&(this.conf.autoload.url=t),{url:t.replace(/\{id\}/gi,this.conf.root_id)}}},dhtmlXTreeView.prototype._loadingUnload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear")},dhtmlXTreeView.prototype._initObj=function(t,e,i,n){for(var s=0;s<t.length;s++){var o=t[s].id;null==o&&(o="dhxtreeview_id_"+window.dhx4.newId()),null==this.items[o]&&this._addItem(o,i,t[s]),null!=t[s].items&&this._initObj(t[s].items,null,o,!0)}1!=n&&this._fixAreaWidth()},dhtmlXTreeView.prototype._xmlToObj=function(t,e){1!=e&&(t=t.getElementsByTagName("tree")[0]);for(var i=[],n=0;n<t.childNodes.length;n++){var s=t.childNodes[n];if("item"==(s.tagName||"").toLowerCase()){for(var o={},l=0;l<s.attributes.length;l++)o[s.attributes[l].name]=s.attributes[l].value;if(s.childNodes.length>0){(e=this._xmlToObj(s,!0)).length>0&&(o.items=e);for(l=0;l<s.childNodes.length;l++){var r=(s.childNodes[l].tagName||"").toLowerCase();if(1=={icons:1,userdata:1}[r]){null==o[r]&&(o[r]={});for(var a=0;a<s.childNodes[l].attributes.length;a++){var h=s.childNodes[l].attributes[a].name;null==o[r][h]&&(o[r][h]=s.childNodes[l].attributes[a].value)}}n2=null}}i.push(o)}s=null}return i},dhtmlXTreeView.prototype.modules.dnd={init:"_dndInit",unload:"_dndUnload"},dhtmlXTreeView.prototype.enableDragAndDrop=function(t){this.conf.enable_dnd=window.dhx4.s2b(t)},dhtmlXTreeView.prototype._dndInit=function(t){var e=this;this.enableDragAndDrop(t.dnd),this.conf.dnd=null,this._dndOnMouseDown=function(t){if(1==e.conf.enable_dnd){if(void 0!==(t=t||event).button&&t.button>=2)return!1;for(var i=null,n=null,s=t.target||t.srcElement,o=window.dhx4.absLeft(s)+(void 0===t.offsetX?t.layerX:t.offsetX)-t.clientX,l=window.dhx4.absTop(s)+(void 0===t.offsetY?t.layerY:t.offsetY)-t.clientY;null!=s&&s!=e.cont;)null!=(s.className||"").match(/dhxtreeview_item/)&&null!=s._itemId?(i=s._itemId,n=s._treeId,s=null):s=s.parentNode;s=null,null!=i&&(e.conf.dnd={inited:!1,id:i,treeId:n,selected:1==e.conf.selected[i],tid:null,drop:{},x:t.clientX,y:t.clientY,ofs_x:o,ofs_y:l,zi:window.dhx4.newId(),scroll:!1,scroll_ofs:5,scroll_time:30,scroll_tm:null,kids:{},idx:{}},e._dndInitEvents())}},this._dndOnMouseMove=function(t){if(t=t||event,1!=e.conf.dnd.inited){if(!(Math.abs(e.conf.dnd.x-t.clientX)>=15||Math.abs(e.conf.dnd.y-t.clientY)>=15))return;if(!0!==e._callPublicEvent("onBeforeDrag",[e.conf.dnd.id]))return;e.conf.dnd.inited=!0,e.cont.className+=" dhxtreeview_dnd_mode",e._dndInitDraggedObj(),e._dndCollectKids(e.conf.dnd.id),e._dndCollectIndexes(e.area),0==e._clearSelection(e.conf.dnd.id)&&e._setSelected(e.conf.dnd.id,!0),e.items[e.conf.dnd.id].item.className+=" dhxtreeview_item_dragged",document.body.className+=" dhxtreeview_dnd_mode",e.conf.dnd.cont={x1:window.dhx4.absLeft(e.base),y1:window.dhx4.absTop(e.base)},e.conf.dnd.cont.x2=e.conf.dnd.cont.x1+e.base.offsetWidth,e.conf.dnd.cont.y2=e.conf.dnd.cont.y1+e.base.offsetHeight}e.conf.dnd.x=t.clientX,e.conf.dnd.y=t.clientY,e._dndAdjustDraggedObj();var i=!0;e.cont.scrollHeight>e.cont.clientHeight&&e.conf.dnd.x>=e.conf.dnd.cont.x1&&e.conf.dnd.x<=e.conf.dnd.cont.x2&&(e.cont.scrollTop>0&&e.conf.dnd.y>=e.conf.dnd.cont.y1&&e.conf.dnd.y<=e.conf.dnd.cont.y1+10?(e._dndScroll("up"),i=!1):e.cont.scrollTop+e.cont.clientHeight<e.cont.scrollHeight&&e.conf.dnd.y<=e.conf.dnd.cont.y2&&e.conf.dnd.y>=e.conf.dnd.cont.y2-10&&(e._dndScroll("down"),i=!1)),1==i&&1==e.conf.dnd.scroll&&e._dndScroll("stop");var n=t.target||t.srcElement;if(null==n.parentNode||null==(n.parentNode.className||"").match(/dhxtreeview_kids_cont/)){var s=!1,o=null,l=null;if(null!=n.className&&(null!=n.className.match(/dhxtreeview_item_[li]/)?(o=n.parentNode.parentNode._itemId,l=n.parentNode.parentNode._treeId):null!=n.className.match(/dhxtreeview_item_[t]/)&&(o=n.parentNode._itemId,l=n.parentNode._treeId)),null==o||l==e.conf.dnd.treeId){if(e.conf.dnd.id!=o&&1!=e.conf.dnd.kids[o]||(o=null),null!=o){var r=e.items[o].item.firstChild.offsetHeight,a=Math.max(Math.floor(3*Math.min(t.layerY||t.offsetY,r)/r),0);0==a?e.items[o].item.previousSibling==e.items[e.conf.dnd.id].item&&(a=null):1==a?e.items[e.conf.dnd.id].pId==o?a=null:1==e.items[o].kids&&e.items[o].item.lastChild.firstChild.firstChild==e.items[e.conf.dnd.id].item?a=null:e.items[o].opened:2==a&&(1==e.items[o].opened?a=null:e.items[o].item.nextSibling==e.items[e.conf.dnd.id].item&&(a=null)),a!=e.conf.dnd.ofs&&(e.conf.dnd.ofs=a,s=!0)}if(o!=e.conf.dnd.tid&&(null!=e.conf.dnd.tid&&e._dndUpdateTargetCss(e.conf.dnd.tid,!1),null!=o&&(s=!0),e.conf.dnd.tid=o),1==s){var h=!1;if(null!=a){var d={id:e.conf.dnd.id,pId:e.items[o].pId||null,index:null,idxOfs:e.items[e.conf.dnd.id].pId==e.items[o].pId&&e.conf.dnd.idx[e.conf.dnd.id]<e.conf.dnd.idx[o]?-1:0};0==a||2==a?d.index=e.conf.dnd.idx[o]+(2==a?1:0)+d.idxOfs:1==a&&(d.pId=o,d.index=null==e.items[o].item.lastChild.className.match(/dhxtreeview_kids_cont/)?0:e.items[o].item.lastChild.firstChild.childNodes.length),e.conf.dnd.drop.id==d.id&&e.conf.dnd.drop.pId==d.pId&&e.conf.dnd.drop.index==d.index||(e.conf.dnd.drop=d,!0===e._callPublicEvent("onDragOver",[e.conf.dnd.drop.id,e.conf.dnd.drop.pId,e.conf.dnd.drop.index])&&(h=!0))}1!=h&&(e.conf.dnd.ofs=a=null),e._dndUpdateTargetCss(o,h)}}}else n=null},this._dndOnMouseUp=function(t){if(!(void 0!==(t=t||event).button&&t.button>=2)){if(e._dndUnloadEvents(),e._dndUnloadDraggedObj(),1==e.conf.dnd.scroll&&e._dndScroll("stop"),null!=e.cont.className.match(/dhxtreeview_dnd_mode/gi)&&(e.cont.className=String(e.cont.className).replace(/\s*dhxtreeview_dnd_mode/gi,"")),null!=e.conf.dnd.tid&&e._dndUpdateTargetCss(e.conf.dnd.tid,!1),1==e.conf.dnd.inited&&(e.items[e.conf.dnd.id].item.className=String(e.items[e.conf.dnd.id].item.className).replace(/\s*dhxtreeview_item_dragged/gi,""),document.body.className=String(document.body.className).replace(/\s*dhxtreeview_dnd_mode/,""),null!=e.conf.dnd.tid&&null!=e.conf.dnd.ofs&&!0===e._callPublicEvent("onBeforeDrop",[e.conf.dnd.drop.id,e.conf.dnd.drop.pId,e.conf.dnd.drop.index]))){var i,n=e.items[e.conf.dnd.id],s=e.items[e.conf.dnd.tid],o=null!=n.pId?e.items[n.pId]:null;if(1==e.conf.dnd.ofs){var l=!1;0==s.kids&&(e._initKidsNode(s.id),l=!0),s.item.lastChild.firstChild.appendChild(n.item),1==l&&e._openCloseItem(s.id,!1),n.pId=s.id,i=s.level+1-n.level}else 0!=e.conf.dnd.ofs&&2!=e.conf.dnd.ofs||(0==e.conf.dnd.ofs?s.item.parentNode.insertBefore(n.item,s.item):null!=s.item.nextSibling?s.item.parentNode.insertBefore(n.item,s.item.nextSibling):s.item.parentNode.appendChild(n.item),n.pId=s.pId,i=s.level-n.level);if(0!=i){e.conf.dnd.kids[n.id]=!0;for(var r in e.conf.dnd.kids)e.items[r].level+=i,e._refreshItemHtml(r,1==e.items[r].kids,!0)}null!=o&&1==o.kids&&0==o.item.lastChild.firstChild.childNodes.length&&(e._clearKidsNode(o.id),o.opened=!1),n=s=o=null,e._fixAreaWidth(),e._callPublicEvent("onDrop",[e.conf.dnd.drop.id,e.conf.dnd.drop.pId,e.conf.dnd.drop.index])}window.dhx4.zim.clear(e.conf.dnd.zi),e.conf.dnd=null}},this._dndOnContextMenu=function(t){if(1==e.conf.dnd.inited)return t=t||event,t.cancelBubble=!0,t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("oncontextmenu",this._dndOnContextMenu))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("oncontextmenu",this._dndOnContextMenu))},this._dndInitDraggedObj=function(){this.conf.dnd.dragged=document.createElement("DIV"),this.conf.dnd.dragged.className="dhxtreeview_dragged_obj_"+this.conf.skin,this.conf.dnd.dragged.style.zIndex=window.dhx4.zim.reserve(this.conf.dnd.zi),document.body.appendChild(this.conf.dnd.dragged),this.conf.dnd.dragged.innerHTML=this.getItemText(this.conf.dnd.id)},this._dndAdjustDraggedObj=function(){this.conf.dnd.dragged.style.left=this.conf.dnd.x+this.conf.dnd.ofs_x+12+"px",this.conf.dnd.dragged.style.top=this.conf.dnd.y+this.conf.dnd.ofs_y+18+"px"},this._dndUnloadDraggedObj=function(){null!=this.conf.dnd.dragged&&(document.body.removeChild(this.conf.dnd.dragged),this.conf.dnd.dragged=null)},this._dndUpdateTargetCss=function(t,e){var i=this.items[t].item.childNodes[0];if(null==this.conf.dnd.ofs&&(e=!1),1==e){if(i.className=String(i.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs),null==i.nextSibling||null==i.nextSibling.className.match(/dhxtreeview_drop_preview/)){var n=document.createElement("DIV");n.className="dhxtreeview_drop_preview",n.style.left=i.lastChild.previousSibling.style.left,null==i.nextSibling?i.parentNode.appendChild(n):i.parentNode.insertBefore(n,i.nextSibling),n=null}i.nextSibling.className=String(i.nextSibling.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs)}else null!=i.className.match(/dhxtreeview_drop_\d/)&&(i.className=String(i.className).replace(/\s*dhxtreeview_drop_\d/gi,""),null!=i.nextSibling&&null!=i.nextSibling.className.match(/dhxtreeview_drop_preview/)&&i.parentNode.removeChild(i.nextSibling));i=null},this._dndCollectKids=function(t){for(var e in this.items)this.items[e].pId==t&&(this.conf.dnd.kids[e]=!0,1==this.items[e].kids&&this._dndCollectKids(e))},this._dndCollectIndexes=function(t){for(var e=0;e<t.childNodes.length;e++)this.conf.dnd.idx[t.childNodes[e]._itemId]=e,null!=t.childNodes[e].lastChild.className.match(/dhxtreeview_kids_cont/)&&this._dndCollectIndexes(t.childNodes[e].lastChild.firstChild)},this._dndScroll=function(t,i){if("stop"!=t){if(1==e.conf.dnd.scroll){if(1!=i)return}else e.conf.dnd.scroll=!0;var n=!1;"up"==t?(e.cont.scrollTop=Math.max(0,e.cont.scrollTop-e.conf.dnd.scroll_ofs),0==e.cont.scrollTop&&(n=!0)):(e.cont.scrollTop=Math.min(e.cont.scrollHeight-e.cont.clientHeight,e.cont.scrollTop+e.conf.dnd.scroll_ofs),e.cont.scrollTop+e.cont.clientHeight==e.cont.scrollHeight&&(n=!0)),1!=n&&(e.conf.dnd.scroll_tm=window.setTimeout(function(){e._dndScroll(t,!0)},e.conf.dnd.scroll_time))}else 1==e.conf.dnd.scroll&&(e.conf.dnd.scroll_tm&&window.clearTimeout(e.conf.dnd.scroll_tm),e.conf.dnd.scroll=!1)},"function"==typeof window.addEventListener?this.cont.addEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.attachEvent("onmousedown",this._dndOnMouseDown),this._dndUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.detachEvent("onmousedown",this._dndOnMouseDown),e=null},t=null},dhtmlXTreeView.prototype.modules.ctx={init:"_ctxInit",unload:"_ctxUnload"},dhtmlXTreeView.prototype.enableContextMenu=function(t){this.conf.ctx=window.dhx4.s2b(t)},dhtmlXTreeView.prototype._ctxInit=function(t){var e=this;this._ctxCall=function(t){if(1==e.conf.ctx){var i=(t=t||event).target||t.srcElement;"i"==i.tagName.toLowerCase()&&(i=i.parentNode);var n=i.parentNode._itemId||i.parentNode.parentNode._itemId,s=window.dhx4.absLeft(i)+(void 0===t.offsetX?t.layerX:t.offsetX),o=window.dhx4.absTop(i)+(void 0===t.offsetY?t.layerY:t.offsetY);return null!=n&&!0!==e._callPublicEvent("onContextMenu",[n,s,o,t])?(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1):void 0}},"function"==typeof window.addEventListener?this.cont.addEventListener("contextmenu",this._ctxCall,!1):this.cont.attachEvent("oncontextmenu",this._ctxCall),this._ctxUnload=function(){"function"==typeof window.addEventListener?this.cont.removeEventListener("contextmenu",this._ctxCall,!1):this.cont.detachEvent("oncontextmenu",this._ctxCall),e=null},this.enableContextMenu(t.context_menu)},dhtmlXTreeView.prototype.modules.dynload={init:"_dynLoadInit"},dhtmlXTreeView.prototype._dynLoadInit=function(){this.attachEvent("_onItemInited",function(t,e){if(this.items[t].kids_request=window.dhx4.s2b(e.kids),1==this.items[t].kids_request&&this._initKidsNode(t),1==this.items[t].opened&&1==this.items[t].kids_request){var i=this;window.setTimeout(function(){i._dynLoadRequest(t),i=null},100)}}),this.attachEvent("_onBeforeOpen",function(t){return 1==this.items[t].opened||1!=this.items[t].kids_request||1==this._dynLoadRequest(t)||(this.items[t].half_opened=!0,this._signUpdate(t),!1)})},dhtmlXTreeView.prototype._dynLoadRequest=function(t){if("function"==typeof this.conf.autoload.mode)return this.conf.autoload.mode.apply(window,[t]),!0;if(null!=this.conf.autoload.url){this._dhxdataload.onBeforeXLS=function(e){return{url:e.replace(/\{id\}/gi,t)}};var e=this;return this.items[t].kids_loading_tm=window.setTimeout(function(){e._dynLoadUpdateIcon(t,!0),e=null},100),this.loadStruct(this.conf.autoload.url,function(){window.clearTimeout(this.items[t].kids_loading_tm),this._dynLoadUpdateIcon(t,!1),this.items[t].half_opened&&(this.items[t].half_opened=!1,this._openCloseItem(t,!0))}),this.items[t].kids_request=!1,!1}},dhtmlXTreeView.prototype._dynLoadUpdateIcon=function(t,e){this.items[t].loading=1==e,1==this.items[t].loading?this.items[t].item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML="<i class='"+this.conf.icons.prefix+" "+this.conf.icons.loading+"'></i>":this._iconUpdate(t)};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},_dhx_insertAt:function(t,e){this[this.length]=null;for(var i=this.length-1;i>=t;i--)this[i]=this[i-1];this[t]=e},_dhx_removeAt:function(t){this.splice(t,1)},_dhx_swapItems:function(t,e){var i=this[t];this[t]=this[e],this[e]=i}},dhtmlXGridObject.prototype={getRowAttribute:function(t,e){return this.getRowById(t)._attrs[e]},setRowAttribute:function(t,e,i){this.getRowById(t)._attrs[e]=i},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(t,e){dhx4.s2b(e);var i=this.getRowById(t);if(i){if(""===i.expand&&this.collapseKids(i),e&&"none"!=i.style.display){i.style.display="none";var n=this.selectedRows._dhx_find(i);if(-1!=n){i.className=i.className.replace("rowselected","");for(var s=0;s<i.childNodes.length;s++)i.childNodes[s].className=i.childNodes[s].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(n)}this.callEvent("onGridReconstructed",[])}e||"none"!=i.style.display||(i.style.display="",this.callEvent("onGridReconstructed",[])),this.callEvent("onRowHide",[t,e]),this.setSizes()}},setColumnHidden:function(t,e){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[t]=e;this.fldSorted&&this.fldSorted.cellIndex==t&&e&&(this.sortImg.style.display="none");if(dhx4.s2b(e)){if(this._hrrar){if(this._hrrar[t])return}else this._hrrar=new Array;this._hrrar[t]="display:none;",this._hideShowColumn(t,"none")}else{if(!this._hrrar||!this._hrrar[t])return;this._hrrar[t]="",this._hideShowColumn(t,"")}this.fldSorted&&this.fldSorted.cellIndex==t&&!e&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[t,e])},isColumnHidden:function(t){return!(!this._hrrar||!this._hrrar[t])},setColumnsVisibility:function(t){if(t&&(this._ivizcol=t.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var e=0;e<this._ivizcol.length;e++)this.setColumnHidden(e,this._ivizcol[e])},_fixHiddenRowsAll:function(t,e,i,n,s){s=s||"_cellIndex";for(var o=t.rows.length,l=0;l<o;l++){var r=t.rows[l].childNodes;if(r.length!=this._cCount){for(var a=0;a<r.length;a++)if(r[a][s]==e){r[a].style[i]=n;break}}else r[e].style[i]=n}},_hideShowColumn:function(t,e){if(this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[t]!=t&&this.hdr.rows[1]._childIndexes[t],"none"==e){this.hdr.rows[0].cells[t]._oldWidth=this.hdr.rows[0].cells[t].style.width||this.initCellWidth[t]+"px",this.hdr.rows[0].cells[t]._oldWidthP=this.cellWidthPC[t],this.obj.rows[0].cells[t].style.width="0px";var i={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&i.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(i,t,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,"none"),(_isOpera&&_OperaRv<9||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","none"),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[t]&&(this.cellWidthPX[t]=0),this.cellWidthPC[t]&&(this.cellWidthPC[t]=0)}else if(this.hdr.rows[0].cells[t]._oldWidth){var n=this.hdr.rows[0].cells[t];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","");i={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&i.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(i,t,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,""),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","normal","_cellIndexS"),n._oldWidthP&&(this.cellWidthPC[t]=n._oldWidthP),n._oldWidth&&(this.cellWidthPX[t]=parseInt(n._oldWidth))}!e&&this._realfake&&this.setColumnSizes(this.entBox.clientWidth),this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(t){this._ecspn=dhx4.s2b(t)},enableRowsHover:function(t,e){this._unsetRowHover(!1,!0),this._hvrCss=e,dhx4.s2b(t)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(t,e,i){this._sclE=dhx4.s2b(t),this._dclE=dhx4.s2b(e),this._f2kE=dhx4.s2b(i)},enableLightMouseNavigation:function(t){dhx4.s2b(t)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e&&(this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(t||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(t,e){if(that=e?this:this.grid,that._lahRw&&that._lahRw!=e){for(var i=0;i<that._lahRw.childNodes.length;i++)that._lahRw.childNodes[i].className=that._lahRw.childNodes[i].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(e&&e.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,e),!(e=e.parentNode).idd||"__filler__"==e.idd)return;for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].className+=" "+this.grid._hvrCss;this.grid._lahRw=e}this._honmousemove(t)},_autoMoveSelect:function(t){if(!this.grid.editor){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e.parentNode.idd&&this.grid.doClick(e,!0,0)}this._onmousemove(t)},enableDistributedParsing:function(t,e,i){dhx4.s2b(t)?(this._ads_count=e||10,this._ads_time=i||250):this._ads_count=0},destructor:function(){if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);var e;for(t=0;t<this.rowsCol.length;t++)this.rowsCol[t]&&(this.rowsCol[t].grid=null);for(t in this.rowsAr)this.rowsAr[t]&&(this.rowsAr[t]=null);this.rowsCol=new dhtmlxArray,this.rowsAr={},this.entBox.innerHTML="";var i=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=i,this.setSizes=this._update_srnd_view=this.callEvent=i,this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null,this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=i,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=i);for(e in this)this[e]&&this[e].m_obj&&(this[e].m_obj=null),this[e]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var t=new Array;return this.fldSorted&&(t[0]=this.fldSorted._cellIndex,t[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc"),t},enableAutoHeight:function(t,e,i){this._ahgr=dhx4.s2b(t),this._ahgrF=dhx4.s2b(i),this._ahgrM=e||null,1==arguments.length&&(this.objBox.style.overflowY=t?"hidden":"auto"),"auto"==e&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(t){this._sst=dhx4.s2b(t),this.rowsCol.stablesort=function(t){for(var e=this.length-1,i=0;i<this.length-1;i++){for(var n=0;n<e;n++)if(t(this[n],this[n+1])>0){var s=this[n];this[n]=this[n+1],this[n+1]=s}e--}}},enableKeyboardSupport:function(t){this._htkebl=!dhx4.s2b(t)},enableContextMenu:function(t){this._ctmndx=t},setScrollbarWidthCorrection:function(t){},enableTooltips:function(t){this._enbTts=t.split(",");for(var e=0;e<this._enbTts.length;e++)this._enbTts[e]=dhx4.s2b(this._enbTts[e])},enableResizing:function(t){this._drsclmn=t.split(",");for(var e=0;e<this._drsclmn.length;e++)this._drsclmn[e]=dhx4.s2b(this._drsclmn[e])},setColumnMinWidth:function(t,e){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[e]=t):this._drsclmW=t.split(",")},enableCellIds:function(t){this._enbCid=dhx4.s2b(t)},lockRow:function(t,e){var i=this.getRowById(t);i&&(i._locked=dhx4.s2b(e),this.cell&&this.cell.parentNode.idd==t&&this.editStop())},_getRowArray:function(t){for(var e=new Array,i=0;i<t.childNodes.length;i++){var n=this.cells3(t,i);e[i]=n.getValue()}return e},setDateFormat:function(t,e){this._dtmask=t,this._dtmask_inc=e},setNumberFormat:function(t,e,i,n){var s=t.replace(/[^0\,\.]*/g,""),o=s.indexOf(".");o>-1&&(o=s.length-o-1);var l=s.indexOf(",");l>-1&&(l=s.length-o-2-l),"string"!=typeof i&&(i=this.i18n.decimal_separator),"string"!=typeof n&&(n=this.i18n.group_separator);var r=t.split(s)[0],a=t.split(s)[1];this._maskArr[e]=[o,l,r,a,i,n]},_aplNFb:function(t,e){var i=this._maskArr[e];if(!i)return t;var n=parseFloat(t.toString().replace(/[^0-9]*/g,""));return"-"==t.toString().substr(0,1)&&(n*=-1),i[0]>0&&(n/=Math.pow(10,i[0])),n},_aplNF:function(t,e){var i=this._maskArr[e];if(!i)return t;var n=(parseFloat(t)<0?"-":"")+i[2];if(t=Math.abs(Math.round(parseFloat(t)*Math.pow(10,i[0]>0?i[0]:0))).toString(),t=(t.length<i[0]?Math.pow(10,i[0]+1-t.length).toString().substr(1,i[0]+1)+t.toString():t).split("").reverse(),t[i[0]]=(t[i[0]]||"0")+i[4],i[1]>0)for(var s=(i[0]>0?0:1)+i[0]+i[1];s<t.length;s+=i[1])t[s]+=i[5];return n+t.reverse().join("")+i[3]},_launchCommands:function(t){for(var e=0;e<t.length;e++){for(var i=new Array,n=0;n<t[e].childNodes.length;n++)1==t[e].childNodes[n].nodeType&&(i[i.length]=t[e].childNodes[n].firstChild.data);this[t[e].getAttribute("command")].apply(this,i)}},_parseHead:function(t){var e=dhx4.ajax.xpath("./head",t);if(e.length){var i=dhx4.ajax.xpath("./column",e[0]),n=dhx4.ajax.xpath("./settings",e[0]),s="setInitWidths",o=!1;if(n[0])for(var l=0;l<n[0].childNodes.length;l++)switch(n[0].childNodes[l].tagName){case"colwidth":n[0].childNodes[l].firstChild&&"%"==n[0].childNodes[l].firstChild.data&&(s="setInitWidthsP");break;case"splitat":o=!!n[0].childNodes[l].firstChild&&n[0].childNodes[l].firstChild.data}if(this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",e[0])),i.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var r=[[],[],[],[],[],[],[],[],[]],a=["","width","type","align","sort","color","format","hidden","id"],h=["",s,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],d=0;d<i.length;d++){for(var c=1;c<a.length;c++)r[c].push(i[d].getAttribute(a[c]));r[0].push((i[d].firstChild?i[d].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(r[0]);for(d=0;d<h.length;d++)h[d]&&this[h[d]](r[d].join(this.delim));for(d=0;d<i.length;d++)if(0==this.cellType[d].indexOf("co")||"clist"==this.cellType[d]){var u=dhx4.ajax.xpath("./option",i[d]);if(u.length){var f=new Array;if("clist"==this.cellType[d]){for(c=0;c<u.length;c++)f[f.length]=u[c].firstChild?u[c].firstChild.data:"";this.registerCList(d,f)}else{var p=this.getCombo(d);for(c=0;c<u.length;c++)p.put(u[c].getAttribute("value"),u[c].firstChild?u[c].firstChild.data:"")}}}else r[6][d]&&(-1!=this.cellType[d].toLowerCase().indexOf("calendar")||"date"==this.fldSort[d]?this.setDateFormat(r[6][d]):this.setNumberFormat(r[6][d],d));this.init();var _=r[7].join(this.delim);this.setColHidden&&""!=_.replace(/,/g,"")&&this.setColHidden(_),o&&this.splitAt&&this.splitAt(o)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",e[0]))}var m=dhx4.ajax.xpath("//rows/userdata",t);if(m.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(c=0;c<m.length;c++){for(var g="",v=0;v<m[c].childNodes.length;v++)g+=m[c].childNodes[v].nodeValue;this.UserData.gridglobaluserdata.put(m[c].getAttribute("name"),g)}}},getCheckedRows:function(t){var e=new Array;return this.forEachRowA(function(i){var n=this.cells(i,t);n.changeState&&0!=n.getValue()&&e.push(i)},!0),e.join(",")},checkAll:function(){for(var t=arguments.length?arguments[0]:1,e=0;e<this.getColumnsNum();e++)"ch"==this.getColType(e)&&this.setCheckedRows(e,t)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(t,e){this.forEachRowA(function(i){this.cells(i,t).isCheckbox()&&this.cells(i,t).setValue(e)})},_drawTooltip:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(!e||this.grid.editor&&this.grid.editor.cell==e)return!0;var i=e.parentNode;if(i.idd&&"__filler__"!=i.idd){var n=t?t.target:event.srcElement;if(i.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[i.idd,e._cellIndex,t||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[e._cellIndex])return n.title&&(n.title=""),!0;if(!(e._cellIndex>=this.grid._cCount)){var s=this.grid.cells3(i,e._cellIndex);if(s&&s.cell&&s.cell._attrs)return n._title&&(s.cell.title=""),s.cell._attrs.title||(n._title=!0),s&&(n.title=s.cell._attrs.title||(s.getTitle?s.getTitle():(s.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(t){_isFF&&(this._wcorr=parseInt(t))},getAllRowIds:function(t){for(var e=[],i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&e.push(this.rowsBuffer[i].idd);return e.join(t||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(t,e,i){if(this._ecspn){var n=this.getRowById(t);if(n._childIndexes&&n.childNodes[n._childIndexes[e]]){var s=n._childIndexes[e],o=n.childNodes[s],l=o.colSpan;if(o.colSpan=1,l&&1!=l)for(var r=1;r<l;r++){var a=document.createElement("TD");o.nextSibling?n.insertBefore(a,o.nextSibling):n.appendChild(a),n._childIndexes[e+r]=s+r,a._cellIndex=e+r,a.style.textAlign=this.cellAlign[r],a.style.verticalAlign=this.cellVAlign[r],o=a,this.cells3(n,e+r).setValue("")}for(var h=1*e+1*l;h<n._childIndexes.length;h++)n._childIndexes[h]+=1*(l-1)}if(i&&i>1){if(n._childIndexes)s=n._childIndexes[e];else{s=e;n._childIndexes=new Array;for(h=0;h<n.childNodes.length;h++)n._childIndexes[h]=h}n.childNodes[s].colSpan=i;for(h=1;h<i;h++)n._childIndexes[n.childNodes[s+1]._cellIndex]=s,n.removeChild(n.childNodes[s+1]);for(h=1*n.childNodes[n._childIndexes[e]]._cellIndex+1*i;h<n._childIndexes.length;h++)n._childIndexes[h]-=i-1}}},preventIECaching:function(t){dhx4.ajax.cache=!t},enableColumnAutoSize:function(t){this._eCAS=dhx4.s2b(t)},_onHeaderDblClick:function(t){var e=this.grid,i=e.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD");if(!e._eCAS)return!1;e.adjustColumnSize(i._cellIndexS)},adjustColumnSize:function(t,e){if(!this._hrrar||!this._hrrar[t]){this._notresize=!0;var i=0;this._setColumnSizeR(t,20);for(var n=1;n<this.hdr.rows.length;n++){var s=this.hdr.rows[n];(s=s.childNodes[s._childIndexes?s._childIndexes[t]:t])&&(!s.colSpan||s.colSpan<2)&&s._cellIndex==t&&(s.childNodes[0]&&"hdrcell"==s.childNodes[0].className&&(s=s.childNodes[0]),i=Math.max(i,s.scrollWidth))}for(var o=this.obj.rows.length,l=0,r=this.cellType._dhx_find("tree"),a=1;a<o;a++){var h=this.obj.rows[a],d=t;if(this.rowsAr[h.idd]){if(h._childIndexes){if(h._childIndexes[t]==h._childIndexes[t+1])continue;d=h._childIndexes[t]}h.childNodes[d]&&h.childNodes[d]._cellIndex==t&&(l=(h.childNodes[d].innerText||h.childNodes[d].textContent||"").length*this.fontWidth,this._h2&&t==r&&(l+=22*this._h2.get[h.idd].level),l>i&&(i=l))}}i+=20+(e||0),this._setColumnSizeR(t,i),this._notresize=!1,this.setSizes()}},detachHeader:function(t,e){var i=(e=e||this.hdr).rows[t+1];i&&i.parentNode.removeChild(i),this.setSizes()},detachFooter:function(t){this.detachHeader(t,this.ftr)},attachHeader:function(t,e,i){if("string"==typeof t&&(t=this._eSplit(t)),"string"==typeof e&&(e=e.split(this.delim)),i=i||"_aHead",this.hdr.rows.length){if(t)this._createHRow([t,e],this["_aHead"==i?"hdr":"ftr"]);else if(this[i])for(var n=0;n<this[i].length;n++)this.attachHeader.apply(this,this[i][n])}else this[i]||(this[i]=new Array),this[i][this[i].length]=[t,e,i]},_createHRow:function(t,e){if(!e){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");(l=document.createElement("DIV")).className="c_ftr".substr(2),this.entBox.appendChild(l);(c=document.createElement("TABLE")).cellPadding=c.cellSpacing=0,_isIE&&8!=_isIE||(c.width="100%",c.style.paddingRight="20px"),c.style.marginRight="20px",c.style.tableLayout="fixed",l.appendChild(c),c.appendChild(document.createElement("TBODY")),this.ftr=e=c;for(var i=c.insertRow(0),n=this.hdrLabels.length<=1?t[0].length:this.hdrLabels.length,s=0;s<n;s++)i.appendChild(document.createElement("TH")),i.childNodes[s]._cellIndex=s;_isIE&&_isIE<8?i.style.position="absolute":i.style.height="auto"}var o=t[1],l=document.createElement("TR");e.rows[0].parentNode.appendChild(l);for(s=0;s<t[0].length;s++)if("#cspan"!=t[0][s])if("#rspan"==t[0][s]&&e.rows.length>1){var r=e.rows.length-2,a=!1;for(f=null;!a;){f=e.rows[r];for(var h=0;h<f.cells.length;h++)if(f.cells[h]._cellIndex==s){a=h+1;break}r--}(f=f.cells[a-1]).rowSpan=(f.rowSpan||1)+1}else{var d=document.createElement("TD");if(d._cellIndex=d._cellIndexS=s,this._hrrar&&this._hrrar[s]&&!_isIE&&(d.style.display="none"),"object"==typeof t[0][s])d.appendChild(t[0][s]);else if(this.forceDivInHeader?d.innerHTML="<div class='hdrcell'>"+(t[0][s]||"&nbsp;")+"</div>":d.innerHTML=t[0][s]||"&nbsp;",-1!=(t[0][s]||"").indexOf("#")){var c;if(c=t[0][s].match(/(^|{)#([^}]+)(}|$)/)){var u="_in_header_"+c[2];this[u]&&this[u](this.forceDivInHeader?d.firstChild:d,s,t[0][s].split(c[0]))}}o&&(d.style.cssText=o[s]),l.appendChild(d)}else{var f;(f=l.cells[l.cells.length-1]).colSpan=(f.colSpan||1)+1}_isKHTML&&(e._kTimer&&window.clearTimeout(e._kTimer),e._kTimer=window.setTimeout(function(){e.rows[1].style.display="none",window.setTimeout(function(){e.rows[1].style.display=""},1)},500))},attachFooter:function(t,e){this.attachHeader(t,e,"_aFoot")},setCellExcellType:function(t,e,i){this.changeCellType(this.getRowById(t),e,i)},changeCellType:function(t,e,i){i=i||this.cellType[e];var n=(s=this.cells3(t,e)).getValue();s.cell._cellType=i;var s;(s=this.cells3(t,e)).setValue(n)},setRowExcellType:function(t,e){for(var i=this.rowsAr[t],n=0;n<i.childNodes.length;n++)this.changeCellType(i,n,e)},setColumnExcellType:function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&"TR"==this.rowsBuffer[i].tagName&&this.changeCellType(this.rowsBuffer[i],t,e);"math"==this.cellType[t]?this._strangeParams[i]=e:this.cellType[t]=e},forEachRow:function(t){for(var e in this.rowsAr)this.rowsAr[e]&&this.rowsAr[e].idd&&t.apply(this,[this.rowsAr[e].idd])},forEachRowA:function(t){for(var e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&t.call(this,this.render_row(e).idd)},forEachCell:function(t,e){var i=this.getRowById(t);if(i)for(var n=0;n<this._cCount;n++)e(this.cells3(i,n),n)},enableAutoWidth:function(t,e,i){this._awdth=[dhx4.s2b(t),parseInt(e||99999),parseInt(i||0)],1==arguments.length&&(this.objBox.style.overflowX=t?"hidden":"auto")},updateFromXML:function(t,e,i,n){void 0===e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,n)},_refreshFromXML:function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree"),i=dhx4.ajax.xmltop("rows",t),n=i.getAttribute("parent")||0,s={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(n,function(t){s[t.id]=!0},this):this.forEachRow(function(t){s[t]=!0}));for(var o=dhx4.ajax.xpath("//row",i),l=0;l<o.length;l++){var r=o[l],a=r.getAttribute("id");s[a]=!1;n=r.parentNode.getAttribute("id")||n;if(this.rowsAr[a]&&"TR"!=this.rowsAr[a].tagName)this._h2?this._h2.get[a].buff.data=r:this.rowsBuffer[this.getRowIndex(a)].data=r,this.rowsAr[a]=r;else if(this.rowsAr[a])this._process_xml_row(this.rowsAr[a],r,-1),this._postRowProcessing(this.rowsAr[a],!0),this._fake&&this._fake.rowsAr[a]&&this._fake._process_xml_row(this._fake.rowsAr[a],r,-1);else if(this._refresh_mode[1]){var h={idd:a,data:r,_parser:this._process_xml_row,_locator:this._get_xml_data},d=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(h),d=0):this.rowsBuffer.push(h),this._h2?(reset=!0,this._h2.add(a,r.parentNode.getAttribute("id")||r.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[a]=r,r=this.render_row(d),this._insertRowAt(r,d?-1:0)}}if(this._refresh_mode[2])for(a in s)s[a]&&this.rowsAr[a]&&this.deleteRow(a);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&(this._h2?this._renderSort():this.render_dataset()),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(t,e){var i=this.cells(t,e).cell;return i._combo||(i._combo=new dhtmlXGridComboObject),i._combo},setTabOrder:function(t){var e=t.split(this.delim);this._tabOrder=[];for(var i=this._cCount||t.length,n=0;n<i;n++)e[n]={c:parseInt(e[n]),ind:n};e.sort(function(t,e){return t.c>e.c?1:-1});for(n=0;n<i;n++)e[n+1]&&void 0!==e[n].c?this._tabOrder[e[n].ind]=e[n+1].ind:this._tabOrder[e[n].ind]=-1*(e[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t+1],this.cell._cellIndex,!0)},k13_0_1:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var t=this._getNextCell(null,1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var t=this._getNextCell(null,-1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.collapseKids(this.row)},k39_0_0:function(){if(this.editor||!this.isTreeGrid())return!1;this.expandKids(this.row)},k40_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var e=Math.max(t._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(e,1);if(i)t._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&t.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[e+1]&&this.selectCell(e+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var e=this.getRowIndex(this.row.idd)+1;if(-1==e||this.pagingOn&&1==e)this._key_events.k33_0_0.apply(this,[]);else{var i=this._nextRow(e-1,-1);this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&i&&t.showRow(i.idd)}}this._still_active=!0}},_build_master_row:function(){for(var t=document.createElement("DIV"),e=["<table><tr>"],i=0;i<this._cCount;i++)e.push("<td></td>");e.push("</tr></table>"),t.innerHTML=e.join(""),this._master_row=t.firstChild.rows[0]},_prepareRow:function(t){this._master_row||this._build_master_row();for(var e=this._master_row.cloneNode(!0),i=0;i<e.childNodes.length;i++)e.childNodes[i]._cellIndex=i,this._enbCid&&(e.childNodes[i].id="c_"+t+"_"+i),this.dragAndDropOff&&this.dragger.addDraggableItem(e.childNodes[i],this);return e.idd=t,e.grid=this,e},_process_jsarray_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e):e),t},_get_jsarray_data:function(t,e){return t[e]},_process_json_row:function(t,e){return e=this._c_order?this._swapColumns(e.data):e.data,this._process_some_row(t,e)},_process_some_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,e),t},_get_json_data:function(t,e){return t.data[e]},_process_js_row:function(t,e){for(var i=[],n=0;n<this.columnIds.length;n++)i[n]=e[this.columnIds[n]],i[n]||0===i[n]||(i[n]="");return this._process_some_row(t,i),t._attrs=e,t},_get_js_data:function(t,e){return t[this.columnIds[e]]},_process_csv_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e.split(this.csv.cell)):e.split(this.csv.cell)),t},_get_csv_data:function(t,e){return t.split(this.csv.cell)[e]},_process_store_row:function(t,e){for(var i=[],n=0;n<this.columnIds.length;n++)i[n]=e[this.columnIds[n]];for(var s=0;s<t.childNodes.length;s++)t.childNodes[s]._attrs={};t._attrs=e,this._fillRow(t,i)},_process_xml_row:function(t,e){var i=dhx4.ajax.xpath(this.xml.cell,e),n=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var s=dhx4.ajax.xpath("./userdata",e),o=s.length-1;o>=0;o--){for(var l="",r=0;r<s[o].childNodes.length;r++)l+=s[o].childNodes[r].nodeValue;this.setUserData(t.idd,s[o].getAttribute("name"),l)}for(r=0;r<i.length;r++){var a=i[this._c_order?this._c_order[r]:r];if(a){var h=t._childIndexes?t._childIndexes[r]:r,d=a.getAttribute("type");t.childNodes[h]&&(d&&(t.childNodes[h]._cellType=d),t.childNodes[h]._attrs=this._xml_attrs(a)),a.getAttribute("xmlcontent")||(a=a.firstChild?a.firstChild.wholeText||a.firstChild.data:""),n.push(a)}}for(i.length;r<t.childNodes.length;r++)t.childNodes[r]._attrs={};return t.parentNode&&"row"==t.parentNode.tagName&&(t._attrs.parent=t.parentNode.getAttribute("idd")),this._fillRow(t,n),t},_get_xml_data:function(t,e){for(t=t.firstChild;;){if(!t)return"";if("cell"==t.tagName&&e--,e<0)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},_fillRow:function(t,e){this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==t.idd&&this.editStop();for(var i=0;i<t.childNodes.length;i++)if(i<e.length||this.defVal[i]){var n=t.childNodes[i]._cellIndex,s=e[n],o=this.cells4(t.childNodes[i]);!this.defVal[n]||""!=s&&void 0!==s||(s=this.defVal[n]),o&&o.setValue(s)}else t.childNodes[i].innerHTML="&nbsp;",t.childNodes[i]._clearCell=!0;return t},_postRowProcessing:function(t,e){t._attrs.class&&(t._css=t.className=t._attrs.class),t._attrs.locked&&(t._locked=!0),t._attrs.bgColor&&(t.bgColor=t._attrs.bgColor);for(var i=0,n=0;n<t.childNodes.length;n++){var s=t.childNodes[n],o=s._cellIndex,l=s._attrs.style||t._attrs.style;l&&(s.style.cssText+=";"+l),s._attrs.class&&(s.className=s._attrs.class),(l=s._attrs.align||this.cellAlign[o])&&(s.align=l),s.vAlign=s._attrs.valign||this.cellVAlign[o];var r=s._attrs.bgColor||this.columnColor[o];r&&(s.bgColor=r),s._attrs.colspan&&!e&&(this.setColspan(t.idd,n+i,s._attrs.colspan),i+=s._attrs.colspan-1),this._hrrar&&this._hrrar[o]&&!e&&(s.style.display="none")}this.callEvent("onRowCreated",[t.idd,t,null])},load:function(t,e,i){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=i,this.xmlLoader=this.doLoadDetails;var n=this;return this.xmlLoader=function(t){n.callEvent&&(n["_process_"+i](t.xmlDoc),n._contextCallTimer||n.callEvent("onXLE",[n,0,0,t.xmlDoc,i]),e&&(e(),e=null))},dhx4.ajax.get(t,this.xmlLoader)},loadXMLString:function(t,e){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse({responseXML:dhx4.ajax.parse(t)},e,"xml")},loadXML:function(t,e){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load(t,e,"xml")},parse:function(t,e,i){2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this._data_type=i,"xml"==i&&"string"==typeof t&&(t={responseXML:dhx4.ajax.parse(t)}),this["_process_"+i](t),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,t,i]),e&&e()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(t){var e={};if(t.attributes.length)for(var i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;return e},_process_xml:function(t){if(this._refresh_mode)return this._refreshFromXML(t);this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);if(e.tagName==this.xml.top){var i=e.getAttribute("dhx_security");i&&(dhtmlx.security_key=i),this._parseHead(e);var n=dhx4.ajax.xpath(this.xml.row,e),s=parseInt(e.getAttribute("pos")||0),o=parseInt(e.getAttribute("total_count")||0);if(!this.pagingOn)o=Math.min(o,32e6/this._srdh);var l=!1;if(o&&o!=this.rowsBuffer.length&&(this.rowsBuffer[o-1]||(this.rowsBuffer.length&&(l=!0),this.rowsBuffer[o-1]=null),o<this.rowsBuffer.length&&(this.rowsBuffer.splice(o,this.rowsBuffer.length-o),l=!0)),this.isTreeGrid())return this._process_tree_xml(e);for(var r=0;r<n.length;r++)if(!this.rowsBuffer[r+s]){var a=n[r].getAttribute("id")||r+s+1;this.rowsBuffer[r+s]={idd:a,data:n[r],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[a]=n[r]}if(this.callEvent("onDataReady",[]),l&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1}},_process_jsarray:function(data){this._parsing=!0,"string"==typeof(data=data.responseText||data)&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp);for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(t){if(this._parsing=!0,t=t.responseText||t,t=t.replace(/\r/g,""),t=t.split(this.csv.row),this._csvHdr){this.clearAll();var e=t.splice(0,1)[0].split(this.csv.cell);this._csvAID||e.splice(0,1),this.setHeader(e.join(this.delim)),this.init()}for(var i=0;i<t.length;i++)if(t[i]||i!=t.length-1){if(this._csvAID){var n=i+1;this.rowsBuffer.push({idd:n,data:t[i],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var s=t[i].split(this.csv.cell);n=s.splice(0,1)[0];this.rowsBuffer.push({idd:n,data:s,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[n]=t[i]}this.render_dataset(),this._parsing=!1},_process_js:function(t){return this._process_json(t,"js")},_process_json:function(data,mode){this._parsing=!0;var data=data.responseText||data;if("string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp),"js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++){var row=data[i],id=row.id||i+1;this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[id]=data[i]}}else if(data.rows)for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data.rows[i]}data.dhx_security&&(dhtmlx.security_key=data.dhx_security),this.callEvent("onDataReady",[]),this.render_dataset(),this._parsing=!1},render_dataset:function(t,e){if(this._srnd){if(this._fillers)return this._update_srnd_view();e=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(t=Math.max(t||0,(this.currentPage-1)*this.rowsBufferOutSize),e=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(t=t||0,e=e||this.rowsBuffer.length);for(var i=t;i<e;i++){var n=this.render_row(i);if(-1==n){this.xmlFileUrl&&this.callEvent("onDynXLS",[i,this._dpref?this._dpref:e-i])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+(this._dpref?this._dpref:e-i),this._data_type),e=i;break}if(n.parentNode&&n.parentNode.tagName||(this._insertRowAt(n,i),(n._attrs.selected||n._attrs.select)&&(this.selectRow(n,!!n._attrs.call,!0),n._attrs.selected=n._attrs.select=null)),this._ads_count&&i-t==this._ads_count){var s=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){s._contextCallTimer=null,s.render_dataset(i,e),s._contextCallTimer||(s._context_parsing?s.callEvent("onXLE",[]):s._fixAlterCss(),s._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&i==e&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var o=this.rowsBuffer.length-e;this._fillers=[],this._fake&&!this._realfake&&(this._fake._fillers=[]);for(var l=Math.round(99e4/this._srdh);o>0;){var r=_isIE||window._FFrv?Math.min(o,l):o,a=this._add_filler(e,r);a&&this._fillers.push(a),o-=r,e+=r}}this.setSizes()},render_row:function(t){if(!this.rowsBuffer[t])return-1;if(this.rowsBuffer[t]._parser){var e=this.rowsBuffer[t];if(this.rowsAr[e.idd]&&"TR"==this.rowsAr[e.idd].tagName)return this.rowsBuffer[t]=this.rowsAr[e.idd];var i=this._prepareRow(e.idd);return this.rowsBuffer[t]=i,this.rowsAr[e.idd]=i,e._parser.call(this,i,e.data),this._postRowProcessing(i),i}return this.rowsBuffer[t]},_get_cell_value:function(t,e,i){return t._locator?(this._c_order&&(e=this._c_order[e]),t._locator.call(this,t.data,e)):this.cells3(t,e)[i||"getValue"]()},sortRows:function(t,e,i){if(this.editStop(),i=(i||"asc").toLowerCase(),e=e||this.fldSort[t],t=t||0,this.isTreeGrid())this.sortTreeRows(t,e,i);else{var n={},s=this.cellType[t],o="getValue";"link"==s&&(o="getContent"),"dhxCalendar"!=s&&"dhxCalendarA"!=s||(o="getDate");for(var l=0;l<this.rowsBuffer.length;l++)n[this.rowsBuffer[l].idd]=this._get_cell_value(this.rowsBuffer[l],t,o);this._sortRows(t,e,i,n)}this.callEvent("onAfterSorting",[t,e,i])},_sortCore:function(t,e,i,n,s){var o="sort";if(this._sst&&(s.stablesort=this.rowsCol.stablesort,o="stablesort"),e.length>4&&(e=window[e]),"cus"==e){var l=this._customSorts[t];s[o](function(t,e){return l(n[t.idd],n[e.idd],i,t.idd,e.idd)})}else"function"==typeof e?s[o](function(t,s){return e(n[t.idd],n[s.idd],i,t.idd,s.idd)}):"str"==e?s[o](function(t,e){return"asc"==i?n[t.idd]>n[e.idd]?1:n[t.idd]<n[e.idd]?-1:0:n[t.idd]<n[e.idd]?1:n[t.idd]>n[e.idd]?-1:0}):"int"==e?s[o](function(t,e){var s=parseFloat(n[t.idd]);s=isNaN(s)?-99999999999999:s;var o=parseFloat(n[e.idd]);return o=isNaN(o)?-99999999999999:o,"asc"==i?s-o:o-s}):"date"==e&&s[o](function(t,e){var s=Date.parse(n[t.idd])||Date.parse("01/01/1900"),o=Date.parse(n[e.idd])||Date.parse("01/01/1900");return"asc"==i?s-o:o-s})},_sortRows:function(t,e,i,n){this._sortCore(t,e,i,n,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(t){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]);var e=this.obj.rows[0].parentNode,i=e.removeChild(e.childNodes[0],!0);if(_isKHTML)for(var n=e.parentNode.childNodes.length-1;n>=0;n--)"TR"==e.parentNode.childNodes[n].tagName&&e.parentNode.removeChild(e.parentNode.childNodes[n],!0);else if(_isIE)for(n=e.childNodes.length-1;n>=0;n--)e.childNodes[n].removeNode(!0);else e.innerHTML="";e.appendChild(i),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,t||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(t,e){if(e||(e=this.getRowById(t)),e){if(this.editStop(),!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[t]))return!1;var i=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){e.parentNode&&e.parentNode.removeChild(e);var n=this.rowsCol._dhx_find(e);-1!=n&&this.rowsCol._dhx_removeAt(n);for(var s=0;s<this.rowsBuffer.length;s++)if(this.rowsBuffer[s]&&this.rowsBuffer[s].idd==t){this.rowsBuffer._dhx_removeAt(s),n=s;break}}else i=this._h2.get[t].parent.id,this._removeTrGrRow(e);this.rowsAr[t]=null;for(s=0;s<this.selectedRows.length;s++)this.selectedRows[s].idd==t&&this.selectedRows._dhx_removeAt(s);if(this._srnd){for(s=0;s<this._fillers.length;s++){var o=this._fillers[s];o&&(o[0]>=n?this._update_fillers(s,0,-1):o[0]+o[1]>n&&this._update_fillers(s,-1,0))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[t,i]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(t,e,i){-1!=i&&void 0!==i||(i=this.rowsBuffer.length),"string"==typeof e&&(e=e.split(this.delim));var n=this._prepareRow(t);n._attrs={};for(var s=0;s<n.childNodes.length;s++)n.childNodes[s]._attrs={};if(this.rowsAr[n.idd]=n,this._h2&&(this._h2.get[n.idd].buff=n),this._fillRow(n,e),this._postRowProcessing(n),this._skipInsert)return this._skipInsert=!1,this.rowsAr[n.idd]=n;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(i,n),this.rowsAr[n.idd]=n,n;if(this._fillers){this.rowsCol._dhx_insertAt(i,null),this.rowsBuffer._dhx_insertAt(i,n),this._fake&&this._fake.rowsCol._dhx_insertAt(i,null),this.rowsAr[n.idd]=n;for(var o=!1,l=0;l<this._fillers.length;l++){var r=this._fillers[l];if(r&&r[0]<=i&&r[0]+r[1]>=i){r[1]=r[1]+1;var a=r[2].firstChild.style.height=parseInt(r[2].firstChild.style.height)+this._srdh+"px";o=!0,this._fake&&(this._fake._fillers[l][1]++,this._fake._fillers[l][2].firstChild.style.height=a)}r&&r[0]>i&&(r[0]=r[0]+1,this._fake&&this._fake._fillers[l][0]++)}return o||this._fillers.push(this._add_filler(i,1,0==i?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[i-1])),n}return this.rowsBuffer._dhx_insertAt(i,n),this._insertRowAt(n,i)},addRow:function(t,e,i){var n=this._addRow(t,e,i);return this.dragContext||this.callEvent("onRowAdded",[t]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),n._added=!0,this._srnd&&!this._fillers&&(this._fillers=[]),this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),n},_insertRowAt:function(t,e,i){if(this.rowsAr[t.idd]=t,this._skipInsert)return this._skipInsert=!1,t;if(e<0||!e&&0!==parseInt(e)?e=this.rowsCol.length:e>this.rowsCol.length&&(e=this.rowsCol.length),this._cssEven){var n=t.className.replace(this._cssUnEven,"");(this._cssSP?this.getLevel(t.idd):e)%2==1?t.className=n+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(t.idd):""):t.className=n+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(t.idd):"")}return i||(e!=this.obj.rows.length-1&&this.rowsCol[e]?this.rowsCol[e].parentNode.insertBefore(t,this.rowsCol[e]):_isKHTML?this.obj.appendChild(t):this.obj.firstChild.appendChild(t)),this.rowsCol._dhx_insertAt(e,t),this.callEvent("onRowInserted",[t,e]),t},getRowById:function(t){var e=this.rowsAr[t];if(e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},cellById:function(t,e){return this.cells(t,e)},cells:function(t,e){if(0==arguments.length)return this.cells4(this.cell);var i=this.getRowById(t),n=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!n&&i._childIndexes&&(n=i.firstChild||{}),this.cells4(n)},cellByIndex:function(t,e){return this.cells2(t,e)},cells2:function(t,e){var i=this.render_row(t),n=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!n&&i._childIndexes&&(n=i.firstChild||{}),this.cells4(n)},cells3:function(t,e){var i=t._childIndexes?t.childNodes[t._childIndexes[e]]:t.childNodes[e];return this.cells4(i)},cells4:function(t){var e=window["eXcell_"+(t._cellType||this.cellType[t._cellIndex])];if(e)return new e(t)},cells5:function(t,e){e=e||t._cellType||this.cellType[t._cellIndex];if(!this._ecache[e]){if(window["eXcell_"+e])i=window["eXcell_"+e];else var i=eXcell_ro;this._ecache[e]=new i(t)}return this._ecache[e].cell=t,this._ecache[e]},dma:function(t){this._ecache||(this._ecache={}),t&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!t&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(t){arguments.length>0?this.smartTabOrder=dhx4.s2b(t):this.smartTabOrder=!0},setExternalTabOrder:function(t,e){var i=this;this.tabStart="object"==typeof t?t:document.getElementById(t);var n=this.tabStart.onkeydown;this.tabStart.onkeydown=function(t){n&&n.call(this,t);var e=t||window.event;if(9==e.keyCode&&!e.shiftKey)return e.cancelBubble=!0,i.selectCell(0,0,0,0,1),i.smartTabOrder&&i.cells2(0,0).isDisabled()&&i._key_events.k9_0_0.call(i),this.blur(),!1},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof e?e:document.getElementById(e);var s=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(t){s&&s.call(this,t);var e=t||window.event;if(9==e.keyCode&&e.shiftKey)return e.cancelBubble=!0,i.selectCell(i.getRowsNum()-1,i.getColumnCount()-1,0,0,1),i.smartTabOrder&&i.cells2(i.getRowsNum()-1,i.getColumnCount()-1).isDisabled()&&i._key_events.k9_0_1.call(i),this.blur(),!1},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},setIconset:function(t){this.iconset=t},clearAndLoad:function(){if(this._last_load_request){var t=this._last_load_request.xmlDoc;if(4!=t.readyState)try{t.onreadystatechange=function(){},t.abort()}catch(t){}}var e=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=e,this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var t=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,t,Math.min(t+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},function(){function t(t,e){this[t]=e}function e(t,e){this[t].call(this,e)}function i(t,e){this[t].call(this,e.join(this.delim))}var n=[{name:"label",def:"&nbsp;",operation:"setHeader",type:function(t,e,i){function n(t,e,i){s[e]||(s[e]=[]),"object"==typeof i&&(i.toString=function(){return this.text}),s[e][t]=i}for(var s=[],o=0;o<e.length;o++)if("object"==typeof e[o]&&e[o].length)for(var l=0;l<e[o].length;l++)n(o,l,e[o][l]);else n(o,0,e[o]);for(o=0;o<s.length;o++)for(l=0;l<s[0].length;l++){var r=s[o][l];if(s[o][l]=(r||"").toString()||"&nbsp;",r&&r.colspan)for(var a=1;a<r.colspan;a++)n(l+a,o,"#cspan");if(r&&r.rowspan)for(a=1;a<r.rowspan;a++)n(l,o+a,"#rspan")}for(this.setHeader(s[0]),o=1;o<s.length;o++)this.attachHeader(s[o])}},{name:"id",def:"",operation:"columnIds",type:t},{name:"width",def:"*",operation:"setInitWidths",type:i},{name:"align",def:"left",operation:"cellAlign",type:t},{name:"valign",def:"middle",operation:"cellVAlign",type:t},{name:"sort",def:"na",operation:"fldSort",type:t},{name:"type",def:"ro",operation:"setColTypes",type:i},{name:"options",def:"",operation:"",type:function(t,e){for(var i=0;i<e.length;i++)if("object"==typeof e[i]){var n=this.getCombo(i);for(var s in e[i])n.put(s,e[i][s])}}}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(t){return[t.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(t){for(var i=0;i<n.length;i++){for(var s=[],o=0;o<t.length;o++)s[o]=t[o][n[i].name]||n[i].def;(n[i].type||e).call(this,n[i].operation,s,t)}this.init()},rows:function(t){},headers:function(t){for(var e=0;e<t.length;e++)this.attachHeader(t[e])}})}(),dhtmlXGridObject.prototype._dp_init=function(t){t.attachEvent("insertCallback",function(t,e){this.obj._h2?this.obj.addRow(e,i,null,parent):this.obj.addRow(e,[],0);var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("updateCallback",function(t,e){var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteRow(e)}),t._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"],this.attachEvent("onEditCell",function(e,i,n){if(t._columns&&!t._columns[n])return!0;var s=this.cells(i,n);return 1==e?s.isCheckbox()&&t.setUpdated(i,!0):2==e&&s.wasChanged()&&t.setUpdated(i,!0),!0}),this.attachEvent("onRowPaste",function(e){t.setUpdated(e,!0)}),this.attachEvent("onUndo",function(e){t.setUpdated(e,!0)}),this.attachEvent("onRowIdChange",function(e,i){var n=t.findRow(e);n<t.updatedRows.length&&(t.updatedRows[n]=i)}),this.attachEvent("onSelectStateChanged",function(e){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onEnter",function(e,i){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onBeforeRowDeleted",function(e){if(t._silent_mode||!this.rowsAr[e])return!0;if(this.dragContext&&t.dnd)return window.setTimeout(function(){t.setUpdated(e,!0)},1),!0;var i=t.getState(e);return this._h2&&this._h2.forEachChild(e,function(e){t.setUpdated(e.id,!1),t.markRow(e.id,!0,"deleted")},this),"inserted"==i?(t.set_invalid(e,!1),t.setUpdated(e,!1),!0):"deleted"!=i&&("true_deleted"==i?(t.setUpdated(e,!1),!0):(t.setUpdated(e,!0,"deleted"),!1))}),this.attachEvent("onBindUpdate",function(e,i,n){t.setUpdated(n,!0)}),this.attachEvent("onRowAdded",function(e){return!(!this.dragContext||!t.dnd)||(t.setUpdated(e,!0,"inserted"),!0)}),t._getRowData=function(t,e){var i=[];i.gr_id=t,this.obj.isTreeGrid()&&(i.gr_pid=this.obj.getParentId(t));for(var n=this.obj.getRowById(t),s=0;s<this.obj._cCount;s++){if(this.obj._c_order)var o=this.obj._c_order[s];else o=s;var l=this.obj.cells(n.idd,s);this._changed&&!l.wasChanged()||(this._endnm?i[this.obj.getColumnId(s)]=l.getValue():i["c"+o]=l.getValue())}if(a=this.obj.UserData[t])for(var r=0;r<a.keys.length;r++)a.keys[r]&&0!=a.keys[r].indexOf("__")&&(i[a.keys[r]]=a.values[r]);var a;if(a=this.obj.UserData.gridglobaluserdata)for(r=0;r<a.keys.length;r++)i[a.keys[r]]=a.values[r];return i},t._clearUpdateFlag=function(t){if(this.obj.getRowById(t))for(var e=0;e<this.obj._cCount;e++)this.obj.cells(t,e).cell.wasChanged=!1},t.checkBeforeUpdate=function(t){for(var e=!0,i=[],n=0;n<this.obj._cCount;n++)if(this.mandatoryFields[n]){var s=this.mandatoryFields[n].call(this.obj,this.obj.cells(t,n).getValue(),t,n);"string"==typeof s?(this.messages.push(s),e=!1):(e&=s,i[n]=!s)}return e||(this.set_invalid(t,"invalid",i),this.setUpdated(t,!1)),e}},dhx4.attachEvent("onGridCreated",function(t){t._con_f_used=[].concat(t._con_f_used),dhtmlXGridObject.prototype._con_f_used=[];var e=function(t){return function(t){return(t=t.replace(/(\?|\&)connector[^\f]*/g,""))+(-1!=t.indexOf("?")?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")}.call(this,t)+(this._connector_sorting||"")+(this._connector_filter||"")};t.attachEvent("onCollectValues",function(t){return!this._con_f_used[t]||"object"==typeof this._con_f_used[t]&&this._con_f_used[t]}),t.attachEvent("onDynXLS",function(){return this.xmlFileUrl&&(this.xmlFileUrl=e.call(this,this.xmlFileUrl)),!0}),t.attachEvent("onBeforeSorting",function(t,i,n){if("connector"==i){var s=this;return this.clearAndLoad(function(t,i,n){return this._connector_sorting="&dhx_sort["+i+"]="+n,e.call(this,t)}.call(this,this.xmlFileUrl,t,n),function(){s.setSortImgState(!0,t,n)}),!1}return!0}),t.attachEvent("onFilterStart",function(t,i){if(this._con_f_used.length){var n=this.getSortingState();return this.clearAndLoad(function(t,i,n){for(var s=[],o=0;o<i.length;o++)s[o]="dhx_filter["+i[o]+"]="+encodeURIComponent(n[o]);return this._connector_filter="&"+s.join("&"),e.call(this,t)}.call(this,this.xmlFileUrl,t,i)),n.length&&this.setSortImgState(!0,n[0],n[1]),!1}return!0})}),dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=1),this._in_header_text_filter(t,e)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=2),this._in_header_select_filter(t,e)},dhtmlXGridObject.prototype.load_connector||(dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(t,e,i){if(!this._colls_loaded&&this.cellType){for(var n=[],s=0;s<this.cellType.length;s++)0!=this.cellType[s].indexOf("co")&&0!=this.cellType[s].indexOf("clist")&&2!=this._con_f_used[s]||n.push(s);n.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+n.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(t,e,i){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var n=dhx4.ajax.xpath("./coll_options",arguments[0]),s=0;s<n.length;s++){var o=n[s].getAttribute("for"),l=[],r=null;"combo"==this.cellType[o]?r=this.getColumnCombo(o):0==this.cellType[o].indexOf("co")&&(r=this.getCombo(o));for(var a=dhx4.ajax.xpath("./item",n[s]),h=[],d=0;d<a.length;d++){var c=a[d].getAttribute("value");if(r){var u=a[d].getAttribute("label")||c;r.addOption?h.push([c,u]):r.put(c,u),l[l.length]=u}else l[l.length]=c}h.length?r&&r.addOption(h):l.length&&!r&&this.registerCList&&this.registerCList(1*o,l),this._con_f_used[1*o]&&(this._con_f_used[1*o]=l)}this._colls_loaded=!0}}),dhtmlXGridCellObject.prototype={getAttribute:function(t){return this.cell._attrs[t]},setAttribute:function(t,e){this.cell._attrs[t]=e},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var t=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return t.length||(t=(this.obj||this.cell).getElementsByTagName("INPUT")),t[0]}},dhtmlXGridCellObject.prototype.setValue=function(t){"number"==typeof t||t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),this.setCValue(t)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(t,e){this.cell.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?e:t])},dhtmlXGridCellObject.prototype.setCTxtValue=function(t){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(t)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},dhtmlXGridCellObject.prototype.setLabel=function(t){this.cell.innerHTML=t},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(t){if(!t||""==t.toString()._dhx_trim())return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.cell._clearCell=!1,this.cell._orig_value=t,this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(t){this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.cell.setAttribute("excell","ch"),this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+t+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var e=this.grid.cells(this.grid._RaSeCol[this.cell._cellIndex],this.cell._cellIndex);e.setValue("0"),this.grid.rowsAr[e.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,e.cell.parentNode.idd,e.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd,t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.cell.setAttribute("excell","ra"),this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),!this.grid.multiLine||this.cell._clearCell?this.setCValue(t,this.cell._brval):this.setCValue(t.replace(/\n/g,"<br/>"),t)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}if(""==(t||"").toString()._dhx_trim()&&(t=null),this.cell.combo_value=t,null!==t){var n=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t);this.setCValue(null===n?t:n,t)}else this.setCValue("&nbsp;",t)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t)||t,t):this.setCTxtValue(" ",t),this.cell.combo_value=t},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(t){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(t||"")+";border:0px;'>&nbsp;</div>",t),this.cell.firstChild._bg=t},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell._brval},eXcell_img.prototype.setValue=function(t){var e=t;if(-1!=(t||"").indexOf("^")){var i=t.split("^");t=i[0],e=this.cell._attrs.title||i[1],i.length>2&&(this.cell.lnk=i[2],i[3]&&(this.cell.trg=i[3])),this.cell.titFl="1"}this.grid.multiLine?this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0'>",t):this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",t),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell._brval=e},eXcell_icon.prototype=new eXcell_ed,eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(t){isNaN(parseFloat(t))&&(t=this.val||0);var e="green";t<0&&(e="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+e+";'>"+t+"</span>",t)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(t){if(t&&!isNaN(Number(t))||""!==t&&(t=0),t>0)var e="green",i="dyn_up.gif";else if(0==t)e="black",i="dyn_.gif";else e="red",i="dyn_down.gif";this.setCValue("<div class='grid_cell_dyn'><img src='"+this.grid.imgURL+i+"'><span style='color:"+e+";'>"+t+"</span></div>",t)},eXcell_ro.prototype=new eXcell,window.eXcell_hidden=function(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell.val}},eXcell_hidden.prototype=new eXcell,eXcell_hidden.prototype.setValue=function(t){this.cell.val=t},eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(t){if(0===t);else if(!t||""==t.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._orig_value=t,this.cell._clearCell=!1,this.setCValue(t?this.grid._aplNF(t,this.cell._cellIndex):"0")},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGrid=function(){this.callEvent("_onBeforeContentAttach",["grid"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),this.dataType="grid",this.dataObj=new dhtmlXGridObject(t),this.dataObj.setSkin(this.conf.skin),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&null!=navigator.userAgent.match(/7[\.\d]* mobile/gi)&&null!=navigator.userAgent.match(/AppleWebKit/gi)&&(this.dataObj.objBox.style.webkitOverflowScrolling="auto"),"material"==this.conf.skin&&"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden"),"dhx_skyblue"==this.conf.skin&&"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),t=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXGridObject.prototype.enableDragAndDrop=function(t){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=dhx4.s2b(t),this._drag_validate=!0,t&&(this.objBox.ondragstart=function(t){return(t||event).cancelBubble=!0,!1})},dhtmlXGridObject.prototype.setDragBehavior=function(t){switch(this.dadmodec=this.dadmodefix=0,t){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(t){this._dndorder=dhx4.s2b(t)},dhtmlXGridObject.prototype._checkParent=function(t,e){var i=this._h2.get[t.idd].parent;if(i.parent){for(var n=0;n<e.length;n++)if(e[n]==i.id)return!0;return this._checkParent(this.rowsAr[i.id],e)}},dhtmlXGridObject.prototype._createDragNode=function(t,e){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;t.parentObject=new Object,t.parentObject.treeNod=this;var i=this.callEvent("onBeforeDrag",[t.parentNode.idd,t._cellIndex,e]);if(!i)return null;var n=new Array;n=(n=this.getSelectedId())&&""!=n?n.split(this.delim):[];for(var s=!1,o=0;o<n.length;o++)n[o]==t.parentNode.idd&&(s=!0);if(s||(this.selectRow(this.rowsAr[t.parentNode.idd],!1,e.ctrlKey,!1),e.ctrlKey||(n=[]),n[this.selMultiRows?n.length:0]=t.parentNode.idd),this.isTreeGrid())for(o=n.length-1;o>=0;o--)this._checkParent(this.rowsAr[n[o]],n)&&n.splice(o,1);var l=this;n.length&&this._dndorder&&n.sort(function(t,e){return l.rowsAr[t].rowIndex>l.rowsAr[e].rowIndex?1:-1});var r=this.getFirstParentOfType(_isIE?e.srcElement:e.target,"TD");r&&(this._dndExtra=r._cellIndex),this._dragged=new Array;for(o=0;o<n.length;o++)this.rowsAr[n[o]]&&(this._dragged[this._dragged.length]=this.rowsAr[n[o]],this.rowsAr[n[o]].treeNod=this);t.parentObject.parentNode=t.parentNode;var a=document.createElement("div");return a.innerHTML=!0!==i?i:this.rowToDragElement(t.parentNode.idd),a.style.position="absolute",a.className="dragSpanDiv",a},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var t=this.tid;t=this.tobj.getParentId(t);)if(this.sid==t)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra,this.before)},dragContext.prototype.set=function(t,e){return this[t]=e,this},dragContext.prototype.uid=function(t,e){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var t=this.tobj.rowsAr[this.tid],e=this.tobj._h2.get[t.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&t.nextSibling){var i=this.tobj._h2.get[t.nextSibling.idd].parent.id;if(i==this.tid)return this.tid;if(i!=e)return i}return e}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&("child"==this.dropmode?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var t=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var e=this.tobj.rowsAr[this.tid];if(e.nextSibling&&this._h2.get[e.nextSibling.idd].parent.id==this.tid)return t+1}return t+1+("treeGrid"==this.target&&t>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[t].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[t].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var t=new Array,e=0;e<this.sid.length;e++)t[t.length]=this.sid[e]["tree"==this.source?"id":"idd"];return t.join(",")},dhtmlXGridObject.prototype._drag=function(t,e,i,n){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var s=i.parentNode,o=t.parentObject;s.idd||(s.grid=this,this.dadmodefix=0);var l=new dragContext(0,0,0,1==s.grid.dadmode||s.grid.dadmodec?"sibling":"child");if(o&&o.childNodes)l.set("source","tree").set("sobj",o.treeNod).set("sid",l.sobj._dragged);else{if(!o)return!0;o.treeNod.isTreeGrid&&o.treeNod.isTreeGrid()&&l.set("source","treeGrid"),l.set("sobj",o.treeNod).set("sid",l.sobj._dragged)}s.grid.isTreeGrid()?l.set("target","treeGrid"):l.set("dropmode","sibling"),l.set("tobj",s.grid).set("tid",s.idd),2==l.tobj.dadmode&&1==l.tobj.dadmodec&&l.tobj.dadmodefix<0&&(l.tobj.obj.rows[1].idd!=l.tid?l.tid=s.previousSibling.idd:this._h2&&l.tid?l.before=!0:l.tid=0);var r=this.getFirstParentOfType(n,"TD");if(r&&l.set("tExtra",r._cellIndex),r&&l.set("sExtra",l.sobj._dndExtra),l.sobj.dpcpy&&l.set("mode","copy"),l.tobj._realfake&&(l.tobj=l.tobj._fake),l.sobj._realfake&&(l.sobj=l.sobj._fake),l.tobj._clearMove(),o&&o.treeNod&&o.treeNod._nonTrivialRow)o.treeNod._nonTrivialRow(this,l.tid,l.dropmode,o);else{if(l.tobj.dragContext=l,!l.tobj.callEvent("onDrag",[l.slist(),l.tid,l.sobj,l.tobj,l.sExtra,l.tExtra]))return l.tobj.dragContext=null;var a=new Array;if("object"==typeof l.sid){for(var h=l.copy(),d=0;d<l.sid.length;d++)h.set("alfa",!d).set("sid",l.sid[d]["tree"==l.source?"id":"idd"]).valid()&&(h.tobj._dragRoutine(h),"treeGrid"==h.target&&"child"==h.dropmode&&h.tobj.openItem(h.tid),a[a.length]=h.nid,h.set("dropmode","sibling").set("tid",h.nid));h.close()}else l.tobj._dragRoutine(l);l.tobj.laterLink&&l.tobj.laterLink(),l.tobj.callEvent("onDrop",[l.slist(),l.tid,a.join(","),l.sobj,l.tobj,l.sExtra,l.tExtra])}l.tobj.dragContext=null,l.close()},dhtmlXGridObject.prototype._dragRoutine=function(t){if(t.sobj==t.tobj&&"grid"==t.source&&"move"==t.mode&&!this._fake){if(t.sobj._dndProblematic)return;var e=t.sobj.rowsAr[t.sid],i=t.sobj.rowsCol._dhx_find(e);if(t.sobj.rowsCol._dhx_removeAt(t.sobj.rowsCol._dhx_find(e)),t.sobj.rowsBuffer._dhx_removeAt(t.sobj.rowsBuffer._dhx_find(e)),t.sobj.rowsBuffer._dhx_insertAt(t.ind(),e),t.tobj._fake){t.tobj._fake.rowsCol._dhx_removeAt(i);var n=t.tobj._fake.rowsAr[t.sid];n.parentNode.removeChild(n)}return t.sobj._insertRowAt(e,t.ind()-(this.pagingOn?(this.currentPage-1)*this.rowsBufferOutSize:0)),t.nid=t.sid,void t.sobj.callEvent("onGridReconstructed",[])}var s;if(this._h2&&void 0!==t.tid&&"sibling"==t.dropmode&&(this._sbmod||t.tid)?t.before?s=t.uid().tobj.addRowBefore(t.nid,t.data(),t.tid,t.img(),t.childs()):t.alfa&&this._sbmod&&this._h2.get[t.tid].childs.length?(this.openItem(t.tid),s=t.uid().tobj.addRowBefore(t.nid,t.data(),this._h2.get[t.tid].childs[0].id,t.img(),t.childs())):s=t.uid().tobj.addRowAfter(t.nid,t.data(),t.tid,t.img(),t.childs()):s=t.uid().tobj.addRow(t.nid,t.data(),t.ind(),t.pid(),t.img(),t.childs()),s._attrs=t.attrs(),"tree"==t.source){this.callEvent("onRowAdded",[t.nid]);var o=t.sobj._globalIdStorageFind(t.sid);if(o.childsCount){for(var l=t.copy().set("tid",t.nid).set("dropmode","grid"==t.target?"sibling":"child"),r=0;r<o.childsCount;r++)t.tobj._dragRoutine(l.set("sid",o.childNodes[r].id)),"move"==t.mode&&r--;l.close()}}else if(t.tobj._copyUserData(t),this.callEvent("onRowAdded",[t.nid]),"treeGrid"==t.source){t.sobj==t.tobj&&(s._xml=t.sobj.rowsAr[t.sid]._xml);var a=t.sobj._h2.get[t.sid];if(a&&a.childs.length){l=t.copy().set("tid",t.nid);"grid"==t.target?l.set("dropmode","sibling"):(l.tobj.kidsXmlFile||l.tobj.openItem(t.tid),l.set("dropmode","child"));var h=a.childs.length;if(!l.tobj.kidsXmlFile)for(r=0;r<h;r++)t.sobj.render_row_tree(null,a.childs[r].id),t.tobj._dragRoutine(l.set("sid",a.childs[r].id)),h!=a.childs.length&&(r--,h=a.childs.length);l.close()}}"move"==t.mode&&(t.sobj["tree"==t.source?"deleteItem":"deleteRow"](t.sid),t.sobj!=t.tobj||t.tobj.rowsAr[t.sid]||(t.tobj.changeRowId(t.nid,t.sid),t.nid=t.sid))},dhtmlXGridObject.prototype.gridToGrid=function(t,e,i){for(var n=new Array,s=0;s<e.hdr.rows[0].cells.length;s++)n[s]=e.cells(t,s).getValue();return n},dhtmlXGridObject.prototype.checkParentLine=function(t,e){return!!(this._h2&&e&&t)&&(t.id==e||this.checkParentLine(t.parent,e))},dhtmlXGridObject.prototype._dragIn=function(t,e,i,n){if(!this.dADTempOff)return 0;var s=this.isTreeGrid(),o=e.parentNode.idd?e.parentNode:e.parentObject;if(this._drag_validate){if(t.parentNode==e.parentNode)return 0;if(s&&this==o.grid&&this.checkParentLine(this._h2.get[t.parentNode.idd],e.parentNode.idd))return 0}if(!this.callEvent("onDragIn",[o.idd||o.id,t.parentNode.idd,o.grid||o.treeNod,t.grid||t.parentNode.grid]))return this._setMove(t,i,n,!0);if(this._setMove(t,i,n),s&&""!=t.parentNode.expand){var l=this;this._autoOpenTimer=window.setTimeout(function(){l._autoOpenItem(null,l),l=null},1e3),this._autoOpenId=t.parentNode.idd}else this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return t},dhtmlXGridObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(t){this._clearMove();var e=t.parentNode.parentObject?t.parentObject.id:t.parentNode.idd;this.callEvent("onDragOut",[e]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(t,e,i,n){if(t.parentNode.idd){var s=dhx4.absTop(t),o=dhx4.absTop(this.objBox);if(s-o>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),s-o+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),n)return 0;if(2==this.dadmode){var l=i-s+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(l)-t.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=l<0?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=s-o+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?t.offsetHeight:0)+"px";else if(this._llSelD=t,"TR"==t.parentNode.tagName)for(var r=0;r<t.parentNode.childNodes.length;r++){(l=t.parentNode.childNodes[r])._bgCol=l.style.backgroundColor,l.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var t=this._llSelD.parentNode.childNodes,e=0;e<t.length;e++)t[e].style.backgroundColor=t[e]._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(t){return this.cells(t,0).getValue()},dhtmlXGridObject.prototype._copyUserData=function(t){if(!t.tobj.UserData[t.nid]||t.tobj!=t.sobj){t.tobj.UserData[t.nid]=new Hashtable;var e=t.sobj.UserData[t.sid],i=t.tobj.UserData[t.nid];e&&(i.keys=i.keys.concat(e.keys),i.values=i.values.concat(e.values))}},dhtmlXGridObject.prototype.moveRow=function(t,e,i,n){switch(e){case"row_sibling":this.moveRowTo(t,i,"move","sibling",this,n);break;case"up":this.moveRowUp(t);break;case"down":this.moveRowDown(t)}},dhtmlXGridObject.prototype._nonTrivialNode=function(t,e,i,n,s){if(t.callEvent&&!s&&!t.callEvent("onDrag",[n.idd,e.id,i?i.id:null,this,t]))return!1;for(var o=n.idd,l=o;t._idpull[l];)l+=(new Date).getMilliseconds().toString();var r=this.isTreeGrid()?this.getItemImage(o):"";if(i){for(d=0;d<e.childsCount&&e.childNodes[d]!=i;d++);0!=d?i=e.childNodes[d-1]:(st="TOP",i="")}var a=t._attachChildNode(e,l,this.gridToTreeElement(t,l,o),"",r,r,r,"","",i);if(this._h2){var h=this._h2.get[o];if(h.childs.length)for(var d=0;d<h.childs.length;d++)this._nonTrivialNode(t,a,0,this.rowsAr[h.childs[d].id],1),this.dpcpy||d--}this.dpcpy||this.deleteRow(o),t.callEvent&&!s&&t.callEvent("onDrop",[l,e.id,i?i.id:null,this,t])},dhtmlXGridObject.prototype.gridToTreeElement=function(t,e,i){return this.cells(i,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(t,e,i){var n=new Array,s=this.cellType._dhx_find("tree");-1==s&&(s=0);for(var o=0;o<this.getColumnCount();o++)n[n.length]=o!=s?t.getUserData(e,this.getColumnId(o))||"":t.getItemText(e);return n},dhtmlXGridObject.prototype.moveRowTo=function(t,e,i,n,s,o){var l=new dragContext((s||this).isTreeGrid()?"treeGrid":"grid",(o||this).isTreeGrid()?"treeGrid":"grid",i,n||"sibling",t,e,s||this,o||this);return l.tobj._dragRoutine(l),l.close(),l.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(t){this.dpcpy=dhx4.s2b(t)},dhtmlXGridObject.prototype.toPDF=function(t,e,i,n,s,o){function l(t,e){return(window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle?t.currentStyle[e]:null)||""}function r(t){if(!u.rowsBuffer[t])return"";var e=u.render_row(t);if("none"==e.style.display)return"";for(var i="<row"+(u.isTreeGrid()?' level="'+u.getLevel(e.idd)+'"':"")+">",n=0;n<u._cCount;n++)if((!u._srClmn||u._srClmn[n])&&(!u._hrrar[n]||u._fake&&n<u._fake.hdrLabels.length)){var s=u.cells(e.idd,n);if(c){var o=l(s.cell,"color"),r=l(s.cell,"backgroundColor"),a=l(s.cell,"font-weight")||l(s.cell,"fontWeight"),h=l(s.cell,"font-style")||l(s.cell,"fontStyle"),d=l(s.cell,"text-align")||l(s.cell,"textAlign"),f=l(s.cell,"font-family")||l(s.cell,"fontFamily");"transparent"!=r&&"rgba(0, 0, 0, 0)"!=r||(r="rgb(255,255,255)"),i+="<cell bgColor='"+r+"' textColor='"+o+"' bold='"+a+"' italic='"+h+"' align='"+d+"' font='"+f+"'>"}else i+="<cell>";i+="<![CDATA["+(s.getContent?s.getContent():s.getTitle())+"]]></cell>"}return i+"</row>"}var a={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()};if(null===a.row||-1===a.col)a=!1;else if(a.row){for(var h=0;h<a.row.length;h++)if(a.row[h]){var d=this.cells(a.row[h],a.col).cell;d.parentNode.className=d.parentNode.className.replace(" rowselected",""),d.className=d.className.replace(" cellselected",""),a.row[h]=d}}else a=!1;var c="full_color"==(e=e||"color"),u=this;u._asCDATA=!0,this.target=void 0===o?' target="_blank"':o,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()};var f=document.createElement("div");f.style.display="none",document.body.appendChild(f);var p="form_"+u.uid();if(f.innerHTML='<form id="'+p+'" method="post" action="'+t+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>',document.getElementById(p).firstChild.value=encodeURIComponent(function(t){for(var e=[],s=1;s<u.hdr.rows.length;s++){e[s]=[];for(var o=0;o<u._cCount;o++){var l=u.hdr.rows[s].childNodes[o];e[s][o]||(e[s][o]=[0,0]),l&&(e[s][l._cellIndexS]=[l.colSpan,l.rowSpan])}}var r="<rows profile='"+t+"'";for(i&&(r+=" header='"+i+"'"),n&&(r+=" footer='"+n+"'"),r+="><head>"+u._serialiseExportConfig(e).replace(/^<head/,"<columns").replace(/head>$/,"columns>"),s=2;s<u.hdr.rows.length;s++){var a=0,h=u.hdr.rows[s],d="";for(o=0;o<u._cCount;o++)if(u._srClmn&&!u._srClmn[o]||u._hrrar[o]&&(!u._fake||o>=u._fake.hdrLabels.length))a++;else{var c=e[s][o],f=c[0]&&c[0]>1?' colspan="'+c[0]+'" ':"";c[1]&&c[1]>1&&(f+=' rowspan="'+c[1]+'" ',a=-1);var p="",_=h;u._fake&&o<u._fake._cCount&&(_=u._fake.hdr.rows[s]);for(var m=0;m<_.cells.length;m++)if(_.cells[m]._cellIndexS==o){p=(p=_.cells[m].getElementsByTagName("SELECT").length?"":_isIE?_.cells[m].innerText:_.cells[m].textContent).replace(/[ \n\r\t\xA0]+/," ");break}p&&" "!=p||a++,d+="<column"+f+"><![CDATA["+p+"]]></column>"}a!=u._cCount&&(r+="\n<columns>"+d+"</columns>")}return r+="</head>\n",r+=function(){var t=["<foot>"];if(!u.ftr)return"";for(var e=1;e<u.ftr.rows.length;e++){t.push("<columns>");for(var i=u.ftr.rows[e],n=0;n<u._cCount;n++)if((!u._srClmn||u._srClmn[n])&&(!u._hrrar[n]||u._fake&&!(n>=u._fake.hdrLabels.length))){for(var s=0;s<i.cells.length;s++){var o="",l="";if(i.cells[s]._cellIndexS==n){o=(o=_isIE?i.cells[s].innerText:i.cells[s].textContent).replace(/[ \n\r\t\xA0]+/," "),i.cells[s].colSpan&&1!=i.cells[s].colSpan&&(l=" colspan='"+i.cells[s].colSpan+"' "),i.cells[s].rowSpan&&1!=i.cells[s].rowSpan&&(l=" rowspan='"+i.cells[s].rowSpan+"' ");break}}t.push("<column"+l+"><![CDATA["+o+"]]></column>")}t.push("</columns>")}return t.push("</foot>"),t.join("\n")}()}(e).replace("–","-")+function(){var t=[];if(s)for(var e=0;e<s.length;e++)t.push(r(u.getRowIndex(s[e])));else for(e=0;e<u.getRowsNum();e++)t.push(r(e));return t.join("\n")}()+"</rows>"),document.getElementById(p).submit(),f.parentNode.removeChild(f),u=null,a&&a.row.length)for(h=0;h<a.row.length;h++)a.row[h].parentNode.className+=" rowselected",1==a.row.length&&(a.row[h].className+=" cellselected");a=null},dhtmlXGridObject.prototype._serialiseExportConfig=function(t){function e(t){return"string"!=typeof t?t:(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"))}for(var i="<head>",n=0;n<this.hdr.rows[0].cells.length;n++)if((!this._srClmn||this._srClmn[n])&&(!this._hrrar[n]||this._fake&&!(n>=this._fake.hdrLabels.length))){var s=this.fldSort[n];"cus"==s&&(s=(s=this._customSorts[n].toString()).replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var o=t[1][n];i+="<column "+((o[1]&&o[1]>1?' rowspan="'+o[1]+'" ':"")+(o[0]&&o[0]>1?' colspan="'+o[0]+'" ':""))+" width='"+this.getColWidth(n)+"' align='"+this.cellAlign[n]+"' type='"+this.cellType[n]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(n)?"true":"false")+"' sort='"+(s||"na")+"' color='"+(this.columnColor[n]||"")+"'"+(this.columnIds[n]?" id='"+this.columnIds[n]+"'":"")+">",this._asCDATA?i+="<![CDATA["+this.getColumnLabel(n)+"]]>":i+=this.getColumnLabel(n);var l=this.combos[n]?this.getCombo(n):null;if(l)for(var r=0;r<l.keys.length;r++)i+="<option value='"+e(l.keys[r])+"'><![CDATA["+l.values[r]+"]]></option>";i+="</column>"}return i+="</head>"},window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""}),dhtmlXGridObject.prototype.toExcel=function(t,e,i,n,s){if(!document.getElementById("ifr")){var o=document.createElement("iframe");o.style.display="none",o.setAttribute("name","dhx_export_iframe"),o.setAttribute("src",""),o.setAttribute("id","dhx_export_iframe"),document.body.appendChild(o)}this.toPDF(t,e,i,n,s,' target="dhx_export_iframe"')},dhtmlXGridObject.prototype.filterBy=function(t,e,i){if(this.isTreeGrid())return this.filterTreeBy(t,e,i);if(this._f_rowsBuffer?i||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof t)for(var n=0;n<e.length;n++)this._filterA(t[n],e[n]);else this._filterA(t,e);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(t,e){if(""!=e){var i=!0;if("function"==typeof e?i=!1:e=(e||"").toString().toLowerCase(),this.rowsBuffer.length)for(var n=this.rowsBuffer.length-1;n>=0;n--)(i?-1!=this._get_cell_value(this.rowsBuffer[n],t).toString().toLowerCase().indexOf(e):e.call(this,this._get_cell_value(this.rowsBuffer[n],t),this.rowsBuffer[n].idd))||this.rowsBuffer.splice(n,1)}},dhtmlXGridObject.prototype.getFilterElement=function(t){if(this.filters){for(var e=0;e<this.filters.length;e++)if(this.filters[e][1]==t)return this.filters[e][0].combo||this.filters[e][0];return null}},dhtmlXGridObject.prototype.collectValues=function(t){var e=this.dhxevs.data.oncollectvalues;if(e){var i=!0;for(var n in e){var s=e[n].call(this,t);!0!==s&&(i=s||i)}if(!0!==i)return i}if(this.isTreeGrid())return this.collectTreeValues(t);this.dma(!0),this._build_m_order(),t=this._m_order?this._m_order[t]:t;for(var o={},l=[],r=this._f_rowsBuffer||this.rowsBuffer,a=0;a<r.length;a++){var h=this._get_cell_value(r[a],t);!h||r[a]._childIndexes&&r[a]._childIndexes[t]==r[a]._childIndexes[t-1]||(o[h]=!0)}this.dma(!1);var d=this.combos[t]||(this._col_combos?this._col_combos[t]:!(!this._sub_trees||!this._sub_trees[t])&&this._sub_trees[t][0]);for(var c in o)if(!0===o[c]){if(d)if(d.get&&d.get(c))c=d.get(c);else if(d.getOption&&d.getOption(c))c=d.getOption(c).text;else if(d.getItemText){var u=d.getItemText(c);(this._sub_trees[t][1]=this._sub_trees[t][1]||{})[u]=c,c=u}l.push(c)}return l.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXGridObject.prototype.filterByAll=function(){var t=[],e=[];this._build_m_order();for(var i=0;i<this.filters.length;i++){var n=this._m_order?this._m_order[this.filters[i][1]]:this.filters[i][1];if(!(n>=this._cCount)){e.push(n);var s=this.filters[i][0].old_value=this.filters[i][0].value;this.filters[i][0]._filter&&(s=this.filters[i][0]._filter());var o;"function"!=typeof s&&(o=this.combos[n]||(this._col_combos?this._col_combos[n]:!(!this._sub_trees||!this._sub_trees[n])&&this._sub_trees[n][1]))&&(s=o.values?-1==(n=o.values._dhx_find(s))?s:o.keys[n]:o.getOptionByLabel?o.getOptionByLabel(s)?o.getOptionByLabel(s).value:s:o[s]),t.push(s)}}this.callEvent("onFilterStart",[e,t])&&(this.filterBy(e,t),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))},dhtmlXGridObject.prototype.makeFilter=function(t,e,i){if(this.filters||(this.filters=[]),"object"!=typeof t&&(t=document.getElementById(t)),t){var n=this;if(t.style.width||(t.style.width="90%"),"SELECT"==t.tagName)this.filters.push([t,e]),this._loadSelectOptins(t,e),t.onchange=function(){n.filterByAll()},_isIE&&(t.style.marginTop="1px"),this.attachEvent("onEditCell",function(i,n,s){return this._build_m_order(),2==i&&this.filters&&(this._m_order?s==this._m_order[e]:s==e)&&this._loadSelectOptins(t,e),!0});else if("INPUT"==t.tagName)this.filters.push([t,e]),t.old_value=t.value="",t.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){t.value!=t.old_value&&(n.filterByAll(),t.old_value=t.value)},500)};else if("DIV"==t.tagName){this.filters.push([t,e]),t.style.padding="0px",t.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var s=new dhtmlXCombo(t,"_filter","90%");s.filterSelfA=s.filterSelf,s.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},s.enableFilteringMode(!0),t.combo=s,t.value="",this._loadComboOptins(t,e),s.attachEvent("onChange",function(){t.value=s.getSelectedValue(),null===t.value&&(t.value=""),n.filterByAll()})}t.parentNode&&(t.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(t,e,i,n){!0===(n=n||function(t,e){return-1!=e.toString().toLowerCase().indexOf(t)})&&(n=function(t,e){return e.toString().toLowerCase()==t});var s=new Array;if(t=t.toString().toLowerCase(),"number"!=typeof i&&(i=i?1:0),!this.rowsBuffer.length)return s;for(var o=e||0;o<this._cCount;o++){if(this._h2)this._h2.forEachChild(0,function(e){if(i&&s.length==i)return s;n(t,this._get_cell_value(e.buff,o))&&s.push([e.id,o])},this);else for(var l=0;l<this.rowsBuffer.length;l++)if(n(t,this._get_cell_value(this.rowsBuffer[l],o))&&(s.push([this.rowsBuffer[l].idd,o]),i&&s.length==i))return s;if(void 0!==e)return s}return s},dhtmlXGridObject.prototype.makeSearch=function(t,e,i){if("object"!=typeof t&&(t=document.getElementById(t)),t){var n=this;"INPUT"==t.tagName&&(t.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=t.value){var s=n.findCell(t.value,e,!0,i);s.length&&(n._h2&&n.openItem(s[0][0]),n.selectCell(n.getRowIndex(s[0][0]),e||0))}},500)}),t.parentNode&&(t.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(t,e){var i=this.collectValues(e),n=t.value;t.innerHTML="",t.options[0]=new Option("","");for(var s=this._filter_tr?this._filter_tr[e]:null,o=0;o<i.length;o++)t.options[t.options.length]=new Option(s?s(i[o]):i[o],i[o]);t.value=n},dhtmlXGridObject.prototype.setSelectFilterLabel=function(t,e){this._filter_tr||(this._filter_tr=[]),this._filter_tr[t]=e},dhtmlXGridObject.prototype._loadComboOptins=function(t,e){if(t.combo){var i=this.collectValues(e);t.combo.clearAll();for(var n=[["",""]],s=0;s<i.length;s++)n.push([i[s],i[s]]);t.combo.addOption(n)}},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var t=0;t<this.filters.length;t++)switch(this.filters[t][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[t]);break;case"div":this._loadComboOptins.apply(this,this.filters[t])}},dhtmlXGridObject.prototype._filters_ready=function(t,e){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(t,e){if(this._f_rowsBuffer)for(var i=0;i<this._f_rowsBuffer.length;i++)if(this._f_rowsBuffer[i].idd==t)return this._f_rowsBuffer[i]=e}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.hdr.rows.length||(this.filters=[])}),this.attachEvent("onSetSizes",this._filters_resize_combo),this.attachEvent("onResize",this._filters_resize_combo),this._filters_ready=function(){}},dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var t=0;t<this.filters.length;t++)null!=this.filters[t][0].combo&&this.filters[t][0].combo.setSize(Math.round(90*this.filters[t][0].offsetWidth/100));return!0}},dhtmlXGridObject.prototype._in_header_text_filter=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e),t.firstChild._filter=function(){return""==t.firstChild.value?"":function(e){return 0==e.toString().toLowerCase().indexOf(t.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(t,e){t.innerHTML="<select></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(t,e){t.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e);var i=this.combos;t.firstChild._filter=function(){var n=t.firstChild.value;return n?(i[e]&&(n=i[e].keys[i[e].values._dhx_find(n)]),n=n.toLowerCase(),function(t){return t.toString().toLowerCase()==n}):""},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(t,e){t.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>",t.onselectstart=function(){return event.cancelBubble=!0},t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._search_common=function(t,e){t.innerHTML="<input type='text' style='width:90%; '>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_text_search=function(t,e,i){this._search_common(t,e),this.makeSearch(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_search_strict=function(t,e){this._search_common(t,e),this.makeSearch(t.firstChild,e,!0)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(t,e){this._in_header_text_filter.call(this,t,e),t.firstChild._filter=function(){var t,e=this.value,i="==",n=parseFloat(e.replace("=","")),s=null;return e?-1!=e.indexOf("..")?(e=e.split(".."),n=parseFloat(e[0]),s=parseFloat(e[1]),function(t){return t>=n&&t<=s}):((t=e.match(/>=|<=|>|</))&&(i=t[0],n=parseFloat(e.replace(i,""))),Function("v"," if (v "+i+" "+n+" ) return true; return false;")):""}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(t,e,i){t.innerHTML=i[0]+"<input type='checkbox' />"+i[1];var n=this;t.getElementsByTagName("input")[0].onclick=function(t){n._build_m_order();var i=n._m_order?n._m_order[e]:e,s=this.checked?1:0;n.forEachRowA(function(t){var e=this.cells(t,i);e.isCheckbox()&&!e.isDisabled()&&(e.setValue(s),e.cell.wasChanged=!0),this.callEvent("onEditCell",[1,t,i,s]),this.callEvent("onCheckbox",[t,i,s]),this.callEvent("onCheck",[t,i,s])}),(t||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(t,e,i){this._stat_in_header(t,function(){var t=0;this._build_m_order();for(var i=this._m_order?this._m_order[e]:e,n=0;n<this.rowsBuffer.length;n++){var s=parseFloat(this._get_cell_value(this.rowsBuffer[n],i));t+=isNaN(s)?0:s}return this._maskArr[i]?this._aplNF(t,i):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(t,e,i){var n=i[1].split(":");i[1]="";for(var s=0;s<n.length;s++)n[s]=parseInt(n[s]);for(var o=[],l=0;l<n.length;l++)o[n[l]]=!0;this._stat_in_header(t,function(){for(var t=0,i=0;i<this.rowsBuffer.length;i++){for(var s=1,o=0;o<n.length;o++)s*=parseFloat(this._get_cell_value(this.rowsBuffer[i],n[o]));t+=isNaN(s)?0:s}return this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},o,i,i)},dhtmlXGridObject.prototype._in_header_stat_max=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++)i=Math.max(i,parseFloat(this._get_cell_value(this.rowsBuffer[n],t)));return this._maskArr[e]?this._aplNF(i,e):i},e,i)},dhtmlXGridObject.prototype._in_header_stat_min=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++)i=Math.min(i,parseFloat(this._get_cell_value(this.rowsBuffer[n],t)));return this._maskArr[e]?this._aplNF(i,e):i},e,i)},dhtmlXGridObject.prototype._in_header_stat_average=function(t,e,i){this._stat_in_header(t,function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=0,n=0;if(0==this.getRowsNum())return"&nbsp;";for(var s=0;s<this.rowsBuffer.length;s++){var o=parseFloat(this._get_cell_value(this.rowsBuffer[s],t));isNaN(o)||(i+=o,n++)}return this._maskArr[e]?this._aplNF(i/n,e):Math.round(i/n*100)/100},e,i)},dhtmlXGridObject.prototype._in_header_stat_count=function(t,e,i){this._stat_in_header(t,function(){return this.getRowsNum()},e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,n){var s=function(){this.dma(!0),t.innerHTML=(n[0]?n[0]:"")+e.call(this)+(n[1]?n[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;e<4;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",s),this.attachEvent("onXLE",s),this.attachEvent("onFilterEnd",s),this.attachEvent("onEditCell",function(t,e,n){return 2==t&&(n==i||i&&i[n])&&s.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype.loadCSVFile=function(t,e){this.load(t,e,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(t){this._csvAID=dhx4.s2b(t)},dhtmlXGridObject.prototype.enableCSVHeader=function(t){this._csvHdr=dhx4.s2b(t)},dhtmlXGridObject.prototype.setCSVDelimiter=function(t){this.csv.cell=t},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(t){this.parse(t,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(t){this.editStop(),this._mathSerialization?this._agetm="getMathValue":this._strictText||t?this._agetm="getTitle":this._agetm="getValue";var e=[];if(this._csvHdr)for(var i=1;i<this.hdr.rows.length;i++){for(var n=[],s=0;s<this._cCount;s++)this._srClmn&&!this._srClmn[s]||n.push(this.getColumnLabel(s,i-1));e.push(this.csvParser.str(n,this.csv.cell,this.csv.row))}s=0;for(var o=this.rowsBuffer.length;s<o;s++){var l=this._serializeRowToCVS(null,s);""!=l&&e.push(l)}return this.csvParser.block(e,this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(t,e,i,n){var s=new Array;t||(t=this.render_row(e),this._fake&&!this._fake.rowsAr[t.idd]&&this._fake.render_row(e)),this._csvAID||(s[s.length]=t.idd),i=i||0,n=n||this._cCount;for(var o=!1,l=i;t.childNodes[i]._cellIndex>l&&i;)i--;for(var r=i;l<n&&t.childNodes[r];r++){var a=t.childNodes[r]._cellIndex;if(this._srClmn&&!this._srClmn[a]||this._serialize_visible&&this._hrrar[a])l++;else{for(var h=t.childNodes[r],d=this.cells(t.idd,a);l!=a&&(l++,s.push(""),!(l>=n)););if(l>=n)break;if(l++,d.cell?zxVal=d[this._agetm]():zxVal="",this._chAttr&&d.wasChanged()&&(o=!0),s[s.length]=null===zxVal?"":zxVal,this._ecspn&&h.colSpan&&h.colSpan>1){h=h.colSpan-1;for(var c=0;c<h;c++)s[s.length]="",l++}}}return this._onlChAttr&&!o?"":this.csvParser.str(s,this.csv.cell,this.csv.row)},dhtmlXGridObject.prototype.toClipBoard=function(t){window.clipboardData?window.clipboardData.setData("Text",t):(new Clipboard).copy(t)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(t,e){if(!t||!e&&0!==e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);this.toClipBoard(((i.getLabel?i.getLabel():i.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);i[i.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(t){var e="";if(this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!this._fake,t)e=this._serializeRowToCVS(this.getRowById(t));else for(var i=[],n=0;n<this.selectedRows.length;n++)i[i.length]=this._serializeRowToCVS(this.selectedRows[n]),e=this.csvParser.block(i,this.csv.row);this._serialize_visible=!1,this.toClipBoard(e)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(t){var e=this.fromClipBoard();if(e){if(t)var i=this.getRowById(t);else i=this.selectedRows[0];if(i){e=this.csvParser.unblock(e,this.csv.cell,this.csv.row)[0],this._csvAID||e.splice(0,1);for(var n=0;n<e.length;n++){var s=this.cells3(i,n);s[s.setImage?"setLabel":"setValue"](e[n])}}}},dhtmlXGridObject.prototype.csvParser={block:function(t,e){return t.join(e)},unblock:function(t,e,i){for(var n=(t||"").split(i),s=0;s<n.length;s++)n[s]=(n[s]||"").split(e);var o=n.length-1;return 1==n[o].length&&""==n[o][0]&&n.splice(o,1),n},str:function(t,e,i){return t.join(e)}},dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(t,e){return t.join(e)},unblock:function(t,e,i){var n=[[]],s=0;if(!t)return n;for(var o=/^[ ]*"/,l=/"[ ]*$/,r=new RegExp(".*"+i+".*$"),a=t.split(e),h=0;h<a.length;h++)if(a[h].match(o)){for(var d=a[h].replace(o,"");!a[h].match(l);)d+=a[++h];n[s].push(d.replace(l,"").replace(this._quote_esc,'"'))}else if(a[h].match(r)){var c=a[h].indexOf(i);n[s].push(a[h].substr(0,c)),n[++s]=[],a[h]=a[h].substr(c+1),h--}else(a[h]||h!=a.length-1)&&n[s].push(a[h]);var u=n.length-1;return u>0&&!n[u].length&&n.splice(u,1),n},str:function(t,e,i){for(var n=0;n<t.length;n++)t[n]='"'+t[n].replace(this._quote,'""')+'"';return t.join(e)}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var t=this.fromClipBoard();if(t)for(var e=this.csvParser.unblock(t,this.csv.cell,this.csv.row),i=0;i<e.length;i++)if(e[i]){if(!(t=e[i]).length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,t):(this.rowsAr[t[0]]&&(t[0]=this.uid()),this.addRow(t[0],t.slice(1)))}},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var t=this.fromClipBoard();t&&this.loadCSVString(t)},dhtmlXGridObject.prototype.getXLS=function(t){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(t||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var e=document.createElement("INPUT");e.type="hidden",e.name="csv",this.xslform.appendChild(e);var i=document.createElement("INPUT");i.type="hidden",i.name="csv_header",this.xslform.appendChild(i)}var n=this.serializeToCSV();this.xslform.childNodes[0].value=n;for(var s=[],o=this._cCount,l=0;l<o;l++)s.push(this.getHeaderCol(l));s=s.join(","),this.xslform.childNodes[1].value=s,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(t,e){var i="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",n=null;if(this._fake){n=[].concat(this._hrrar);for(var s=0;s<this._fake._cCount;s++)this._hrrar[s]=null}var o=document.location.port,l=document.location.hostname;i+="<base  href='"+document.location.protocol+"//"+l+(o?":"+o:"")+document.location.pathname+"'></base>",this.parentGrid||(i+=t||""),i+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var r=Math.max(this.rowsBuffer.length,this.rowsCol.length),a=this._cCount,h=this._printWidth();i+='<tr class="header_row_1">';for(s=0;s<a;s++)if(!this._hrrar||!this._hrrar[s]){for(var d=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(s)]:s],c=d.colSpan||1,u=d.rowSpan||1,f=1;f<c;f++)h[s]+=h[f];i+='<td rowspan="'+u+'" width="'+h[s]+'%" style="background-color:lightgrey;" colspan="'+c+'">'+this.getHeaderCol(s)+"</td>",s+=c-1}i+="</tr>";for(s=2;s<this.hdr.rows.length;s++)if(_isIE){i+="<tr style='background-color:lightgrey' class='header_row_"+s+"'>";var p=this.hdr.rows[s].childNodes;for(f=0;f<p.length;f++)this._hrrar&&this._hrrar[p[f]._cellIndex]||(i+=p[f].outerHTML);i+="</tr>"}else i+="<tr class='header_row_"+s+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[s].innerHTML:"")+this.hdr.rows[s].innerHTML+"</tr>";for(s=0;s<r;s++)if(i+="<tr>",this.rowsCol[s]&&this.rowsCol[s]._cntr)i+=this.rowsCol[s].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[s]||"none"!=this.rowsCol[s].style.display){var _;if(this.rowsCol[s])_=this.rowsCol[s].idd;else{if(!this.rowsBuffer[s])continue;_=this.rowsBuffer[s].idd}for(f=0;f<a;f++)if(!this._hrrar||!this._hrrar[f]){if(this.rowsAr[_]&&"TR"==this.rowsAr[_].tagName){var m=this.cells(_,f);if(m._setState)var g="";else if(m.getContent)g=m.getContent();else if(m.getImage||m.combo)g=m.cell.innerHTML;else g=m.getValue()}else g=this._get_cell_value(this.rowsBuffer[s],f);var v=this.columnColor[f]?"background-color:"+this.columnColor[f]+";":"",b=this.cellAlign[f]?"text-align:"+this.cellAlign[f]+";":"",y=m.getAttribute("colspan");i+='<td style="'+v+b+'" '+(y?'colSpan="'+y+'"':"")+">"+(""===g?"&nbsp;":g)+"</td>",y&&(f+=y-1)}if(i+="</tr>",this.rowsCol[s]&&this.rowsCol[s]._expanded){var x=this.cells4(this.rowsCol[s]._expanded.ctrl);x.getSubGrid?i+='<tr><td colspan="'+a+'">'+x.getSubGrid().printView()+"</td></tr>":i+='<tr><td colspan="'+a+'">'+this.rowsCol[s]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(s=1;s<this.ftr.childNodes[0].rows.length;s++)i+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[s].innerHTML:"")+this.ftr.childNodes[0].rows[s].innerHTML+"</tr>";if(i+="</table>",this.parentGrid)return i;i+=e||"";var w=window.open("","_blank");w.document.write(i),w.document.write("<script>window.onerror=function(){return true;}<\/script>"),w.document.close(),this._fake&&(this._hrrar=n)},dhtmlXGridObject.prototype._printWidth=function(){for(var t=[],e=0,i=0;i<this._cCount;i++){var n=this.getColWidth(i);t.push(n),e+=n}var s=[],o=0;for(i=0;i<t.length;i++){var l=Math.floor(t[i]/e*100);o+=l,s.push(l)}return s[s.length-1]+=100-o,s},dhtmlXGridObject.prototype.enableBlockSelection=function(t){if(void 0===this._bs_mode){var e=this;this.obj.onmousedown=function(t){return e._bs_mode&&e._OnSelectionStart(t||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return e._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return e._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}if(!1===t)return this._bs_mode=!1,this._HideSelection();if(this._bs_mode=!0,!window.dhx4.isIPad){var i=this._clip_area=document.createElement("textarea");i.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",i.onkeydown=function(t){86==(t=t||event).keyCode&&(t.ctrlKey||t.metaKey)&&e.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!e.editor&&e._clip_area&&e._clip_area.select()})}},dhtmlXGridObject.prototype.forceLabelSelection=function(t){this._strictText=dhx4.s2b(t)},dhtmlXGridObject.prototype.selectBlock=function(t,e,i,n){e=this.getRowIndex(e),n=this.getRowIndex(n),myGrid._CreateSelection(e,t),myGrid._selectionArea=myGrid._RedrawSelectionPos(myGrid.cells2(e,t).cell,myGrid.cells2(n,i).cell),myGrid._ShowSelection()},dhtmlXGridObject.prototype._OnSelectionStart=function(t,e){var i=this;if(2!=t.button){var n=t.srcElement||t.target;if(this.editor){if(n.tagName&&("INPUT"==n.tagName||"TEXTAREA"==n.tagName))return;this.editStop()}i.setActive(!0);var s=this.getPosition(this.obj),o=t.clientX-s[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),l=t.clientY-s[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(o-4,l-4),n==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;n&&(!n.tagName||"td"!=n.tagName.toLowerCase());)n=n.parentNode;this._startSelectionCell=n}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(t){i._blsTimer&&window.clearTimeout(i._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[o,l],this._selectionObj.onmousemove=this.obj.onmousemove=function(e){(e=e||t).preventDefault?e.preventDefault():e.returnValue=!1,i._OnSelectionMove(e)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(e){return e=e||t,i._OnSelectionStop(e,this),!0},this.callEvent("onBeforeBlockSelection",[]),document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(t,e){t=t,this._fake&&(t+=this._fake.objBox.scrollWidth),e=e;for(var i=0,n=0;n<this.obj.rows.length;n++)if((e-=this.obj.rows[n].offsetHeight)<=0){i=this.obj.rows[n];break}if(!i||!i.idd)return null;for(n=0;n<this._cCount;n++)if((t-=this.getColWidth(n))<=0)for(;;){if(!i._childIndexes||i._childIndexes[n+1]!=i._childIndexes[n])return this.cells(i.idd,n).cell;i=i.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(t){var e=this;this._ShowSelection();var i=this.getPosition(this.obj),n=t.clientX-i[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),s=t.clientY-i[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-n)<5&&Math.abs(this._init_pos[1]-s)<5)return this._HideSelection();var o=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(t.srcElement||t.target,"TD");else if(t.srcElement||t.target)if("dhtmlxGrid_selection"==(t.srcElement||t.target).className)this._endSelectionCell=this._getCellByPos(n,s)||this._endSelectionCell;else{var l=this.getFirstParentOfType(t.srcElement||t.target,"TD");l.parentNode.idd&&(this._endSelectionCell=l)}this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=o));var r=this.objBox.scrollLeft+this.objBox.clientWidth,a=this.objBox.scrollTop+this.objBox.clientHeight,h=this.objBox.scrollLeft,d=this.objBox.scrollTop,c=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),n+20>=r?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,c=!0):n-20<h&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,c=!0),s+20>=a&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,c=!0):s-20<d&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,c=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),c){var u=t.clientX,f=t.clientY;this._blsTimer=window.setTimeout(function(){e._OnSelectionMove({clientX:u,clientY:f})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(t){var e=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(i){return e._bs_mode&&e._OnSelectionStart(i||t,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var i=this.getFirstParentOfType(t.srcElement||t.target,"TD");for(i&&i.parentNode.idd||(i=this._endSelectionCell);i&&(!i.tagName||"td"!=i.tagName.toLowerCase());)i=i.parentNode;if(!i)return this._HideSelection();this._stopSelectionCell=i,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(t,e){if(t.parentNode.grid!=e.parentNode.grid)return this._selectionArea;var i={};i.LeftTopCol=t._cellIndex,i.LeftTopRow=this.getRowIndex(t.parentNode.idd),i.RightBottomCol=e._cellIndex,i.RightBottomRow=this.getRowIndex(e.parentNode.idd);var n=t.offsetWidth,s=t.offsetHeight;t=this.getPosition(t,this.obj);var o=e.offsetWidth,l=e.offsetHeight;if(e=this.getPosition(e,this.obj),t[0]<e[0])var r=t[0],a=e[0]+o;else{var h=i.RightBottomCol;i.RightBottomCol=i.LeftTopCol,i.LeftTopCol=h;r=e[0],a=t[0]+n}if(t[1]<e[1])var d=t[1],c=e[1]+l;else{h=i.RightBottomRow;i.RightBottomRow=i.LeftTopRow,i.LeftTopRow=h;d=e[1],c=t[1]+s}var u=a-r,f=c-d;return this._selectionObj.style.left=r+"px",this._selectionObj.style.top=d+"px",this._selectionObj.style.width=u+"px",this._selectionObj.style.height=f+"px",i},dhtmlXGridObject.prototype._CreateSelection=function(t,e){if(null==this._selectionObj){var i=document.createElement("div");i.style.position="absolute",i.style.display="none",i.className="dhtmlxGrid_selection",this._selectionObj=i,this._selectionObj.onmousedown=function(t){if(2==(t=t||event).button||_isMacOS&&t.ctrlKey)return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",t])},this._selectionObj.oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1},this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=t+"px",this._selectionObj.style.top=e+"px",this._selectionObj.startX=t,this._selectionObj.startY=e},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null,this._clip_area&&(this._clip_area.value="",this._clip_area.blur())},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._clip_area&&null!=this._selectionArea){var t=new Array;this._mathSerialization?this._agetm="getMathValue":this._strictText?this._agetm="getTitle":this._agetm="getValue",this._serialize_visible=!0;for(var e=this._selectionArea.LeftTopRow;e<=this._selectionArea.RightBottomRow;e++){var i=this._serializeRowToCVS(this.rowsBuffer[e],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);this._csvAID?t[t.length]=i:t[t.length]=i.substr(i.indexOf(this.csv.cell)+1)}t=t.join(this._CSVRowDelimiter),this._clip_area.value=t,this._clip_area.select(),this._serialize_visible=!1}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var t=this;window.setTimeout(function(){t._pasteBlockFromClipboard(),t=null},1)}},dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var t=this._clip_area.value;if(t){if(null!=this._selectionArea)var e=this._selectionArea.LeftTopRow,i=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;e=this.getRowIndex(this.cell.parentNode.idd),i=this.cell._cellIndex}var n=e+(t=this.csvParser.unblock(t,this.csv.cell,this.csv.row)).length,s=i+t[0].length;s>this._cCount&&(s=this._cCount);for(var o=0,l=e;l<n;l++){var r=this.render_row(l);if(-1!=r){for(var a=0,h=i;h<s;h++)if(!this._hrrar[h]||this._fake){var d=this.cells3(r,h);if(d.isDisabled())a++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,r.idd,h,t[o][a],d.getValue()),d.combo){for(var c=d.combo.values,u=0;u<c.length;u++)if(t[o][a]==c[u]){d.setValue(d.combo.keys[u]),c=null;break}null!=c&&d.editable?d.setValue(t[o][a++]):a++}else d[d.setImage?"setLabel":"setValue"](t[o][a++]);d.cell.wasChanged=!0}}else s=Math.min(s+1,this._cCount);this.callEvent("onRowPaste",[r.idd]),o++}}}},dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null},dhtmlXGridObject.prototype.enableSmartRendering=function(t,e,i){arguments.length>2&&(e&&!this.rowsBuffer[e-1]&&(this.rowsBuffer[e-1]=0),e=i),this._srnd=dhx4.s2b(t),this._srdh=this._srdh||20,this._dpref=e||0},dhtmlXGridObject.prototype.enablePreRendering=function(t){this._srnd_pr=parseInt(t||50)},dhtmlXGridObject.prototype.forceFullLoading=function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)if(!this.rowsBuffer[i]){var n=t||this.rowsBuffer.length-i;if(this.callEvent("onDynXLS",[i,n])){var s=this;this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+n,function(){window.setTimeout(function(){s.forceFullLoading(t,e)},100)},this._data_type)}return}e&&e.call(this)},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(t){this._srdh=parseInt(t)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(t,e,i,n){if(!e)return null;var s=this._prepareRow("__filler__");s.firstChild.style.width="1px",s.firstChild.style.borderWidth=s.firstChild.style.padding=s.firstChild.style.margin="0px";for(var o=1;o<s.childNodes.length;o++)s.childNodes[o].style.display="none";return s.firstChild.style.height=e*this._srdh+"px",(i=i||this.rowsCol[t])&&i.nextSibling?i.parentNode.insertBefore(s,i.nextSibling):_isKHTML?this.obj.appendChild(s):this.obj.rows[0].parentNode.appendChild(s),this.callEvent("onAddFiller",[t,e,s,i,n]),[t,e,s]},dhtmlXGridObject.prototype._update_srnd_view=function(){var t=Math.floor(this.objBox.scrollTop/this._srdh),e=t+this._get_view_size();if(this.multiLine){var i=this.objBox.scrollTop;for(t=0;i>0;)i-=this.rowsCol[t]?this.rowsCol[t].offsetHeight:this._srdh,t++;e=t+this._get_view_size(),t>0&&t--}(e+=this._srnd_pr||0)>this.rowsBuffer.length&&(e=this.rowsBuffer.length);for(var n=t;n<e;n++)if(!this.rowsCol[n]){if(-1==this._add_from_buffer(n)){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[e-1]){this._dpref&&this._dpref;var s=Math.max(0,Math.min(n,e-this._dpref));this._current_load=[s,e-s]}else this._current_load=[n,this._dpref?this._dpref:e-n];this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]),this._updateParentLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n])),n&&n==(this._realfake?this._fake:this)._r_select&&this.selectCell(n,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(t){var e=this.render_row(t);if(-1==e)return-1;if((e._attrs.selected||e._attrs.select)&&(this.selectRow(e,!1,!0),e._attrs.selected=e._attrs.select=null),this._cssSP){if(this._h2){var i=this._h2.get[e.idd];e.className+=" "+(i.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+i.level+(this.rowsAr[i.id]._css||"")}}else this._cssEven&&t%2==0?e.className=this._cssEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""):this._cssUnEven&&t%2==1&&(e.className=this._cssUnEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""));for(var n=0;n<this._fillers.length;n++){var s=this._fillers[n];if(s&&s[0]<=t&&s[0]+s[1]>t){var o=t-s[0];return void(0==o?(this._insert_before(t,e,s[2]),this._update_fillers(n,-1,1)):o==s[1]-1?(this._insert_after(t,e,s[2]),this._update_fillers(n,-1,0)):(this._fillers.push(this._add_filler(t+1,s[1]-o-1,s[2],1)),this._insert_after(t,e,s[2]),this._update_fillers(n,-s[1]+o,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(t,e,i){var n=this._fillers[t];n[1]=n[1]+e,n[0]=n[0]+i,n[1]?(n[2].firstChild.style.height=parseFloat(n[2].firstChild.style.height)+e*this._srdh+"px",this.callEvent("onUpdateFiller",[n[2]])):(this.callEvent("onRemoveFiller",[n[2]]),n[2].parentNode.removeChild(n[2]),this._fillers.splice(t,1))},dhtmlXGridObject.prototype._insert_before=function(t,e,i){i.parentNode.insertBefore(e,i),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"before"])},dhtmlXGridObject.prototype._insert_after=function(t,e,i){i.nextSibling?i.parentNode.insertBefore(e,i.nextSibling):i.parentNode.appendChild(e),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"after"])},void 0!==window.dhtmlxValidation&&(dhtmlxValidation.trackInput=function(t,e,i,n){dhtmlxEvent(t,"keyup",function(s){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(t,e)?(t.className=t.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),n&&n(t,t.value,e)):i&&!i(t,t.value,e)||(t.className+=" dhtmlx_live_validation_error")},250)})},dhtmlxValidation.checkInput=function(t,e){return dhtmlxValidation.checkValue(t.value,e)},dhtmlxValidation.checkValue=function(t,e){"string"==typeof e&&(e=e.split(","));for(var i=!0,n=0;n<e.length;n++)this["is"+e[n]]?i=i&&this["is"+e[n]](t):alert("Incorrect validation rule: "+e[n]);return i}),dhtmlXGridObject.prototype.enableValidation=function(t,e){t=dhx4.s2b(t),this._validators=!!t&&{data:[]},arguments.length>1&&(this._validators._live=e),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(t){this._validators||this.enableValidation(!0),"string"==typeof t&&(t=t.split(this.delim)),this._validators.data=t},dhtmlXGridObject.prototype.validationEvent=function(t,e,i,n,s){var o=this._validators;if(!o)return!0;var l=o.data[i]||this.cells(e,i).getAttribute("validate")||"";if(1==t&&l){var r=this.editor||(this._fake||{}).editor;if(!r)return!0;if(r.cell.className=r.cell.className.replace(/[ ]*dhtmlx_validation_error/g,""),o._live){var a=this;dhtmlxValidation.trackInput(r.getInput(),l,function(t,n,s){return a.callEvent("onLiveValidationError",[e,i,n,t,s])},function(t,n,s){return a.callEvent("onLiveValidationCorrect",[e,i,n,t,s])})}}return 2==t&&this.validateCell(e,i,l,n),!0},dhtmlXGridObject.prototype.validateCell=function(t,e,i,n){if(i=i||this._validators.data[e]||this.cells(t,e).getAttribute("validate"),n=n||this.cells(t,e).getValue(),i){var s=this.cells(t,e).cell,o=!0;"string"==typeof i&&(i=i.split(this.delim));for(var l=0;l<i.length;l++)dhtmlxValidation.checkValue(n,i[l])||(this.callEvent("onValidationError",[t,e,n,i[l]])&&(s.className+=" dhtmlx_validation_error"),o=!1);return o&&(this.callEvent("onValidationCorrect",[t,e,n,i]),s.className=s.className.replace(/[ ]*dhtmlx_validation_error/g,"")),o}},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(t,e){this._sub_trees||(this._sub_trees=[]),this._sub_trees[e]=[t],t.parentObject.style.display="none";var i=this;t.parentObject.onclick=function(t){return(t||window.event).cancelBubble=!0,!1},t.ev_onDblClick=null,t.attachEvent("onDblClick",function(t){return i._sub_id=t,i.editStop(),!0}),t._chRRS=!0},eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var t=this.cell.firstChild;return t&&t.tagName?t.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var t=this.cell.firstChild;return t&&t.tagName?t.innerHTML:""},eXcell_grid.prototype=new eXcell,dhtmlXGridObject.prototype.setSubGrid=function(t,e,i){this._sub_grids||(this._sub_grids=[]),this._sub_grids[e]=[t,i],t.entBox.style.display="none";var n=this;t.entBox.onclick=function(t){return(t||window.event).cancelBubble=!0,!1},t.attachEvent("onRowSelect",function(t){return n.editStop(),!0}),t._chRRS=!1},eXcell_dhxCalendar.prototype=new eXcell,eXcell_dhxCalendar.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(t[0],t[1]+this.cell.offsetHeight),this.grid._grid_calendarA._last_operation_calendar=!1,this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val||new Date),this.grid._grid_calendarA.draw=e},eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}return!1}},eXcell_dhxCalendar.prototype.setValue=function(t){if(t&&"object"==typeof t)return this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val);t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)},eXcell_dhxCalendarA.prototype=new eXcell,eXcell_dhxCalendarA.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(1*t[0]+this.cell.offsetWidth,1*t[1]),this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid._grid_calendarA._last_operation_calendar=!1,this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val),this.grid._grid_calendarA.draw=e,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.obj=document.createElement(this.cell.atag),this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.align,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.getValue(),this.cell.innerHTML="",this.cell.appendChild(this.obj),window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},this.obj.focus(),this.obj.focus()},eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}this.setValue(this.obj.value);i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}},eXcell_dhxCalendarA.prototype.setValue=function(t){if(t&&"object"==typeof t)return this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val);t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),"NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)},dhtmlXGridObject.prototype.resetCounter=function(t){this._fake&&!this._realfake&&t<this._fake._cCount&&this._fake.resetCounter(t,this.currentPage);var e=arguments[0]||0;for(this.currentPage&&(e=(this.currentPage-1)*this.rowsBufferOutSize),e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&"TR"==this.rowsBuffer[e].tagName&&this.rowsAr[this.rowsBuffer[e].idd]&&(this.rowsAr[this.rowsBuffer[e].idd].childNodes[t].innerHTML=e+1)},eXcell_cntr.prototype=new eXcell,eXcell_acheck.prototype=new eXcell,eXcell_acheck.prototype.setValue=function(t){-1!=(t=(t||"").toString()).indexOf("1")||-1!=t.indexOf("true")?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue(this.drawCurrentState(),this.cell.chstate)},eXcell_context.prototype=new eXcell,dhtmlXGridObject.prototype.setSubContext=function(t,e,i){var n=this;t.attachEvent("onClick",function(e,i){return n._sub_id=e,n.editStop(),t.hideContextMenu(),!0}),this._sub_context||(this._sub_context=[]),this._sub_context[e]=[t,i],t.hideContextMenu()},dhtmlXGridObject.prototype._process_html=function(t){if(t.tagName&&"TABLE"==t.tagName)return this._process_inner_html(t,0);var e=document.createElement("DIV");e.innerHTML=t.xmlDoc.responseText;var i=e.getElementsByTagName("TABLE")[0];this._process_inner_html(i,0)},dhtmlXGridObject.prototype._process_inner_html=function(t,e){for(var i=t.rows.length,n=e;n<i;n++){var s=t.rows[n].getAttribute("id")||n;this.rowsBuffer.push({idd:s,data:t.rows[n],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(t,e){var i=e.getElementsByTagName("TD"),n=[];t._attrs=this._xml_attrs(e);for(var s=0;s<i.length;s++){var o=i[s],l=o.getAttribute("type");if(t.childNodes[s]&&(l&&(t.childNodes[s]._cellType=l),t.childNodes[s]._attrs=this._xml_attrs(i[s])),o.firstChild?n.push(o.innerHTML):n.push(""),o.colSpan>1){t.childNodes[s]._attrs.colspan=o.colSpan;for(var r=1;r<o.colSpan;r++)n.push("")}}for(i.length;s<t.childNodes.length;s++)t.childNodes[s]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(n):n),t},dhtmlXGridObject.prototype._get_html_data=function(t,e){for(t=t.firstChild;;){if(!t)return"";if("TD"==t.tagName&&e--,e<0)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var t=document.getElementsByTagName("table"),e=0;e<t.length;e++)"dhtmlxGrid"==t[e].className&&dhtmlXGridFromTable(t[e])}),dhtmlXGridObject.prototype._process_xmlA=function(t){this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);this._parseHead(e);var i=dhx4.ajax.xpath(this.xml.row,e),n=parseInt(e.getAttribute("pos")||0),s=parseInt(e.getAttribute("total_count")||0);if(s&&!this.rowsBuffer[s-1]&&(this.rowsBuffer[s-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(t);for(var o=0;o<i.length;o++)if(!this.rowsBuffer[o+n]){var l=i[o].getAttribute("id")||this.uid();this.rowsBuffer[o+n]={idd:l,data:i[o],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[l]=i[o]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xmlB=function(t){this._parsing=!0;var e=dhx4.ajax.xmltop(this.xml.top,t);this._parseHead(e);var i=dhx4.ajax.xpath(this.xml.row,e),n=parseInt(e.getAttribute("pos")||0),s=parseInt(e.getAttribute("total_count")||0);if(s&&!this.rowsBuffer[s-1]&&(this.rowsBuffer[s-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(t);for(var o=0;o<i.length;o++)if(!this.rowsBuffer[o+n]){var l=i[o].getAttribute("id")||this.uid();this.rowsBuffer[o+n]={idd:l,data:i[o],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[l]=i[o]}this.render_dataset(),this._parsing=!1},dhtmlXGridObject.prototype._process_xml_rowA=function(t,e){var i=[];t._attrs=this._xml_attrs(e);for(var n=0;n<this.columnIds.length;n++){var s=this.columnIds[n],o=t._attrs[s]||"";t.childNodes[n]&&(t.childNodes[n]._attrs={}),i.push(o)}return this._fillRow(t,this._c_order?this._swapColumns(i):i),t},dhtmlXGridObject.prototype._get_xml_dataA=function(t,e){return t.getAttribute(this.getColumnId(e))},dhtmlXGridObject.prototype._process_xml_rowB=function(t,e){var i=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var n=dhx4.ajax.xpath("./userdata",e),s=n.length-1;s>=0;s--)this.setUserData(n[s].getAttribute("name"),n[s].firstChild?n[s].firstChild.data:"");for(var o=0;o<e.childNodes.length;o++){var l=e.childNodes[o];if(l.tagName){var r=this.getColIndexById(l.tagName);if(!isNaN(r)){var a=l.getAttribute("type");a&&(t.childNodes[r]._cellType=a),t.childNodes[r]._attrs=this._xml_attrs(l),l.getAttribute("xmlcontent")||(l=l.firstChild?l.firstChild.data:""),i[r]=l}}}for(s=0;s<t.childNodes.length;s++)t.childNodes[s]._attrs||(t.childNodes[s]._attrs={});return this._fillRow(t,i),t},dhtmlXGridObject.prototype._get_xml_dataB=function(t,e){var i=this.getColumnId(e);for(t=t.firstChild;;){if(!t)return"";if(t.tagName==i)return t.firstChild?t.firstChild.data:"";t=t.nextSibling}return""},dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"],this._disA=[];for(var t=this._disF.length-1;t>=0;t--)this._disA[t]=this[this._disF[t]],this[this._disF[t]]=function(){return!0};this._cellCache=[],this.cells4=function(t){var e=this._cellCache[t._cellIndex];return e||((e=this._cellCache[t._cellIndex]=this._disA[3].apply(this,[t])).destructor=function(){return!0},e.setCValue=function(t){e.cell.innerHTML=t}),e.cell=t,e.combo=t._combo||this.combos[t._cellIndex],e}},dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var t=this._disF.length-1;t>=0;t--)this[this._disF[t]]=this._disA[t];this._correctMonolite&&this._correctMonolite(),this.setSizes(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._in_header_number_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"num");return function(e){for(var i=!(t.length>0),n=0;n<t.length;n++)i=i||t[n](e);return i}}},dhtmlXGridObject.prototype._in_header_string_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"str");return function(e){for(var i=!(t.length>0),n=0;n<t.length;n++)i=i||t[n](e);return i}}},dhtmlXGridObject.prototype._get_filters=function(t,e){for(var i=t.split(","),n=[],s=0;s<i.length;s++)if(""!=i[s]){var o=this["_get_"+e+"_filter"](i[s]);n.push(o)}return n},dhtmlXGridObject.prototype._get_str_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');if("!"===t.substr(0,1)){var e=t.substr(1);return new Function("value",'if (value !== "'+e+'") return true; return false;')}if("~"===t.substr(0,1)){e=t.substr(1);return new Function("value",'if (value.indexOf("'+e+'") !== -1) return true; return false;')}if("^"===t.substr(0,1)&&"&"===t.substr(t.length-1,1)&&(t="="+t.substr(1,t.length-2)),"^"===t.substr(0,1)){e=t.substr(1);return new Function("value","if (value.substr(0, "+e.length+') === "'+e+'") return true; return false;')}if("&"===t.substr(t.length-1,1)){e=t.substr(0,t.length-1);return new Function("value","if (value.substr(value.length - "+e.length+') === "'+e+'") return true; return false;')}if("="===t.substr(0,1))e=t.substr(1);else e=t;return new Function("value",'if (value === "'+e+'") return true; return false;')},dhtmlXGridObject.prototype._get_num_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');var e=t.split("..");if(2==e.length){var i=parseFloat(e[0]),n=parseFloat(e[1]);return new Function("value","if (value >= "+i+" && value <= "+n+") return true; return false;")}var s=t.match(/<>|>=|<=|>|<|=/);if(s)var o=s[0],l=parseFloat(t.replace(o,""));else{o="==";l=parseFloat(t)}return"<>"==o&&(o="!="),"="==o&&(o="=="),new Function("value"," if (value "+o+" "+l+" ) return true; return false;")},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),void 0===this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),void 0===this._submitAR&&this.submitAddedRows(!0);var t=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(e){return t._added_rows.push(e),t.forEachCell(e,function(t){t.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(e){return t._deleted_rows.push(e),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),!1===this.parentForm)return!1;if(!this.formEventAttached){this.formInputs=new Array;var t=this;dhtmlxEvent(this.parentForm,"submit",function(){t.entBox&&t.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){if(this.formCreateInputCollection(),!this.callEvent("onBeforeFormSubmit",[]))return!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(t){this.FormSubmitOnlyChanged=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitColumns=function(t){"string"==typeof t&&(t=t.split(this.delim)),this._submit_cols=t},dhtmlXGridObject.prototype.setFieldName=function(t){t=(t=(t=(t=(t=t.replace(/\{GRID_ID\}/g,"'+a1+'")).replace(/\{ROW_ID\}/g,"'+a2+'")).replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'")).replace(/\{COLUMN_INDEX\}/g,"'+a3+'")).replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+t+"';")},dhtmlXGridObject.prototype.submitSerialization=function(t){this.FormSubmitSerialization=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitAddedRows=function(t){this._submitAR=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitOnlySelected=function(t){this.FormSubmitOnlySelected=dhx4.s2b(t)},dhtmlXGridObject.prototype.submitOnlyRowID=function(t){this.FormSubmitOnlyRowID=dhx4.s2b(t)},dhtmlXGridObject.prototype.createFormInput=function(t,e){var i=document.createElement("input");i.type="hidden",this._input_mask&&"string"!=typeof t?i.name=this._input_mask.apply(this,t):i.name=((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+t,i.value=e,this.parentForm.appendChild(i),this.formInputs.push(i)},dhtmlXGridObject.prototype.createFormInputRow=function(t){for(var e=(this.globalBox||this.entBox).id,i=0;i<this._cCount;i++){var n=this.cells3(t,i);this.FormSubmitOnlyChanged&&!n.wasChanged()||this._submit_cols&&!this._submit_cols[i]||this.createFormInput(this._input_mask?[e,t.idd,i]:t.idd+"_"+i,n.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(t=0;t<this.selectedRows.length;t++)this.createFormInputRow(this.selectedRows[t]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(t){-1!==this.getRowById(t)&&this.createFormInputRow(this.rowsAr[t])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var t=!1,e=this.entBox;e&&e.tagName&&e!=document.body;){if("form"==e.tagName.toLowerCase()){t=e;break}e=e.parentNode}return t},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(t){this.rowsAr[t].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var t=0;t<this.rowsCol.length;t++)this.rowsCol[t]._cntr||this.rowsBuffer.push(this.rowsCol[t]);this._fake.rowsBuffer=dhtmlxArray();for(t=0;t<this._fake.rowsCol.length;t++)this._fake.rowsCol[t]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[t])},dhtmlXGridObject.prototype.groupBy=function(t,e){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!e){e=["#title"];for(var i=1;i<this._cCount;i++)e.push("#cspan")}this._gmask=document.createElement("TR"),this._gmask.origin=e;var n,s=0;for(i=0;i<e.length;i++)"#cspan"==e[i]?n.colSpan=(parseInt(n.colSpan)||1)+1:((n=document.createElement("TD"))._cellIndex=i,this._hrrar[i]&&(n.style.display="none"),n.className="group_row",n.innerHTML="&nbsp;","#title"==e[i]?this._gmask._title=s:n.align=this.cellAlign[i]||"left",this._gmask.appendChild(n),0==e[i].indexOf("#stat")&&(this._gmask._math=!0,n._counter=[this["_g_"+e[i].replace("#","")],i,s]),s++);for(var o in this._groups)this._groups[o]=this.undefined;if(this._gIndex=t,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(t,e){var i=this.rowsCol[t+e];return i&&("none"==i.style.display||i._cntr)?this._nextRow(t+e,e):i},this.__sortRowsBG||(this._key_events=dhtmlx.extend({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,-1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){void 0!==this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(t,e,i){if(void 0===this._groups)return this.sortRows_bg.apply(this,arguments);if(e=e||this.fldSort[t]||"str",i=i||"asc",this.callEvent("onBeforeSorting",[t,e,i])){if(void 0===this._groups)return!0;t==this._gIndex?this._sortByGroup(t,e,i):this._sortInGroup(t,e,i),this.setSortImgState(!0,t,i),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,t,i),this.callEvent("onAfterSorting",[t,e,i])}return!1},this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(t){if(!this._groups)return!0;if(!this.rowsAr[t])return!0;var e=this.cells(t,this._gIndex).getValue();""===e&&(e=" ");var i=this._groups[e];return this._dec_group(i),!0}),this.attachEvent("onAfterRowDeleted",function(t){this.updateGroups()}),this.attachEvent("onCheckbox",function(t,e,i){this.callEvent("onEditCell",[2,t,e,i?1:0,i?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(t,e,i,n,s){if(!this._groups)return!0;if(2==t&&n!=s&&i==this._gIndex){""===s&&(s=" "),this._dec_group(this._groups[s]);var o=this.rowsAr[e],l=this.rowsCol._dhx_find(o),r=this._inc_group(n),a=this.rowsCol[r];o==a&&(a=a.nextSibling);var h=o.parentNode;o.rowIndex;h.removeChild(o),a?h.insertBefore(o,a):h.appendChild(o),this.rowsCol._dhx_insertAt(r,o),r<l&&l++,this.rowsCol._dhx_removeAt(l,o),this._fixAlterCss()}else 2==t&&n!=s&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(e,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(i=0;i<this._hrrar.length;i++)this._hrrar[i]&&this.hideGroupColumn(i,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(t,e,i){var n=this._groups_get();n.reverse();for(var s=0;s<n.length;s++){for(var o=n[s]._cntr._childs,l={},r=0;r<o.length;r++){var a=this.cells3(o[r],t);l[o[r].idd]=a.getDate?a.getDate():a.getValue()}this._sortCore(t,e,i,l,o)}this._groups_put(n),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(t,e,i){for(var n=this._groups_get(),s=[],o=0;o<n.length;o++)n[o].idd="_sort_"+o,s["_sort_"+o]=n[o]._cntr.text;this._sortCore(t,e,i,s,n),this._groups_put(n),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(t,e,i){""===t&&(t=" "),this._groups[t]||(this._groups[t]={text:t,row:this._addPseudoRow(),count:0,state:e?"plus":"minus"});var n=this._groups[t];n.row._cntr=n;var s=this.rowsCol._dhx_find(n.row)+n.count+1;return n.count++,i||(this._updateGroupView(n),this.updateGroups()),s},dhtmlXGridObject.prototype._dec_group=function(t){if(t)return t.count--,0==t.count?(t.row.parentNode.removeChild(t.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(t.row)),delete this._groups[t.text]):this._updateGroupView(t),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[t.text]),this.updateGroups(),!0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(t,e,i){if(void 0!==this._groups){if(this._realfake)var n=this._fake._bfs_cells(t.idd,this._gIndex).getValue();else if(this._bfs_cells3)n=this._bfs_cells3(t,this._gIndex).getValue();else n=this.cells3(t,this._gIndex).getValue();n||(n=" "),e=this._inc_group(n,"none"==t.style.display)}var s=this._insertRowAt_gA(t,e,i);return void 0!==this._groups&&(this.expandGroup(n),this._updateGroupView(this._groups[n]),this.updateGroups()),s},dhtmlXGridObject.prototype._updateGroupView=function(t){if(this._fake&&!this._realfake)return t.row.firstChild.innerHTML="&nbsp;";var e=this._gmask||this._fake._gmask,i="<img style='margin-bottom:-4px' src='"+this.imgURL+t.state+".gif'> ";this.customGroupFormat?i+=this.customGroupFormat(t.text,t.count):i+=t.text+" ( "+t.count+" ) ",t.row.childNodes[e._title].innerHTML=i},dhtmlXGridObject.prototype._addPseudoRow=function(t){for(var e=this._gmask||this._fake._gmask,i=e.cloneNode(!0),n=0;n<i.childNodes.length;n++)i.childNodes[n]._cellIndex=e.childNodes[n]._cellIndex,this._realfake&&(i.childNodes[n].style.display="");var s=this;return i.onclick=function(t){s.callEvent("onGroupClick",[this._cntr.text])&&(s._fake&&s._realfake?s._fake._switchGroupState(s._fake._groups[this._cntr.text].row):s._switchGroupState(this),(t||event).cancelBubble="true")},i.ondblclick=function(t){(t||event).cancelBubble="true"},t||(_isKHTML?this.obj.appendChild(i):this.obj.firstChild.appendChild(i),this.rowsCol.push(i)),i},dhtmlXGridObject.prototype._groups_get=function(){var t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=[],i=this.rowsCol.length-1;i>=0;i--)this.rowsCol[i]._cntr?(this.rowsCol[i]._cntr._childs=e,e=[],t.push(this.rowsCol[i])):e.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i]);return t},dhtmlXGridObject.prototype._groups_put=function(t){var e=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=e;for(var i=0;i<t.length;i++){var n=t[i]._cntr;this.obj.firstChild.appendChild(n.row),this.rowsCol.push(n.row),n.row.idd=null;for(var s=0;s<n._childs.length;s++)this.obj.firstChild.appendChild(n._childs[s]),this.rowsCol.push(n._childs[s]);delete n._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(t){if(this.getRowsNum()){t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=this.rowsCol.length,i=0;i<e;i++){var n=this.cells4(this.rowsCol[i].childNodes[this._gIndex]).getValue();if(this.rowsCol[i].style.display="",n||(n=" "),!this._groups[n]){this._groups[n]={text:n,row:this._addPseudoRow(!0),count:0,state:"minus"};var s=this._groups[n];s.row._cntr=s,this._groups[n]._childs=[],t.push(s.row)}this._groups[n].count++,this._groups[n]._childs.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i])}for(i=0;i<t.length;i++)this._updateGroupView(t[i]._cntr);this._groups_put(t),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(t){var e=t._cntr;this._fake&&!this._realfake&&(e.state=this._fake._groups[t._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[t._cntr.text].row));var i=this.rowsCol._dhx_find(e.row)+1;e.state="minus"==e.state?"plus":"minus";for(var n="plus"==e.state?"none":"";this.rowsCol[i]&&!this.rowsCol[i]._cntr;)this.rowsCol[i].style.display=n,i++;this._updateGroupView(e),this.callEvent("onGroupStateChanged",[e.text,"minus"==e.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(t){"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseGroup=function(t){"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var t in this._groups)this._groups[t]&&"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var t in this._groups)this._groups[t]&&"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(t,e){if(!this._fake){for(var i=-1,n=this._gmask.childNodes,s=0;s<n.length;s++)if(n[s]._cellIndex==t){i=s;break}if(-1!=i)for(var o in this._groups)this._groups[o].row.childNodes[i].style.display=e?"none":""}},dhtmlXGridObject.prototype.groupStat=function(t,e,i){i=this["_g_"+(i||"stat_total")];var n=0,s=0;return this.forEachRowInGroup(t,function(t){n=i(n,1*this.cells(t,e).getValue(),s),s++}),n},dhtmlXGridObject.prototype.forEachRowInGroup=function(t,e){var i=this._groups[t].row.nextSibling;if(i)for(;i&&!i._cntr;)e.call(this,i.idd),i=i.nextSibling;else{var n=this._groups[t]._childs;if(n)for(var s=0;s<n.length;s++)e.call(this,n[s].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var t=this._gmask.childNodes,e=0;e<t.length;e++)t[e]._counter&&this._b_processing.apply(this,t[e]._counter)},dhtmlXGridObject.prototype._b_processing=function(t,e,i){var n=0,s=0;this._ecache[this.cellType[e]]||this.cells5({parentNode:{grid:this}},this.cellType[e]);for(var o=this.rowsCol.length-1;o>=0;o--)this.rowsCol[o]._cntr?(this.cells5(this.rowsCol[o].childNodes[i],this.cellType[e]).setValue(n),s=n=0):(n=t(n,1*this.cells3(this.rowsCol[o],e).getValue(),s),s++)},dhtmlXGridObject.prototype._g_stat_total=function(t,e,i){return t+e},dhtmlXGridObject.prototype._g_stat_min=function(t,e,i){return i||(t=1/0),Math.min(t,e)},dhtmlXGridObject.prototype._g_stat_max=function(t,e,i){return i||(t=-1/0),Math.max(t,e)},dhtmlXGridObject.prototype._g_stat_average=function(t,e,i){return(t*i+e)/(i+1)},dhtmlXGridObject.prototype._g_stat_count=function(t,e,i){return++t},dhtmlXGridObject.prototype._in_header_collapse=function(t,e,i){var n="TD"==t.tagName?t:t.parentNode;e=n._cellIndexS,this._column_groups||(this._column_groups=[]);var s=i[1].split(":");s=[(s=i[1].split(":")).shift(),s.join(":")];var o=parseInt(s[0]);t.innerHTML=i[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(s[1]||"")+"<span>",t.style.paddingBottom="0px";var l=this;this._column_groups[e]=t.getElementsByTagName("IMG")[0],this._column_groups[e].onclick=function(t){(t||event).cancelBubble=!0,this._cstate=!this._cstate;for(var i=e+1;i<e+o;i++)l.setColumnHidden(i,this._cstate);if(this._cstate){if(n.colSpan&&n.colSpan>0){n._exp_colspan=n.colSpan;var s=Math.max(1,n.colSpan-o);if(!_isFF)for(var r=0;r<n.colSpan-s;r++){var a=document.createElement("TD");n.nextSibling?n.parentNode.insertBefore(a,n.nextSibling):n.parentNode.appendChild(a)}n.colSpan=s}l.callEvent("onColumnCollapse",[e,this._cstate])}else if(n._exp_colspan){if(n.colSpan=n._exp_colspan,!_isFF)for(r=1;r<n._exp_colspan;r++)n.parentNode.removeChild(n.nextSibling);l.callEvent("onColumnCollapse",[e,this._cstate])}this.src=l.imgURL+(this._cstate?"plus.gif":"minus.gif"),"none"!=l.sortImg.style.display&&l.setSortImgPos()}},dhtmlXGridObject.prototype.collapseColumns=function(t){this._column_groups[t]&&!this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.expandColumns=function(t){this._column_groups[t]&&this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.enableHeaderMenu=function(t){if(!window.dhtmlXMenuObject)return dhtmlx.message("You need to include DHTMLX Menu");if(!this._header_menu){var e=this._header_menu=new dhtmlXMenuObject;e.renderAsContextMenu();var i=this;e.attachEvent("onBeforeContextMenu",function(){return i._showHContext(t),!0}),e.attachEvent("onClick",function(t){for(var e=this.getCheckboxState(t),n=i.hdr.rows[1],s=0;s<n.cells.length;s++){var o=n.cells[s];if(o._cellIndexS==t)for(var l=o.colSpan||1,r=0;r<l;r++)i.setColumnHidden(1*t+r,!e)}}),this.attachEvent("onInit",function(){e.addContextZone(this.hdr)}),this.hdr.rows.length&&this.callEvent("onInit",[])}},dhtmlXGridObject.prototype.getHeaderMenu=function(t){return this._header_menu},dhtmlXGridObject.prototype._hideHContext=function(){this._header_menu&&this._header_menu.hide()},dhtmlXGridObject.prototype._showHContext=function(t){"string"==typeof t&&(t=t.split(this.delim));var e=0,i=0;this._header_menu.clearAll();for(var n=0;n<this.hdr.rows[1].cells.length;n++){var s=this.hdr.rows[1].cells[n];if(!t||t[e]&&"false"!=t[e]){if(s.firstChild&&"DIV"==s.firstChild.tagName)var o=s.firstChild.innerHTML;else o=s.innerHTML;o=o.replace(/<[^>]*>/gi,"");var l=!(this.isColumnHidden(e)||0==this.getColWidth(e));this._header_menu.addCheckbox("child",this._header_menu.topId,i,e,o,l),i++}e+=s.colSpan||1}},dhtmlXGridObject.prototype._process_json_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var n in e.userdata)this.setUserData(t.idd,n,e.userdata[n]);e=this._c_order?this._swapColumns(e.data):e.data;for(var s=0;s<e.length;s++)"object"==typeof e[s]&&null!=e[s]&&(t.childNodes[s]._attrs=e[s],e[s].type&&(t.childNodes[s]._cellType=e[s].type),e[s]=e[s].value);return this._fillRow(t,e),t},dhtmlXGridObject.prototype._process_js_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var n in e.userdata)this.setUserData(t.idd,n,e.userdata[n]);for(var s=[],o=0;o<this.columnIds.length;o++)s[o]=e[this.columnIds[o]],"object"==typeof s[o]&&null!=s[o]&&(t.childNodes[o]._attrs=s[o],s[o].type&&(t.childNodes[o]._cellType=s[o].type),s[o]=s[o].value),s[o]||0===s[o]||(s[o]="");return this._fillRow(t,s),t},dhtmlXGridObject.prototype.updateFromJSON=function(t,e,i,n){void 0===e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,n,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){this.grid._h2.get[this.cell.parentNode.idd]&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree"),i=t.parent||0,n={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(i,function(t){n[t.id]=!0},this):this.forEachRow(function(t){n[t]=!0}));for(var s=t.rows,o=0;o<s.length;o++){var l=s[o],r=l.id;if(n[r]=!1,this.rowsAr[r]&&"TR"!=this.rowsAr[r].tagName)this._h2?this._h2.get[r].buff.data=l:this.rowsBuffer[this.getRowIndex(r)].data=l,this.rowsAr[r]=l;else if(this.rowsAr[r])this._process_json_row(this.rowsAr[r],l,-1),this._postRowProcessing(this.rowsAr[r],!0);else if(this._refresh_mode[1]){var a={idd:r,data:l,_parser:this._process_json_row,_locator:this._get_json_data},h=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(a),h=0):this.rowsBuffer.push(a),this._h2&&(reset=!0,this._h2.add(r,i).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[r]=l,l=this.render_row(h),this._insertRowAt(l,h?-1:0)}}if(this._refresh_mode[2])for(r in n)n[r]&&this.rowsAr[r]&&this.deleteRow(r);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},dhtmlXGridObject.prototype._process_js=function(t){return this._process_json(t,"js")},dhtmlXGridObject.prototype._parseHeadJson=function(t){if(t.head&&t.head.length){var e=t.head,i=t.settings,n="setInitWidths",s=!1;i&&"%"==i.colwidth&&(n="setInitWidthsP"),i&&"%"==i.splitat&&(s=i.splitat),this.hdr.rows.length>0&&this.clearAll(!0);for(var o=[[],[],[],[],[],[],[]],l=["value","width","type","align","sort","hidden","id"],r=["",n,"setColTypes","setColAlign","setColSorting","","setColumnIds"],a=0;a<e.length;a++)for(var h=0;h<l.length;h++)o[h].push(e[a][l[h]]);this.setHeader(o[0]);for(a=0;a<r.length;a++)r[a]&&this[r[a]](o[a].join(this.delim));for(a=0;a<e.length;a++){var d=e[a].options;if(e[a].options)if("clist"==this.cellType[a])this.registerCList(a,d);else{var c=this.getCombo(a);for(h=0;h<d.length;h++)c.put(d[h].id,d[h].value)}}this.init();var u=o[5].join(this.delim);this.setColHidden&&""!=u.replace(/,/g,"")&&this.setColHidden(u),s&&this.splitAt&&this.splitAt(s)}},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=!0;try{var data=data.responseText||data;"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp)}catch(t){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",data.xmlDoc||data,this]),data={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(data);data.head&&this._parseHeadJson(data);var cr=parseInt(data.pos||0),total=parseInt(data.total_count||0),reset=!1;total&&(this.rowsBuffer[total-1]||(this.rowsBuffer.length&&(reset=!0),this.rowsBuffer[total-1]=null),total<this.rowsBuffer.length&&(this.rowsBuffer.splice(total,this.rowsBuffer.length-total),reset=!0));var userdata="js"===mode?data.userdata:data;for(var key in userdata)"js"!==mode&&"rows"==key||this.setUserData("",key,userdata[key]);if("js"==mode&&data.collections)for(var colkey in data.collections){var index=this.getColIndexById(colkey),colrecs=data.collections[colkey];if(index!==window.undefined)if("clist"==this.cellType[index]){colplaindata=[];for(var j=0;j<colrecs.length;j++)colplaindata.push(colrecs[j].label);this.registerCList(index,colplaindata)}else for(var combo=this.getCombo(index),j=0;j<colrecs.length;j++)combo.put(colrecs[j].value,colrecs[j].label)}if(this.isTreeGrid())return this._process_tree_json(data,null,null,mode);if("js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++)if(!this.rowsBuffer[i+cr]){var row=data[i],id=row.id||i+1;this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++)if(!this.rowsBuffer[i+cr]){var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[id]=data.rows[i]}if(this.callEvent("onDataReady",[]),reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1},dhtmlXGridObject.prototype._get_json_data=function(t,e){return"object"==typeof t.data[e]?t.data[e].value:t.data[e]},dhtmlXGridObject.prototype._process_tree_json=function(t,e,i,n){this._parsing=!0;var s=!1;if(e||(this.render_row=this.render_row_tree,s=!0,"0"==(i=(e=t).parent||0)&&(i=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2)),"js"==n){e.data&&!i&&(t=e.data),e.rows&&(e=e.rows);for(var o=0;o<e.length;o++){var l=e[o].id;(r=this._h2.add(l,i)).buff={idd:l,data:e[o],_parser:this._process_js_row,_locator:this._get_js_data},e[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e[o],e[o],l,n)}}else if(e.rows)for(o=0;o<e.rows.length;o++){var r;l=e.rows[o].id;(r=this._h2.add(l,i)).buff={idd:l,data:e.rows[o],_parser:this._process_json_row,_locator:this._get_json_data},e.rows[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e.rows[o],e.rows[o],l,n)}s&&(0!=i&&this._h2.change(i,"state","minus"),this._updateTGRState(this._h2.get[i]),this._h2_to_buff(),this.callEvent("onDataReady",[]),0!=i&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),!1===this._slowParse&&this.forEachRow(function(t){this.render_row_tree(0,t)}),this._parsing=!1,0==i||this._srnd||this.callEvent("onOpenEnd",[i,1]))},dhtmlXGridObject.prototype.enableMarkedCells=function(t){this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0),this.lastMarkedRow=null,this.lastMarkedColumn=null,this.markedCells=!0,this.lastMarkMethod=0,arguments.length>0&&(dhx4.s2b(t)||(this.markedCells=!1))},dhtmlXGridObject.prototype.doMark=function(t,e){var i=t.parentNode.idd;if(this.setActive(!0),i){this.editStop(),this.cell=t,this.row=t.parentNode;var n=t._cellIndex;if(e||(e=0),0==e)this.unmarkAll();else if(1==e){if(this.lastMarkedRow)for(var s=Math.min(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),o=Math.max(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),l=Math.min(n,this.lastMarkedColumn),r=Math.max(n,this.lastMarkedColumn),a=s;a<o+1;a++)for(var h=l;h<r+1;h++)this.mark(this.getRowId(a),h,!0)}else if(2==e&&-1!=this.markedRowsArr._dhx_find(i))for(var d=0;d<this.markedCellsArr[i].length;d++)if(this.markedCellsArr[i][d]==n)return this.mark(i,n,!1),!0;this.markedCellsArr[i]||(this.markedCellsArr[i]=new dhtmlxArray(0)),1!=e&&this.mark(i,n),this.moveToVisible(this.cells(i,n).cell),this.lastMarkedRow=i,this.lastMarkedColumn=n,this.lastMarkMethod=e}},dhtmlXGridObject.prototype.mark=function(t,e,i){if(arguments.length>2&&!dhx4.s2b(i)){if(this.cells(t,e).cell.className=this.cells(t,e).cell.className.replace(/cellselected/g,""),-1!=this.markedRowsArr._dhx_find(t)){var n=this.markedCellsArr[t]._dhx_find(e);-1!=n&&(this.markedCellsArr[t]._dhx_removeAt(n),0==this.markedCellsArr[t].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(t)),this.callEvent("onCellUnMarked",[t,e]))}return!0}this.cells(t,e).cell.className+=" cellselected",-1==this.markedRowsArr._dhx_find(t)&&(this.markedRowsArr[this.markedRowsArr.length]=t),this.markedCellsArr[t]||(this.markedCellsArr[t]=new dhtmlxArray(0)),-1==this.markedCellsArr[t]._dhx_find(e)&&(this.markedCellsArr[t][this.markedCellsArr[t].length]=e,this.callEvent("onCellMarked",[t,e]))},dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var t=0;t<this.markedRowsArr.length;t++){var e=this.markedRowsArr[t];if(this.rowsAr[e])for(var i=0;i<this.markedCellsArr[e].length;i++)this.callEvent("onCellUnMarked",[e,this.markedCellsArr[e][i]]),this.cells(e,this.markedCellsArr[e][i]).cell.className=this.cells(e,this.markedCellsArr[e][i]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0)}return!0},dhtmlXGridObject.prototype.getMarked=function(){var t=new Array;if(this.markedRowsArr)for(var e=0;e<this.markedRowsArr.length;e++)for(var i=this.markedRowsArr[e],n=0;n<this.markedCellsArr[i].length;n++)t[t.length]=[i,this.markedCellsArr[i][n]];return t},eXcell_math.prototype=new eXcell,dhx4.attachEvent("onGridCreated",function(t){t._reset_math(),t.attachEvent("onClearAll",t._reset_math),t.attachEvent("onCellChanged",function(t,e){if(this._mat_links[t]){var i=this._mat_links[t][e];if(i)for(var n=0;n<i.length;n++)i[n].parentNode&&this.cells5(i[n]).setValue(this._calcSCL(i[n]))}if(!this._parsing&&this._aggregators[e]){var s=this._h2.get[t].parent.id;if(0!=s){var o=this.cells(s,e);o.setValue(this._calcSCL(o.cell))}}}),t.attachEvent("onAfterRowDeleted",function(t,e){if(0!=e&&!this._parsing&&this._aggregators.length)for(var i=0;i<this._aggregators.length;i++)if(this._aggregators[i]){var n=this.cells(e,i);n.setValue(this._calcSCL(n.cell))}return!0}),t.attachEvent("onXLE",t._refresh_math)}),dhtmlXGridObject.prototype._reset_math=function(){this._mat_links={},this._aggregators=[]},dhtmlXGridObject.prototype._refresh_math=function(){for(var t=0;t<this._aggregators.length;t++)this._aggregators[t]&&this._h2.forEachChild(0,function(e){if(0!=e.childs.length){var i=this.cells(e.id,t);i.setValue(this._calcSCL(i.cell))}},this)},dhtmlXGridObject.prototype.refreshMath=function(t){this._mat_links={};for(var e=0;e<this.getColumnsNum();e++)"math"==this.getColType(e)&&this.forEachRow(function(t){var i=this.cells(t,e);i.setValue(i.cell.original||i.getValue())})},dhtmlXGridObject.prototype.enableMathSerialization=function(t){this._mathSerialization=dhx4.s2b(t)},dhtmlXGridObject.prototype.setMathRound=function(t){this._roundDl=t,this._roundD=Math.pow(10,t)},dhtmlXGridObject.prototype.enableMathEditing=function(t){this._mathEdit=dhx4.s2b(t)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return this.cells5(cell).getValue();try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(t){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(z<0&&(pre="-"+pre),0==(z=Math.round(Math.abs(z)*this._roundD).toString()))return 0;if(this._roundDl>0){var n=z.length-this._roundDl;return n<0&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}return pre+z}return z},dhtmlXGridObject.prototype._countTotal=function(t,e){for(var i=0,n=this._h2.get[t],s=0;s<n.childs.length;s++){if(!n.childs[s].buff)return i;if(n.childs[s].buff._parser)return i=0,this._h2.forEachChild(t,function(t){if(0==t.childs.length){var n=parseFloat(this._get_cell_value(t.buff,e),10);n&&(i+=n)}},this),i;var o=parseFloat(this._get_cell_value(n.childs[s].buff,e),10);o&&(i+=o)}return i},dhtmlXGridObject.prototype._compileSCL=function(t,e,i){if(null===t||t===window.undefined)return t;if(0!=(t=t.toString()).indexOf("=")||!e.parentNode)return this._reLink([],e),i&&(e._code=e.original=null),t;e.original=t;var n=null;if(-1!=(t=t.replace("=","")).indexOf("sum"))return t=t.replace("sum","(dhtmlx.agrid._countTotal('"+e.parentNode.idd+"',"+e._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[e._cellIndex]="sum",e._code=t,this._parsing?"":this._calcSCL(e);if(-1!=t.indexOf("[[")){var s=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this,n=n||new Array,t=t.replace(s,function(t,i,s,o){return"-"==s&&(s=e.parentNode.idd),0==s.indexOf("#")&&(s=dhtmlx.agrid.getRowId(s.replace("#",""))),n[n.length]=[s,o],'(parseFloat(dhtmlx.agrid.cells("'+s+'",'+o+").getValue(),10))"})}if(-1!=t.indexOf(":")){s=/:(\w+)/g;dhtmlx.agrid=this;var o=e.parentNode.idd;n=n||new Array,t=t.replace(s,function(t,e,i,s){return n[n.length]=[o,dhtmlx.agrid.getColIndexById(e)],'(parseFloat(dhtmlx.agrid.cells("'+o+'",dhtmlx.agrid.getColIndexById("'+e+'")).getValue(),10))'})}else{s=/c([0-9]+)/g;dhtmlx.agrid=this;o=e.parentNode.idd;n=n||new Array,t=t.replace(s,function(t,e,i,s){return n[n.length]=[o,e],'(parseFloat(dhtmlx.agrid.cells("'+o+'",'+e+").getValue(),10))"})}return this._reLink(n,e),e._code=t,this._calcSCL(e)},dhtmlXGridObject.prototype._reLink=function(t,e){if(t.length)for(var i=0;i<t.length;i++){this._mat_links[t[i][0]]||(this._mat_links[t[i][0]]={});var n=this._mat_links[t[i][0]];n[t[i][1]]||(n[t[i][1]]=[]),n[t[i][1]].push(e)}},_isKHTML&&function(){var t=String.prototype.replace;String.prototype.replace=function(e,i){if("function"!=typeof i)return t.apply(this,arguments);var n=""+this,s=i;if(!(e instanceof RegExp)){return-1==(h=n.indexOf(e))?n:t.apply(n,[e,s(e,h,n)])}for(var o,l=e,r=[],a=l.lastIndex;null!=(o=l.exec(n));){var h=o.index,d=o.concat(h,n);if(r.push(n.slice(a,h),s.apply(null,d).toString()),!l.global){a+=RegExp.lastMatch.length;break}a=l.lastIndex}return r.push(n.slice(a)),r.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(t,e,i,n,s,o,l,r,a){if((t=parseInt(t))>this._cCount&&(t=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,t-1,[e||"&nbsp;",n||100,i||"ed",o||"left",l||"",s||"na",a||"","",this._cMod,n||100]),this._processAllRows("_addColInRow",t),"object"==typeof e)for(var h=1;h<this.hdr.rows.length;h++)if("#rspan"==e[h-1]){for(var d=h-1,c=!1,u=null;!c;){u=this.hdr.rows[d];for(var f=0;f<u.cells.length;f++)if(u.cells[f]._cellIndex==t){c=f;break}d--}this.hdr.rows[d+1].cells[f].rowSpan=(this.hdr.rows[d].cells[f].rowSpan||1)+1}else this.setHeaderCol(t,e[h-1]||"&nbsp;",h);else this.setHeaderCol(t,e||"&nbsp;");this.hdr.rows[0].cells[t],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(t){t=parseInt(t),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),t>=this._cCount||(this._processAllArrays(t,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",t),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(t,e,i){this[t](this.obj.rows[0],e,i,0);for(var n=this.hdr.rows.length,s=0;s<n;s++)this[t](this.hdr.rows[s],e,i,s);if(this.ftr)for(n=this.ftr.firstChild.rows.length,s=0;s<n;s++)this[t](this.ftr.firstChild.rows[s],e,i,s);this.forEachRow(function(n){this.rowsAr[n]&&"TR"==this.rowsAr[n].tagName&&this[t](this.rowsAr[n],e,i,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(t,e,i){var n=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&n.push("cellWidthPX"),this.cellWidthPC.length&&n.push("cellWidthPC"),this._col_combos&&n.push("_col_combos"),this._mCols&&(n[n.length]="_mCols"),this.columnIds&&(n[n.length]="columnIds"),this._maskArr&&n.push("_maskArr"),this._drsclmW&&n.push("_drsclmW"),this._RaSeCol&&n.push("_RaSeCol"),this._hm_config&&n.push("_hm_config"),this._drsclmn&&n.push("_drsclmn"),this.clists&&n.push("clists"),this._validators&&this._validators.data&&n.push(this._validators.data),n.push("combos"),this._customSorts&&n.push("_customSorts"),this._aggregators&&n.push("_aggregators");var s=t<=e;if(!this._c_order){this._c_order=new Array;for(var o=this._cCount,l=0;l<o;l++)this._c_order[l]=l}for(l=0;l<n.length;l++){var r=this[n[l]]||n[l];if(r){if(s){for(var a=r[t],h=t;h<e;h++)r[h]=r[h+1];r[e]=a}else{for(a=r[t],h=t;h>e+1;h--)r[h]=r[h-1];r[e+1]=a}i&&(r[e+(s?0:1)]=i[l])}}},dhtmlXGridObject.prototype.moveColumn=function(t,e){if(e--,t=parseInt(t),(e=parseInt(e))<t)var i=e+1;else i=e;if(!this.callEvent("onBeforeCMove",[t,i]))return!1;t!=i&&(this.editStop(),this._processAllRows("_moveColInRow",t,e),this._processAllArrays(t,e),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[t,i]))},dhtmlXGridObject.prototype._swapColumns=function(t){for(var e=new Array,i=0;i<this._cCount;i++){var n=t[this._c_order[i]];void 0===n&&(n=""),e[i]=n}return e},dhtmlXGridObject.prototype._moveColInRow=function(t,e,i){var n=t.childNodes[e],s=t.childNodes[i+1];if(n){s?t.insertBefore(n,s):t.appendChild(n);for(var o=0;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=o}},dhtmlXGridObject.prototype._addColInRow=function(t,e,i,n){var s=e;if(t._childIndexes){if(t._childIndexes[e-1]!=t._childIndexes[e]&&t.childNodes[t._childIndexes[e-1]])for(o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;else{for(var o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;t._childIndexes[e]--}s=t._childIndexes[e]}var l=t.childNodes[s],r=document.createElement(n?"TD":"TH");n?r._attrs={}:r.style.width=(parseInt(this.cellWidthPX[e])||"100")+"px",l?t.insertBefore(r,l):t.appendChild(r),this.dragAndDropOff&&t.idd&&this.dragger.addDraggableItem(t.childNodes[s],this);for(o=s+1;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=t.childNodes[o]._cellIndex+1;t.childNodes[s]&&(t.childNodes[s]._cellIndex=t.childNodes[s]._cellIndexS=e),t.idd||void 0!==t.idd?(this.cells3(t,e).setValue(""),r.align=this.cellAlign[e],r.style.verticalAlign=this.cellVAlign[e],r.bgColor=this.columnColor[e]):"TD"==r.tagName&&(!t.idd&&this.forceDivInHeader?r.innerHTML="<div class='hdrcell'>&nbsp;</div>":r.innerHTML="&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(t,e){var i=e;t._childIndexes&&(e=t._childIndexes[e]);var n=t.childNodes[e];if(n){if(n.colSpan&&n.colSpan>1&&n.parentNode.idd){var s=n.colSpan-1,o=this.cells4(n).getValue();if(this.setColspan(n.parentNode.idd,n._cellIndex,1),s>1){var l=1*n._cellIndex;this.setColspan(n.parentNode.idd,l+1,s),this.cells(n.parentNode.idd,1*n._cellIndex+1).setValue(o),t._childIndexes.splice(l,1);for(var r=l;r<t._childIndexes.length;r++)t._childIndexes[r]-=1}}else if(t._childIndexes){t._childIndexes.splice(i,1);for(r=i;r<t._childIndexes.length;r++)t._childIndexes[r]--}n&&t.removeChild(n);for(r=e;r<t.childNodes.length;r++)t.childNodes[r]._cellIndex=t.childNodes[r]._cellIndexS=t.childNodes[r]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(t,e){this._mCol=dhx4.s2b(t),void 0!==e&&(this._mCols=e.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(t){for(var e=(t=t||event).target||t.srcElement,i=e;"TABLE"!=i.tagName;)i=i.parentNode;var n=i.grid;if(n&&(n.setActive(),n._mCol&&2!=t.button))return"default"!=(e=n.getFirstParentOfType(e,"TD")).style.cursor||(n&&!n._colInMove&&(n.resized=null,n._mCols&&"true"!=n._mCols[e._cellIndex]||(n._colInMove=e._cellIndex+1)),n._colInMovePos={x:t.clientX,y:t.clientY},!0)},dhtmlXGridObject.prototype._onColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;if(e&&e._colInMove){if(Math.max(Math.abs(t.clientX-e._colInMovePos.x),Math.abs(t.clientY-e._colInMovePos.y))<20)return;if(e._hideHContext&&e._hideHContext(),"object"!=typeof e._colInMove){(o=document.createElement("DIV"))._aIndex=e._colInMove-1,o._bIndex=null,o.innerHTML=e.getHeaderCol(o._aIndex),o.className="dhx_dragColDiv",o.style.position="absolute",document.body.appendChild(o),e._colInMove=o}var i=[];i[0]=document.body.scrollLeft||document.documentElement.scrollLeft,i[1]=document.body.scrollTop||document.documentElement.scrollTop,e._colInMove.style.left=t.clientX+i[0]+8+"px",e._colInMove.style.top=t.clientY+i[1]+8+"px";for(var n=t.target||t.srcElement;n&&void 0===n._cellIndexS;)n=n.parentNode;if(e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),e._colInMove._oldHe=null,e._colInMove._bIndex=null),n){if(e.hdr.rows[1]._childIndexes)var s=e.hdr.rows[1].cells[e.hdr.rows[1]._childIndexes[n._cellIndexS]];else s=e.hdr.rows[1].cells[n._cellIndexS];var o;(o=t.clientX-(dhx4.absLeft(s)-e.hdrBox.scrollLeft))/s.offsetWidth>.5?(s.className+=" columnTargetR",e._colInMove._bIndex=n._cellIndexS):(s.className+=" columnTargetL",e._colInMove._bIndex=n._cellIndexS-1),s.offsetLeft<e.objBox.scrollLeft+20&&(e.objBox.scrollLeft=Math.max(0,s.offsetLeft-20)),s.offsetLeft+s.offsetWidth-e.objBox.scrollLeft>e.objBox.offsetWidth-20&&(e.objBox.scrollLeft=Math.min(e.objBox.scrollLeft+s.offsetWidth+20,e.objBox.scrollWidth-e.objBox.offsetWidth)),e._colInMove._oldHe=s}return t.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;return e&&e._colInMove&&("object"==typeof e._colInMove&&(e._colInMove.parentNode.removeChild(e._colInMove),null!=e._colInMove._bIndex&&e.moveColumn(e._colInMove._aIndex,e._colInMove._bIndex+1),e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),e._colInMove._oldHe=null,e._colInMove.grid=null,e.resized=!0),e._colInMove=0),!0},dhtmlXGridObject.prototype.mouseOverHeader=function(t){var e=this;dhtmlxEvent(this.hdr,"mousemove",function(i){var n=(i=i||window.event).target||i.srcElement;"TD"!=n.tagName&&(n=e.getFirstParentOfType(n,"TD")),n&&void 0!==n._cellIndex&&t(n.parentNode.rowIndex,n._cellIndex)})},dhtmlXGridObject.prototype.mouseOver=function(t){var e=this;dhtmlxEvent(this.obj,"mousemove",function(i){var n=(i=i||window.event).target||i.srcElement;"TD"!=n.tagName&&(n=e.getFirstParentOfType(n,"TD")),n&&void 0!==n._cellIndex&&t(n.parentNode.rowIndex,n._cellIndex)})},dhtmlXGridObject.prototype.enablePaging=function(t,e,i,n,s,o){this._pgn_parentObj="string"==typeof n?document.getElementById(n):n,this._pgn_recInfoParentObj="string"==typeof o?document.getElementById(o):o,this.pagingOn=t,this.showRecInfo=s,this.rowsBufferOutSize=parseInt(e),this.currentPage=1,this.pagesInGroup=parseInt(i),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(t,e){this.xmlFileUrl=t,this._dpref=e},dhtmlXGridObject.prototype.changePageRelative=function(t){this.changePage(this.currentPage+t)},dhtmlXGridObject.prototype.changePage=function(t){0==arguments.length&&(t=this.currentPage||0),t=parseInt(t),t=Math.max(1,Math.min(t,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,t])&&(this.currentPage=parseInt(t),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(t){this._pgn_skin=this["_pgn_"+t],"toolbar"==t&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(t,e){this._pgn_templateA=this._pgn_template_compile(t),this._pgn_templateB=this._pgn_template_compile(e),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(t){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var e=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(e&&e<this.currentPage)return this.changePage(e);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())},dhtmlXGridObject.prototype._init_pgn_events=function(t){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(t,e,i){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var n=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,n),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,n),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(t){for(var e=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,i=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),e+this.pagesInGroup),n=[],s=e+1;s<=i;s++)s==this.currentPage?n.push("<a class='dhx_not_active'><b>"+s+"</b></a>"):n.push("<a onclick='this.grid.changePage("+s+"); return false;'>"+s+"</a>");return n.join(t)},dhtmlXGridObject.prototype._pgn_link=function(t,e,i){if("prevpages"==t||"prev"==t)return 1==this.currentPage?i:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("nextpages"==t||"next"==t)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?i:this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==t?"1":this.pagesInGroup))<=1?i:"<a onclick='this.grid.changePageRelative("+("next"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("current"==t){var n=this.currentPage+(e?parseInt(e):0);return n<1||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<n?i:"<a "+(n==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+n+"); return false;'>"+n+"</a>"}return e},dhtmlXGridObject.prototype._pgn_template_active=function(t){var e=t.getElementsByTagName("A");if(e)for(var i=0;i<e.length;i++)e[i].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(t){return t=t.replace(/\[([^\]]*)\]/g,function(t,e){switch((e=e.split(":"))[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+e[0]+"','"+e[1]+"','"+e[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+e[1]+"')+\""}}),new Function('return "'+t+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(t,e,i,n){this._WTDef=[t,e,i,n]},dhtmlXGridObject.prototype._pgn_bricks=function(t,e,i){var n=(this.skin_name||"").split("_")[1],s="";"light"!=n&&"modern"!=n&&"skyblue"!=n||(s="_"+n),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV");var o=this.globalBox||this.objBox;if(this.pagerElAr.pagerCont.style.width=o.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+s,this.pagerElAr.pagerLine.className="dhx_pline"+s,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+s,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){var l=20;if(t>this.pagesInGroup){var r=document.createElement("DIV"),a=document.createElement("DIV");r.className="dhx_page"+s,a.innerHTML="&larr;",r.appendChild(a),this.pagerElAr.pagerBox.appendChild(r);var h=this;r.pgnum=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup,r.onclick=function(){h.changePage(this.pgnum)},l+=22}for(var d=1;d<=this.pagesInGroup;d++){r=document.createElement("DIV"),a=document.createElement("DIV");if(r.className="dhx_page"+s,pageNumber=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup+d,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(a.innerHTML=pageNumber,r.appendChild(a),t==pageNumber)r.className+=" dhx_page_active"+s,a.className="dhx_page_active"+s;else{h=this;r.pgnum=pageNumber,r.onclick=function(){h.changePage(this.pgnum)}}l+=parseInt(22/3)*pageNumber.toString().length+15,a.style.width=parseInt(22/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(r)}if(Math.ceil(t/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){r=document.createElement("DIV"),a=document.createElement("DIV");r.className="dhx_page"+s,a.innerHTML="&rarr;",r.appendChild(a),this.pagerElAr.pagerBox.appendChild(r);h=this;r.pgnum=Math.ceil(t/this.pagesInGroup)*this.pagesInGroup+1,r.onclick=function(){h.changePage(this.pgnum)},l+=22}this.pagerElAr.pagerLine.style.width=l+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(t,e,i){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var n=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=n&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){var s=this;this.aToolBar.forEachListOption("pages",function(t){s.aToolBar.removeListOption("pages",t)});for(var o={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],l=0;l<n;l++)this.aToolBar.addListOption("pages","pages_"+(l+1),NaN,"button","<span style='padding: 0px "+o+"px 0px 0px;'>"+this.i18n.paging.page+(l+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+t)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var t=this;this.aToolBar.attachEvent("onClick",function(e){switch((e=e.split("_"))[0]){case"leftabs":t.changePage(1);break;case"left":t.changePage(t.currentPage-1);break;case"rightabs":t.changePage(99999);break;case"right":t.changePage(t.currentPage+1);break;case"perpagenum":if(e[1]===this.undefined)return;t.rowsBufferOutSize=parseInt(e[1]),t.changePage(),t.aToolBar.setItemText("perpagenum",e[1]+" "+t.i18n.paging.perpage);break;case"pages":if(e[1]===this.undefined)return;t.changePage(e[1]),t.aToolBar.setItemText("pages",t.i18n.paging.page+e[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0));var e;if(e=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0),"object"!=typeof e&&(e=[5,10,15,20,25,30]);for(var i={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],n=0;n<e.length;n++)this.aToolBar.addListOption("perpagenum","perpagenum_"+e[n],NaN,"button","<span style='padding: 0px "+i+"px 0px 0px;'>"+e[n]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar},dhtmlXGridObject.prototype.post=function(t,e,i,n){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof i&&(n=i,i=null),n=n||"xml",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=n,this.xmlLoader=this.doLoadDetails;var s=this;this.xmlLoader=function(t){s.callEvent&&(s["_process_"+n](t.xmlDoc),s._contextCallTimer||s.callEvent("onXLE",[s,0,0,t.xmlDoc]),i&&(i(),i=null))},dhx4.ajax.post(t,e||"",this.xmlLoader)},dhtmlXGridObject.prototype.setRowspan=function(t,e,i){var n=this[this._bfs_cells?"_bfs_cells":"cells"](t,e).cell,s=this.rowsAr[t];if(n.rowSpan&&1!=n.rowSpan)for(var o=s.nextSibling,l=1;l<n.rowSpan;l++){var r=o.childNodes[o._childIndexes[n._cellIndex+1]],a=document.createElement("TD");a.innerHTML="&nbsp;",a._cellIndex=n._cellIndex,a._clearCell=!0,r?r.parentNode.insertBefore(a,r):o.parentNode.appendChild(a),this._shiftIndexes(o,n._cellIndex,-1),o=o.nextSibling}n.rowSpan=i,s=this._h2?this.rowsAr[this._h2.get[s.idd].parent.childs[this._h2.get[s.idd].index+1].id]:s.nextSibling||this.rowsCol[this.rowsCol._dhx_find(s)+1];var h=[];for(l=1;l<i;l++){var d=null;if(d=this._fake&&!this._realfake?this._bfs_cells3(s,e).cell:this.cells3(s,e).cell,this._shiftIndexes(s,n._cellIndex,1),d&&d.parentNode.removeChild(d),h.push(s),this._h2){(s=this._h2.get[s.idd].parent.childs[this._h2.get[s.idd].index+1])&&(s=this.rowsAr[s.id])}else s=s.nextSibling||this.rowsCol[this.rowsCol._dhx_find(s)+1]}this.rowsAr[t]._rowSpan=this.rowsAr[t]._rowSpan||{},this.rowsAr[t]._rowSpan[e]=h,this._fake&&!this._realfake&&e<this._fake._cCount&&this._fake.setRowspan(t,e,i)},dhtmlXGridObject.prototype._shiftIndexes=function(t,e,i){if(!t._childIndexes){t._childIndexes=new Array;for(var n=0;n<t.childNodes.length;n++)t._childIndexes[n]=n}for(n=0;n<t._childIndexes.length;n++)n>e&&(t._childIndexes[n]=t._childIndexes[n]-i)},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var t=1;t<this.obj.rows.length;t++)if(this.obj.rows[t]._rowSpan){var e=this.obj.rows[t];for(var i in e._rowSpan)for(var n=e,s=n._rowSpan[i],o=0;o<s.length;o++){if(n.nextSibling?n.parentNode.insertBefore(s[o],n.nextSibling):n.parentNode.appendChild(s[o]),this._fake){var l=this._fake.rowsAr[n.idd],r=this._fake.rowsAr[s[o].idd];l.nextSibling?l.parentNode.insertBefore(r,l.nextSibling):l.parentNode.appendChild(r),this._correctRowHeight(n.idd)}n=n.nextSibling}}var a=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=a;for(t=1;t<this.obj.rows.length;t++)this.rowsCol.push(this.obj.rows[t])}}),this.attachEvent("onXLE",function(t,e,i,n){for(var s=0;s<this.rowsBuffer.length;s++)for(var o=this.render_row(s),l=o.childNodes,r=0;r<l.length;r++)l[r]._attrs.rowspan&&this.setRowspan(o.idd,l[r]._cellIndex,l[r]._attrs.rowspan)})},dhx4.attachEvent("onGridCreated",function(t){t._split_later&&t.splitAt(t._split_later)}),dhtmlXGridObject.prototype.splitAt=function(t){function e(t){var e=m.objBox;if(e.scrollHeight-e.offsetHeight>2){var i=t.wheelDelta/-40;t.wheelDelta===window.undefined&&(i=t.detail),e.scrollTop+=40*i,t.preventDefault&&t.preventDefault()}}function i(t,e){e.style.whiteSpace="";var i=e.nextSibling,n=e.parentNode;t.parentNode.insertBefore(e,t),i?n.insertBefore(t,i):n.appendChild(t);var s=t.style.display;t.style.display=e.style.display,e.style.display=s}function n(e,n,s,o){var l=new Array(t).join(this.delim),r=[];if(2==e)for(var a=0;a<t;a++){var h=n[e-1].cells[n[e-1]._childIndexes?n[e-1]._childIndexes[a]:a];h.rowSpan&&h.rowSpan>1&&(r[h._cellIndex]=h.rowSpan-1,o[e-1].cells[o[e-1]._childIndexes?o[e-1]._childIndexes[a]:a].rowSpan=h.rowSpan,h.rowSpan=1)}for(;e<n.length;e++){this._fake.attachHeader(l,null,s),o=o||this._fake.ftr.childNodes[0].rows;for(var d=t,c=0,u=0;u<d;u++)if(r[u]){if(r[u]=r[u]-1,_isIE||_isOpera){var f=document.createElement("TD");_isFF&&(f.style.display="none"),n[e].insertBefore(f,n[e].cells[0])}c++}else{var p=o[e].cells[u-c],_=n[e].cells[u-(_isIE?0:c)],m=_.rowSpan;if(i(p,_),m>1&&(r[u]=m-1,_.rowSpan=m),o[e].cells[u].colSpan>1){n[e].cells[u].colSpan=o[e].cells[u].colSpan,d-=o[e].cells[u].colSpan-1;for(a=1;a<o[e].cells[u].colSpan;a++)o[e].removeChild(o[e].cells[u+1])}}}}function s(t,e,i,n){for(var s=n.shiftKey?-1:1,o=n.shiftKey?-1:i._cCount,l=!1,r=t+s;r!=o;r+=s)if(!1!==(l=i.smartTabOrder?!i.cells2(e,r).isDisabled()&&r:r)){var a=!i._key_events.k_other;return i.selectCell(e,l,!1,!1,a,!0),n.cancelBubble=!0,n.preventDefault&&n.preventDefault(),!0}}if(!this.obj.rows[0])return this._split_later=t;t=parseInt(t);var o=document.createElement("DIV");this.entBox.appendChild(o);var l=document.createElement("DIV");this.entBox.appendChild(l);for(var r=this.entBox.childNodes.length-3;r>=0;r--)l.insertBefore(this.entBox.childNodes[r],l.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,this.entBox=l,l.grid=this,o.style.cssText+="border:0px solid red !important;",l.style.cssText+="border:0px solid red !important;",l.style.top="0px",l.style.position="absolute",o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.zIndex=11,l.style.height=o.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(o),this.globalBox=this._fake.globalBox=this.globalBox,this._fake._fake=this,this._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.setImagesPath(this._imgURL),this._fake.iconURL=this.iconURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake._drsclmW=this._drsclmW,this._fake._htkebl=this._htkebl,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this._fake._key_events=this._key_events,this._fake.smartTabOrder=this.smartTabOrder,this._fake._RaSeCol=this._RaSeCol,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight);var a=function(){this.forEachRow(function(t){this._correctRowHeight(t)})};this.attachEvent("onPageChanged",a),this.attachEvent("onXLE",a),this.attachEvent("onResizeEnd",a),this._ads_count||this.attachEvent("onAfterSorting",a),this._srnd&&this.attachEvent("onFilterEnd",a),this.attachEvent("onDistributedEnd",a)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop}),this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var h=[[],[],[],[],[],[],[]],d=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],c=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var t=!0;this._fake._split_event=!0;var e="onScroll"==arguments[0];return("onGridReconstructed"==arguments[0]||e)&&this._fake.callEvent.apply(this,arguments),e||(t=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,t},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this._cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;var u=0,f=this.globalBox.offsetWidth;for(r=0;r<t;r++){for(var p=0;p<d.length;p++)this[d[p]]&&(h[p][r]=this[d[p]][r]),"string"==typeof h[p][r]&&(h[p][r]=h[p][r].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(h[1][r]=1*h[1][r]),"%"==this.cellWidthType?(h[1][r]=Math.round(parseInt(this[d[1]][r])*f/100),u+=h[1][r]):u+=parseInt(this[d[1]][r]),this.setColumnHidden(r,!0)}for(p=0;p<d.length;p++){var _=h[p].join(this.delim);"setHeader"!=c[p]?""!=_&&this._fake[c[p]](_):this._fake[c[p]](_,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,u=Math.min(this.globalBox.offsetWidth,u),l.style.left=u+"px",o.style.width=u+"px",l.style.width=Math.max(this.globalBox.offsetWidth-u,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd,this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this.skin_name!=this._fake.skin_name&&this._fake.setSkin(this.skin_name);var m=this;dhtmlxEvent(this._fake.objBox,"mousewheel",e),dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",e),this.hdr.rows.length>2&&n.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(n.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(e,i){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);e||(e=this.entBox.id);for(var n=new Array,s=0;s<this.cellWidthPX.length;s++)n[s]=s<t?this._fake.cellWidthPX[s]:this.cellWidthPX[s];n=n.join(","),this.setCookie(e,i,0,n);n=(this.initCellWidth||new Array).join(",");return this.setCookie(e,i,1,n),!0},this.loadSizeFromCookie=function(e){e||(e=this.entBox.id);if(i=this._getCookie(e,1)){this.initCellWidth=i.split(",");var i=this._getCookie(e,0);this.cellWidthType="px";var n=0;if(i&&i.length){i=i.split(",");for(var s=0;s<i.length;s++)s<t?(this._fake.cellWidthPX[s]=i[s],n+=1*i[s]):this.cellWidthPX[s]=i[s]}this._fake.entBox.style.width=n+"px",this._fake.objBox.style.width=n+"px";var o=this.globalBox.childNodes[1];return o.style.left=n-(_isFF,0)+"px",this.ftr&&(this.ftr.style.left=n-(_isFF,0)+"px"),o.style.width=this.globalBox.offsetWidth-n+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(e,i,n){i<t&&this._fake.setCellTextStyle(e,i,n),this.setCellTextStyleA(e,i,n)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(t){this.setRowTextBoldA(t),this._fake.setRowTextBold(t)},this.setRowColorA=this.setRowColor,this.setRowColor=function(t,e){this.setRowColorA(t,e),this._fake.setRowColor(t,e)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(t,e){this.setRowHiddenA(t,e),this._fake.setRowHidden(t,e)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(t){this.setRowTextNormalA(t),this._fake.setRowTextNormal(t)},this.getChangedRows=function(t){function e(t){for(var e=0;e<t.childNodes.length;e++)if(t.childNodes[e].wasChanged)return i[i.length]=t.idd}var i=new Array;return this.forEachRow(function(n){var s=this.rowsAr[n],o=this._fake.rowsAr[n];"TR"==s.tagName&&o&&"TR"==o.tagName&&(t&&s._added?i[i.length]=s.idd:e(s)||e(o))}),i.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(t,e){this.setRowTextStyleA(t,e),this._fake.rowsAr[t]&&this._fake.setRowTextStyle(t,e)},this.lockRowA=this.lockRow,this.lockRow=function(t,e){this.lockRowA(t,e),this._fake.lockRow(t,e)},this.getColWidth=function(e){return e<t?parseInt(this._fake.cellWidthPX[e]):parseInt(this.cellWidthPX[e])},this.getColumnLabel=function(e){return this._fake.getColumnLabel.apply(e<t?this._fake:this,arguments)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(e,i){(e*=1)<t?this._fake.setColWidthA(e,i):this.setColWidthA(e,i),e+1<=t&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(e,i,n,s){var o=this;return e<t&&(o=this._fake),this.setColumnLabelA.apply(o,[e,i,n,s])},this.adjustColumnSize=function(e,i){if(!(e<t))return this.adjustColumnSizeA(e,i);_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(e,i),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit()};var g="cells";this._bfs_cells=this[g],this[g]=function(){return arguments[1]<t?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_isColumnHidden=this.isColumnHidden,this.isColumnHidden=function(){return parseInt(arguments[0])<t?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<t?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};g="cells2";this._bfs_cells2=this[g],this[g]=function(){return arguments[1]<t?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};g="cells3";this._bfs_cells3=this[g],this[g]=function(e,i){return arguments[1]<t&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[e.idd]&&0==this._fake.rowsAr[e.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};g="changeRowId";this._bfs_changeRowId=this[g],this[g]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(t){var e=this.rowsAr[t];if(!e&&this._fake.rowsAr[t]&&(e=this._fake.getRowById(t)),e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(t){return this._fake._updateTGRState(t)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var t=this.grid;t._setRowHoverA.apply(this,arguments);var e=_isIE?event.srcElement:arguments[0].target;(e=t._fake.rowsAr[t.getFirstParentOfType(e,"TD").parentNode.idd])&&t._fake._setRowHoverA.apply(t._fake.obj,[{target:e.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var t=this;else t=this.grid;t._unsetRowHoverA.apply(this,arguments),t._fake._unsetRowHoverA.apply(t._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(t){t.update&&0!=t.id&&(this.rowsAr[t.id].imgTag&&(this.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),this._fake.rowsAr[t.id]&&this._fake.rowsAr[t.id].imgTag&&(this._fake.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),t.update=!1)},this.copy_row=function(e){var i=e.cloneNode(!0);i._skipInsert=e._skipInsert;var n=t;if(i._attrs={},i._css=e._css,this._ecspn){n=0;for(var s=0;n<i.childNodes.length&&s<t;s+=i.childNodes[n].colSpan||1)n++}for(;i.childNodes.length>n;)i.removeChild(i.childNodes[i.childNodes.length-1]);var o=n;for(s=0;s<o;s++)this.dragAndDropOff&&this.dragger.addDraggableItem(i.childNodes[s],this),i.childNodes[s].style.display=this._fake._hrrar&&this._fake._hrrar[s]?"none":"",i.childNodes[s]._cellIndex=s,i.childNodes[s].combo_value=arguments[0].childNodes[s].combo_value,i.childNodes[s]._clearCell=arguments[0].childNodes[s]._clearCell,i.childNodes[s]._cellType=arguments[0].childNodes[s]._cellType,i.childNodes[s]._brval=arguments[0].childNodes[s]._brval,i.childNodes[s].val=arguments[0].childNodes[s].val,i.childNodes[s]._combo=arguments[0].childNodes[s]._combo,i.childNodes[s]._attrs=arguments[0].childNodes[s]._attrs,i.childNodes[s].chstate=arguments[0].childNodes[s].chstate,e._attrs.style&&(i.childNodes[s].style.cssText=e._attrs.style+";"+i.childNodes[s].style.cssText),i.childNodes[s].colSpan>1&&(i._childIndexes=arguments[0]._childIndexes);if(this._h2&&this._treeC<t){var l=this._h2.get[arguments[0].idd];i.imgTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level],i.valTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level+2]}return i.idd=e.idd,i.grid=this._fake,i};g="_insertRowAt";this._bfs_insertRowAt=this[g],this[g]=function(){var t=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var e=this._fake._insertRowAt.apply(this._fake,arguments);return t._fhd&&(e.parentNode.removeChild(e),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(e)),t._fhd=!1),t},this._bfs_setSizes=this.setSizes,this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes();var t=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=t,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.dontSetSizes||(this.globalBox.style.height=t)}},this.sync_scroll=this._fake.sync_scroll=function(t){var e=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!t)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return e!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight&&!this.noHeaderResize){for(var e=1;e<this.hdr.rows.length;e++){for(var i=t;!this.hdr.rows[e].childNodes[i];)i--;var n=Math.min(this.hdr.rows[e].childNodes[i].scrollHeight+2,this.hdr.rows[e].scrollHeight),s=this._fake.hdr.rows[e].scrollHeight;if(n!=s&&(this._fake.hdr.rows[e].style.height=this.hdr.rows[e].style.height=Math.max(n,s)+"px"),window._KHTMLrv){for(var o=0;this._fake._hrrar[o];)o++;this._fake.hdr.rows[e].childNodes[o].style.height=this.hdr.rows[e].childNodes[i].style.height=Math.max(n,s)+"px"}}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};g="_doOnScroll";this._bfs__doOnScroll=this[g],this[g]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};g="selectAll";this._bfs__selectAll=this[g],this[g]=function(){this._bfs__selectAll.apply(this,arguments),this._bfs__selectAll.apply(this._fake,arguments)};g="doClick";this._bfs_doClick=this[g],this[g]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex>=t;if(!arguments[0].parentNode.idd)return;e||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,e?0:arguments[0]._cellIndex).cell,e&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),e?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}},this._fake._bfs_doClick=this._fake[g],this._fake[g]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex<t;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,e?t:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(t){t&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(t){this._h2||this._fake.moveRowUp(t),this.moveRowUpA(t),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(t){this._h2||this._fake.moveRowDown(t),this.moveRowDownA(t),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var t=this.getSortingStateA();return 0!=t.length?t:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(e,i,n,s){this.setSortImgStateA(e,i,n,s),1*i<t?(this._fake.setSortImgStateA(e,i,n,s),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(e,i,n,s,o){var l=-1,r=0;return arguments[1]._cellIndex==t-1?(l=this._initalSplR+(e.clientX-s),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||e.clientX-s>0)?(arguments[3]=this._initalSplF||arguments[3],r=this.doColResizeA.apply(this,arguments)):r=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(l=this.obj.offsetWidth),r=this.doColResizeA.apply(this,arguments)),!1!==r&&(this._correctSplit(l),this.resized=this._fake.resized=1),r},this._fake.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),"TD"!=e.tagName||!this._drsclmn||this._drsclmn[e._cellIndex]){var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft),n=parseInt(this.getPosition(e,this.hdrBox));e.offsetWidth-(t.offsetX||-1*(n-i))<(_isOpera?20:10)||this.entBox.offsetWidth-(t.offsetX?t.offsetX+e.offsetLeft:i)+this.objBox.scrollLeft-0<(_isOpera?20:10)?e.style.cursor="E-resize":e.style.cursor="default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(t){var e=this.startColResizeA(t);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var i=this.entBox.parentNode;if(i._aggrid)return e;i._aggrid=i.grid,i.grid=this,this.entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return e},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(t){if(this.entBox.parentNode.onmousemove){var e=this.entBox.parentNode;e.grid=e._aggrid,e._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(t)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(t){if(!t)return!0;if(this._htkebl)return!0;if((t.target||t.srcElement).value!==window.undefined){var e=t.target||t.srcElement;if(!e.parentNode||-1==e.parentNode.className.indexOf("editable"))return!0}switch(t.keyCode){case 9:var i=this._realfake?this._fake:this;if(!i.callEvent("onTab",[!0]))return!0;if(this.cell){for(var n=this.cell._cellIndex,o=i.getRowIndex(this.cell.parentNode.idd);!s(n,o,i,t);){if((o+=t.shiftKey?-1:1)<0||o>=i.rowsBuffer.length)return;n=t.shiftKey?i._cCount:-1}return}}return this.doKeyA(t)},this.editCellA=this.editCell,this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(t,e){if(!1===this.deleteRowA(t,e))return!1;this._fake.rowsAr[t]&&this._fake.deleteRow(t)},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.editStopA=this.editStop,this.editStop=function(t){this._fake.editor?this._fake.editStop(t):this.editStopA(t)},this.attachEvent("onAfterSorting",function(e,i,n){e>=t&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(t,e,i){if(this._fake.sortField.call(this._fake,t,e,this._fake.hdr.rows[0].cells[t]),"na"!=this.fldSort[t]&&this._fake.fldSorted){var n=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,arguments[0],n)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(t,e,i,n){if(this._realfake)return this._fake.sortTreeRows(t,e,i,n);this.sortTreeRowsA(t,e,i,n),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),this._fake.fldSorted=null},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(t,e,i,n){if(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!n){var s;i&&i.idd?s=this._fake.rowsAr[i.idd]:i&&i.nextSibling?((s={}).nextSibling=this._fake.rowsAr[i.nextSibling.idd],s.parentNode=s.nextSibling.parentNode):this._fake._fillers.length&&(s=this._fake._fillers[this._fake._fillers.length-1][2]),this._fake._fillers.push(this._fake._add_filler(t,e,s))}return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var t=this._add_from_buffer_s.apply(this,arguments);return-1!=t&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),t},this._fake.render_row=function(t){var e=this._fake.render_row(t);return-1==e?-1:e?this.rowsAr[e.idd]=this.rowsAr[e.idd]||this._fake.copy_row(e):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(e,i){if(i>=t)return this.moveColumn_s(e,i)},this.attachEvent("onCellChanged",function(e,i,n){if(this._split_event&&i<t&&this.rowsAr[e]){var s=this._fake.rowsAr[e];if(!s)return;s=s._childIndexes?s.childNodes[s._childIndexes[i]]:s.childNodes[i];var o=this.rowsAr[e].childNodes[i];o._treeCell&&o.firstChild.lastChild?o.firstChild.lastChild.innerHTML=n:o.innerHTML=s.innerHTML,o._clearCell=!1,o.combo_value=s.combo_value,o.chstate=s.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(t){if(t=t||this.obj.scrollWidth-this.objBox.scrollLeft,(t=Math.min(this.globalBox.offsetWidth,t))>-1){this.entBox.style.width=t+"px",this.objBox.style.width=t+"px";var e=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._fake.entBox.style.left=t+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-t-(this.quirks?0:2)*e)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE){var i=_isIE&&!window.xmlHttpRequest;e=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(i?e:0)-t)+"px"}}},dhtmlXGridObject.prototype._correctRowHeight=function(t,e){if(this.rowsAr[t]&&this._fake.rowsAr[t]){var i=parseInt(this.rowsAr[t].style.height)||this.rowsAr[t].offsetHeight,n=parseInt(this._fake.rowsAr[t].style.height)||this._fake.rowsAr[t].offsetHeight,s=Math.max(i,n)-(this.rowsAr[t].delta_fix||0);if(s&&(this.rowsAr[t].style.height=this._fake.rowsAr[t].style.height=Math.round(s+1)+"px",this.rowsAr[t].delta_fix=1,window._KHTMLrv)){for(var o,l=this._fake._cCount;!o&&l>=0;)o=this.rowsAr[t].childNodes[l],l-=1;var r=this._fake.rowsAr[t].firstChild;o&&r&&(o.style.height=r.style.height=s+"px")}}},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(t,e){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.saveOpenStates=function(t,e){t||(t=this.entBox.id);var i=[];this._h2.forEachChild(0,function(t){"minus"==t.state&&i.push(t.id)});var n="gridOpen"+(t||"")+"="+i.join("|")+(e?"; "+e:"");document.cookie=n},dhtmlXGridObject.prototype.loadOpenStates=function(t,e){var i=this.getCookie(t,"gridOpen");if(i){i=i.split("|");for(var n=0;n<i.length;n++){var s=this.getParentId(i[n]);this.getOpenState(s)&&this.openItem(i[n])}}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(t,e){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(t,e)})},dhtmlXGridObject.prototype.enableSortingSaving=function(t,e){this.attachEvent("onBeforeSorting",function(){var i=this;return window.setTimeout(function(){i.saveSortingToCookie(t,e)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(t,e){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(t,e),this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.enableAutoSaving=function(t,e){this.enableOrderSaving(t,e),this.enableAutoSizeSaving(t,e),this.enableSortingSaving(t,e)},dhtmlXGridObject.prototype.saveSizeToCookie=function(t,e){if("px"==this.cellWidthType)var i=this.cellWidthPX;else i=this.cellWidthPC;var n=(this.initCellWidth||[]).join(",");if(this._hrrar)for(var s=0;s<this._hrrar.length;s++)this._hrrar[s]&&(i[s]="");this.setCookie(t,e,0,i.join(",")),this.setCookie(t,e,1,n)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(t,e){var i=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var n=0;n<this._fake._cCount;n++)i[n]=this._fake._hrrar[n]?"1":"";this.setCookie(t,e,4,i.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(t){for(var e=(this._getCookie(t,4)||"").split(","),i=0;i<this._cCount;i++)this.setColumnHidden(i,!!e[i])},dhtmlXGridObject.prototype.saveSortingToCookie=function(t,e){this.setCookie(t,e,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(t){var e=this._getCookie(t,2);(e=(e||"").split(",")).length>1&&e[0]<this._cCount&&(this.sortRows(e[0],null,e[1]),this.setSortImgState(!0,e[0],e[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(t,e){if(!this._c_order){this._c_order=[];for(var i=this._cCount,n=0;n<i;n++)this._c_order[n]=n}this.setCookie(t,e,3,(this._c_order||[]).slice(0,this._cCount).join(",")),this.saveSortingToCookie(t,e)},dhtmlXGridObject.prototype.loadOrderFromCookie=function(t){var e=this._getCookie(t,3);if((e=(e||"").split(",")).length>1&&e.length<=this._cCount)for(var i=0;i<e.length;i++)if(!this._c_order&&e[i]!=i||this._c_order&&e[i]!=this._c_order[i]){var n=e[i];if(this._c_order)for(var s=0;s<this._c_order.length;s++)if(this._c_order[s]==e[i]){n=s;break}this.moveColumn(1*n,i)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(t){(e=this._getCookie(t,1))&&(this.initCellWidth=e.split(","));var e;if((e=this._getCookie(t,0))&&e.length){if(e=e.split(","),!this._fake&&this._hrrar)for(var i=0;i<e.length;i++)this._hrrar[i]&&(e[i]=0);"px"==this.cellWidthType?this.cellWidthPX=e:this.cellWidthPC=e}for(i=0;i<e.length;i++)""===e[i]&&(e[i]=this.initCellWidth[i],this.setColumnHidden(i,!0));return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(t){t||(t=this.entBox.id);var e="gridSettings"+t+"=||||";document.cookie=e},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(t,e,i,n){t||(t=this.entBox.id);var s=this.getCookie(t);(s=(s||"||||").split("|"))[i]=n;var o="gridSettings"+t+"="+s.join("|").replace(/,/g,"-")+(e?"; "+e:"");document.cookie=o},dhtmlXGridObject.prototype.getCookie=function(t,e){t||(t=this.entBox.id);var i=(t=(e||"gridSettings")+t)+"=";if(document.cookie.length>0){var n=document.cookie.indexOf(i);if(-1!=n){n+=i.length;var s=document.cookie.indexOf(";",n);return-1==s&&(s=document.cookie.length),document.cookie.substring(n,s)}}},dhtmlXGridObject.prototype._getCookie=function(t,e){return(this.getCookie(t)||"||||").replace(/-/g,",").split("|")[e]},dhtmlXGridObject.prototype.enableUndoRedo=function(){var t=this;this.attachEvent("onEditCell",function(){return t._onEditUndoRedo.apply(t,arguments)});this.attachEvent("onCheckbox",function(e,i,n){return t._onEditUndoRedo.apply(t,[2,e,i,n?1:0,n?0:1])}),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(t,e,i,n,s){if(this._IsUndoRedoEnabled&&2==t&&s!=n){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var o={old_value:s,new_value:n,row_id:e,cell_index:i};this._UndoRedoData.push(o),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var t=this._UndoRedoData[this._UndoRedoPos--],e=this.cells(t.row_id,t.cell_index);"tree"==this.getColType(t.cell_index)?e.setLabel(t.old_value):e.setValue(t.old_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var t=this._UndoRedoData[++this._UndoRedoPos];this.cells(t.row_id,t.cell_index).setValue(t.new_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()},this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var t=this._getNextCell(null,1);t&&(this.pagingOn&&this.showRow(t.parentNode.idd),this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;var t=this._getNextCell(null,-1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0),this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!1,!1,!0),this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0),this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_0_1:function(){var t=this.getRowIndex(this.row.idd),e=this._nextRow(t,-1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k40_0_1:function(){var t=this.getRowIndex(this.row.idd),e=this._nextRow(t,1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!1,!0),this._select_ifpossible()},k38_1_1:function(){for(var t=this.getRowIndex(this.row.idd);t>=0;t--)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var t=this.getRowIndex(this.row.idd)+1;t<this.rowsCol.length;t++)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var t=t=this.getRowIndex(this.row.idd)+1;if(this.rowsBuffer[t]){var e=this._nextRow(t-1,1);this.pagingOn&&e&&this.showRow(e.idd),this._Opera_stop=0,this.selectCell(e,this.cell._cellIndex,!0,!1,!0)}else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0),this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0),this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var t=t=this.getRowIndex(this.row.idd)+1;if(-1!=t){var e=this._nextRow(t-1,-1);this._Opera_stop=0,this.pagingOn&&e&&this.showRow(e.idd),this.selectCell(e,this.cell._cellIndex,!0,!1,!0)}else this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}},dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop(),this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0,this._key_events.k40_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;if(!(this.cell&&this.cell._cellIndex+1>=this._cCount)){var t=this._getNextCell(null,1);t&&this.row==t.parentNode&&(this.selectCell(t.parentNode,t._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;if(!this.cell||0!=this.cell._cellIndex){var t=this._getNextCell(null,-1);t&&this.row==t.parentNode&&(this.selectCell(t.parentNode,t._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);if(!t.changeState||!1===t.changeState())return!1},k27_0_0:function(){this.editStop(!0),this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,e=this._nextRow(t-1,-1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,e=this._nextRow(t-1,1);if(!e||e._sRow||e._rLoad)return!1;this.selectCell(e,this.cell._cellIndex,!0,!0)},k38_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var t=this.row.rowIndex-1;t>=0;t--)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!0)},k40_1_1:function(){if(this.editor||!this.rowsCol.length)return!1;for(var t=this.row.rowIndex;t<this.rowsCol.length;t++)this.selectCell(this.rowsCol[t],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;var e=Math.max(t._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(e,1);if(i)t._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&t.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(!this.row.idd)return;var e=this.getRowIndex(this.row.idd)+1;if(-1==e||this.pagingOn&&1==e)this._key_events.k33_0_0.apply(this,[]);else{var i=this._nextRow(e-1,-1);this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&i&&t.showRow(i.idd)}}},k_other:function(t){if(this.editor)return!1;if(!t.ctrlKey&&t.keyCode>=40&&(t.keyCode<91||t.keyCode>95&&t.keyCode<111||t.keyCode>187)&&this.cell){var e=this.cells4(this.cell);if(e.isDisabled())return!1;var i=e.getValue();!1!==e.editable&&e.setValue(""),this.editCell(),this.editor?(this.editor.val=i,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):e.setValue(i)}}}},eXcell_time.prototype=new eXcell_ed,eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(t,e,i){var n=this.parentNode,s=n.parentNode,o=s.grid;(t||window.event)&&(i||s._expanded||o.editStop(),(t||event).cancelBubble=!0);var l=o.getUserData(s.idd,"__sub_row");if(o._sub_row_editor||(o._sub_row_editor=new eXcell_sub_row(n)),l){if(s._expanded&&!e){o._sub_row_editor._setState("plus.gif",n),n._previous_content=s._expanded,o.objBox.removeChild(s._expanded),s._expanded=!1,s.style.height=(s.oldHeight||20)+"px",n.style.height=(s.oldHeight||20)+"px",o._fake&&(o._fake.rowsAr[s.idd].style.height=(s.oldHeight||20)+"px",o._fake.rowsAr[s.idd].firstChild.style.height=(s.oldHeight||20)+"px");for(var r=0;r<s.cells.length;r++)s.cells[r].style.verticalAlign="middle";delete o._flow[s.idd],o._correctMonolite(),s._expanded.ctrl=null}else if(!s._expanded&&!i){if(o._sub_row_editor._setState("minus.gif",n),s.oldHeight=n.offsetHeight-4,n._previous_content){(a=n._previous_content).ctrl=n,o.objBox.appendChild(a),o._detectHeight(a,n,parseInt(a.style.height))}else{var a;(a=document.createElement("DIV")).ctrl=n,n._sub_row_type?o._sub_row_render[n._sub_row_type](o,a,n,l):a.innerHTML=l,a.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",a.className="dhx_sub_row",o.objBox.appendChild(a),o._detectHeight(a,n)}o._flow||(o.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),o.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),o.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),o.attachEvent("onDrop",function(){this._correctMonolite(!0)}),o.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),o.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),o.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),o.attachEvent("onUnGroup",function(){this._collapsMonolite()}),o.attachEvent("onPageChanged",function(){this._collapsMonolite()}),o.attachEvent("onXLE",function(){this._collapsMonolite()}),o.attachEvent("onClearAll",function(){for(var t in this._flow)this._flow[t]&&this._flow[t].parentNode&&this._flow[t].parentNode.removeChild(this._flow[t]);this._flow=[]}),o.attachEvent("onEditCell",function(t,e,i){return 2!==t&&this._flow[e]&&"ch"!=this.cellType[i]&&"ra"!=this.cellType[i]&&this._expandMonolite.apply(this._flow[e].ctrl.firstChild,[0,!1,!0]),!0}),o.attachEvent("onCellChanged",function(t,e){if(this._flow[t]){this.cells(t,e).cell.style.verticalAlign="top"}}),o._flow=[]),o._flow[s.idd]=a,o._correctMonolite();o._srdh;o.multiLine&&0;for(r=0;r<s.cells.length;r++)s.cells[r].style.verticalAlign="top";if(o._fake){var h=o._fake.rowsAr[s.idd];for(r=0;r<h.cells.length;r++)h.cells[r].style.verticalAlign="top"}s._expanded=a}o._ahgr&&o.setSizes(),o.parentGrid&&o.callEvent("onGridReconstructed",[]),o.callEvent("onSubRowOpen",[s.idd,!!s._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...",dhx4.ajax.get(c,function(xml){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])})},grid:function(t,e,i,n){i._sub_grid=new dhtmlXGridObject(e),t.skin_name&&i._sub_grid.setSkin(t.skin_name),i._sub_grid.parentGrid=t,i._sub_grid.imgURL=t.imgURL,i._sub_grid.iconURL=t.iconURL,i._sub_grid.enableAutoHeight(!0),i._sub_grid._delta_x=i._sub_grid._delta_y=null,i._sub_grid.attachEvent("onGridReconstructed",function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),t._correctMonolite(),this.setSizes(),t.parentGrid&&t.callEvent("onGridReconstructed",[])}),t.callEvent("onSubGridCreated",[i._sub_grid,i.parentNode.idd,i._cellIndex,n])?i._sub_grid.load(n,function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(i._sub_grid.ftr?i._sub_grid.ftr.offsetHeight:0)),i._sub_grid.objBox.style.overflow="hidden",t._correctMonolite(),i._sub_row_type=null,t.callEvent("onSubGridLoaded",[i._sub_grid,i.parentNode.idd,i._cellIndex,n])&&(t._ahgr&&t.setSizes(),t.parentGrid&&t.callEvent("onGridReconstructed",[]))}):(i._sub_grid.objBox.style.overflow="hidden",i._sub_row_type=null)}},dhtmlXGridObject.prototype._detectHeight=function(t,e,i){var n=e.offsetLeft+e.offsetWidth;t.style.left=n+"px",t.style.width=Math.max(0,e.parentNode.offsetWidth-n-4)+"px";i=i||t.scrollHeight;t.style.overflow="hidden",t.style.height=i+"px";var s=e.parentNode;if(e.parentNode.style.height=(s.oldHeight||20)+1*i+"px",e.style.height=(s.oldHeight||20)+1*i+"px",this._fake){var o=this._fake.rowsAr[e.parentNode.idd];o.style.height=(s.oldHeight||20)+1*i+"px",o.firstChild.style.height=(s.oldHeight||20)+1*i+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(t){if(!this._in_correction){this._in_correction=!0;for(var e in this._flow)if(this._flow[e]&&"DIV"==this._flow[e].tagName)if(this.rowsAr[e]){if("none"==this.rowsAr[e].style.display){this.cells4(this._flow[e].ctrl).close();continue}if(this._flow[e].style.top=this.rowsAr[e].offsetTop+(this.rowsAr[e].oldHeight||20)+"px",t){var i=this._flow[e].ctrl.offsetLeft+this._flow[e].ctrl.offsetWidth;this._flow[e].style.left=i+"px",this._flow[e].style.width=this.rowsAr[e].offsetWidth-i-4+"px"}}else this._flow[e].ctrl=null,this.objBox.removeChild(this._flow[e]),delete this._flow[e];this._in_correction=!1}},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var t in this._flow)this._flow[t]&&"DIV"==this._flow[t].tagName&&this.rowsAr[t]&&this.cells4(this._flow[t].ctrl).close()},eXcell_ra_str.prototype=new eXcell_ch,eXcell_ra_str.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t){if(this.grid.rowsAr[this.cell.parentNode.idd])for(var e=0;e<this.grid._cCount;e++)if(e!==this.cell._cellIndex){var i=this.grid.cells(this.cell.parentNode.idd,e);if("ra_str"!=(i.cell._cellType||this.grid.cellType[i.cell._cellIndex]))continue;i.getValue()&&i.setValue("0")}t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)},dhx4.attachEvent("onGridCreated",function(t){window.dhx_globalImgPath||(window.dhx_globalImgPath=t.imgURL),t._col_combos=[];for(var e=0;e<t._cCount;e++)0==t.cellType[e].indexOf("combo")&&(t._col_combos[e]=eXcell_combo.prototype.initCombo.call({grid:t},e));t._loading_handler_set||(t._loading_handler_set=t.attachEvent("onXLE",function(t,e,i,n,s){"xml"==s&&(eXcell_combo.prototype.fillColumnCombos(this,n),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null)}))}),eXcell_combo.prototype=new eXcell,eXcell_combo_v=function(t){var e=new eXcell_combo(t);return e._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",e},eXcell_combo.prototype.initCombo=function(t){var e=document.createElement("DIV");e.className="dhxcombo_in_grid_parent";var i=new dhtmlXCombo(e,"combo",0,this.grid.defVal[arguments.length?t:this.cell._cellIndex]);this.grid.defVal[arguments.length?t:this.cell._cellIndex]="";var n=this.grid;return i.DOMelem.onmousedown=i.DOMelem.onclick=function(t){(t=t||event).cancelBubble=!0},i.DOMelem.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,!0},this.grid.attachEvent("onScroll",function(){i._isListVisible()&&i._hideList()}),i.attachEvent("onKeyPressed",function(t){13!=t&&27!=t||(n.editStop(),n._fake&&n._fake.editStop())}),i},eXcell_combo.prototype.fillColumnCombos=function(t,e){if(e){var i=dhx4.ajax.xmltop("rows",e,-1);if(i&&"DIV"!==i.tagName){t.combo_columns=t.combo_columns||[],columns=dhx4.ajax.xpath("//column",i);for(var n=0;n<columns.length;n++)0==(columns[n].getAttribute("type")||"").indexOf("combo")&&(t.combo_columns[t.combo_columns.length]=n,this.setComboOptions(t._col_combos[n],columns[n],t,n))}}},eXcell_combo.prototype.setComboCValue=function(t,e){if(""!=this._combo_pre){this.cell.offsetHeight&&this.cell.offsetHeight;t="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+t+"</span></div>"}arguments.length>1?this.setCValue(t,e):this.setCValue(t)},eXcell_combo.prototype.setComboOptions=function(t,e,i,n,s){if(window.dhx4.s2b(e.getAttribute("xmlcontent"))&&!e.getAttribute("source")){options=e.childNodes;for(var o=[],l=0;l<options.length;l++)if("option"==options[l].tagName){var r=options[l].firstChild?options[l].firstChild.data:"";o[o.length]=[options[l].getAttribute("value"),r,options[l].getAttribute("css")||""]}if(t.addOption(o),4==arguments.length)i.forEachRowA(function(e){var s=i.cells(e,n);s.cell._brval||s.cell._cellType||s.cell._cellIndex!=n||(""==s.cell.combo_value?s.setComboCValue("&nbsp;",""):t.getOption(s.cell.combo_value)?s.setComboCValue(t.getOption(s.cell.combo_value).text,s.cell.combo_value):s.setComboCValue(s.cell.combo_value))});else{var a=this.cell?this:i.cells(s,n);e.getAttribute("text")?""==e.getAttribute("text")._dhx_trim()?a.setComboCValue("&nbsp;",""):a.setComboCValue(e.getAttribute("text")):a.cell.combo_value&&""!=a.cell.combo_value._dhx_trim()?t.getOption(a.cell.combo_value)?a.setComboCValue(t.getOption(a.cell.combo_value).text,a.cell.combo_value):a.setComboCValue(a.cell.combo_value):a.setComboCValue("&nbsp;","")}}if(e.getAttribute("source"))if(e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))){if(e.getAttribute("xmlcontent")){a=this.cell?this:i.cells(s,n);e.getAttribute("text")&&a.setComboCValue(e.getAttribute("text"))}else i.forEachRowA(function(t){var e=i.cells(t,n);if(!e.cell._brval&&!e.cell._cellType){var s=e.cell.combo_value.toString();if(-1!=s.indexOf("^")){var o=s.split("^");e.cell.combo_value=o[0],e.setComboCValue(o[1])}}});t.enableFilteringMode(!0,e.getAttribute("source"),window.dhx4.s2b(e.getAttribute("cache")||!0),window.dhx4.s2b(e.getAttribute("sub")||!1))}else{var h=arguments.length;t.load(e.getAttribute("source"),function(){if(4==h)i.forEachRow(function(e){var s=i.cells(e,n);s.cell._brval||s.cell._cellType||(t.getOption(s.cell.combo_value)?s.setComboCValue(t.getOption(s.cell.combo_value).text,s.cell.combo_value):""==(s.cell.combo_value||"").toString()._dhx_trim()?(s.setComboCValue("&nbsp;",""),s.cell._clearCell=!0):s.setComboCValue(s.cell.combo_value))});else{var e=i.cells(s,n);t.getOption(e.cell.combo_value)?e.setComboCValue(t.getOption(e.cell.combo_value).text,e.cell.combo_value):e.setComboCValue(e.cell.combo_value)}})}e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))||(e.getAttribute("editable")&&!window.dhx4.s2b(e.getAttribute("editable"))&&t.readonly(!0),e.getAttribute("filter")&&window.dhx4.s2b(e.getAttribute("filter"))&&t.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)},eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())},dhtmlXGridObject.prototype.getColumnCombo=function(t){return this._col_combos&&this._col_combos[t]?this._col_combos[t]:(this._col_combos||(this._col_combos=[]),this._col_combos[t]=eXcell_combo.prototype.initCombo.call({grid:this},t),this._col_combos[t])},dhtmlXGridObject.prototype.refreshComboColumn=function(t){this.forEachRow(function(e){this.cells(e,t).refreshCell&&this.cells(e,t).refreshCell()})},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(t){if("object"==typeof t){var e=dhx4.ajax.xpath("./option",t);e.length&&(this.cell._combo=[]);for(var i=0;i<e.length;i++)this.cell._combo.push(e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""===t||t===this.undefined?(this.setCTxtValue(" ",t),this.cell._clearCell=!0):(t=t.replace(/,[ ]*/g,", "),this.setCTxtValue(t),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(t,e){this.clists||(this.clists=new Array),"object"!=typeof e&&(e=e.split(",")),this.clists[t]=e},eXcell_calck.prototype=new eXcell,eXcell_calck.prototype.setValue=function(t){t&&""!=t.toString()._dhx_trim()||(t="0"),this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)},dhtmlXGridObject.prototype._updateTGRState=function(t){t.update&&0!=t.id&&(this.rowsAr[t.id].imgTag&&(this.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),t.update=!1)},dhtmlXGridObject.prototype.doExpand=function(t){this.editStop();var e=t.parentNode.parentNode.parentNode,i=this._h2.get[e.idd];this.callEvent("onOpen",[e.idd,"plus"==i.state?-1:1])&&("plus"==i.state?this.expandKids(e):"minus"!=i.state||i._closeable||this.collapseKids(e))},dhtmlXGridObject.prototype._createHierarchy=function(){return this._emptyLineImg||(this._emptyLineImg="blank"),new dhtmlxHierarchy({_emptyLineImg:this._emptyLineImg})},dhtmlXGridObject.prototype._getOpenLenght=function(t,e){var i=this._h2.get[t].childs;e+=i.length;for(var n=0;n<i.length;n++)i[n].childs.length&&"minus"==i[n].state&&(e+=this._getOpenLenght(i[n].id,0));return e},dhtmlXGridObject.prototype.collapseKids=function(t){var e=this._h2.get[t.idd];if("minus"==e.state&&this.callEvent("onOpenStart",[t.idd,1])){var i=t.rowIndex;if(i<0&&(i=this.rowsCol._dhx_find(t)+1),this._h2.change(e.id,"state","plus"),this._updateTGRState(e),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var n=this._getOpenLenght(this.rowsCol[i-1].idd,0),s=0;s<n;s++)this.rowsCol[i+s].parentNode.removeChild(this.rowsCol[i+s]);this.rowsCol.splice(i,n)}this.callEvent("onGridReconstructed",[]),this.setSizes(),this._h2_to_buff(),this.callEvent("onOpenEnd",[t.idd,-1])}},dhtmlXGridObject.prototype._massInsert=function(t,e,i,n){var s=[],o=_isKHTML?this.obj:this.obj.rows[0].parentNode;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(var l=this._getOpenLenght(t.id,0),r=0;r<l;r++){var a=this.render_row(i+r);e?e.parentNode.insertBefore(a,e):o.appendChild(a),s.push(a)}return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,i).concat(s).concat(this.rowsCol.slice(i))),t.childs.length+s.length},dhtmlXGridObject.prototype.expandKids=function(t,e){var i=this._h2.get[t.idd];if((i.childs.length||i._xml_await)&&"plus"==i.state&&(i._loading||e||this.callEvent("onOpenStart",[i.id,-1]))){var n=this.getRowIndex(i.id)+1;if(i.childs.length){i._loading=!1,this._h2.change(i.id,"state","minus"),this._updateTGRState(i);this._massInsert(i,this.rowsCol[n],n);this.callEvent("onGridReconstructed",[])}else i._xml_await&&(i._loading=!0,this.callEvent("onDynXLS",[i.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"&":"?")+"id="+encodeURIComponent(i.id),this._data_type));this.setSizes(),i._loading||this.callEvent("onOpenEnd",[i.id,1]),this._fixAlterCss()}},dhtmlXGridObject.prototype.kidsXmlFile="",dhtmlXGridObject.prototype.sortTreeRows=function(t,e,i){var n="getValue";this.cells5({parentNode:{grid:this}},this.getColType(t)).getDate&&(n="getDate",e="str"),this.forEachRow(function(i){var s=this._h2.get[i];if(s){var o=this._get_cell_value(s.buff,t,n);"int"==e?(s._sort=parseFloat(o),s._sort=isNaN(s._sort)?-99999999999999:s._sort):s._sort=o}});var s=this,o=1,l=-1;"des"==i&&(o=-1,l=1);var r=null;"function"==typeof e?r=function(t,n){return e(t._sort,n._sort,i,t.id,n.id)}:("cus"==e&&(r=function(e,n){return s._customSorts[t](e._sort,n._sort,i,e.id,n.id)}),"str"==e&&(r=function(t,e){return t._sort<e._sort?l:t._sort==e._sort?0:o}),"int"==e&&(r=function(t,e){return t._sort<e._sort?l:t._sort==e._sort?0:o}),"date"==e&&(r=function(t,e){return(Date.parse(new Date(t._sort||"01/01/1900"))-Date.parse(new Date(e._sort||"01/01/1900")))*o})),this._sortTreeRows(r,0),this._renderSort(0,!0),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortTreeRows=function(t,e){var i=this._h2.get[e].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(i,t):i.sort(t);for(var n=0;n<i.length;n++)i[n].childs.length&&this._sortTreeRows(t,i[n].id),i[n].index=n},dhtmlXGridObject.prototype._renderSort=function(t,e){this._h2_to_buff();var i=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=i},dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(t){if("TR"==t.buff.tagName){var e=(this._cssSP?t.level%2:t.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[t.id].className=e+(this._cssSU?" "+e+"_"+t.level:"")+" "+(this.rowsAr[t.id]._css||"")+(-1!=this.rowsAr[t.id].className.indexOf("rowselected")?" rowselected":"")}},this)},dhtmlXGridObject.prototype.moveRowUDTG=function(t,e){var i=this._h2.get[t],n=i.parent.childs[i.index+e];if(n&&n.parent==i.parent){var s=[i.state,n.state];this.collapseKids(this.rowsAr[i.id]),this.collapseKids(this.rowsAr[n.id]);var o=this.rowsCol._dhx_find(this.rowsAr[t]),l=this.rowsBuffer._dhx_find(this.rowsAr[t]),r=this.obj.rows[0].parentNode.removeChild(this.rowsCol[o]),a=this.rowsCol[o+(1==e?2:e)];a?a.parentNode.insertBefore(r,a):this.obj.rows[0].parentNode.appendChild(r),this.rowsCol._dhx_swapItems(o,o+e),this.rowsBuffer._dhx_swapItems(l,l+e),this._h2.swap(n,i),"minus"==s[0]&&this.expandKids(this.rowsAr[i.id]),"minus"==s[1]&&this.expandKids(this.rowsAr[n.id]),this._fixAlterCss(Math.min(o,o+e))}},eXcell_tree.prototype=new eXcell,eXcell_tree.prototype.setValueA=function(t){this.cell.parentNode.valTag.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},eXcell_tree.prototype.setValue=function(t){if(this.cell.parentNode.imgTag)return this.setLabel(t);if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){(e={}).spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>",e.imst="<img class='grid_collapse_icon' src='"+this.grid.iconTree,e.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree),e.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",e.plus=e.imst+"plus.gif"+e.imact,e.minus=e.imst+"minus.gif"+e.imact,e.blank=e.imst+"blank.gif"+e.imact,e.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>",e.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" >",e.itemne="<span id='nodeval'>",e.close="</span></div>",this.grid._tgc=e}this.grid._h2;var e=this.grid._tgc,i=this.cell.parentNode.idd,n=this.grid._h2.get[i];(this.grid.kidsXmlFile||this.grid._slowParse)&&(n.has_kids=n.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=n.state,n._xml_await=!!n.has_kids),n.image=n.image||this.cell._attrs.image||"leaf.gif",n.icon=n.icon||this.cell._attrs.icon||(this.grid.iconset?"file-o":""),n.label=t;for(var s=[e.start],o=0;o<n.level;o++)s.push(e.spacer);n.has_kids?(s.push(e.plus),n.state="plus"):s.push(e.imst+n.state+".gif"+e.imact),n.icon?s.push("<i class='dhx_treegrid_icon fa fa-"+n.icon+"'></i>"):(s.push(e.imsti),s.push(n.image),s.push(e.itemim)),s.push(e.itemne),s.push(n.label),s.push(e.close),this.cell.innerHTML=s.join(""),this.cell._treeCell=!0,this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[n.level],this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[n.level+2],_isKHTML&&(this.cell.vAlign="top"),0!=n.parent.id&&"plus"==n.parent.state&&(this.grid._updateTGRState(n.parent,!1),this.cell.parentNode._skipInsert=!0),this.grid.callEvent("onCellChanged",[i,this.cell._cellIndex,t])},dhtmlXGridObject.prototype._process_tree_xml=function(t,e){this._parsing=!0;var i=!1;e||(this.render_row=this.render_row_tree,i=!0,"0"==(e=t.getAttribute("parent")||0)&&(e=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2));var n=dhx4.ajax.xpath(this.xml.row,t);this._open=this._open||[];for(var s=0;s<n.length;s++){var o=n[s].getAttribute("id");o||(o=this.uid(),n[s].setAttribute("id",o));var l=this._h2.add(o,e);l.buff={idd:o,data:n[s],_parser:this._process_xml_row,_locator:this._get_xml_data},n[s].getAttribute("open")&&(l.state="minus",this._open.push(o)),this.rowsAr[o]=l.buff,this._process_tree_xml(n[s],o)}if(i){n.length?0==e||this._srnd||this._h2.change(e,"state","minus"):this._h2.change(e,"state",this._emptyLineImg);for(s=0;s<this._open.length;s++){(r=this._h2.get[this._open[s]]).childs.length||(r.state=this._emptyLineImg)}if(this._updateTGRState(this._h2.get[e]),this._h2_to_buff(),0!=e&&this._srnd?this.openItem(e):this.pagingOn?this._renderSort():this.render_dataset(),this.kidsXmlFile)for(s=0;s<this._open.length;s++){var r;(r=this._h2.get[this._open[s]])._xml_await&&this.expandKids({idd:r.id})}this._open=[],!1===this._slowParse&&this.forEachRow(function(t){this.render_row_tree(0,t)}),this._parsing=!1,0==e||this._srnd||this.callEvent("onOpenEnd",[e,1])}},dhtmlXGridObject.prototype._h2_to_buff=function(t){t||(t=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var e=0;e<t.childs.length;e++)this.rowsBuffer.push(t.childs[e].buff),"minus"==t.childs[e].state&&this._h2_to_buff(t.childs[e])},dhtmlXGridObject.prototype.render_row_tree=function(t,e){if(e){i=(i=this._h2.get[e])?i.buff:i}else var i=this.rowsBuffer[t];if(!i)return-1;if(i._parser){if(this.rowsAr[i.idd]&&"TR"==this.rowsAr[i.idd].tagName)return this._h2.get[i.idd].buff=this.rowsBuffer[t]=this.rowsAr[i.idd];var n=this._prepareRow(i.idd);return this.rowsAr[i.idd]=n,e||(this.rowsBuffer[t]=n),this._h2.get[i.idd].buff=n,i._parser.call(this,n,i.data),this._postRowProcessing(n),n}return i},dhtmlXGridObject.prototype._removeTrGrRow=function(t,e){if(e)this._h2.forEachChild(e.id,function(t){this._removeTrGrRow(null,t),delete this.rowsAr[t.id]},this);else{var i=this.getRowIndex(t.idd);e=this._h2.get[t.idd];if(-1!=i&&i!==this.undefined){var n=1;e&&"minus"==e.state&&(n+=this._getOpenLenght(e.id,0));for(var s=0;s<n;s++)this.rowsCol[s+i]&&this.rowsCol[s+i].parentNode.removeChild(this.rowsCol[s+i]);if(this._fake){for(s=0;s<n;s++)this._fake.rowsCol[s+i]&&this._fake.rowsCol[s+i].parentNode.removeChild(this._fake.rowsCol[s+i]);n>1&&this._fake.rowsCol.splice(i+1,n-1)}this.rowsCol.splice(i,n),this.rowsBuffer.splice(i,n)}e&&(this._removeTrGrRow(null,e),delete this.rowsAr[e.id],1==e.parent.childs.length&&(this._h2.change(e.parent.id,"state",this._emptyLineImg),this._updateTGRState(e.parent)),this._h2.remove(e.id))}},dhtmlXGridObject.prototype.openItem=function(t){var e=this._h2.get[t||0],i=this.getRowById(t||0);i&&(e.parent&&0!=e.parent.id&&this.openItem(e.parent.id),this.expandKids(i))},dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow,dhtmlXGridObject.prototype.addRow=function(t,e,i,n,s,o){if(!this._h2)return this._addRowClassic(t,e,i);n=n||0;this.cellType._dhx_find("tree");"string"==typeof e&&(e=e.split(this.delim));var l=this._h2.get[t];return l||(0==n?i=this.rowsBuffer.length:(i=this.getRowIndex(n)+1,"minus"==this._h2.get[n].state?i+=this._getOpenLenght(n,0):this._skipInsert=!0)),l=l||this._h2.add(t,n),l.image=s,l.has_kids=o,l.buff=this._addRowClassic(t,e,i)},dhtmlXGridObject.prototype.addRowBefore=function(t,e,i,n,s){if(this.rowsAr[i]){if(!this._h2)return this.addRow(t,e,this.getRowIndex(i));var o=this._h2.get[i].parent.id,l=this.getRowIndex(i);return-1==l&&(this._skipInsert=!0),this._h2.addBefore(t,o,i),this.addRow(t,e,l,this._h2.get[i].parent.id,n,s)}},dhtmlXGridObject.prototype.addRowAfter=function(t,e,i,n,s){if(this.rowsAr[i]){if(!this._h2)return this.addRow(t,e,this.getRowIndex(i)+1);var o=this._h2.get[i].parent.id,l=this.getRowIndex(i);return-1==l&&(this._skipInsert=!0),"minus"==this._h2.get[i].state?l+=this._getOpenLenght(i,0)+1:l++,this._h2.addAfter(t,o,i),this.addRow(t,e,l,o,n,s)}},dhtmlXGridObject.prototype.enableSmartXMLParsing=function(t){this._slowParse=dhx4.s2b(t)},dhtmlXGridObject.prototype._copyTreeGridRowContent=function(t,e,n){var s=this.cellType._dhx_find("tree");for(i=0;i<t.cells.length;i++)i!=s?this.cells(n,i).setValue(this.cells(e,i).getValue()):this.cells(n,i).setValueA(this.cells(e,i).getValue())},dhtmlXGridObject.prototype.closeItem=function(t){var e=this.getRowById(t);e&&this.collapseKids(e)},dhtmlXGridObject.prototype.deleteChildItems=function(t){var e=this._h2.get[t];if(e)for(;e.childs.length;)this.deleteRow(e.childs[0].id)},dhtmlXGridObject.prototype.getAllSubItems=function(t){var e=[],i=this._h2.get[t||0];if(i)for(var n=0;n<i.childs.length;n++)e.push(i.childs[n].id),i.childs[n].childs.length&&(e=e.concat(this.getAllSubItems(i.childs[n].id).split(this.delim)));return e.join(this.delim)},dhtmlXGridObject.prototype.getChildItemIdByIndex=function(t,e){var i=this._h2.get[t||0];return i&&i.childs[e]?i.childs[e].id:null},dhtmlXGridObject.prototype.getItemText=function(t){return this.cells(t,this.cellType._dhx_find("tree")).getLabel()},dhtmlXGridObject.prototype.getOpenState=function(t){var e=this._h2.get[t||0];if(e)return"minus"==e.state},dhtmlXGridObject.prototype.getParentId=function(t){var e=this._h2.get[t||0];return e&&e.parent?e.parent.id:null},dhtmlXGridObject.prototype.getSubItems=function(t){var e=[],i=this._h2.get[t||0];if(i)for(var n=0;n<i.childs.length;n++)e.push(i.childs[n].id);return e.join(this.delim)},dhtmlXGridObject.prototype.expandAll=function(t){this._renderAllExpand(t||0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype._renderAllExpand=function(t){for(var e=this._h2.get[t].childs,i=0;i<e.length;i++)e[i].childs.length&&(this._h2.change(e[i].id,"state","minus"),this._updateTGRState(e[i]),this._renderAllExpand(e[i].id))},dhtmlXGridObject.prototype.collapseAll=function(t){this._h2.forEachChild(t||0,function(t){t&&"minus"==t.state&&(t.state="plus",t.update=!0,this._updateTGRState(t))},this),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype.hasChildren=function(t){var e=this._h2.get[t];return e&&e.childs.length?e.childs.length:e._xml_await?-1:0},dhtmlXGridObject.prototype.setItemCloseable=function(t,e){var i=this._h2.get[t];i&&(i._closeable=!dhx4.s2b(e))},dhtmlXGridObject.prototype.setItemText=function(t,e){return this.cells(t,this.cellType._dhx_find("tree")).setLabel(e)},dhtmlXGridObject.prototype.setItemImage=function(t,e){this._h2.get[t].image=e,this.rowsAr[t].imgTag.nextSibling.src=(this.iconURL||"")+e},dhtmlXGridObject.prototype.setItemIcon=function(t,e){this._h2.get[t].icon=e,this.rowsAr[t].imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+e},dhtmlXGridObject.prototype.getItemImage=function(t){return this.getRowById(t),this._h2.get[t].image},dhtmlXGridObject.prototype.getItemIcon=function(t){return this.getRowById(t),this._h2.get[t].icon},dhtmlXGridObject.prototype.setImageSize=function(t,e){this._img_width=t,this._img_height=e},dhtmlXGridObject.prototype._getRowImage=function(t){return this._h2.get[t.idd].image},dhtmlXGridObject.prototype.setOnOpenStartHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXGridObject.prototype.setOnOpenEndHandler=function(t){this.attachEvent("onOpenEnd",t)},dhtmlXGridObject.prototype.enableTreeCellEdit=function(t){this._edtc=!dhx4.s2b(t)},dhtmlXGridObject.prototype.getLevel=function(t){var e=this._h2.get[t||0];return e?e.level:-1},dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(t,e){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[t].style.display=e)},dhtmlXGridObject.prototype._updateLine=function(t,e){if(e=e||this.rowsAr[t.id]){var i=e.imgTag;if(i){if("blank"==t.state)return i.src=this.iconTree+"blank.gif";var n=1;n=0==t.index&&0==t.level?t.parent.childs.length-1>t.index?3:1:t.parent.childs.length-1>t.index?3:2,i.src=this.iconTree+t.state+n+".gif"}}},dhtmlXGridObject.prototype._updateParentLine=function(t,e){if(e=e||this.rowsAr[t.id]){var i=e.imgTag;if(i)for(var n=t.level;n>0&&0!=t.id;n--)i=i.previousSibling,(t=t.parent).parent.childs.length-1>t.index?i.src=this.iconTree+"line1.gif":i.src=this.iconTree+"blank.gif"}},dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort,dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments),this._redrawLines(0)},dhtmlXGridObject.prototype._redrawLines=function(t){this._tgle&&this._h2.forEachChild(t||0,function(t){this._updateLine(t),this._updateParentLine(t)},this)},dhtmlXGridObject.prototype.enableTreeGridLines=function(){this._emptyLineImg="line",this._updateTGRState=function(t,e){!e&&t.update&&0!=t.id&&(this._tgle&&this._updateLine(t,this.rowsAr[t.id]),t.update=!1)},this._tgle=!0,this.attachEvent("onXLE",function(t,e,i){this._redrawLines(i)}),this.attachEvent("onOpenEnd",function(t){this._redrawLines(t)}),this.attachEvent("onRowAdded",function(t){var e=this._h2.get[t];this._updateLine(e),this._updateParentLine(e),e.index<e.parent.childs.length-1?(e=e.parent.childs[e.index+1],this._updateLine(e),this._updateParentLine(e)):0!=e.index&&(e=e.parent.childs[e.index-1],this._updateLine(e),this._updateParentLine(e),e.childs.length&&this._h2.forEachChild(e.id,function(t){this._updateParentLine(t)},this))}),this.attachEvent("onOpen",function(t,e){if(e)for(var i=this._h2.get[t],n=0;n<i.childs.length;n++)this._updateParentLine(i.childs[n]);return!0}),this.attachEvent("onBeforeRowDeleted",function(t){var e=this,i=this._h2.get[t],n=null;return 0!=i.index&&(n=i.parent.childs[i.index-1]),i=i.parent,window.setTimeout(function(){(i=e._h2.get[i.id])&&(e._updateLine(i),e._updateParentLine(i),n&&(e._updateLine(n),"minus"==n.state&&e._h2.forEachChild(n.id,function(t){e._updateParentLine(t)},e)))},1),!0})},dhtmlXGridObject.prototype.setFiltrationLevel=function(t,e,i){this._tr_strfltr=t,this._tr_fltr_c=e,this._tr_fltr_d=i,this.refreshFilters()},dhtmlXGridObject.prototype.filterTreeBy=function(t,e,i){var n=this._h2;void 0===this._tr_strfltr&&(this._tr_strfltr=-1),this._f_rowsBuffer?i||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;if(this.dma(!0),this._fbf={},"object"==typeof t)for(var s=0;s<e.length;s++)this._filterTreeA(t[s],e[s]);else this._filterTreeA(t,e);this._fbf=null,this.dma(!1),this._fix_filtered_images(this._h2,n),this._renderSort(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._filterTreeA=function(t,e){if(""!=e){var i=!0;"function"==typeof e?i=!1:e=(e||"").toString().toLowerCase();var n,s=function(t,e,i){var n=i.get[t.parent.id];n||(n=s(t.parent,e,i));return(i=l.get[t.id])||(i={id:t.id,childs:[],level:t.level,parent:n,index:n.childs.length,image:t.image,state:t.state,buff:t.buff,has_kids:t.has_kids,_xml_await:t._xml_await},n.childs.push(i),l.get[i.id]=i),i},o=this._fbf,l=this._createHierarchy(),r=this._tr_strfltr,a=this,h=function(t){for(var e=0;e<t.childs.length;e++)a.temp(t.childs[e])};switch(r.toString()){case"-2":n=function(t){return!o[t.id]&&(h(t),!0)};break;case"-1":n=function(t){return!t.childs.length};break;default:n=function(t){return r==t.level}}this.temp=function(a){if(0!=a.id&&n(a))return(i?-1!=this._get_cell_value(a.buff,t).toString().toLowerCase().indexOf(e):e(this._get_cell_value(a.buff,t),a.id))?(s(a,this._h2,l),a.childs&&-2!=r&&this._h2.forEachChild(a.id,function(t){s(t,this._h2,l)},this),!0):(o[a.id]=!0,this._tr_fltr_c&&s(a.parent,this._h2,l),!1);this._tr_fltr_d&&this._tr_strfltr>a.level&&0!=a.id&&s(a,this._h2,l),h(a)},this.temp(this._h2.get[0]),this._h2=l,this._fake&&(this._fake._h2=this._h2)}},dhtmlXGridObject.prototype._fix_filtered_images=function(t,e){t.forEachChild(0,function(t){if(t.childs.length||t.has_kids){if("TR"==t.buff.tagName){var i=e.get[t.id];i&&i.state!=this._emptyLineImg&&(t.state=i.state),t.update=!0,this._updateTGRState(t)}}else t.state!=this._emptyLineImg&&(t.state=this._emptyLineImg,t.update=!0,this._updateTGRState(t))},this)},dhtmlXGridObject.prototype.collectTreeValues=function(t){void 0===this._tr_strfltr&&(this._tr_strfltr=-1),this.dma(!0),this._build_m_order(),t=this._m_order?this._m_order[t]:t;var e={},i=[];(this._f_rowsBuffer||this._h2).forEachChild(0,function(i){if(-2==this._tr_strfltr||-1==this._tr_strfltr&&!i.childs.length||this._tr_strfltr==i.level){var n=this._get_cell_value(i.buff,t);n&&(e[n]=!0)}},this),this.dma(!1);var n=this.combos[t];for(var s in e)!0===e[s]&&i.push(n?n.get(s)||s:s);return i.sort()},dhtmlXGridObject.prototype._in_header_stat_tree_total=function(t,e,i){this._stat_in_header(t,function(){var t=0;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));t+=isNaN(n)?0:n},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(t,e,i){this._stat_in_header(t,function(){var t=0;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));t+=isNaN(n)?0:n}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(t,e,i){var n=i[1].split(":");i[1]="";this._stat_in_header(t,function(){var t=0;return this._h2.forEachChild(0,function(e){var i=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n[0]))*parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n[1]));t+=isNaN(i)?0:i},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(t,e,i){var n=i[1].split(":");i[1]="";this._stat_in_header(t,function(){var t=0;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var i=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n[0]))*parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n[1]));t+=isNaN(i)?0:i}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_max=function(t,e,i){this._stat_in_header(t,function(){var t=-999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(n)||(t=Math.max(t,n))},this),this._maskArr[e]?this._aplNF(t,e):t)},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_min=function(t,e,i){this._stat_in_header(t,function(){var t=999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(n)||(t=Math.min(t,n))},this),this._maskArr[e]?this._aplNF(t,e):t)},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_average=function(t,e,i){this._stat_in_header(t,function(){var t=0,i=0;this._build_m_order();var n=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n));t+=isNaN(s)?0:s,i++},this),this._maskArr[e]?this._aplNF(t,e):Math.round(t/i*100)/100},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(t,e,i){this._stat_in_header(t,function(){var t=-999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){if(!e.childs.length){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(n)||(t=Math.max(t,n))}},this),this._maskArr[e]?this._aplNF(t,e):t)},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(t,e,i){this._stat_in_header(t,function(){var t=999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){if(!e.childs.length){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(n)||(t=Math.min(t,n))}},this),this._maskArr[e]?this._aplNF(t,e):t)},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(t,e,i){this._stat_in_header(t,function(){var t=0,i=0;this._build_m_order();var n=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],n));t+=isNaN(s)?0:s,i++}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(t/i*100)/100},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_count=function(t,e,i){this._stat_in_header(t,function(){var t=0;return this._h2.forEachChild(0,function(e){t++},this),t},e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(t,e,i){this._stat_in_header(t,function(){var t=0;return this._h2.forEachChild(0,function(e){e.childs.length||t++},this),t},e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,n){var s=function(){this.dma(!0),t.innerHTML=(n[0]?n[0]:"")+e.call(this)+(n[1]?n[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;e<4;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",s),this.attachEvent("onXLE",s),this.attachEvent("onFilterEnd",s),this.attachEvent("onEditCell",function(t,e,n){return 2==t&&n==i&&s.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXForm.prototype.getInput=function(t){return this.doWithItem(t,"getInput")},dhtmlXForm.prototype.getSelect=function(t){return this.doWithItem(t,"getSelect")},dhtmlXForm.prototype.items={},dhtmlXForm.prototype.items.checkbox={render:function(t,e){t._type="ch",t._enabled=!0,t._checked=!1,t._value=void 0===e.value?null:String(e.value),t._ro=1==e.readonly,!1!==e._autoInputWidth&&(e.inputWidth=14),this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t.childNodes[t._ll?1:0].className+=" dhxform_img_node";var i=document.createElement("DIV");return i.className="dhxform_img chbx0",t.appendChild(i),isNaN(e.inputLeft)||(t.childNodes[t._ll?1:0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.childNodes[t._ll?1:0].style.top=parseInt(e.inputTop)+"px"),t.childNodes[t._ll?1:0].appendChild(i),t.childNodes[t._ll?1:0].firstChild.value=String(e.value),t._updateImgNode=function(t,e){var i=t.childNodes[t._ll?1:0].lastChild;i.className=(e?"dhxform_actv_c":"dhxform_img")+" "+(t._checked?"chbx1":"chbx0"),t=i=null},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._idd])},t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])},1==e.checked&&this.check(t),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this.doAttachEvents(t),this},destruct:function(t){t._doOnFocus=t._doOnBlur=t._updateImgNode=null,this.doUnloadNestedLists(t),this.doDestruct(t)},doAddLabel:function(t,e){var i=document.createElement("DIV");i.className="dhxform_label "+e.labelAlign,1==e.wrap&&(i.style.whiteSpace="normal"),t._ll?t.insertBefore(i,t.firstChild):t.appendChild(i),void 0!==e.tooltip&&(i.title=e.tooltip),i.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(t._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>",isNaN(e.labelWidth)||(i.firstChild.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.firstChild.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px")},doAddInput:function(t,e,i,n,s,o,l){var r=document.createElement("DIV");r.className="dhxform_control",t._ll?t.appendChild(r):t.insertBefore(r,t.firstChild);var a=document.createElement(i);a.className=l,a.name=t._idd,a._idd=t._idd,a.id=e.uid,"string"==typeof n&&(a.type=n),"INPUT"!=i&&"TEXTAREA"!=i||(a.onkeyup=function(e){e=e||event,t.callEvent("onKeyUp",[this,e,this._idd])},a.onkeydown=function(e){e=e||event,t.callEvent("onKeyDown",[this,e,this._idd])}),"SELECT"==i&&"select"==e.type&&"material"==t.getForm().skin&&(window.dhx4.isOpera||window.dhx4.isChrome?a.className+=" dhxform_arrow_fix_webkit":window.dhx4.isEdge?a.className+=" dhxform_arrow_fix_edge":window.dhx4.isFF&&(a.className+=" dhxform_fix_ff")),r.appendChild(a),s&&(isNaN(e.inputLeft)||(r.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(r.style.top=parseInt(e.inputTop)+"px"));var h="",d=!1;o&&(isNaN(e.inputWidth)||(h+="width:"+parseInt(e.inputWidth)+"px;",d=!0),isNaN(e.inputHeight)||(h+="height:"+parseInt(e.inputHeight)+"px;")),"string"==typeof e.style&&(h+=e.style),a.style.cssText=h,e.maxLength&&a.setAttribute("maxLength",e.maxLength),e.connector&&a.setAttribute("connector",e.connector);var c=null!=dhtmlXForm.prototype.items[this.t]&&1==dhtmlXForm.prototype.items[this.t]._dimFix;if(d&&(1=={input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]||c)&&(null==dhtmlXForm.prototype.items[this.t]._dim&&(dhtmlXForm.prototype.items[this.t]._dim=t.getForm()._checkDim(r,a)),a.style.width=parseInt(a.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"),"object"==typeof e.note){var u=document.createElement("DIV");u.className="dhxform_note",u.style.width=(isNaN(e.note.width)?a.offsetWidth:parseInt(e.note.width))+"px",u._w=e.note.width,u.innerHTML=e.note.text,r.appendChild(u),u=null}e.readonly&&this.setReadonly(t,!0),1==e.disabled&&this.userDisable(t),1==e.hidden&&"combo"!=this.t&&this.hide(t)},doUnloadNestedLists:function(t){if(t._list){for(var e=0;e<t._list.length;e++)t._list[e].unload(),t._list[e]=null,t._listObj[e]=null,t._listBase[e].parentNode.removeChild(t._listBase[e]),t._listBase[e]=null;t._list=null,t._listObj=null,t._listBase=null}},doDestruct:function(t){for(t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._checked=null,t._enabled=null,t._idd=null,t._type=null,t._value=null,t._group=null,t.onselectstart=null,t.childNodes[t._ll?1:0].onmousedown=null,t.childNodes[t._ll?1:0].ontouchstart=null,t.childNodes[t._ll?0:1].onmousedown=null,t.childNodes[t._ll?0:1].ontouchstart=null,t.childNodes[t._ll?0:1].childNodes[0].onfocus=null,t.childNodes[t._ll?0:1].childNodes[0].onblur=null,t.childNodes[t._ll?0:1].childNodes[0].onkeypress=null,t.childNodes[t._ll?0:1].childNodes[0].onkeyup=null,t.childNodes[t._ll?0:1].childNodes[0].onkeydown=null,t.childNodes[t._ll?0:1].childNodes[0].onmousedown=null,t.childNodes[t._ll?0:1].childNodes[0].ontouchstart=null,t.childNodes[t._ll?0:1].removeChild(t.childNodes[t._ll?0:1].childNodes[0]);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},doAttachEvents:function(t){var e=this;t.childNodes[t._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){(t=t||event).preventDefault&&t.preventDefault();var i=t.target||t.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||void 0!==i.className&&"dhxform_note"==i.className)return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1;e.doClick(this.parentNode)},t.childNodes[t._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){if((t=t||event).preventDefault&&t.preventDefault(),!this.parentNode.parentNode._enabled)return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1;var i=t.target||t.srcElement;if(void 0!==i.className&&"dhxform_info"==i.className)return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,t]),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1;e.doClick(this.parentNode.parentNode)}},doClick:function(t){t.childNodes[t._ll?0:1].childNodes[0].focus(),t._enabled&&!t._ro&&(t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",[t._idd,t._value,t._checked])||(this.setChecked(t,!t._checked),t._autoCheck(),t.callEvent("onChange",[t._idd,t._value,t._checked])))},doCheckValue:function(t){t._checked&&t._enabled?(t.childNodes[t._ll?1:0].firstChild.name=String(t._idd),t.childNodes[t._ll?1:0].firstChild.value=this.getValue(t)):(t.childNodes[t._ll?1:0].firstChild.name="",t.childNodes[t._ll?1:0].firstChild.value="")},setChecked:function(t,e){t._checked=!0===e,t.childNodes[t._ll?1:0].lastChild.className=t.childNodes[t._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(t._checked?" chbx1":" chbx0"),this.doCheckValue(t)},check:function(t){this.setChecked(t,!0)},unCheck:function(t){this.setChecked(t,!1)},isChecked:function(t){return t._checked},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[t._ll?0:1].childNodes[0].tabIndex=0,t.childNodes[t._ll?0:1].childNodes[0].removeAttribute("disabled"),this.doCheckValue(t)},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,null!=t._updateImgNode&&t._updateImgNode(t,!1),t.childNodes[t._ll?0:1].childNodes[0].tabIndex=-1,t.childNodes[t._ll?0:1].childNodes[0].setAttribute("disabled","true"),this.doCheckValue(t)},isEnabled:function(t){return t._enabled},setText:function(t,e){t.childNodes[t._ll?0:1].childNodes[0].innerHTML=e+(t._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(t){return t.childNodes[t._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(t,e){this.setChecked(t,!0===e||1==parseInt(e)||"true"==e||t._value===e)},getValue:function(t,e){return"realvalue"==e?t._value:void 0===t._value||null==t._value?t._checked?1:0:t._value},setReadonly:function(t,e){t._ro=!0===e},isReadonly:function(t){return t._ro},setFocus:function(t){t.childNodes[t._ll?0:1].childNodes[0].focus()}},dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(t,e,i){t._type="ra",t._enabled=!0,t._checked=!1,t._group=e.name,t._value=e.value,t._uid=i,t._ro=1==e.readonly,t._rName=t._rId+t._group,this.r[t._idd]=t,e.inputWidth=14,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t.childNodes[t._ll?1:0].className+=" dhxform_img_node";var n=document.createElement("DIV");if(n.className="dhxform_img rdbt0",t.appendChild(n),isNaN(e.inputLeft)||(t.childNodes[t._ll?1:0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.childNodes[t._ll?1:0].style.top=parseInt(e.inputTop)+"px"),t.childNodes[t._ll?1:0].appendChild(n),t.childNodes[t._ll?1:0].firstChild.name="",t.childNodes[t._ll?1:0].firstChild.value="",t._updateImgNode=function(t,e){var i=t.childNodes[t._ll?1:0].lastChild;i.className=(e?"dhxform_actv_r":"dhxform_img")+" "+(t._checked?"rdbt1":"rdbt0"),t=i=null},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._group,t._value])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._group,t._value])},t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._group,this._value])},null==this.input[t._rName]){var s=document.createElement("INPUT");s.type="HIDDEN",s.name=e.name,s.firstValue=t._value,t.appendChild(s),this.input[t._rName]=s}return this.firstValue[t._rName]||(this.firstValue[t._rName]=e.value),1==e.checked&&this.check(t),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this.doAttachEvents(t),this},destruct:function(t,e){if(t.lastChild==this.input[t._rName]){var i=!1;for(var n in this.r)i||this.r[n]._group!=t._group||this.r[n]._idd==t._idd||(this.r[n].appendChild(this.input[t._rName]),i=!0);i||(this.input[t._rName].parentNode.removeChild(this.input[t._rName]),this.input[t._rName]=null,this.firstValue[t._rName]=null)}this.r[t._idd]=null,delete this.r[t._idd],t._doOnFocus=t._doOnBlur=t._updateImgNode=null,this.doUnloadNestedLists(t),this.doDestruct(t);var s=t._idd;return t=null,s},doClick:function(t){if(t.childNodes[t._ll?0:1].childNodes[0].focus(),t._enabled&&!t._checked&&!t._ro){var e=[t._group,t._value,!0];t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",e)||(this.setChecked(t,!0),t.getForm()._autoCheck(),t.callEvent("onChange",e))}},doCheckValue:function(t){var e=null;for(var i in this.r)this.r[i]._checked&&this.r[i]._group==t._group&&this.r[i]._rId==t._rId&&(e=this.r[i]._value);null!=e&&this.r[i]._enabled?(this.input[t._rName].name=String(t._group),this.input[t._rName].value=e):(this.input[t._rName].name="",this.input[t._rName].value=""),this.input[t._rName]._value=e},setChecked:function(t,e){e=!0===e;for(var i in this.r)if(this.r[i]._group==t._group&&this.r[i]._rId==t._rId){var n=!1;if(this.r[i]._idd==t._idd?this.r[i]._checked!=e&&(this.r[i]._checked=e,n=!0):this.r[i]._checked&&(this.r[i]._checked=!1,n=!0),n){var s=this.r[i].childNodes[this.r[i]._ll?1:0].childNodes[1];s.className=s.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[i]._checked?" rdbt1":" rdbt0"),s=null}}this.doCheckValue(t)},getChecked:function(t){return this.input[t._rName]._value},_getFirstValue:function(t){return this.firstValue[t._rName]},_getId:function(t){return t._idd},setValue:function(t,e){}},function(){for(var t in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.select={render:function(t,e){return t._type="se",t._enabled=!0,t._value=null,t._newValue=null,this.doAddLabel(t,e),this.doAddInput(t,e,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(t),this.doLoadOpts(t,e),null!=e.connector&&this.doLoadOptsConnector(t,e.connector),void 0!==e.value&&null!=e.value&&this.setValue(t,e.value),this},destruct:function(t){for(this.doUnloadNestedLists(t),t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._enabled=null,t._idd=null,t._type=null,t._value=null,t._newValue=null,t.onselectstart=null,t.childNodes[t._ll?1:0].childNodes[0].onclick=null,t.childNodes[t._ll?1:0].childNodes[0].onkeydown=null,t.childNodes[t._ll?1:0].childNodes[0].onchange=null,t.childNodes[t._ll?1:0].childNodes[0].onfocus=null,t.childNodes[t._ll?1:0].childNodes[0].onblur=null,t.childNodes[t._ll?1:0].childNodes[0].onkeyup=null,t.childNodes[t._ll?1:0].removeChild(t.childNodes[t._ll?1:0].childNodes[0]);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},doAddLabel:function(t,e){var i=document.createElement("DIV");i.className="dhxform_label "+e.labelAlign,i.innerHTML="<label for='"+e.uid+"'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(t._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>",1==e.wrap&&(i.style.whiteSpace="normal"),void 0!==e.tooltip&&(i.title=e.tooltip),t.appendChild(i),void 0!==e.label&&null!=e.label&&0!=e.label.length||(i.style.display="none"),isNaN(e.labelWidth)||(i.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px"),e.info&&(i.onclick=function(t){var e=(t=t||event).target||t.srcElement;if(void 0!==e.className&&"dhxform_info"==e.className)return this.parentNode.callEvent("onInfo",[this.parentNode._idd,t]),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1})},doAttachEvents:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0],i=this;e.onclick=function(){i.doOnChange(this)},e.onkeydown=function(t){t=t||event,i.doOnChange(this),this.parentNode.parentNode.callEvent("onKeyDown",[this,t,this.parentNode.parentNode._idd])},e.onchange=function(){i.doOnChange(this)},e.onkeyup=function(t){t=t||event,this.parentNode.parentNode.callEvent("onKeyUp",[this,t,this.parentNode.parentNode._idd])},e=null,this.doAttachChangeLS(t)},doAttachChangeLS:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0];e.onfocus=function(){var t=this.parentNode.parentNode;t.getForm()._ccActivate(t._idd,this,t.getForm().getItemValue(t._idd,!0)),t.getForm().callEvent("onFocus",[t._idd]),t=null},e.onblur=function(){var t=this.parentNode.parentNode;t.getForm()._ccDeactivate(t._idd),t.getForm().callEvent("onBlur",[t._idd]),t=null},e=null},doValidate:function(t){t.getForm().live_validate&&this._validate(t)},doLoadOpts:function(t,e,i){for(var n=t.childNodes[t._ll?1:0].childNodes[0],s=e.options,o=!1,l=0;l<s.length;l++){var r=s[l].text||s[l].label;r&&void 0!==r||(r="");var a=new Option(r,s[l].value);"string"==typeof s[l].img_src&&a.setAttribute("img_src",s[l].img_src),n.options.add(a),void 0!==s[l].selected&&1==window.dhx4.s2b(s[l].selected)&&(a.selected=!0,t._value=s[l].value,o=!0),void 0!==s[l].checked&&1==window.dhx4.s2b(s[l].checked)&&a.setAttribute("checked","1"),void 0!==s[l].img&&a.setAttribute("img",s[l].img),void 0!==s[l].img_dis&&a.setAttribute("img_dis",s[l].img_dis),void 0!==s[l].css&&a.setAttribute("css",s[l].css)}!o&&n.selectedIndex>=0&&(t._value=n.options[n.selectedIndex].value),!0===i&&t.callEvent("onOptionsLoaded",[t._idd]),this._checkNoteWidth(t)},doLoadOptsConnector:function(t,e){var i=this;t._connector_working=!0,window.dhx4.ajax.get(e,function(e){if(null!=(e=e.xmlDoc.responseXML)){var n=e.getElementsByTagName("data");if(null!=n&&null!=n[0]){n=n[0];for(var s=[],o=0;o<n.childNodes.length;o++)if(void 0!==n.childNodes[o].tagName&&"item"==String(n.childNodes[o].tagName).toLowerCase()){var l=n.childNodes[o];s.push({label:l.getAttribute("label"),value:l.getAttribute("value"),selected:null!=l.getAttribute("selected")}),l=null}i.doLoadOpts(t,{options:s},!0),t._connector_working=!1,null!=t._connector_value&&(i.setValue(t,t._connector_value),t._connector_value=null),i=t=null}}})},doOnChange:function(t){var e=t.parentNode.parentNode;if(e._newValue=t.selectedIndex>=0?t.options[t.selectedIndex].value:null,e._newValue!=e._value){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,e._value,e._newValue])){for(var i=0;i<t.options.length;i++)t.options[i].value==e._value&&(t.options[i].selected=!0);return}e._value=e._newValue,e.callEvent("onChange",[e._idd,e._value]),"se"==e._type&&e.getForm().live_validate&&this._validate(e)}e._autoCheck()},setText:function(t,e){e||(e=""),t.childNodes[t._ll?0:1].childNodes[0].innerHTML=e+(t._required?"<span class='dhxform_item_required'>*</span>":""),t.childNodes[t._ll?0:1].style.display=0==e.length||null==e?"none":""},getText:function(t){return t.childNodes[t._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[t._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t.childNodes[t._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(t){return t.childNodes[t._ll?1:0].childNodes[0].options},setValue:function(t,e){if(t._connector_working)t._connector_value=e;else{for(var i=this.getOptions(t),n=0;n<i.length;n++)i[n].value==e&&(i[n].selected=!0,t._value=i[n].value);null!=t._list&&t._list.length>0&&t.getForm()._autoCheck(),t.getForm()._ccReload(t._idd,t._value)}},getValue:function(t){for(var e=-1,i=this.getOptions(t),n=0;n<i.length;n++)i[n].selected&&(e=i[n].value);return e},setWidth:function(t,e){t.childNodes[t._ll?1:0].childNodes[0].style.width=e+"px"},getSelect:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},setFocus:function(t){t.childNodes[t._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(t){var e;null!=t.childNodes[t._ll?1:0].childNodes[1]&&null!=(e=t.childNodes[t._ll?1:0].childNodes[1]).className&&e.className.search(/dhxform_note/gi)>=0&&"auto"==e._w&&(e.style.width=t.childNodes[t._ll?1:0].childNodes[0].offsetWidth+"px"),e=null}},function(){for(var t in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(t,e,i){var n=t.childNodes[t._ll?1:0].childNodes[0];n.multiple=!0,isNaN(e.size)||(n.size=Number(e.size)),t._value=[],t._newValue=[];for(var s=e.options,o=0;o<s.length;o++){var l=new Option(s[o].text||s[o].label,s[o].value);n.options.add(l),1!=s[o].selected&&"true"!=s[o].selected||(l.selected=!0,t._value.push(s[o].value))}!0===i&&t.callEvent("onOptionsLoaded",[t._idd]),this._checkNoteWidth(t)},doAttachEvents:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0],i=this;e.onfocus=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t.getForm().callEvent("onFocus",[t._idd]),t=null},e.onblur=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t.getForm().callEvent("onBlur",[t._idd]),t=null},e.onclick=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t._autoCheck(),t=null}},doOnChange:function(t){var e=t.parentNode.parentNode;e._newValue=[];for(var i=0;i<t.options.length;i++)t.options[i].selected&&e._newValue.push(t.options[i].value);if(e._value.sort().toString()!=e._newValue.sort().toString()){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,e._value,e._newValue])){var n={};for(i=0;i<e._value.length;i++)n[e._value[i]]=!0;for(i=0;i<t.options.length;i++)t.options[i].selected=1==n[t.options[i].value];return void(n=null)}e._value=[];for(i=0;i<e._newValue.length;i++)e._value.push(e._newValue[i]);e.callEvent("onChange",[e._idd,e._value])}e._autoCheck()},setValue:function(t,e){var i={};"string"==typeof e&&(e=e.split(",")),"object"!=typeof e&&(e=[e]);for(var n=0;n<e.length;n++)i[e[n]]=!0;var s=this.getOptions(t);for(n=0;n<s.length;n++)s[n].selected=1==i[s[n].value];t._autoCheck()},getValue:function(t){for(var e=[],i=this.getOptions(t),n=0;n<i.length;n++)i[n].selected&&e.push(i[n].value);return e}},function(){for(var t in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[t]||(dhtmlXForm.prototype.items.multiselect[t]=dhtmlXForm.prototype.items.select[t])}(),dhtmlXForm.prototype.items.input={render:function(t,e){var i=!isNaN(e.rows);if(t._type="ta",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,i?"TEXTAREA":"INPUT",i?null:"TEXT",!0,!0,"dhxform_textarea"),this.doAttachEvents(t),i&&(t.childNodes[t._ll?1:0].childNodes[0].rows=Number(e.rows)+(window.dhx4.isIE6?1:0)),void 0!==e.numberFormat){var n,s=null,o=null;"string"!=typeof e.numberFormat?(n=e.numberFormat[0],s=e.numberFormat[1]||null,o=e.numberFormat[2]||null):(n=e.numberFormat,"string"==typeof e.groupSep&&(s=e.groupSep),"string"==typeof e.decSep&&(o=e.decSep)),this.setNumberFormat(t,n,s,o,!1)}return this.setValue(t,e.value),this},doAttachEvents:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0];if(void 0!==e.tagName&&1=={input:1,textarea:1,select:1}[e.tagName.toLowerCase()]){var i=this;e.onfocus=function(){var t=this.parentNode.parentNode;null!=t._df&&(this.value=t._value||""),t.getForm()._ccActivate(t._idd,this,this.value),t.getForm().callEvent("onFocus",[t._idd]),t=null},e.onblur=function(){var t=this.parentNode.parentNode;t.getForm()._ccDeactivate(t._idd),i.updateValue(t,!0),t.getForm().live_validate&&i._validate(t),t.getForm().callEvent("onBlur",[t._idd]),t=null}}e=null},updateValue:function(t,e){var i=t.childNodes[t._ll?1:0].childNodes[0].value,n=t.getForm(),s=1==n._ccActive&&null!=n._formLS&&null!=n._formLS[t._idd];if(n=null,(s||null==t._df||i!=window.dhx4.template._getFmtValue(t._value,t._df))&&(e||null==t._df||t._value!=i||i!=window.dhx4.template._getFmtValue(i,t._df))){if(t._value!=i)return t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",[t._idd,t._value,i])?void(null!=t._df?this.setValue(t,t._value):t.childNodes[t._ll?1:0].childNodes[0].value=t._value):(null!=t._df&&e?this.setValue(t,i):t._value=i,void t.callEvent("onChange",[t._idd,i]));null!=t._df&&e&&this.setValue(t,t._value)}},setValue:function(t,e){t._value=void 0!==e&&null!=e?e:"";var i=String(t._value)||"",n=t.childNodes[t._ll?1:0].childNodes[0];null!=t._df&&(i=window.dhx4.template._getFmtValue(i,t._df)),n.value!=i&&(n.value=i,t.getForm()._ccReload(t._idd,i)),n=null},getValue:function(t){var e=t.getForm();return e._formLS&&null!=e._formLS[t._idd]&&this.updateValue(t),e=null,void 0!==t._value&&null!=t._value?t._value:""},setReadonly:function(t,e){t._ro=!0===e,t._ro?t.childNodes[t._ll?1:0].childNodes[0].setAttribute("readOnly","true"):t.childNodes[t._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(t){return t._ro||(t._ro=!1),t._ro},getInput:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},setNumberFormat:function(t,e,i,n,s){if("boolean"!=typeof s&&(s=!0),""==e)return t._df=null,s&&this.setValue(t,t._value),!0;if("string"==typeof e){var o=window.dhx4.template._parseFmt(e,i,n);return 0!=o&&(t._df=o,s&&this.setValue(t,t._value),!0)}}},function(){for(var t in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype.items.password={render:function(t,e){return t._type="pw",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","PASSWORD",!0,!0,"dhxform_textarea"),this.doAttachEvents(t),this.setValue(t,e.value),this}},function(){for(var t in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.file={render:function(t,e){t._type="fl",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","FILE",!0,!1,"dhxform_textarea");var i=t.childNodes[t._ll?1:0].childNodes[0],n=this;return i.onfocus=function(){var t=this.parentNode.parentNode;t.getForm().callEvent("onFocus",[t._idd]),t=null},i.onblur=function(){var t=this.parentNode.parentNode;t.getForm().live_validate&&n._validate(t),t.getForm().callEvent("onBlur",[t._idd]),t=null},i=null,t.childNodes[t._ll?1:0].childNodes[0].onchange=function(){t.callEvent("onChange",[t._idd,this.value])},this},setValue:function(){},getValue:function(t){return t.childNodes[t._ll?1:0].childNodes[0].value}},function(){for(var t in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.label={_index:!1,render:function(t,e){t._type="lb",t._enabled=!0,t._checked=!0;var i=document.createElement("DIV");return i.className="dhxform_txt_label2"+(e._isTopmost?" topmost":""),i.innerHTML=e.label,t.appendChild(i),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),isNaN(e.labelWidth)||(i.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px"),this},destruct:function(t){this.doUnloadNestedLists(t),t._autoCheck=null,t._enabled=null,t._type=null,t.callEvent=null,t.checkEvent=null,t.getForm=null,t.onselectstart=null,t.parentNode.removeChild(t),t=null},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1},setText:function(t,e){t.firstChild.innerHTML=e},getText:function(t){return t.firstChild.innerHTML}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.button={render:function(t,e){if(t._type="bt",t._enabled=!0,t._name=e.name,t.className=String(t.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left"),t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[0].childNodes[0],e,this._idd])},t.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+e.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>',!isNaN(e.width)){var i=Math.max(e.width,10);null==dhtmlXForm.prototype.items[this.t]._dim&&(t.firstChild.style.width=i+"px",dhtmlXForm.prototype.items[this.t]._dim=t.getForm()._checkDim(t,t.firstChild)),t.firstChild.style.width=i-dhtmlXForm.prototype.items[this.t]._dim+"px",t.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}return isNaN(e.inputLeft)||(t.childNodes[0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.childNodes[0].style.top=parseInt(e.inputTop)+"px"),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),void 0!==e.tooltip&&(t.firstChild.title=e.tooltip),t.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.firstChild.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.firstChild.onkeypress=function(t){if((32==(t=t||event).keyCode||32==t.charCode||13==t.keyCode||13==t.charCode)&&!this.parentNode._busy)return this.parentNode._busy=!0,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1},t.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)},t.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout"),this.parentNode._doOnBlur(this.parentNode)},t.firstChild.onkeyup=function(t){this.parentNode._doOnKeyUpDown("onKeyUp",t||event)},t.firstChild.onkeydown=function(t){this.parentNode._doOnKeyUpDown("onKeyDown",t||event)},t.firstChild.onmouseover=function(){var t=this.parentNode;t._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over",t=null)},t.firstChild.onmouseout=function(){var t=this.parentNode;t._enabled&&(this.className="dhxform_btn",this._allowClick=!1,this._pressed=!1,this._isOver=!1,t=null)},t.firstChild.ontouchstart=t.firstChild.onmousedown=function(t){if("touchstart"==(t=t||event).type&&t.preventDefault&&t.preventDefault(),!(t.button>=2||this._pressed)){var e=this.parentNode;e._enabled&&(this.className="dhxform_btn dhxform_btn_pressed",this._allowClick=!0,this._pressed=!0,e=null)}},t.firstChild.ontouchend=t.firstChild.onmouseup=function(t){if(!((t=t||event).button>=2)&&this._pressed){var e=this.parentNode;e._enabled&&(e._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&e.callEvent("_onButtonClick",[e._name,e._cmd]),this._allowClick=!1,this._pressed=!1,e=null)}},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._idd])},this},destruct:function(t){for(this.doUnloadNestedLists(t),t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._type=null,t._enabled=null,t._cmd=null,t._name=null,t._doOnFocus=null,t._doOnBlur=null,t._doOnKeyUpDown=null,t.onselectstart=null,t.firstChild.onselectstart=null,t.firstChild.onkeypress=null,t.firstChild.ontouchstart=null,t.firstChild.ontouchend=null,t.firstChild.onfocus=null,t.firstChild.onblur=null,t.firstChild.onkeyup=null,t.firstChild.onkeydown=null,t.firstChild.onmouseover=null,t.firstChild.onmouseout=null,t.firstChild.onmousedown=null,t.firstChild.onmouseup=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[0].removeAttribute("disabled"),t.childNodes[0].setAttribute("role","link"),t.childNodes[0].setAttribute("tabIndex","0")},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t.childNodes[0].setAttribute("disabled","true"),t.childNodes[0].removeAttribute("role"),t.childNodes[0].removeAttribute("tabIndex")},setText:function(t,e){t.childNodes[0].childNodes[0].innerHTML=e},getText:function(t){return t.childNodes[0].childNodes[0].innerHTML},setFocus:function(t){t.childNodes[0].focus()}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.hidden={_index:!1,render:function(t,e){t.style.display="none",t._name=e.name,t._type="hd",t._enabled=!0;var i=document.createElement("INPUT");return i.type="HIDDEN",i.name=e.name,i.value=e.value||"",t.appendChild(i),this},destruct:function(t){for(this.doUnloadNestedLists(t);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t._autoCheck=null,t._name=null,t._type=null,t._enabled=null,t.onselectstart=null,t.callEvent=null,t.checkEvent=null,t.getForm=null,t.parentNode.removeChild(t),t=null},enable:function(t){t._enabled=!0,t.childNodes[0].setAttribute("name",t._name)},disable:function(t){t._enabled=!1,t.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(t,e){t.childNodes[0].value=e},getValue:function(t){return t.childNodes[0].value},getInput:function(t){return t.childNodes[0]}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.list={_index:!1,render:function(t,e){return t._type="list",t._enabled=!0,t._isNestedForm=!0,t.style.paddingLeft=t._ofsNested+"px",t.className="dhxform_base_nested"+(t._custom_css||""),[this,new dhtmlXForm(t,null,e)]},destruct:function(t){}},dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(t,e){t._type="fs",parseInt(e.inputWidth),t._width=e.width,t._enabled=!0,t._checked=!0,t.className="fs_"+e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("FIELDSET");i.className="dhxform_fs";var n=String(e.labelAlign).replace("align_","");if(i.innerHTML="<legend class='fs_legend' align='"+n+"' style='text-align:"+n+"'>"+e.label+"</legend>",t.appendChild(i),isNaN(e.inputLeft)||(i.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(i.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&!isNaN(e.inputWidth)){i.style.width=parseInt(e.inputWidth)+"px";var s=parseInt(i.style.width);i.offsetWidth>s&&(i.style.width=s+(s-i.offsetWidth)+"px")}return t._addSubListNode=function(){var t=document.createElement("DIV");return t._custom_css=" dhxform_fs_nested",this.childNodes[0].appendChild(t),t},1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this},destruct:function(t){for(this.doUnloadNestedLists(t),t._checked=null,t._enabled=null,t._idd=null,t._type=null,t._width=null,t.onselectstart=null,t._addSubListNode=null,t._autoCheck=null,t.callEvent=null,t.checkEvent=null,t.getForm=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},setText:function(t,e){t.childNodes[0].childNodes[0].innerHTML=e},getText:function(t){return t.childNodes[0].childNodes[0].innerHTML},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,""))},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled")},setWidth:function(t,e){t.childNodes[0].style.width=e+"px",t._width=e},getWidth:function(t){return t._width}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.block={_index:!1,render:function(t,e){t._type="bl",t._width=e.width,t._enabled=!0,t._checked=!0,t.className="block_"+e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("DIV");return i.className="dhxform_obj_"+t.getForm().skin+" dhxform_block",i.style.fontSize=t.getForm().cont.style.fontSize,e.style&&(i.style.cssText=e.style),void 0!==e.id&&(i.id=e.id),t.appendChild(i),isNaN(e.inputLeft)||(i.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(i.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(i.style.width=parseInt(e.inputWidth)+"px")),isNaN(e.blockOffset)||(t._ofsNested=e.blockOffset),t._addSubListNode=function(){var t=document.createElement("DIV");return t._inBlcok=!0,void 0!==this._ofsNested&&(t._ofsNested=this._ofsNested),this.childNodes[0].appendChild(t),t},1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this},_setCss:function(t,e,i){t.firstChild.className="dhxform_obj_"+e+" dhxform_block",t.firstChild.style.fontSize=i}},function(){for(var t in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[t]=dhtmlXForm.prototype.items.fieldset[t]}(),dhtmlXForm.prototype.items.newcolumn={_index:!1},dhtmlXForm.prototype.items.template={render:function(t,e){isNaN(e.rows);return t._type="tp",t._enabled=!0,null!=e.format&&("function"==typeof e.format?t.format=e.format:"string"==typeof e.format&&"function"==typeof window[e.format]&&(t.format=window[e.format])),null==t.format&&(t.format=function(t,e){return e}),this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_item_template"),this.setValue(t,e.value||""),this},destruct:function(t){t.format=null,this.d2(t),t=null},setValue:function(t,e){t._value=e,t.childNodes[t._ll?1:0].childNodes[0].innerHTML=t.format(t._idd,t._value)},getValue:function(t){return t._value},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1}},function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype._ulToObject=function(t,e){for(var i=[],n=0;n<t.childNodes.length;n++){if("li"==String(t.childNodes[n].tagName||"").toLowerCase()){for(var s={},o=t.childNodes[n],l=0;l<e.length;l++)null!=o.getAttribute(e[l])&&(s[String(e[l]).replace("ftype","type")]=o.getAttribute(e[l]));if(!s.label)try{s.label=o.firstChild.nodeValue}catch(t){}var r=o.getElementsByTagName("UL");null!=r[0]&&(s["select"==s.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(r[0],e));for(l=0;l<o.childNodes.length;l++)"userdata"==String(o.childNodes[l].tagName||"").toLowerCase()&&(s.userdata||(s.userdata={}),s.userdata[o.childNodes[l].getAttribute("name")]=o.childNodes[l].firstChild.nodeValue);i[i.length]=s}if("div"==String(t.childNodes[n].tagName||"").toLowerCase()){(s={}).type="label";try{s.label=t.childNodes[n].firstChild.nodeValue}catch(t){}i[i.length]=s}}return i},dhtmlXForm.prototype.setUserData=function(t,e,i,n){if(void 0!==n){var s=this.doWithItem([t,e],"_getId");null!=s&&(t=s,e=i,i=n)}this._userdata||(this._userdata={}),this._userdata[t]=this._userdata[t]||{},this._userdata[t][e]=i},dhtmlXForm.prototype.getUserData=function(t,e,i){if(void 0!==i){var n=this.doWithItem([t,e],"_getId");null!=n&&(t=n,e=i)}return null!=this._userdata&&void 0!==this._userdata[t]&&void 0!==this._userdata[t][e]?this._userdata[t][e]:""},dhtmlXForm.prototype.setRTL=function(t){this._rtl=!0===t,this._rtl?String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl"):String(this.cont).search(/dhxform_rtl/gi)>=0&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))},_dhxForm_doClick=function(t,e){if("object"==typeof e){var i=e[1];e=e[0]}if(document.createEvent){(n=document.createEvent("MouseEvents")).initEvent(e,!0,!1),t.dispatchEvent(n)}else if(document.createEventObject){var n;(n=document.createEventObject()).button=1,t.fireEvent("on"+e,n)}i&&window.setTimeout(function(){_dhxForm_doClick(t,i)},100)},dhtmlXForm.prototype.setFormData=function(t){for(var e in t){var i=this.getItemType(e);switch(i){case"checkbox":this[1==t[e]||1==parseInt(t[e])||"true"==t[e]||t[e]==this.getItemValue(e,"realvalue")?"checkItem":"uncheckItem"](e);break;case"radio":this.checkItem(e,t[e]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(e,t[e]);break;default:this["setFormData_"+i]?this["setFormData_"+i](e,t[e]):(this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,e,t[e]))}}},dhtmlXForm.prototype.getFormData=function(t,e){var i={};for(var n in this.itemPull){var s=this.itemPull[n]._idd,o=this.itemPull[n]._type;if("ch"==o&&(i[s]=this.isItemChecked(s)?this.getItemValue(s):0),"ra"!=o||i[this.itemPull[n]._group]||(i[this.itemPull[n]._group]=this.getCheckedValue(this.itemPull[n]._group)),o in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(i[s]=this.getItemValue(s,t)),this["getFormData_"+o]&&(i[s]=this["getFormData_"+o](s)),"up"==o){var l=this.getItemValue(s);for(var r in l)i[r]=l[r]}if(this.itemPull[n]._list)for(var a=0;a<this.itemPull[n]._list.length;a++){var h=this.itemPull[n]._list[a].getFormData(t,e);for(var d in h)i[d]=h[d]}}if(!e&&this.hId&&this._userdata[this.hId])for(var n in this._userdata[this.hId])i[n]||(i[n]=this._userdata[this.hId][n]);return i},dhtmlXForm.prototype.adjustParentSize=function(){for(var t=0,e=-1,i=0;i<this.base.length;i++)t+=this.base[i].firstChild.offsetWidth,this.base[i].offsetHeight>e&&(e=this.base[i].offsetHeight);var n=!1;try{if(n=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var s=this.cont.parentNode.parentNode.parentNode.parentNode}catch(t){}if(n&&void 0!==s)return t>0&&s.setWidth(t+10),e>0&&s.setHeight(e+s.firstChild.firstChild.offsetHeight+5),void(n=s=null);try{if(1==this.cont.parentNode.parentNode.parentNode._isWindow){var o=this.cont.parentNode.parentNode;"function"==typeof o.callEvent&&(this.cont.style.display="none",o.callEvent("_setCellSize",[t+15,e+15]),this.cont.style.display="")}}catch(t){}},dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))},dhtmlXForm.prototype.send=function(t,e,i,n){if("function"==typeof e?(i=e,e="post"):e="get"==e?"get":"post",!0===n||this.validate()){var s=this.getFormData(!0),o=[];for(var l in s)o.push(l+"="+encodeURIComponent(s[l]));var r=function(t){i&&i.call(this,t,t.xmlDoc.responseText)};"get"==e?window.dhx4.ajax.get(t+(-1==t.indexOf("?")?"?":"&")+o.join("&"),r):window.dhx4.ajax.post(t,o.join("&"),r)}},dhtmlXForm.prototype.save=function(t,e){},dhtmlXForm.prototype.dummy=function(){},dhtmlXForm.prototype._changeFormId=function(t,e){this.formId=e},dhtmlXForm.prototype._dp_init=function(t){t._methods=["dummy","dummy","_changeFormId","dummy"],t._getRowData=function(t,e){var i=this.obj.getFormData(!0);return i[this.action_param]=this.obj.getUserData(t,this.action_param),i},t._clearUpdateFlag=function(){},t.attachEvent("onAfterUpdate",function(t,e,i,n){return"inserted"!=e&&"updated"!=e&&"error"!=e&&"invalid"!=e||this.obj.resetDataProcessor("updated"),"inserted"!=e&&"updated"!=e||(this.obj._last_load_data=this.obj.getFormData(!0)),this.obj.callEvent("onAfterSave",[this.obj.formId,n]),!0}),t.autoUpdate=!1,t.setTransactionMode("POST",!0),this.dp=t,this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted"),this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&t.sendData()}},dhtmlXForm.prototype.resetDataProcessor=function(t){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,t))},dhtmlXForm.prototype._ccActivate=function(t,e,i){this._formLS||(this._formLS={}),this._formLS[t]||(this._formLS[t]={input:e,value:i}),this._ccActive||(this._ccActive=!0,this._ccDo()),e=null},dhtmlXForm.prototype._ccDeactivate=function(t){this._ccTm&&window.clearTimeout(this._ccTm),this._ccActive=!1,null!=this._formLS&&null!=this._formLS[t]&&(this._formLS[t].input=null,this._formLS[t]=null,delete this._formLS[t])},dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var t in this._formLS){var e=this._formLS[t].input;if("select"==String(e.tagName).toLowerCase()){var i="";e.selectedIndex>=0&&e.selectedIndex<e.options.length&&(i=e.options[e.selectedIndex].value)}else i=e.value;i!=this._formLS[t].value&&(this._formLS[t].value=i,this.callEvent("onInputChange",[e._idd,i,this])),e=null}if(this._ccActive){var n=this;this._ccTm=window.setTimeout(function(){n._ccDo(),n=null},100)}},dhtmlXForm.prototype._ccReload=function(t,e){this._formLS&&this._formLS[t]&&(this._formLS[t].value=e)},dhtmlXForm.prototype._checkDim=function(t,e){var i=document.createElement("DIV");i.className="dhxform_obj_"+this.skin,i.style.cssText+=1==dhx4.isIE6?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;",document.body.appendChild(i);var n=t.parentNode,s=t.nextSibling;i.appendChild(t);var o=parseInt(e.style.width),l=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?e.offsetWidth:e.clientWidth)-o;return null!=s?n.insertBefore(t,s):n.appendChild(t),i.parentNode.removeChild(i),n=s=i=t=e=null,l},dhtmlXForm.prototype._autoload=function(){for(var t=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"],e=document.getElementsByTagName("UL"),i=[],n=0;n<e.length;n++)if("dhtmlxForm"==e[n].className){var s=document.createElement("DIV");i[i.length]={nodeUL:e[n],nodeForm:s,data:dhtmlXForm.prototype._ulToObject(e[n],t),name:e[n].getAttribute("name")||null}}for(n=0;n<i.length;n++){i[n].nodeUL.parentNode.insertBefore(i[n].nodeForm,i[n].nodeUL);var o=new dhtmlXForm(i[n].nodeForm,i[n].data);null!==i[n].name&&(window[i[n].name]=o);var l=i[n].nodeUL.getAttribute("oninit")||null;i[n].nodeUL.parentNode.removeChild(i[n].nodeUL),i[n].nodeUL=null,i[n].nodeForm=null,i[n].data=null,i[n]=null,l&&("function"==typeof l?l():"function"==typeof window[l]&&window[l]())}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachForm=function(t){this.callEvent("_onBeforeContentAttach",["form"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(e):e.style.overflow="auto",this._attachObject(e),this.dataType="form",this.dataObj=new dhtmlXForm(e,t,this.conf.skin),e=null,this.callEvent("_onContentAttach",[]),this.dataObj}),dhtmlXForm.prototype.items.combo={render:function(t,e){t._type="combo",t._enabled=!0,t._value=null,t._newValue=null;var i=t.getForm().skin;void 0!==e.inputWidth&&"material"==i&&null!=String(e.inputWidth).match(/^\d*$/)&&(e.inputWidth=parseInt(e.inputWidth)+2),this.doAddLabel(t,e),this.doAddInput(t,e,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(t),this.doLoadOpts(t,e),t.onselectstart=function(t){return!0},t.childNodes[t._ll?1:0].childNodes[0].setAttribute("mode",e.comboType||""),e.comboImagePath&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("imagePath",e.comboImagePath),e.comboDefaultImage&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("defaultImage",e.comboDefaultImage),e.comboDefaultImageDis&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("defaultImageDis",e.comboDefaultImageDis),t._combo=new dhtmlXComboFromSelect(t.childNodes[t._ll?1:0].childNodes[0]),t._combo.setSkin(i),t._combo._currentComboValue=t._combo.getSelectedValue(),t._combo.getInput().id=e.uid,"material"==i&&(t._combo.list.className+=" dhxform_obj_"+i);var n=this;return t._combo.attachEvent("onChange",function(){n.doOnChange(this)}),e.connector&&this.doLoadOptsConnector(t,e.connector),e.filtering?t._combo.enableFilteringMode(!0):e.serverFiltering&&t._combo.enableFilteringMode(!0,e.serverFiltering,e.filterCache,e.filterSubLoad),1==e.readonly&&this.setReadonly(t,!0),1==e.hidden&&this.hide(t),e.style&&(t._combo.DOMelem_input.style.cssText+=e.style),t._combo.attachEvent("onFocus",function(){var t=this.cont.parentNode.parentNode,e=t.getForm();("dhx_terrace"==e.skin||"material"==e.skin)&&this.cont.className.search(/combo_in_focus/)<0&&(this.cont.className+=" combo_in_focus"),e.callEvent("onFocus",[t._idd]),e=t=null}),t._combo.attachEvent("onBlur",function(){var t=this.cont.parentNode.parentNode,e=t.getForm();("dhx_terrace"==e.skin||"material"==e.skin)&&this.cont.className.search(/combo_in_focus/)>=0&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")),e.callEvent("onBlur",[t._idd]),e=t=null}),this},destruct:function(t){t.childNodes[t._ll?1:0].childNodes[0].onchange=null,t._combo._currentComboValue=null,t._combo.unload(),t._combo=null,t._apiChange=null,this.d2(t),t=null},doAttachEvents:function(t){var e=this;t.childNodes[t._ll?1:0].childNodes[0].onchange=function(){e.doOnChange(this),e.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(t){t.getForm().hot_validate&&this._validate(t)},doOnChange:function(t){var e=t.base.parentNode.parentNode.parentNode;if(!e._apiChange){if(t._newComboValue=t.getSelectedValue(),t._newComboValue!=t._currentComboValue){if(e.checkEvent("onBeforeChange")&&!0!==e.callEvent("onBeforeChange",[e._idd,t._currentComboValue,t._newComboValue]))return window.setTimeout(function(){t.setComboValue(t._currentComboValue)},1),!1;t._currentComboValue=t._newComboValue,e.callEvent("onChange",[e._idd,t._currentComboValue])}e._autoCheck()}},doLoadOptsConnector:function(t,e){var i=this,n=t;t._connector_working=!0,t._apiChange=!0,t._combo.load(e,function(){n.callEvent("onOptionsLoaded",[n._idd]),n._connector_working=!1,null!=n._connector_value&&(i.setValue(n,n._connector_value),n._connector_value=null),n._apiChange=!1,i=n=null})},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t._combo.enable()},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t._combo.disable()},getCombo:function(t){return t._combo},setValue:function(t,e){t._connector_working?t._connector_value=e:(t._apiChange=!0,t._combo.setComboValue(e),t._combo._currentComboValue=t._combo.getActualValue(),t._apiChange=!1)},getValue:function(t){return t._combo.getActualValue()},setWidth:function(t,e){t.childNodes[t._ll?1:0].childNodes[0].style.width=e+"px"},setReadonly:function(t,e){t._combo&&(t._combo_ro=e,t._combo.readonly(t._combo_ro))},isReadonly:function(t,e){return t._combo_ro||!1},setFocus:function(t){t._enabled&&t._combo.setFocus()},_setCss:function(t,e,i){t._combo.setFontSize(i,i)}},function(){for(var t in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.getCombo=function(t){return this.doWithItem(t,"getCombo")},dhtmlXForm.prototype.items.calendar={render:function(t,e){var i=this;t._type="calendar",t._enabled=!0;var n=navigator.userAgent,s=n.indexOf("MSIE 6.0")>=0||n.indexOf("MSIE 7.0")>=0||n.indexOf("MSIE 8.0")>=0;this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar"),this.doAttachChangeLS(t),s&&(t.childNodes[t._ll?1:0].childNodes[0].onfocus2=t.childNodes[t._ll?1:0].childNodes[0].onfocus,t.childNodes[t._ll?1:0].childNodes[0].onfocus=function(){1!=this._skipOnFocus?this.onfocus2.apply(this,arguments):this._skipOnFocus=!1}),t.childNodes[t._ll?1:0].childNodes[0]._idd=t._idd,t.childNodes[t._ll?1:0].childNodes[0].onblur=function(){var t=this.parentNode.parentNode;if(t._c.base._formMouseDown)return t._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,t=null,!0;var e=t.getForm();e._ccDeactivate(t._idd),i.checkEnteredValue(this.parentNode.parentNode),e.live_validate&&i._validate(t),e.callEvent("onBlur",[t._idd]),t._c.isVisible()||(t._tempValue=null),e=t=null},t._f=e.dateFormat||null,t._f0=e.serverDateFormat||t._f;var o=t.getForm();return t._c=new dhtmlXCalendarObject(t.childNodes[t._ll?1:0].childNodes[0],e.skin||o.skin||"dhx_skyblue"),t._c._nullInInput=!0,t._c.enableListener(t.childNodes[t._ll?1:0].childNodes[0]),null!=t._f&&t._c.setDateFormat(t._f),window.dhx4.s2b(e.enableTime)||t._c.hideTime(),window.dhx4.s2b(e.enableTodayButton)&&t._c.showToday(),window.dhx4.s2b(e.showWeekNumbers)&&t._c.showWeekNumbers(),isNaN(e.weekStart)||t._c.setWeekStartDay(e.weekStart),void 0!==e.calendarPosition&&t._c.setPosition(e.calendarPosition),null!=e.minutesInterval&&t._c.setMinutesInterval(e.minutesInterval),t._c._itemIdd=t._idd,t._c.attachEvent("onBeforeChange",function(e){if(t._value!=e){if(t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",[t._idd,t._value,e]))return!1;t._tempValue=t._value=e,i.setValue(t,e,!1),t.callEvent("onChange",[this._itemIdd,t._value])}return!0}),t._c.attachEvent("onClick",function(){t._tempValue=null}),t._c.attachEvent("onHide",function(){t._tempValue=null}),s&&(t._c.base.onmousedown=function(){return this._formMouseDown=!0,!1}),this.setValue(t,e.value),o=null,this},getCalendar:function(t){return t._c},setSkin:function(t,e){t._c.setSkin(e)},setValue:function(t,e,i){e&&null!=e&&void 0!==e&&""!=e?(t._value=e instanceof Date?e:t._c._strToDate(e,t._f0||t._c._dateFormat),t.childNodes[t._ll?1:0].childNodes[0].value=t._c._dateToStr(t._value,t._f||t._c._dateFormat)):(t._value=null,t.childNodes[t._ll?1:0].childNodes[0].value=""),!1!==i&&t._c.setDate(t._value)},getValue:function(t,e){var i=t._tempValue||t._c.getDate();return!0===e&&null==i?"":!0===e?t._c._dateToStr(i,t._f0||t._c._dateFormat):i},setDateFormat:function(t,e,i){t._f=e,t._f0=i||t._f,t._c.setDateFormat(t._f),this.setValue(t,this.getValue(t))},destruct:function(t){t._c.disableListener(t.childNodes[t._ll?1:0].childNodes[0]),t._c.unload(),t._c=null;try{delete t._c}catch(t){}t._f=null;try{delete t._f}catch(t){}t._f0=null;try{delete t._f0}catch(t){}t.childNodes[t._ll?1:0].childNodes[0]._idd=null,t.childNodes[t._ll?1:0].childNodes[0].onblur=null,this.d2(t),t=null},checkEnteredValue:function(t){this.setValue(t,t._c.getDate())}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS,dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getCalendar=function(t){return this.doWithItem(t,"getCalendar")},dhtmlXForm.prototype.setCalendarDateFormat=function(t,e,i){this.doWithItem(t,"setDateFormat",e,i)},dhtmlXForm.prototype.items.btn2state={setChecked:function(t,e){t._checked=!0===e,t.childNodes[t._ll?1:0].lastChild.className="dhxform_img "+t._cssName+"_"+(t._checked?"1":"0"),this.doCheckValue(t)}},function(){for(var t in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[t]||(dhtmlXForm.prototype.items.btn2state[t]=dhtmlXForm.prototype.items.checkbox[t])}(),dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render,dhtmlXForm.prototype.items.btn2state.render=function(t,e){return e._autoInputWidth=!1,this.render2(t,e),t._type="btn2state",t._cssName=void 0===e.cssName?"btn2state":e.cssName,t._updateImgNode=function(){},t._doOnFocus=function(){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(){t.getForm().callEvent("onBlur",[t._idd])},t._doOnKeyUpDown=function(t,e,i){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])},this.setChecked(t,t._checked),this},dhtmlXForm.prototype.setFormData_btn2state=function(t,e){this[1==e||1==parseInt(e)||"true"==e||e==this.getItemValue(t)?"checkItem":"uncheckItem"](t)},dhtmlXForm.prototype.getFormData_btn2state=function(t){return this.isItemChecked(t)?this.getItemValue(t):0},dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(t,e){var i=this;t._type="colorpicker",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t._value=e.value||"",t.childNodes[t._ll?1:0].childNodes[0].value=t._value;var n={input:t.childNodes[t._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(e.enableCustomColors),skin:t.getForm().skin};return this.colorpicker[t._idd]=new dhtmlXColorPicker(n),this.colorpicker[t._idd]._nodes[0].valueColor=null,this.colorpicker[t._idd].base.className+=" dhtmlxcp_in_form",void 0!==e.customColors&&this.colorpicker[t._idd].setCustomColors(e.customColors),"string"==typeof e.cpPosition&&this.colorpicker[t._idd].setPosition(e.cpPosition),this.colorpicker[t._idd].attachEvent("onSelect",function(e){if(t._value!=e){if(t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",[t._idd,t._value,e]))return void(t.childNodes[t._ll?1:0].childNodes[0].value=t._value);t._value=e,i.setValue(t,e),t.callEvent("onChange",[t._idd,t._value])}}),this.colorpicker[t._idd].attachEvent("onHide",function(e){var i=t.childNodes[t._ll?1:0].childNodes[0];i.value!=t._value&&(i.value=t._value),i=null}),t.childNodes[t._ll?1:0].childNodes[0]._idd=t._idd,this},getColorPicker:function(t){return this.colorpicker[t._idd]},destruct:function(t){this.colorpicker[t._idd].unload&&this.colorpicker[t._idd].unload(),this.colorpicker[t._idd]=null;try{delete this.colorpicker[t._idd]}catch(t){}t.childNodes[t._ll?1:0].childNodes[0]._idd=null,this.d2(t),t=null},setSkin:function(t,e){this.colorpicker[t._idd].setSkin(e)}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getColorPicker=function(t){return this.doWithItem(t,"getColorPicker")},dhtmlXForm.prototype.items.container={render:function(t,e){return t._type="container",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_container"),this},getContainer:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t.callEvent("onEnable",[t._idd])},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled"),t.callEvent("onDisable",[t._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}},dhtmlXForm.prototype.getContainer=function(t){return this.doWithItem(t,"getContainer")},function(){for(var t in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[t]||(dhtmlXForm.prototype.items.container[t]=dhtmlXForm.prototype.items.input[t])}(),dhtmlXForm.prototype.items.editor={editor:{},render:function(t,e){isNaN(e.rows);t._type="editor",t._enabled=!0,t._editor_id=t.getForm().idPrefix+t._idd,this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_item_template"),t._value=e.value||"";var i=this;return this.editor[t._editor_id]=new dhtmlXEditor({parent:t.childNodes[t._ll?1:0].childNodes[0],content:t._value,iconsPath:e.iconsPath,toolbar:e.toolbar,skin:t.getForm().skin}),this.editor[t._editor_id].attachEvent("onAccess",function(e,n){if(t.callEvent("_onBeforeEditorAccess",[]),_dhxForm_doClick(document.body,"click"),"blur"==e){if(i.doOnBlur(t,this),t.callEvent("onBlur",[t._idd]),1=={dhx_terrace:1,material:1}[t.getForm().skin]){(s=t.childNodes[t._ll?1:0].className).indexOf("dhxeditor_focus")>=0&&(t.childNodes[t._ll?1:0].className=s.replace(/\s{0,}dhxeditor_focus/gi,""))}}else if(t.callEvent("onEditorAccess",[t._idd,e,n,this,t.getForm()]),t.callEvent("onFocus",[t._idd]),1=={dhx_terrace:1,material:1}[t.getForm().skin]){var s;-1==(s=t.childNodes[t._ll?1:0].className).indexOf("dhxeditor_focus")&&(t.childNodes[t._ll?1:0].className+=" dhxeditor_focus")}}),this.editor[t._editor_id].attachEvent("onToolbarClick",function(e){t.callEvent("onEditorToolbarClick",[t._idd,e,this,t.getForm()])}),e.readonly&&this.setReadonly(t,!0),t.childNodes[t._ll?0:1].childNodes[0].removeAttribute("for"),t.childNodes[t._ll?0:1].childNodes[0].onclick=function(){i.editor[t._editor_id]._focus()},this},doOnBlur:function(t,e){var i=e.getContent();if(t._value!=i){if(t.checkEvent("onBeforeChange")&&!0!==t.callEvent("onBeforeChange",[t._idd,t._value,i]))return void e.setContent(t._value);t._value=i,t.callEvent("onChange",[t._idd,i])}},setValue:function(t,e){t._value!=e&&(t._value=e,this.editor[t._editor_id].setContent(t._value))},getValue:function(t){return t._value=this.editor[t._editor_id].getContent(),t._value},enable:function(t){1!=this.isEnabled(t)&&(this.editor[t._editor_id].setReadonly(!1),this.doEn(t))},disable:function(t){1==this.isEnabled(t)&&(this.editor[t._editor_id].setReadonly(!0),this.doDis(t))},setReadonly:function(t,e){this.editor[t._editor_id].setReadonly(e)},getEditor:function(t){return this.editor[t._editor_id]||null},destruct:function(t){t.childNodes[t._ll?0:1].childNodes[0].onclick=null,this.editor[t._editor_id].unload(),this.editor[t._editor_id]=null,this.d2(t),t=null},setFocus:function(t){this.editor[t._editor_id]._focus()}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[t]=dhtmlXForm.prototype.items.template[t]}(),dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable,dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable,dhtmlXForm.prototype.getEditor=function(t){return this.doWithItem(t,"getEditor")},dhtmlXForm.prototype.items.image={_dimFix:!0,render:function(t,e){t._type="image",t._enabled=!0,t._fr_name="dhxform_image_"+window.dhx4.newId(),t._url=void 0===e.url||null==e.url?"":e.url,"auto"==e.inputWidth&&(e.inputWidth=120),"auto"==e.inputHeight&&(e.inputHeight=e.inputWidth),this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_image");var i=t.childNodes[t._ll?1:0].childNodes[0];i.style.height=parseInt(i.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var n=void 0!==e.imageWidth?parseInt(e.imageWidth):e.inputWidth,s=void 0!==e.imageHeight?parseInt(e.imageHeight):e.inputHeight;"auto"==s&&(s=n),t._dim={mw:e.inputWidth-this._dim,mh:e.inputHeight-this._dim,w:n,h:s},i.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+t._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+t._url+"' method='POST' enctype='multipart/form-data' target='"+t._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+t._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>",this.adjustImage(t),i.childNodes[2].firstChild.lastChild.onchange=function(){t._is_uploading=!0,this.parentNode.submit(),this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress",this.value=""};var o=this;return window.navigator.userAgent.indexOf("MSIE")>=0?i.childNodes[1].onreadystatechange=function(){"complete"==this.readyState&&o.doOnUpload(t)}:i.childNodes[1].onload=function(){o.doOnUpload(t)},this._moreClear=function(){o=null},this.setValue(t,e.value||""),i=null,this},destruct:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0];e.childNodes[2].firstChild.lastChild.onchange=null,e.childNodes[1].onreadystatechange=null,e.childNodes[1].onload=null,this._moreClear(),this.d2(t),t=null},doAttachEvents:function(){},setValue:function(t,e){t._value=null==e?"":e;var i=t._url+(t._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(t._idd)+"&itemValue="+encodeURIComponent(t._value)+window.dhx4.ajax._dhxr("&"),n=t.childNodes[t._ll?1:0].childNodes[0].firstChild;if("img"==n.nextSibling.tagName.toLowerCase())n.nextSibling.src=i;else{var s=document.createElement("IMG");s.className="dhxform_image_img",s.style.visibility="hidden",s.onload=function(){this.style.visibility="visible",this.parentNode.removeChild(this.nextSibling),this.onload=this.onerror=null},s.onerror=function(){this.onload.apply(this,arguments),this.style.visibility="hidden"},n.parentNode.insertBefore(s,n),s.src=i,s=null,this.adjustImage(t)}n=null},getValue:function(t){return t._value},doOnUpload:function(t){if(1==t._is_uploading){var e=t.childNodes[t._ll?1:0].childNodes[0].lastChild.previousSibling,i=dhx4.s2j(e.contentWindow.document.body.innerHTML);"object"==typeof i&&null!=i&&1==i.state&&i.itemId==t._idd?(this.setValue(t,i.itemValue,!0),t.getForm().callEvent("onImageUploadSuccess",[i.itemId,i.itemVaule,i.extra])):t.getForm().callEvent("onImageUploadFail",[t._idd,i?i.extra:null]),i=e=null,window.setTimeout(function(){t.childNodes[t._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap",t._is_uploading=!1},50)}},adjustImage:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0].firstChild,i=Math.min(t._dim.mw,t._dim.w),n=Math.min(t._dim.mh,t._dim.h);e.style.width=i+"px",e.style.height=n+"px",e.style.marginLeft=Math.max(0,Math.round(t._dim.mw/2-i/2))+"px",e.style.marginTop=Math.max(0,Math.round(t._dim.mh/2-n/2))+"px",e=t=null}},function(){for(var t in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.image[t]||(dhtmlXForm.prototype.items.image[t]=dhtmlXForm.prototype.items.input[t])}(),dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.setFormData_image=function(t,e){this.setItemValue(t,e)},dhtmlXForm.prototype.getFormData_image=function(t){return this.getItemValue(t)},dhtmlXForm.prototype.items.upload={render:function(t,e){t._type="up",t._enabled=!0,t._checked=!0,t.className=e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("DIV");return t.appendChild(i),isNaN(e.inputLeft)||(t.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(i.style.width=parseInt(e.inputWidth)+"px")),t._uploader=new dhtmlXFileUploader(i,e.swfPath||"",e.swfUrl||"",e.mode||null,e.swfLogs,e.slXap||"",e.slUrl||"",e.slLogs||"",e.multiple),t._uploader.setURL(e.url||""),t._uploader.callEvent=t.callEvent,void 0!==e.autoStart&&t._uploader.setAutoStart(e.autoStart),void 0!==e.autoRemove&&t._uploader.setAutoRemove(e.autoRemove),void 0!==e.titleScreen&&t._uploader.enableTitleScreen(e.titleScreen),void 0!==e.titleText&&t._uploader.setTitleText(e.titleText),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),"auto"!=e.inputHeight&&NaN!=parseInt(e.inputHeight)&&(t._uploader.p_files.style.height=parseInt(e.inputHeight)+"px"),this},destruct:function(t){for(this.doUnloadNestedLists(t),t._uploader.callEvent=function(){return!0},t._uploader.unload(),t._uploader.callEvent=null,t._uploader=null,t._checked=null,t._enabled=null,t._idd=null,t._type=null,t.onselectstart=null,t._autoCheck=null,t.callEvent=null,t.checkEvent=null,t.getForm=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},setText:function(t,e){},getText:function(t){},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._uploader.enable()},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._uploader.disable()},setWidth:function(t,e){t.childNodes[0].style.width=e+"px",t._width=e},getWidth:function(t){return t._width||parseInt(t.childNodes[0].style.width)},setValue:function(t){t._uploader.clear()},getValue:function(t){var e=t._uploader.getData(),i={},n=0;for(var s in e)i[t._idd+"_r_"+n]=e[s].realName,i[t._idd+"_s_"+n]=e[s].serverName,n++;return i[t._idd+"_count"]=n,i},getUploader:function(t){return t._uploader},getStatus:function(t){return t._uploader.getStatus()}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.setFormData_upload=function(t){this.doWithItem(t,"setValue")},dhtmlXForm.prototype.getUploader=function(t){return this.doWithItem(t,"getUploader")},dhtmlXForm.prototype.getUploaderStatus=function(t){return this.doWithItem(t,"getStatus")},dhtmlXFileUploader.prototype.html5=function(){},dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var t=this;this.buttons.browse.onclick=function(){t._enabled&&t.f.click()},this._progress_type="percentage";var e=window.navigator.userAgent;null!=e.match(/Windows/gi)&&null!=e.match(/AppleWebKit/gi)&&null!=e.match(/Safari/gi)&&(e.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),e.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),e.match(/Version\/5\.1\.1/gi)&&(this._upload_mp=!1,this._upload_dnd=!1),e.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),e.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1)),this._addFileInput(),this._upload_dnd?(this.p.ondragenter=function(t){t.dataTransfer&&(t.stopPropagation(),t.preventDefault())},this.p.ondragover=function(t){t.dataTransfer&&(t.stopPropagation(),t.preventDefault())},this.p.ondrop=function(e){e.dataTransfer&&(e.stopPropagation(),e.preventDefault(),t._enabled&&t._parseFilesInInput(e.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var t=this;this.f=document.createElement("INPUT"),this.f.type="file",this._upload_mp&&(this.f.multiple="1"),this.f.className="dhx_uploader_input",this.p_controls.appendChild(this.f),this.f.onchange=function(){t._parseFilesInInput(this.files),window.dhx4.isOpera?t._addFileInput():this.value=""}},_doUploadFile:function(t){var e=this;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(t){"uploading"==e._files[this._idd].state&&e._updateFileInList(this._idd,"uploading",Math.round(100*t.loaded/t.total))},this._loader.onload=function(t){var i=dhx4.s2j(this.responseText);"object"==typeof i&&null!=i&&void 0!==i.state&&1==i.state?(e._onUploadSuccess(this.upload._idd,i.name,null,i.extra),i=null):e._onUploadFail(this.upload._idd,null!=i&&null!=i.extra?i.extra:null)},this._loader.onerror=function(t){e._onUploadFail(this.upload._idd)},this._loader.onabort=function(t){e._onUploadAbort(this.upload._idd)}),this._loader.upload._idd=t;var i=new FormData;i.append("file",this._files[t].file),this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5"+window.dhx4.ajax._dhxr("&"),!0),this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._loader.send(i)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(t){for(var e=0;e<t.length;e++)this._addFileToQueue(t[e])},_addFileToQueue:function(t){if(this._beforeAddFileToList(t.name,t.size)){var e=t._idd||window.dhx4.newId();this._files[e]={file:t,name:t.name,size:t.size,state:"added"},this._addFileToList(e,t.name,t.size,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(t){if(this._files[t]){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[e,i])){var n=!1;this._uploading&&t==this._loader.upload._idd&&"uploading"==this._files[t].state&&(this._uploadStop(),n=!0),this._files[t].file=null,this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]),n&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null,this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null,this.p.ondragenter=null,this.p.ondragover=null,this.p.ondrop=null,this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader.upload._idd=null,this._loader=null),this._initEngine=null,this._doUploadFile=null,this._uploadStop=null,this._parseFilesInInput=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.html4=function(){},dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm(),this._progress_type="loader",this._titleText="Click button<br>to select files for upload."},_addForm:function(){var t=this,e=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=this.k.firstChild,window.navigator.userAgent.indexOf("MSIE")>=0?this.fr.onreadystatechange=function(){"complete"==this.readyState&&t._onLoad()}:this.fr.onload=function(){t._onLoad()});var i=document.createElement("DIV");i.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+e+"'><input type='file' name='file' class='dhx_file_input'></form>",this.k.appendChild(i),i.firstChild.lastChild._idd=e,i.firstChild.lastChild.onchange=function(){t._beforeAddFileToList(this.value,null)&&(t._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",t._addForm())},i=null},_onLoad:function(){if(this._uploading){var t=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if("object"==typeof t&&null!=t&&void 0!==t.state){if("cancelled"==t.state)return this._onUploadAbort(this.fr._idd),void(t=null);if(1==t.state)return void 0===t.size||isNaN(t.size)||(this._files[this.fr._idd].size=t.size),this._onUploadSuccess(this.fr._idd,t.name,null,t.extra),void(t=null)}this._onUploadFail(this.fr._idd,null!=t&&null!=t.extra?t.extra:null)}},_addFileToQueue:function(t){var e=t.value.match(/[^\\\/]*$/g);e=null!=e[0]?e[0]:t.value,this._files[t._idd]={name:e,form:t.parentNode,node:t.parentNode.parentNode,input:t,state:"added"},this._addFileToList(t._idd,t.value,!1,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;!0===this.callEvent("onBeforeFileRemove",[e,i])&&(this._files[t].input.onchange=null,this._files[t].form.removeChild(this._files[t].input),this._files[t].node.removeChild(this._files[t].form),this._files[t].node.parentNode.removeChild(this._files[t].node),this._files[t].input=null,this._files[t].name=null,this._files[t].form=null,this._files[t].node=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]))},_doUploadFile:function(t){this.fr._idd=t,this._files[t].form.action=this._url,this._files[t].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel"+window.dhx4.ajax._dhxr("&"))},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null),this._initEngine=null,this._addForm=null,this._onLoad=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.flash=function(){},dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){null==window.dhtmlXSWFObjectsPull&&(window.dhtmlXSWFObjectsPull={items:{},callEvent:function(t,e,i){return window.dhtmlXSWFObjectsPull.items[t].uploader[e].apply(window.dhtmlXSWFObjectsPull.items[t].uploader,i)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId(),this._swf_file_url=this._swf_file_url+window.dhx4.ajax._dhxr(this._swf_file_url),this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>",swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var t=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+t.major+"."+t.minor+"."+t.release,this._progress_type="percentage",window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(t,e){return!0===this.callEvent("onBeforeFileAdd",[t,e])},_addFileToQueue:function(t,e,i){if(window.dhx4.isIE){var n=document.createElement("INPUT");n.type="TEXT",n.style.position="absolute",n.style.left="0px",n.style.top=window.dhx4.absTop(this.buttons.browse)+"px",n.style.width="10px",document.body.appendChild(n),n.focus(),document.body.removeChild(n),n=null}this._files[t]={name:e,size:i,state:"added"},this._addFileToList(t,e,i,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){if(this._files[t]){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;if(!0===this.callEvent("onBeforeFileRemove",[e,i])){var n=!1;this._uploading&&"uploading"==this._files[t].state&&(this._uploadStop(),n=!0),swfobject.getObjectById(this._swf_obj_id).removeFileById(t),this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]),n&&this._uploadStart()}}},_doUploadFile:function(t){swfobject.getObjectById(this._swf_obj_id).upload(t,this._swf_upolad_url)},_uploadStop:function(t){for(var e in this._files)"uploading"==this._files[e].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(e)},_unloadEngine:function(){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]&&(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null,delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]),this._swf_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.sl=function(){},dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){void 0===this._sl_v&&(this._sl_v=this.getSLVersion()),window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(t,e,i){window.dhtmlXFileUploaderSLObjects.items[t].uploader[e].apply(window.dhtmlXFileUploaderSLObjects.items[t].uploader,i)}}),this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId(),0!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title=""),this._progress_type="percentage",window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(t,e,i){this._files[t]={name:e,size:i,state:"added"},this._addFileToList(t,e,i,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){if(this._files[t]){var e=!1;this._uploading&&"uploading"==this._files[t].state&&(this._uploadStop(),e=!0),document.getElementById([this._sl_obj_id]).Content.a.removeFileById(t),this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),e&&this._uploadStart()}},_doUploadFile:function(t){var e=this._sl_upload_url.split("?");e=null!=e[1]?"&"+e[1]:"",document.getElementById(this._sl_obj_id).Content.a.upload(t,this._sl_upload_url,e+"&mode=sl"+window.dhx4.ajax._dhxr("&"))},_uploadStop:function(t){this._uploading=!1;for(var e in this._files)"uploading"==this._files[e].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(e)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]),this._sl_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.setSLURL=function(t){this._sl_upload_url=t},dhtmlXFileUploader.prototype.getSLVersion=function(){var t=!1;if(window.dhx4.isIE)try{var e=new ActiveXObject("AgControl.AgControl");if(null!=e)for(var i=4,n=0;e.isVersionSupported([i,n].join("."));)t=[i,n],++n>9&&(i++,n=0);e=null}catch(t){}else null!=navigator.plugins["Silverlight Plug-In"]&&(t=navigator.plugins["Silverlight Plug-In"].description.split("."));return t},dhtmlXForm.prototype.saveBackup=function(){return this._backup||(this._backup={},this._backupId=(new Date).getTime()),this._backup[++this._backupId]=this.getFormData(),this._backupId},dhtmlXForm.prototype.restoreBackup=function(t){null!=this._backup&&null!=this._backup[t]&&this.setFormData(this._backup[t])},dhtmlXForm.prototype.clearBackup=function(t){null!=this._backup&&null!=this._backup[t]&&(this._backup[t]=null,delete this._backup[t])},dhtmlXForm.prototype.addItem=function(t,e,i,n){var s=null;t instanceof Array&&(s=t[1],t=t[0]);var o=null;if(null!=t){if(null!=(o=this._getParentForm(t,s)))return null==o.item._list?(e.listParent||(e.listParent=o.item._idd),o.form._addItem("list",o.item._idd,[e],null,o.item._idd,i,n)):o.item._list[0].addItem(null,e,i,n),o.form=o.item=null,o=null,void this._autoCheck()}this._prepareItem(e,i,n),this._autoCheck()},dhtmlXForm.prototype.removeItem=function(t,e){this._removeItem(t,e)},dhtmlXForm.prototype.removeColumn=function(t,e,i,n){var s=null;if(t instanceof Array&&(s=t[1],t=t[0]),null==t)if(e=Math.min(Math.max(e,0),this.cont.childNodes.length-1),1==this.cont.childNodes.length)1==i&&this._removeItemsInColumn(this.cont.childNodes[e]);else{if(1==i)this._removeItemsInColumn(this.cont.childNodes[e]);else{if(n){(o=e+1)>this.cont.childNodes.length-1&&(o=e-1)}else{var o;(o=e-1)<0&&(o=e+1)}for(;this.cont.childNodes[e].childNodes.length>0;)this.cont.childNodes[o].appendChild(this.cont.childNodes[e].childNodes[0])}for(var l=[],r=0;r<this.base.length;r++)this.cont.childNodes[e]!=this.base[r]&&l.push(this.base[r]);this.base=l,this.cont.removeChild(this.cont.childNodes[e]),this.b_index--,l=null}else{var a=this._getParentForm(t,s);null!=a&&(null!=a.item._list&&null!=a.item._list[0]&&a.item._list[0].removeColumn(null,e,i,n),a.form=a.item=null,a=null)}},dhtmlXForm.prototype.getColumnNode=function(t,e){var i=null,n=null;if(t instanceof Array&&(n=t[1],t=t[0]),null!=t){var s=this._getParentForm(t,n);return null!=s&&(null!=s.item._list&&null!=s.item._list[0]&&null==i&&(i=s.item._list[0].getColumnNode(null,e)),s.form=s.item=null,s=null),i}return e<0||e>this.cont.childNodes.length-1?null:this.cont.childNodes[e]},dhtmlXForm.prototype._removeItemsInColumn=function(t){for(var e=[],i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];null!=n._idd&&null!=n._type&&e.push([n._idd,"ra"==n._type?n._value:null]),n=null}for(i=0;i<e.length;i++)this.removeItem(e[i][0],e[i][1])},dhtmlXForm.prototype._getParentForm=function(t,e){if(null!=this.itemPull[this.idPrefix+t])return{form:this,item:this.itemPull[this.idPrefix+t]};for(var i in this.itemPull)if("ra"==this.itemPull[i]._type&&this.itemPull[i]._group==t&&this.itemPull[i]._value==e)return{form:this,item:this.itemPull[i]};var n=null;for(var i in this.itemPull)if(!n&&null!=this.itemPull[i]._list)for(var s=0;s<this.itemPull[i]._list.length;s++)n||(n=this.itemPull[i]._list[s]._getParentForm(t,e));return n},function(){for(var t in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[t]._getItemNode||(dhtmlXForm.prototype.items[t]._getItemNode=function(t){return t})}(),dhtmlXForm.prototype._getItemNode=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"_getItemNode")},dhtmlXForm.prototype.setRequired=function(t,e,i){void 0===i?i=e:t=[t,e];var n=this._getItemNode(t);if(n){if(i=window.dhx4.s2b(i),n._required=1==i,n._required){n._validate||(n._validate=[]);for(var s=!1,o=0;o<n._validate.length;o++)s="NotEmpty"==n._validate[o]||s;s||n._validate.push("NotEmpty");if(!((r=n.childNodes[n._ll?0:1].childNodes[0]).lastChild&&r.lastChild.className&&r.lastChild.className.search(/required/)>=0)){var l=document.createElement("SPAN");l.className="dhxform_item_required",l.innerHTML="*",r.appendChild(l),l=r=null}}else{if(null!=n._validate){s=n._validate;n._validate=[];for(o=0;o<s.length;o++)"NotEmpty"!=s[o]&&n._validate.push(s[o]);0==n._validate.length&&(n._validate=null)}var r;(r=n.childNodes[n._ll?0:1].childNodes[0]).lastChild&&r.lastChild.className&&r.lastChild.className.search(/required/)>=0&&(r.removeChild(r.lastChild),r=null)}this._resetValidateCss(n),n=null}},dhtmlXForm.prototype.setNote=function(t,e,i){void 0===i?i=e:t=[t,e];var n=this._getItemNode(t);if(n){var s=this._getNoteNode(n);s||(i.width||(i.width=n.childNodes[n._ll?1:0].childNodes[0].offsetWidth),(s=document.createElement("DIV")).className="dhxform_note",!{ch:1,ra:1}[n._type]?n.childNodes[n._ll?1:0].appendChild(s):n.childNodes[n._ll?1:0].insertBefore(s,n.childNodes[n._ll?1:0].lastChild)),s.innerHTML=i.text,null!=i.width&&(s.style.width=i.width+"px",s._w=i.width),s=null}},dhtmlXForm.prototype.clearNote=function(t,e){void 0!==e&&(t=[t,e]);var i=this._getItemNode(t);if(i){var n=this._getNoteNode(i);null!=n&&(n.parentNode.removeChild(n),n=null)}},dhtmlXForm.prototype._getNoteNode=function(t){for(var e=null,i=0;i<t.childNodes[t._ll?1:0].childNodes.length;i++)String(t.childNodes[t._ll?1:0].childNodes[i].className).search(/dhxform_note/)>=0&&(e=t.childNodes[t._ll?1:0].childNodes[i]);return t=null,e},dhtmlXForm.prototype.setValidation=function(t,e,i){"undefined"==typeof note?i=e:t=[t,e];var n=this._getItemNode(t);if(n){if(null!=n._validate)for(var s=0;s<n._validate.length;s++)n._validate[s]=null;if(n._validate=[],"function"==typeof i||"function"==typeof window[i]?n._validate=[i]:n._validate=String(i).split(this.separator),n._required){var o=!1;for(s=0;s<n._validate.length;s++)o="NotEmpty"==n._validate[s]||o;o||n._validate.push("NotEmpty")}n=null}},dhtmlXForm.prototype.clearValidation=function(t,e){void 0!==e&&(t=[t,e]);var i=this._getItemNode(t);if(i){if(null!=i._validate)for(var n=0;n<i._validate.length;n++)i._validate[n]=null;i._validate=i._required?["NotEmpty"]:null,i=null}},dhtmlXForm.prototype.reloadOptions=function(t,e){var i=this.getItemType(t);if({select:1,multiselect:1,combo:1}[i]){if("select"==i||"multiselect"==i){for(var n=this.getOptions(t);n.length>0;)n.remove(0);n.length=0,n=null,"string"==typeof e?this.doWithItem(t,"doLoadOptsConnector",e):e instanceof Array&&this.doWithItem(t,"doLoadOpts",{options:e})}if("combo"==i){var s=this.getCombo(t);if(s.clearAll(),s.setComboValue(""),"string"==typeof e)this.doWithItem(t,"doLoadOptsConnector",e);else if(e instanceof Array){for(var o=null,l=0;l<e.length;l++)window.dhx4.s2b(e[l].selected)&&(o=e[l].value);s.addOption(e),null!=o&&this.setItemValue(t,o),s=null}}}},dhtmlXForm.prototype.setTooltip=function(t,e,i){void 0===i?i=e:t=[t,e];var n=this._getItemNode(t);if(n){var s=null;if(1==n.childNodes.length)s=n.childNodes[0];else for(var o=0;o<n.childNodes.length;o++)null!=n.childNodes[o].className&&n.childNodes[o].className.search("dhxform_label")>=0&&(s=n.childNodes[o]);null!=s&&(null==i||0==i.length?s.removeAttribute("title"):s.title=i),s=null}},dhtmlXAccordion.prototype=new dhtmlXCellTop,dhtmlXAccordion.prototype.setIconset=function(t){this.conf.icons_css="awesome"==t},dhtmlXAccordionCell.prototype=new dhtmlXCellObject,dhtmlXAccordionCell.prototype._initHeader=function(){var t=document.createElement("DIV");t.className="dhx_cell_hdr",t.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>",this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),t=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx()},dhtmlXAccordionCell.prototype._getHdrHeight=function(){var t=this.cell.childNodes[this.conf.idx.hdr],e=t.offsetHeight||t.offsetHeight;return t=null,e},dhtmlXAccordionCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",this._adjustCont(this._idd))},dhtmlXAccordionCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._adjustCont(this._idd))},dhtmlXAccordionCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXAccordionCell.prototype.setText=function(t){this.conf.text=t;var e=this.cell.childNodes[this.conf.idx.hdr];e.childNodes["dhx_cell_hdr_icon"==e.firstChild.className?1:0].innerHTML="<span>"+t+"</span>",e=null},dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text},dhtmlXAccordionCell.prototype.setIcon=function(t){var e=this.cell.childNodes[this.conf.idx.hdr];if(1==this.acc.conf.icons_css){if("i"!=(e.firstChild.tagName||"").toLowerCase()){e.firstChild.className+=" dhx_cell_hdr_icon";var i=document.createElement("I");e.insertBefore(i,e.firstChild),i=null}e.firstChild.className=t}else{if("dhx_cell_hdr_icon"!=e.firstChild.className){e.firstChild.className+=" dhx_cell_hdr_icon";var n=document.createElement("IMG");n.className="dhx_cell_hdr_icon",e.insertBefore(n,e.firstChild),n=null}e.firstChild.src=this.acc.conf.icons_path+t}e=null},dhtmlXAccordionCell.prototype.clearIcon=function(){var t=this.cell.childNodes[this.conf.idx.hdr];"dhx_cell_hdr_icon"!=t.firstChild.className&&"i"!=(t.firstChild.tagName||"").toLowerCase()||(t.removeChild(t.firstChild),t.firstChild.className=String(t.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,"")),t=null},dhtmlXAccordionCell.prototype._open=function(t){var e={};if(this.acc.conf.multi_mode){var i={};i[this._idd]=!0,e=this.acc._getDynData(i),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"}else e[this._idd]=this.conf.size.h;for(var n in e){null!=this.acc._openCache&&(this.acc._openCache[n]=!0);var s=this.acc.t[n].cell;s.cell.className=String(s.cell.className).replace(/\s{1,}dhx_cell_closed/gi,""),s.conf.opened=!0,s._trInitEv("open",t),s.conf.size.h=e[n],s.cell.style.height=s.conf.size.h+"px",s=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))},dhtmlXAccordionCell.prototype._close=function(t){var e={};if(this.acc.conf.multi_mode){var i={};i[this._idd]=!0,e=this.acc._getDynData(null,i),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"}else e[this._idd]=this._getHdrHeight();for(var n in e){var s=this.acc.t[n].cell;null!=this.acc._openCache&&(this.acc._openCache[n]=!0),n==this._idd?(s.cell.className+=" dhx_cell_closed",s.conf.opened=!1,s._trInitEv("close",t)):(s.conf.size.h=e[n],s._adjustCell(),s._trInitEv("open",t)),s.cell.style.height=e[n]+"px",s=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))},dhtmlXAccordionCell.prototype.isOpened=function(){return 1==this.conf.opened},dhtmlXAccordionCell.prototype._trInitEv=function(t,e){0!=this.conf.tr.prop&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),e&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+t]),this._cellSetOpacity(t,e))},dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)},dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)},dhtmlXAccordionCell.prototype._trOnEnd=function(t){t.stopPropagation&&t.stopPropagation(),"height"==t.propertyName&&null!=this._accObj&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(null!=this._accObj._openCache&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),1==this._accObj.conf.on_active_click&&(this._accObj.conf.multi_mode?(this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]),this._accObj.conf.on_active_click=!1):(null!=this._accObj.conf.on_active_id&&this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null,this._accObj.conf.on_active_click=!1)),this._accObj=null)},dhtmlXAccordionCell.prototype._cellSetOpacity=function(t,e){for(var i in this.conf.idx)1!={hdr:!0,pr1:!0,pr2:!0,cover:!0}[i]&&(e&&(this.cell.childNodes[this.conf.idx[i]].style[this.conf.tr.prop]=this.conf.tr["op_"+t]),this.cell.childNodes[this.conf.idx[i]].style.opacity=this.conf.tr["op_v_"+t])},dhtmlXAccordionCell.prototype._onActiveCall=function(t){0!=this.acc.conf.on_active_click&&(1==this.acc.conf.multi_mode?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):1==t&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))},dhtmlXAccordionCell.prototype.show=function(){this.conf.visible||(0!=this.conf.docked?(this.cell.style.display="",this.conf.visible=!0,this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()):this.dock())},dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())},dhtmlXAccordionCell.prototype.isVisible=function(){return 1==this.conf.visible},dhtmlXAccordionCell.prototype.setHeight=function(t){this.acc.conf.multi_mode&&("*"==t?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=t),this.conf.opened&&("*"!=t&&(this.cell.style.height=t+"px"),this.acc._adjustOpened()))},dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())},dhtmlXAccordionCell.prototype._initDocking=function(){var t=this;this.dock=function(){if(null!=this.acc.dhxWins&&1!=this.conf.docked){var t=this.acc.dhxWins.window(this._idd);t.close(),this._attachFromCell(t),this.conf.docked=!0,this.show(),this.conf.dock_opened&&this.open(),t=null,this.acc._callMainEvent("onDock",[this._idd])}},this.undock=function(t,e,i,n){if(null!=this.acc.dhxWins&&0!=this.conf.docked){if(this.conf.dock_opened=this.conf.opened,null!=this.acc.dhxWins.window(this._idd)){(s=this.acc.dhxWins.window(this._idd)).show()}else{null==t&&(t=20),null==e&&(e=20),null==i&&(i=320),null==n&&(n=200);var s;(s=this.acc.dhxWins.createWindow(this._idd,t,e,i,n)).button("close").hide(),s.addUserButton("dock",99,"Dock"),s.button("dock").show(),s.button("dock").attachEvent("onClick",this._doOnDockClick),s.setText(this.getText()),s.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,this.hide(),s._attachFromCell(this),s=null,this.acc._callMainEvent("onUnDock",[this._idd])}},this._doOnDockClick=function(){t.dock()},this._doOnDockWinClose=function(t){return t.hide(),!1},this._unloadDocking=function(){t=null}},dhtmlXCellObject.prototype.attachAccordion=function(t){this.callEvent("_onBeforeContentAttach",["acc"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",this._attachObject(e),void 0===t&&(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=e,"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?e._ofs={t:-1,r:-1,b:-1,l:-1}:e._ofs={s:{first:-1},m:{first:4}}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"!=this.conf.skin&&"material"!=this.conf.skin||(e._ofs={t:-1,r:-1,b:-1,l:-1})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(e._ofs={},1!=this.sidebar.conf.autohide&&(e._ofs.l=2),1==this.sidebar.conf.header&&(e._ofs.t=3)):(e._ofs={l:-1},"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(e._ofs.l=0),1==this.sidebar.conf.header&&(e._ofs.t=-1)))),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this.dataType="acc",this.dataObj=new dhtmlXAccordion(t),t.parent=null,e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXAccordion.prototype.enableDND=function(){if(0!=this.conf.multi_mode&&null==this._dnd){var t=this;this._dnd={tr_count:0,tr_items:{}},this._dndAttachEvent=function(t){var e=this.t[t].cell;1!=e.conf.dnd_inited&&("function"==typeof window.addEventListener?e.cell.childNodes[e.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):e.cell.childNodes[e.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),e.conf.dnd_inited=!0),e=null},this._dndDetachEvent=function(t){var e=this.t[t].cell;1==e.conf.dnd_inited&&("function"==typeof window.addEventListener?e.cell.childNodes[e.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):e.cell.childNodes[e.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),e.conf.dnd_inited=!1),e=null},this._dndOnMouseDown=function(e){(e=e||event).preventDefault&&e.preventDefault();for(var i=e.target||e.srcElement;null!=i&&i.parentNode!=t.cont;)i=i.parentNode;null!=i&&t._dndDragStart(e,i),i=null},this._dndDragStart=function(t,e){if(1!=this._dnd.tr_waiting){for(var i=-1,n=0;n<e.parentNode.childNodes.length;n++)e.parentNode.childNodes[n]==e&&(i=n);if(!0===this.callEvent("onBeforeDrag",[e._accId,i])){"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1)),this._dnd.dragObj=e,this._dnd.dy=t.clientY;var s=0;for(n=0;n<this._dnd.dragObj.parentNode.childNodes.length;n++)this._dnd.dragObj.parentNode.childNodes[n]._ind=n,this._dnd.dragObj.parentNode.childNodes[n]==this._dnd.dragObj?(this._dnd.dragObj._k0=s,n>0&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),s=0):s+=this._dnd.dragObj.parentNode.childNodes[n].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[n].style.marginTop);this._dnd.dragObj._k1=s,this._dnd.h=this._dnd.dragObj.offsetHeight,this._dnd.ofs=!1}}},this._dndDoDrag=function(t){if(this._dnd.dragObj&&1!=this._dnd.tr_waiting){var e=t.clientY-this._dnd.dy;0==this._dnd.ofs&&Math.abs(e)>5&&(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0),e<0?e<-this._dnd.dragObj._k0&&(e=-this._dnd.dragObj._k0):e>this._dnd.dragObj._k1&&(e=this._dnd.dragObj._k1),this._dnd.dragObj.style.top=e+"px";for(var i=t.clientY-this._dnd.dy,n=0,s=0,o=this._dnd.dragObj._ind+1;o<=this._dnd.dragObj.parentNode.lastChild._ind;o++){i>n+2*(r=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight)/3&&s++,n+=r}var l=this._dnd.dragObj.nextSibling;for(o=0;null!=l;)++o<=s&&null!=l?l._ontop||(l._tm&&window.clearTimeout(l._tm),this._dndAnim(l,!1,parseInt(l.style.top||0),-this._dnd.h-this.ofs.m.between),l._ontop=!0):l._ontop&&(l._tm&&window.clearTimeout(l._tm),this._dndAnim(l,!0,parseInt(l.style.top||0),0),l._ontop=!1),l=l.nextSibling;for(i=this._dnd.dy-t.clientY,n=0,s=0,o=this._dnd.dragObj._ind-1;o>=this._dnd.dragObj.parentNode.firstChild._ind;o--){var r;i>n+2*(r=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight)/3&&s++,n+=r}for(l=this._dnd.dragObj.previousSibling,o=0;null!=l;)++o<=s&&null!=l?l._onbottom||(l._tm&&window.clearTimeout(l._tm),this._dndAnim(l,!0,parseInt(l.style.top||0),this._dnd.h+this.ofs.m.between),l._onbottom=!0):l._onbottom&&(l._tm&&window.clearTimeout(l._tm),this._dndAnim(l,!1,parseInt(l.style.top),0),l._onbottom=!1),l=l.previousSibling}},this._dndDragStop=function(t,e){if(e);else if(this._dnd.tr_count>0)return void(this._dnd.tr_waiting=!0);if(this._dnd.dragObj){this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,""),this._dnd.dragObj.style.top="0px";for(var i=!1,n=0;n<this._dnd.dragObj.parentNode.childNodes.length;n++){var s=this._dnd.dragObj.parentNode.childNodes[n];s!=this._dnd.dragObj&&(s._tm&&window.clearTimeout(s._tm),s.style.top="0px",s._ontop&&(null!=s.nextSibling&&1!=s.nextSibling._ontop||!s.nextSibling)&&(i=s.nextSibling||null),s._onbottom&&(null!=s.previousSibling&&1!=s.previousSibling._onbottom||!s.previousSibling)&&(i=s)),s=null}for(n=0;n<this._dnd.dragObj.parentNode.childNodes.length;n++)this._dnd.dragObj.parentNode.childNodes[n]._ontop=null,this._dnd.dragObj.parentNode.childNodes[n]._onbottom=null;!1!==i&&(null==i?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,i));var o=this._dnd.dragObj._accId,l=this._dnd.dragObj._ind,r=l;for(n=0;n<this._dnd.dragObj.parentNode.childNodes.length;n++)this._dnd.dragObj.parentNode.childNodes[n]==this._dnd.dragObj&&(r=n);this._dnd.dragObj=null,this._dnd.tr_waiting=!1,this._updateCellsMargin(),l!=r?(this.setSizes(),this.callEvent("onDrop",[o,l,r])):this.callEvent("_onDropCancel",[o]),"function"==typeof window.addEventListener?(document.body.removeEventListener("mousemove",this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1))}},this._dndAnim=function(e,i,n,s){if(0!=this.conf.tr.prop)return e._dnd_ev||(e._dnd_ev=!0,e._dnd_tr_prop=this.conf.tr.prop,e.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1)),1!=this._dnd.tr_items[e._accId]&&(this._dnd.tr_items[e._accId]=!0,this._dnd.tr_count++),e.style[this.conf.tr.prop]=this.conf.tr.dnd_top,void(e.style.top=s+"px");var o=!1;i?(n+=5)>=s&&(n=s,o=!0):(n-=5)<=s&&(n=s,o=!0),e.style.top=n+"px",e._tm&&window.clearTimeout(e._tm),e._tm=o?null:window.setTimeout(function(){t._dndAnim(e,i,n,s)},5)},this._dndOnTrEnd=function(e){e.stopPropagation&&e.stopPropagation(),"top"==e.propertyName&&(1==t._dnd.tr_items[this._accId]&&(t._dnd.tr_count--,t._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",0==t._dnd.tr_count&&1==t._dnd.tr_waiting&&t._dndDragStop(null,!0))},this._dndOnMouseMove=function(e){t._dndDoDrag(e||event)},this._dndOnMouseUp=function(e){t._dndDragStop(e||event)},this._dndClearCell=function(t){this.t[t].cell.cell._dnd_ev&&this.t[t].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1),this._dndDetachEvent(t)},this._unloadDND=function(){for(var e in this)0==String(e).indexOf("_dnd")&&"function"==typeof this[e]&&(this[e]=null);this._dnd=null,t=null};for(var e in this.t)this._dndAttachEvent(e)}},dhtmlXLayoutObject.prototype=new dhtmlXCellTop,dhtmlXLayoutObject.prototype.cells=function(t){for(var e in this.cdata){if(this.cdata[e].conf.name==t)return this.cdata[e];if("layout"==this.cdata[e].dataType&&1==this.cdata[e].dataNested&&null!=this.cdata[e].dataObj){var i=this.cdata[e].dataObj.cells(t);if(null!=i)return i}}return null},dhtmlXLayoutObject.prototype.forEachItem=function(t,e){if("function"==typeof t){void 0===e&&(e=this);for(var i in this.cdata)void 0!==this.cdata[i].conf.name&&t.apply(e,[this.cdata[i]]),"layout"==this.cdata[i].dataType&&1==this.cdata[i].dataNested&&null!=this.cdata[i].dataObj&&this.cdata[i].dataObj.forEachItem(t,e);e=null}},dhtmlXLayoutObject.prototype._forEachSep=function(t,e){if("function"==typeof t){void 0===e&&(e=this),null!=this.sep&&t.apply(e,[this.sep]);for(var i in this.cdata)"layout"==this.cdata[i].dataType&&1==this.cdata[i].dataNested&&null!=this.cdata[i].dataObj&&this.cdata[i].dataObj._forEachSep(t,e);e=null}},dhtmlXLayoutObject.prototype._detectSW=function(){return null==this._confGlob.sw&&(this._confGlob.sw={}),null==this._confGlob.sw[this.conf.skin]&&(this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)),this._confGlob.sw[this.conf.skin]},dhtmlXLayoutObject.prototype._confGlob={},dhtmlXLayoutObject.prototype.listPatterns=function(){var t=[];for(var e in this.tplData)t.push(e);return t},dhtmlXLayoutObject.prototype.listAutoSizes=function(){return[null!=this.conf.as_cells?this.conf.as_cells.h.join(";"):"",null!=this.conf.as_cells?this.conf.as_cells.v.join(";"):"",this._availAutoSize[this.conf.pattern].h,this._availAutoSize[this.conf.pattern].v]},dhtmlXLayoutObject.prototype._getCellsNames=function(t){var e={};if(null!=this.cdata[t].conf.name&&(e[this.cdata[t].conf.name]=!0),"layout"==this.cdata[t].dataType&&null!=this.cdata[t].dataObj&&this.cdata[t].dataObj.mainInst==this){var i=this.cdata[t].dataObj._getCellsNames("a"),n=this.cdata[t].dataObj._getCellsNames("b");for(var s in i)e[s]=i[s];for(var s in n)e[s]=n[s]}return e},dhtmlXLayoutObject.prototype.setAutoSize=function(t,e,i){if(!0!==i){var n=this.listAutoSizes();if(n[0]==t&&n[1]==e)return;for(var s=!1,o=!1,l=0;l<n[2].length;l++)s=s||n[2][l]==t;for(l=0;l<n[3].length;l++)o=o||n[3][l]==e;if(!s||!o)return}this.conf.as_cells={h:t.split(";"),v:e.split(";")};var r="v"==this.conf.mode?"h":"v";for(var a in this.cdata){var h=this._getCellsNames(a),d=!1;for(l=0;l<this.conf.as_cells[r].length;l++)d=d||h[this.conf.as_cells[r][l]];d&&(this.conf.autosize=a),"layout"==this.cdata[a].dataType&&null!=this.cdata[a].dataObj&&this.cdata[a].dataObj.setAutoSize(t,e,!0)}},dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:.25,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:.2,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:.2,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:.25,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}},dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}},dhtmlXLayoutObject.prototype.setSeparatorSize=function(t,e){if("number"!=typeof t){for(var i in this.cdata){if("layout"==this.cdata[i].dataType&&1==this.cdata[i].dataNested&&null!=this.cdata[i].dataObj&&null!=(t=this.cdata[i].dataObj.setSeparatorSize(t,e)).sep)return t;if("a"==i&&null!=this.sep&&(t.current++,t.index==t.current))return{sep:this.sep}}return t}var n=this.setSeparatorSize({index:t,current:-1},e);null!=n.sep&&n.sep._setWH(e)},window.dhtmlXLayoutCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_layout"]);var i=this;if(this.layout=e,this.conf.skin=this.layout.conf.skin,this.conf.mode=this.layout.conf.mode,this.conf.collapsed=!1,this.conf.fixed={w:!1,h:!1},this.conf.docked=!0,"material"==this.conf.skin?(this.conf.min_width=42,this.conf.min_height=26):(this.conf.min_width=26,this.conf.min_height=26),this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null,"c"!=this.conf.mode&&(this.cell.childNodes[this.conf.idx.hdr].lastChild.onclick=null),this._unloadDocking(),this.layout=null,i=null}),this._hdrInit(),this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var t=i.layout._getMainInst();t._callMainEvent("onDblClick",[i.conf.name]),t=null},this.attachEvent("_onContentLoaded",function(){var t=this.layout._getMainInst();t._callMainEvent("onContentLoaded",[this.conf.name]),t=null}),"c"!=this.conf.mode){var n=document.createElement("DIV");n.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd,this.cell.childNodes[this.conf.idx.hdr].appendChild(n),n.onclick=function(t){i.conf.collapsed?i.expand():i.collapse()},n=null}return this.attachEvent("_onBeforeContentAttach",function(t){"tabbar"!=t&&"layout"!=t&&"acc"!=t||this._hideBorders(),"sidebar"==t&&"dhx_skyblue"!=this.conf.skin&&"dhx_terrace"!=this.conf.skin&&(this._hideBorders(),this.showHeader())}),this._initDocking(),this},dhtmlXLayoutCell.prototype=new dhtmlXCellObject,dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name},dhtmlXLayoutCell.prototype._initDocking=function(){var t=this;this.dock=function(){var t=this.layout._getMainInst();if(null==t.dhxWins||this.conf.docked)t=null;else{var e=t.dhxWins.window(this.conf.name);e.close(),this._attachFromCell(e),this.conf.docked=!0,this.conf.dock_collapsed||this.expand(),t._callMainEvent("onDock",[this.conf.name]),t=e=null}},this.undock=function(t,e,i,n){var s=this.layout._getMainInst();if(null!=s.dhxWins&&0!=this.conf.docked){if(this.conf.dock_collapsed=this.conf.collapsed,this.conf.collapsed||this.collapse(),null!=s.dhxWins.window(this.conf.name)){(o=s.dhxWins.window(this.conf.name)).show()}else{null==t&&(t=20),null==e&&(e=20),null==i&&(i=320),null==n&&(n=200);var o;(o=s.dhxWins.createWindow(this.conf.name,t,e,i,n)).button("close").hide(),o.addUserButton("dock",99,"Dock"),o.button("dock").show(),o.button("dock").attachEvent("onClick",this._doOnDockClick),o.setText(this.getText()),o.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,o._attachFromCell(this),s._callMainEvent("onUnDock",[this.conf.name]),s=o=null}else s=null},this._doOnDockClick=function(){t.dock()},this._doOnDockWinClose=function(t){return t.hide(),!1},this._unloadDocking=function(){t=null}},dhtmlXLayoutCell.prototype._hdrInit=function(){var t="";window.dhx4.isIE?-1!=navigator.userAgent.indexOf("MSIE 9.0")?t=" dhx_cell_hdr_text_ie9":window.dhx4.isIE8?t=" dhx_cell_hdr_text_ie8":window.dhx4.isIE7?t=" dhx_cell_hdr_text_ie7":window.dhx4.isIE6&&(t=" dhx_cell_hdr_text_ie6"):(window.dhx4.isChrome||window.dhx4.isKHTML)&&(t=" dhx_cell_hdr_text_chrome");var e=document.createElement("DIV");e.className="dhx_cell_hdr",e.innerHTML="<div class='dhx_cell_hdr_text"+t+"'></div>",this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]),e=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx(),this.attachEvent("_onSetSize",this._hdrOnSetSize),this.attachEvent("_onBorderChange",this._hdrOnBorderChange),this.attachEvent("_onViewSave",this._hdrOnViewSave),this.attachEvent("_onViewRestore",this._hdrOnViewRestore)},dhtmlXLayoutCell.prototype.showHeader=function(t){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",!0!==t&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.hideHeader=function(t){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(this._idd),this.conf.hdr.h_saved=this._getMinHeight(this._idd),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),!0!==t&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""},dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"},dhtmlXLayoutCell.prototype.isArrowVisible=function(){return""==this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display},dhtmlXLayoutCell.prototype.setText=function(t){this.conf.hdr.text=t,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text},dhtmlXLayoutCell.prototype.setCollapsedText=function(t){this.conf.hdr.text_collapsed=t,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getCollapsedText=function(){return null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text},dhtmlXLayoutCell.prototype._hdrUpdText=function(){var t=1==this.conf.collapsed&&null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text;this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+t+"</span>"},dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){1==this.conf.borders?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")},dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&"v"==this.conf.mode&&this._fitHdr()},dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0),this._hdrUpdBorder()},dhtmlXLayoutCell.prototype._hdrOnViewSave=function(t){this.views[t].hdr_vis=this.conf.hdr.visible},dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(t){this.conf.hdr.visible!=this.views[t].hdr_vis&&this[this.views[t].hdr_vis?"showHeader":"hideHeader"](!0),this.views[t].hdr_vis=null,delete this.views[t].hdr_vis},dhtmlXLayoutCell.prototype._getHdrHeight=function(t){return this.conf.collapsed&&"v"==this.conf.mode&&!0!==t?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXLayoutCell.prototype._fitHdr=function(){var t=this.cell.childNodes[this.conf.idx.hdr];if(1==this.conf.collapsed){void 0===dhtmlXLayoutObject.prototype._confGlob.hdrColH&&(t.style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(t.style.height)-this._getHdrHeight(!0));var e=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH;t.style.height=e+"px",t.firstChild.style.width=e-39+"px"}else t.firstChild.style.width=t.style.height=null;t=null},dhtmlXLayoutCell.prototype.expand=function(t){if(!this.conf.collapsed)return!0;var e=this.layout;if("v"==this.conf.mode){var i=t?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinWidth(this._idd),n=e.cont.offsetWidth-e.conf.sw;if(i+this.conf.size.w_avl>n)return e=null,!1}else{var s=t?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinHeight(this._idd)+e.cdata[e.conf.nextCell[this._idd]]._getHdrHeight(),o=e.cont.offsetHeight-e.conf.sw;if(s+this.conf.size.h_avl>o)return e=null,!1}{if(0!=this.conf.docked){0==this.conf.hdr.visible&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder()),this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,"v"==this.conf.mode?(this.conf.size.w=Math.min(n-i,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(o-s,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),"v"==this.conf.mode&&this._fitHdr(),e.setSizes(e.conf.nextCell[this._idd],e.conf.nextCell[this._idd],1==t,"expand"),e.sep._blockSep(),e=null,this._hdrUpdText();var l=this.layout._getMainInst();return l._callMainEvent("onExpand",[this.conf.name]),l=null,!0}this.dock()}},dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed)return!1;var t=this.layout;if(0==t.cdata[t.conf.nextCell[this._idd]].expand(!0))return!1;"v"==this.conf.mode?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()),0==this.conf.hdr.visible&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"),this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode,this.conf.collapsed=!0,"v"==this.conf.mode?this.conf.size.w=t.conf.hh:this.conf.size.h=this._getHdrHeight(),t.setSizes(t.conf.nextCell[this._idd],t.conf.nextCell[this._idd],!1,"collapse"),t.sep._blockSep(),t=null,this._hdrUpdText();var e=this.layout._getMainInst();return e._callMainEvent("onCollapse",[this.conf.name]),e=null,!0},dhtmlXLayoutCell.prototype.isCollapsed=function(){return 1==this.conf.collapsed},dhtmlXLayoutCell.prototype.setMinWidth=function(t){this.conf.min_width=parseInt(t)||0},dhtmlXLayoutCell.prototype.setMinHeight=function(t){this.conf.min_height=parseInt(t)||0},dhtmlXLayoutCell.prototype._getMinWidth=function(t){if("layout"==this.dataType&&null!=this.dataObj){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailWidth();if("1C"==this.dataObj.conf.pattern)return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(t));if("v"==this.dataObj.conf.mode){var e=t||this._idd;return this.dataObj.cdata[e].conf.collapsed&&(e=this.dataObj.conf.nextCell[e]),Math.max(this.conf.min_width,this.dataObj.cdata[e]._getMinWidth(t)+this.dataObj.cdata[this.dataObj.conf.nextCell[e]]._getWidth()+this.dataObj.conf.sw)}return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(t),this.dataObj.cdata.b._getMinWidth(t))}return Math.max(this.conf.min_width,1)},dhtmlXLayoutCell.prototype._getMinHeight=function(t){var e=0;if(null!=this.conf.idx.menu&&(e+=this.cell.childNodes[this.conf.idx.menu].offsetHeight),"layout"==this.dataType&&null!=this.dataObj){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailHeight();if("1C"==this.dataObj.conf.pattern)return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(t));if("h"==this.dataObj.conf.mode){var i=t;return this.dataObj.cdata[i].conf.collapsed&&(i=this.dataObj.conf.nextCell[i]),Math.max(this.conf.min_height,this.dataObj.cdata[i]._getMinHeight(t)+this.dataObj.cdata[i]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[i]]._getHeight()+this.dataObj.conf.sw)}return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(t)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(t)+this.dataObj.cdata.b._getHdrHeight())}return Math.max(this.conf.min_height,e)},dhtmlXLayoutCell.prototype._getAvailWidth=function(t){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailWidth(t);if("v"==this.dataObj.conf.mode){var e=1==this.dataObj.cdata.a.conf.collapsed,i=1==this.dataObj.cdata.b.conf.collapsed;return"a"==t?this.dataObj.cdata[i?"a":"b"]._getAvailWidth(t):this.dataObj.cdata[e?"b":"a"]._getAvailWidth(t)}return Math.min(this.dataObj.cdata.a._getAvailWidth(t),this.dataObj.cdata.b._getAvailWidth(t))}return this.cell.offsetWidth-this._getMinWidth()},dhtmlXLayoutCell.prototype._getAvailHeight=function(t){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailHeight(t);if("h"==this.dataObj.conf.mode){var e=1==this.dataObj.cdata.a.conf.collapsed,i=1==this.dataObj.cdata.b.conf.collapsed;return"a"==t?this.dataObj.cdata[i?"a":"b"]._getAvailHeight(t):this.dataObj.cdata[e?"b":"a"]._getAvailHeight(t)}return Math.min(this.dataObj.cdata.a._getAvailHeight(t),this.dataObj.cdata.b._getAvailHeight(t))}var n=this._getHdrHeight();return"v"==this.conf.mode&&this.conf.collapsed&&(n=this.conf.hh),this.cell.offsetHeight-n-this._getMinHeight()},dhtmlXLayoutCell.prototype.setWidth=function(t){if("v"==this.conf.mode){if(this.conf.collapsed)return;if((o=(n=this.layout).cdata[n.conf.nextCell[this._idd]]).conf.collapsed)return t=t+n.conf.sw+o._getWidth(),void(s=n=o=null);var e=this._getMinWidth(this._idd),i=n.cont.offsetWidth-o._getMinWidth(this._idd)-n.conf.sw;t=Math.max(e,Math.min(t,i)),this.conf.size.w=t,n.setSizes(o._idd,o._idd),n=o=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var n,s=this.layout.parentLayout,o=(n=this.layout).cdata[n.conf.nextCell[this._idd]];for(var l in s.cdata)s.cdata[l].dataObj==n&&s.cdata[l].setWidth(t);s=n=null}},dhtmlXLayoutCell.prototype.setHeight=function(t){if("h"==this.conf.mode){if(this.conf.collapsed)return;if((l=(s=this.layout).cdata[s.conf.nextCell[this._idd]]).conf.collapsed){t=t+s.conf.sw+l._getHeight();if(null!=(o=null!=this.layout&&null!=this.layout.parentLayout?this.layout.parentLayout:null))for(var e in o.cdata)o.cdata[e].dataObj==s&&o.cdata[e].setHeight(t);return void(o=s=l=null)}var i=this._getMinHeight(this._idd)+this._getHdrHeight(),n=s.cont.offsetHeight-l._getMinHeight(this._idd)-l._getHdrHeight()-s.conf.sw;t=Math.max(i,Math.min(t,n)),this.conf.size.h=t,s.setSizes(l._idd,l._idd),s=l=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var s,o=this.layout.parentLayout,l=(s=this.layout).cdata[s.conf.nextCell[this._idd]];for(var e in o.cdata)o.cdata[e].dataObj==s&&o.cdata[e].setHeight(t);o=s=null}},dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w},dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h},dhtmlXLayoutCell.prototype.fixSize=function(t,e){this.conf.fixed.w=window.dhx4.s2b(t),this.conf.fixed.h=window.dhx4.s2b(e);var i=this.layout._getMainInst(),n={};i.forEachItem(function(t){if(null!=t.conf.fsize){t.getId();var e={h:1==t.conf.fixed.w,v:1==t.conf.fixed.h};for(var i in e)if(1==e[i]&&null!=t.conf.fsize[i]){t.conf.fsize[i]instanceof Array||(t.conf.fsize[i]=[t.conf.fsize[i]]);for(var s=0;s<t.conf.fsize[i].length;s++)n[t.conf.fsize[i][s]]=!0}}t=null}),i._forEachSep(function(t){t._lockSep(1==n[t.conf.idx]),t=null}),i=null},dhtmlXCellObject.prototype.attachLayout=function(t){this.callEvent("_onBeforeContentAttach",["layout"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),void 0!==this._layoutMainInst&&(e._layoutMainInst=this._layoutMainInst),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(e._isParentCell=!0,"material"==this.conf.skin&&null==String(this.cell.className).match(/dhx_cell_nested_layout/)&&(this.cell.className+=" dhx_cell_nested_layout")),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?e._ofs={t:14,r:14,b:14,l:14}:e._ofs={t:-1,r:-1,l:-1,b:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"==this.conf.skin&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"material"==this.conf.skin&&(e._ofs={t:8,r:8,b:8,l:8})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&("dhx_web"==this.conf.skin?(e._ofs={l:8},1==this.sidebar.conf.autohide&&(e._ofs.l=0),1==this.sidebar.conf.header&&(e._ofs.t=9)):"dhx_terrace"==this.conf.skin?(e._ofs={l:11},1==this.sidebar.conf.autohide&&(e._ofs.l=0),1==this.sidebar.conf.header&&(e._ofs.t=10)):e._ofs={l:-1}),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),"function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&"material"==this.conf.skin&&(e._ofs={t:14,r:14,b:14,l:14}),"string"==typeof t&&(t={pattern:t}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=e,this.dataType="layout",this.dataObj=new dhtmlXLayoutObject(t),this instanceof window.dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout),e._layoutMainInst=null,t.parent=null,e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXTabBar.prototype=new dhtmlXCellTop,dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs={dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin]},dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(t){return this.t[t]?this.t[t].cell:null},dhtmlXTabBar.prototype.getAllTabs=function(){var t=[];for(var e in this.t)t.push(e);return t},dhtmlXTabBar.prototype._setTabActive=function(t,e){this.t[t]&&!this.t[t].conf.active&&(void 0===e&&(e=!0),1==e&&!0!==this.callEvent("onSelect",[t,this.conf.lastActive])||(this.setTabInActive(),this.t[t].conf.active=!0,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="visible",this.t[t].cell.cell.style.top="0px",this.t[t].cell.cell.style.zIndex=1),this.t[t].tab.className=this._tabCss(t),this.conf.lastActive=t,this.setSizes(),1==this.conf.url_demand&&this._loadURLOnDemand(t)))},dhtmlXTabBar.prototype.setTabInActive=function(){null!=this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)},dhtmlXTabBar.prototype._isTabActive=function(t){return t==this.conf.lastActive&&null!=this.conf.lastActive},dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive},dhtmlXTabBar.prototype.goToNextTab=function(){var t=this._getNextVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype.goToPrevTab=function(){var t=this._getPrevVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype._enableTab=function(t,e){this.t[t]&&!this.t[t].conf.enabled&&(this.t[t].conf.enabled=!0,this.t[t].tab.className=this._tabCss(t),1==e&&this._setTabActive(t))},dhtmlXTabBar.prototype._disableTab=function(t,e){this.t[t]&&this.t[t].conf.enabled&&(this.t[t].conf.enabled=!1,this.t[t].tab.className=this._tabCss(t),!1!==e&&this.conf.lastActive==t&&(1==e&&(e=this._getNextVisible(t)||this._getPrevVisible(t)),this._setTabActive(e)))},dhtmlXTabBar.prototype._isTabEnabled=function(t){return null!=this.t[t]&&1==this.t[t].conf.enabled},dhtmlXTabBar.prototype._setTabText=function(t,e,i){if(this.t[t]){var n=!1;void 0!==i&&null!=i||(i=this._getLabelWidth(e,this.t[t].conf.close),n=!0),this.t[t].tab.style.width=i+"px",this.t[t].tab.childNodes[0].innerHTML=e,this.t[t].conf.text=e,this.t[t].conf.width=i,this.t[t].conf.autowidth=n}},dhtmlXTabBar.prototype._getTabText=function(t){return this.t[t]?this.t[t].conf.text:null},dhtmlXTabBar.prototype._removeTab=function(t,e,i){if(this.t[t]){if(1!=i&&1!=this.t[t].conf.remove)return this.t[t].conf.remove=!0,void this._hideTab(t,e);void 0===e&&(e=!0);var n=this._getNextVisible(t),s=this._getPrevVisible(t);1==this.t[t].conf.transEv&&(this.t[t].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[t].conf.transEv=!1);for(var o in this.t[t].conf)this.t[t].conf[o]=null;if(this.t[t].conf=null,delete this.t[t].conf,this.t[t].cell._unload(),this.t[t].cell=null,this.t[t].tab.parentNode.removeChild(this.t[t].tab),this.t[t].tab=null,this.t[t]=null,delete this.t[t],this.conf.urls[t]=null,delete this.conf.urls[t],this.conf.lastActive==t){if(this.conf.lastActive=null,0!=e){var l=1==e?n||s||this._getFirstVisible():e;null!=l&&this._setTabActive(l)}}else 1!=i&&this._adjustTabs()}},dhtmlXTabBar.prototype.clearAll=function(){for(var t in this.t)this._removeTab(t,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},dhtmlXTabBar.prototype.moveTab=function(t,e){if(this.t[t]&&!(e<0)){e+=1;var i=this.tabsArea.childNodes[1].firstChild;i.childNodes[e]!=this.t[t].tab&&(i.removeChild(this.t[t].tab),e>=i.childNodes.length?i.appendChild(this.t[t].tab):i.insertBefore(this.t[t].tab,i.childNodes[e])),i=null}},dhtmlXTabBar.prototype._getIndex=function(t){for(var e=-1,i=this.tabsArea.childNodes[1].firstChild,n=1;n<i.childNodes.length;n++)i.childNodes[n]._tabId==t&&(e=n-1);return i=null,e},dhtmlXTabBar.prototype.getNumberOfTabs=function(t){var e=0;for(var i in this.t)e+=1!=t?1:1==this.t[i].conf.visible?1:0;return e},dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(t){for(var e in this.t)t.apply(window,[this.t[e].cell])},dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()},dhtmlXTabBar.prototype.setArrowsMode=function(t){null!=(t={auto:"auto",always:"always"}[String(t)])&&t!=this.conf.mode&&(this.conf.arwMode=t,"always"==t&&(this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left",this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"),this.setSizes())},dhtmlXTabBar.prototype._checkArrows=function(){var t=!1;if("auto"==this.conf.arwMode){var e=0;for(var i in this.t)e+=this.t[i].tab.offsetWidth;var n=this.tabsArea.childNodes[0],s=this.tabsArea.childNodes[2];e>this.cont.offsetWidth?n.className.search(/dhxtabbar_tabs_ar_hidden/)>=0&&(n.className=n.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),s.className=s.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),t=!0):n.className.search(/dhxtabbar_tabs_ar_hidden/)<1&&(n.className+=" dhxtabbar_tabs_ar_hidden",s.className+=" dhxtabbar_tabs_ar_hidden",t=!0),n=s=null}return t},dhtmlXTabBar.prototype._loadURLOnDemand=function(t){null!=t&&null!=this.conf.urls[t]&&(this.cells(t).attachURL(this.conf.urls[t].href,this.conf.urls[t].ajax),this.conf.urls[t]=null)},window.dhtmlXTabBarCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_tabbar"]),this.tabbar=e,this.conf.skin=this.tabbar.conf.skin,this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"},this._tabbarCall=function(t){return function(){for(var e=[this._idd],i=0;i<arguments.length;i++)e.push(arguments[i]);return this.tabbar[t].apply(this.tabbar,e)}};for(var i in this.conf.tabbar_funcs)"function"!=typeof this[i]&&(this[i]=this._tabbarCall(this.conf.tabbar_funcs[i]));this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var t in this.conf.tabbar_funcs)this[t]=null,this.conf.tabbar_funcs[t]=null;this.conf.tabbar_funcs=null}),this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments),this.tabbar._callMainEvent("onTabContentLoaded",arguments)}),this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)}),this.attachEvent("_onBeforeContentAttach",function(t){"sidebar"==t&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders()})},window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject,dhtmlXCellObject.prototype.attachTabbar=function(t){this.callEvent("_onBeforeContentAttach",["tabbar"]),"string"==typeof t?t={mode:t}:"object"==typeof t&&null!=t||(t={});var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden","function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&("material"==this.conf.skin?e._ofs={t:-1,r:-1,b:-1,l:-1}:e._ofs={t:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&("dhx_skyblue"==this.conf.skin&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"material"==this.conf.skin&&(e._ofs={t:8,r:8,b:8,l:8})),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(e._ofs={l:-1},"dhx_web"==this.conf.skin&&1==this.sidebar.conf.autohide&&(e._ofs.l=0),"dhx_terrace"==this.conf.skin&&(1==this.sidebar.conf.autohide&&(e._ofs.l=0),1==this.sidebar.conf.header&&(e._ofs.t=-1))),"function"==typeof window.dhtmlXCarouselCell&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this._attachObject(e),t.skin=this.conf.skin,t.parent=e,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(t),t.parent=e=null,t=null,this.callEvent("_onContentAttach",[]),this.dataObj},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML),dhtmlXSideBar.prototype=new dhtmlXCellTop,dhtmlXSideBar.prototype._addItem=function(t){var e=void 0!==t.id?t.id:window.dhx4.newId();if("separator"==t.type){return(i=document.createElement("DIV")).className="dhxsidebar_sep",this.side.firstChild.appendChild(i),this.s[e]={sep:i},void(i=null)}t.icons_path=this.conf.icons_path;var i;if((i=document.createElement("DIV")).className="dhxsidebar_item",i.innerHTML=window.dhx4.template(this.conf.tpl_str,t),i._idd=e,this.side.firstChild.appendChild(i),i.ondragstart=function(){return!1},1==this.conf.single_cell)var n=this.conf.cell;else{n=new dhtmlXSideBarCell(e,this);this.cont.appendChild(n.cell)}this.t[e]={item:i,cell:n,init:t,conf:{selected:!1,visible:!0,close:close}},void 0!==t.bubble&&this._setItemBubble(e,t.bubble),1==this.conf.header&&n.setHeaderText(window.dhx4.template(this.tpl_header,t)),n=i=null,1==window.dhx4.s2b(t.selected)?this._setItemActive(e):this._adjustCell(e),this._checkHeight()},dhtmlXSideBar.prototype.addItem=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++)this._addItem(t[e])},dhtmlXSideBar.prototype.items=dhtmlXSideBar.prototype.cells=function(t){return 1==this.conf.single_cell?this.conf.cell:null!=this.t[t]?this.t[t].cell:null},dhtmlXSideBar.prototype.forEachCell=dhtmlXSideBar.prototype.forEachItem=function(t){if(1!=this.conf.single_cell)for(var e in this.t)"function"==typeof t?t.apply(window,[this.t[e].cell]):"string"==typeof t&&"function"==typeof window[t]&&window[t].apply(window,[this.t[e].cell]);else"function"==typeof t?t.apply(window,[this.conf.cell]):"string"==typeof t&&"function"==typeof window[t]&&window[t].apply(window,[this.conf.cell])},dhtmlXSideBar.prototype.getAllItems=function(){var t=[];for(var e in this.t)t.push(e);return t},dhtmlXSideBar.prototype.getNumberOfItems=function(){return this.getAllItems().length},dhtmlXSideBar.prototype.clearAll=function(){for(var t in this.t)this._removeItem(t,!1,!0);for(var t in this.s)this.removeSep(t)},dhtmlXSideBar.prototype.setSizes=function(){this._adjustCont(),this._adjustSide(),this._checkHeight(),this._adjustCell(this.conf.selected,!0),this.callEvent("_onSetSizes",[])},dhtmlXSideBar.prototype.setSideWidth=function(t){this.conf.width=t,this.setSizes()},dhtmlXSideBar.prototype._adjustSide=function(){null==this.conf.side_ofs&&(this.conf.side_ofs={},this.side.style.width=this.conf.width+"px",this.side.style.height=this.side.parentNode.offsetHeight+"px",this.conf.side_ofs.w=this.side.offsetWidth-parseInt(this.side.style.width),this.conf.side_ofs.h=this.side.offsetHeight-parseInt(this.side.style.height)),this.side.style.width=this.conf.width-this.conf.side_ofs.w+"px",this.side.style.height=this.side.parentNode.offsetHeight-this.arw.offsetHeight-this.conf.side_ofs.h+"px",this.arw.style.width=this.side.style.width,this._scrollSide(0)},dhtmlXSideBar.prototype._checkHeight=function(){var t=null!=this.arw.className.match(/dhxsidebar_arrows_hidden/);null==this.conf.side_hfix&&(this.conf.side_hfix=this.side.offsetHeight-this.side.clientHeight),this.side.firstChild.offsetHeight>this.side.parentNode.clientHeight-this.conf.side_hfix?1==t&&(this.arw.className="dhxsidebar_arrows",this._adjustSide()):0==t&&(this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.side.firstChild.style.top="0px",this._adjustSide())},dhtmlXSideBar.prototype.removeSep=function(t){if(null!=this.s[t]){this.side.firstChild.removeChild(this.s[t].sep),this.s[t].sep=null,this.s[t]=null;try{delete this.s[t]}catch(t){}}},dhtmlXSideBar.prototype.showSide=function(){if(1==this.conf.autohide){if(null==this.sideCover&&this._sideCoverAttach(),1==this.conf.animate_items){var t=function(t,e,i){window.setTimeout(function(){t.style[i]="transform 0.3s",t.style.transform="translate(0px,0px)",t=null},e)};if(!1!==this.conf.transProp){var e=100;for(var i in this.t)this.t[i].item.style[this.conf.transProp]="",this.t[i].item.style.transform="translate(-"+(this.conf.width+20)+"px,0px)",t(this.t[i].item,e+=50,this.conf.transProp)}}var n=this;window.setTimeout(function(){n.arw.style.left=n.side.style.left="0px",n.sideCover.className="dhxsidebar_side_cover dhxsidebar_side_cover_actv",n=null},50)}},dhtmlXSideBar.prototype.hideSide=function(t){1==this.conf.autohide&&(this.arw.style.left=this.side.style.left=-this.conf.width-10+"px",null!=this.sideCover&&(!1!==this.conf.transProp?this.sideCover.className="dhxsidebar_side_cover":this._sideCoverDetach()))},dhtmlXSideBar.prototype._sideCoverAttach=function(){var t=this;this.sideCover=document.createElement("DIV"),this.sideCover.className="dhxsidebar_side_cover",null!=this.arw.nextSibling?this.cont.insertBefore(this.sideCover,this.arw.nextSibling):this.cont.appendChild(this.sideCover),this._sideCoverOnTrEnd=function(){null==this.className.match(/dhxsidebar_side_cover_actv/)&&t._sideCoverDetach()},this._sideCoverDetach=function(){null!=this.sideCover&&(!1!==this.conf.transProp&&this.sideCover.removeEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1),this.sideCover.parentNode.removeChild(this.sideCover),this.sideCover=null,t=null)},!1!==this.conf.transProp&&this.sideCover.addEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1)},dhtmlXSideBar.prototype._setItemActive=function(t,e){if(this.conf.selected!=t){if(void 0===e&&(e=!1),1!=e||!0===this.callEvent("onBeforeSelect",[t,this.conf.selected])){var i=null;null!=this.conf.selected&&(i=this.conf.selected,this._setItemInactive(this.conf.selected)),null!=this.t[t]?(this.conf.selected=t,this.t[t].selected=!0,this.t[t].item.className+=" dhxsidebar_item_selected",1!=this.conf.single_cell&&(this.t[t].cell.cell.style.visibility="visible",this.t[t].cell.cell.style.top="0px",this.t[t].cell.cell.style.zIndex=1)):this.conf.selected=null,this._adjustCell(t),1==e&&this.callEvent("onSelect",[t,i]),1==this.conf.autohide&&this.hideSide()}}else 1==this.conf.autohide&&this.hideSide()},dhtmlXSideBar.prototype._setItemInactive=function(t){null!=this.t[t]&&(this.t[t].selected=!1,this.t[t].item.className=this.t[t].item.className.replace(/\s{0,}dhxsidebar_item_selected/gi,""),1!=this.conf.single_cell&&(this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.top="-5000px",this.t[t].cell.cell.style.zIndex=0))},dhtmlXSideBar.prototype._isItemActive=function(t){return this.conf.selected==t},dhtmlXSideBar.prototype._getNextVisible=function(t,e){return this._getNearVisible(t,e,"next")},dhtmlXSideBar.prototype._getPrevVisible=function(t,e){return this._getNearVisible(t,e,"previous")},dhtmlXSideBar.prototype._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},dhtmlXSideBar.prototype._getNearVisible=function(t,e,i){if("first"==i){var n=this.side.firstChild.firstChild;i="next"}else{if(null==t||null==this.t[t])return e?this._getFirstVisible():null;n=this.t[t].item[i+"Sibling"]}for(var s=null;null!=n&&null==s;){var o=n._idd;null!=o&&null==s&&this.t[o].conf.visible?s=o:n=n[i+"Sibling"]}return n=null,s},dhtmlXSideBar.prototype.goToNextItem=function(t){var e=this._getNextVisible(this.conf.selected,!0);null!=e&&this._setItemActive(e,t)},dhtmlXSideBar.prototype.goToPrevItem=function(t){var e=this._getPrevVisible(this.conf.selected,!0);null!=e&&this._setItemActive(e,t)},dhtmlXSideBar.prototype.getActiveItem=function(){return this.conf.selected},dhtmlXSideBar.prototype.setTemplate=function(t,e){this.conf.tpl_name=null!=t&&null!=this.templates[t]?t:"details",this.conf.tpl_str=this.templates[this.conf.tpl_name],null!=e&&(this.conf.icons_path=e);for(var i in this.t)this.t[i].init.icons_path=this.conf.icons_path,this.t[i].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[i].init);null!=this.side&&(this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name),null!=this._scrollSide&&(this._scrollSide(0),this._checkHeight())},dhtmlXSideBar.prototype.templates={details:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",tiles:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#</div>",icons:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'>",icons_text:"<div class='dhxsidebar_item_icon'><img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'></div><div class='dhxsidebar_item_text'>#text#</div>",text:"<div class='dhxsidebar_item_text'>#text#</div>"},dhtmlXSideBar.prototype.tpl_bubble="<div class='dhxsidebar_bubble'>#value#</div>",dhtmlXSideBar.prototype.tpl_header="#text#",window.dhtmlXSideBarCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_sidebar"]);var i=this;this.sidebar=e,this.conf.skin=this.sidebar.conf.skin,this.conf.sidebar_funcs={show:"_showItem",hide:"_hideItem",isVisible:"_isItemVisible",setActive:"_setItemActive",isActive:"_isItemActive",setText:"_setItemText",getText:"_getItemText",remove:"_removeItem",setBubble:"_setItemBubble",getBubble:"_getItemBubble",clearBubble:"_clearItemBubble"},this._sidebarCall=function(t){return function(){for(var e=[this._idd],i=0;i<arguments.length;i++)e.push(arguments[i]);return this.sidebar[t].apply(this.sidebar,e)}};for(var n in this.conf.sidebar_funcs)"function"!=typeof this[n]&&(this[n]=this._sidebarCall(this.conf.sidebar_funcs[n]));1==this.sidebar.conf.header&&(this._initHeader(),this.cell.childNodes[this.conf.idx.hdr].onclick=function(t){var e=(t=t||event).target||t.srcElement;null!=e.className.match(/dhx_cell_sidebar_hdr_icon/gi)&&(i.sidebar.conf.clear_click=!0,i.sidebar.showSide()),e=null}),this.attachEvent("_onCellUnload",function(){null!=this.conf.idx.hdr&&(this.cell.childNodes[this.conf.idx.hdr].onclick=null),this.sidebar=null;for(var t in this.conf.sidebar_funcs)this[t]=this.conf.sidebar_funcs[t]=null;this.conf.sidebar_funcs=null,i=null}),this.attachEvent("_onContentLoaded",function(){this.sidebar.callEvent("onContentLoaded",arguments)}),this.attachEvent("_onBeforeContentAttach",function(t){"tabbar"!=t&&"layout"!=t&&"acc"!=t||this._hideBorders(),"sidebar"==t&&"dhx_skyblue"!=this.conf.skin&&this._hideBorders(),"dhx_web"!=this.conf.skin&&"dhx_terrace"!=this.conf.skin||"menu"!=t&&"toolbar"!=t&&"ribbon"!=t||null==this.cell.className.match(/dhx_cell_cont_no_top/gi)&&(this.cell.className+=" dhx_cell_cont_no_top")})},dhtmlXSideBarCell.prototype=new dhtmlXCellObject,dhtmlXSideBar.prototype._setItemText=function(t,e){if(null!=this.t[t]){for(var i in e)this.t[t].init[i]=e[i];this.t[t].init.icons_path=this.conf.icons_path,this.t[t].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[t].init),null!=this.t[t].conf.bubble&&(this.t[t].item.innerHTML+=window.dhx4.template(this.tpl_bubble,{value:this.t[t].conf.bubble})),1==this.conf.header&&this.t[t].cell.setHeaderText(window.dhx4.template(this.tpl_header,this.t[t].init))}},dhtmlXSideBar.prototype._getItemText=function(t){var e={};if(null!=this.t[t])for(var i in this.t[t].init)e[i]=this.t[t].init[i];return e},dhtmlXSideBar.prototype._removeItem=function(t,e,i){if(null!=this.t[t]){if(1!=i&&1!=this.t[t].conf.remove)return this.t[t].conf.remove=!0,void this._hideItem(t,e);void 0===e&&(e=!0);var n=this._getNextVisible(t),s=this._getPrevVisible(t);1==this.t[t].conf.transEv&&(this.t[t].item.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!1),1!=this.conf.single_cell&&(this.t[t].cell._unload(),this.t[t].cell=null),this.t[t].item.ondragstart=null,this.t[t].item.parentNode.removeChild(this.t[t].item),this.t[t].item=null;for(var o in this.t[t])this.t[t][o]=null;this.t[t]=null;try{delete this.t[t]}catch(t){}if(this.conf.selected==t&&0!=e){this.conf.selected=null;null!=(e=1==e?n||s||this._getFirstVisible():e)&&this._setItemActive(e)}else 1!=i&&this._checkHeight()}},dhtmlXSideBar.prototype._showItem=function(t,e){null!=this.t[t]&&1!=this.t[t].conf.visible&&1!=this.t[t].conf.transActv&&(!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="show",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=e?t:null,1!=this.t[t].conf.transEv&&(this.t[t].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!0),this.t[t].conf.visible=!0,this.t[t].item.style[this.conf.transProp]=this.conf.transValue,this.t[t].item.className="dhxsidebar_item"):(this.t[t].conf.visible=!0,this.t[t].item.style.display="",1==e?this._setItemActive(t):this._checkHeight()))},dhtmlXSideBar.prototype._hideItem=function(t,e){if(null!=this.t[t]&&1==this.t[t].conf.visible&&1!=this.t[t].conf.transActv){var i=!1;this.conf.selected==t&&(this.conf.selected=null,this.t[t].conf.active=!1,this.t[t].item.className="dhxsidebar_item",i=!0);var n=this._getPrevVisible(t),s=this._getNextVisible(t);e=i&&!1!==e?(1==e?null:e)||s||n:null;!1!==this.conf.transProp?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="hide",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=e,this.t[t].conf.visible=!1,1!=this.t[t].conf.transEv&&(this.t[t].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!0),this.t[t].item.style[this.conf.transProp]=this.conf.transValue,this.t[t].item.className="dhxsidebar_item dhxsidebar_item_hidden"):(this.t[t].item.style.display="none",this.t[t].conf.visible=!1,1!=this.conf.single_cell&&(this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.top="-5000px"),null!=e&&this._setItemActive(e),this._checkHeight(),1==this.t[t].conf.remove&&this._removeItem(t))}},dhtmlXSideBar.prototype._isItemVisible=function(t){return 1==this.t[t].conf.visible},dhtmlXSideBar.prototype._setItemBubble=function(t,e){null!=this.t[t]&&(this.t[t].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[t].init)+window.dhx4.template(this.tpl_bubble,{value:String(e)}),this.t[t].conf.bubble=e)},dhtmlXSideBar.prototype._getItemBubble=function(t){return null==this.t[t]?null:"undefuned"==typeof this.t[t].conf.bubble?null:this.t[t].conf.bubble},dhtmlXSideBar.prototype._clearItemBubble=function(t){null!=this.t[t]&&(this.t[t].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[t].init),this.t[t].conf.bubble=null)},dhtmlXCellObject.prototype.attachSidebar=function(t){this.callEvent("_onBeforeContentAttach",["sidebar"]),null==t&&(t={});var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden","function"==typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||("dhx_skyblue"==this.conf.skin&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"dhx_web"==this.conf.skin&&("function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(e._ofs={l:8}),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(e._ofs={t:2}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(e._ofs={t:8}),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={t:2})),"dhx_terrace"==this.conf.skin&&("function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(e._ofs={l:-1}),"function"==typeof window.dhtmlXLayoutCell&&this instanceof window.dhtmlXLayoutCell&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(e._ofs={t:-1}),"function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={t:-1,r:-1,b:-1,l:-1})),"material"==this.conf.skin&&("function"==typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXTabBarCell&&this instanceof window.dhtmlXTabBarCell&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&(e._ofs={l:-1}))),this._attachObject(e),t.skin=this.conf.skin,t.parent=e,this.dataType="sidebar",this.dataObj=new dhtmlXSideBar(t),t.parent=e=null,t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXSideBarCell.prototype._initHeader=function(){var t=document.createElement("DIV");t.className="dhx_cell_sidebar_hdr",t.innerHTML=(1==this.sidebar.conf.autohide?"<div class='dhx_cell_sidebar_hdr_icon'></div>":"")+"<div class='dhx_cell_sidebar_hdr_text"+(1==this.sidebar.conf.autohide?" dhx_cell_sidebar_hdr_text_icon":"")+"'></div>",this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),t=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_sidebar_hdr",this._updateIdx()},dhtmlXSideBarCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXSideBarCell.prototype.showHeader=function(){1!=this.conf.hdr.visible&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr",this._adjustCont(this._idd))},dhtmlXSideBarCell.prototype.hideHeader=function(){1==this.conf.hdr.visible&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr dhx_cell_sidebar_hdr_hidden",this._adjustCont(this._idd))},dhtmlXSideBarCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXSideBarCell.prototype.setHeaderText=function(t){this.conf.text=t;var e=this.cell.childNodes[this.conf.idx.hdr];e.childNodes["dhx_cell_sidebar_hdr_icon"==e.firstChild.className?1:0].innerHTML="<span>"+t+"</span>",e=null},dhtmlXSideBarCell.prototype.getHeaderText=function(){return this.conf.text},dhtmlXCarousel.prototype=new dhtmlXCellTop,dhtmlXCarousel.prototype.ef={},dhtmlXCarousel.prototype.cells=function(t){return this.cdata[t].cell},dhtmlXCarousel.prototype.forEachCell=function(t){for(var e in this.cdata)"function"==typeof t?t.apply(window,[this.cdata[e].cell]):"string"==typeof t&&"function"==typeof window[t]&&window[t].apply(window,[this.cdata[e].cell])},dhtmlXCarousel.prototype._initControls=function(){var t=this,e="material"==this.conf.skin?["",""]:this.conf.arw;this.controls=document.createElement("DIV"),this.controls.className="dhx_carousel_controls",this.controls.innerHTML="<div class='dhx_carousel_bars'></div><div class='dhx_carousel_btn dhx_carousel_btn_prev'>"+e[0]+"</div><div class='dhx_carousel_btn dhx_carousel_btn_next'>"+e[1]+"</div>",this.cont.appendChild(this.controls),this._doOnControlClick=function(e){if(1!=t.conf.clear_click){if(e=e||event,null!=window.dhx4.dnd.evs.start&&"click"!=e.type&&1!=t.conf.clear_click){if(1==window.dhx4.dnd._mTouch(e))return;t.conf.clear_click=!0}var i=e.target||e.srcElement,n=null;if(null!=i.className)if(null!=i.className.match(/btn_prev/))n=-1;else if(null!=i.className.match(/btn_next/))n=1;else if(null!=i.className.match(/dhx_carousel_onebar/)&&null==i.className.match(/dhx_carousel_baractv/))for(var s=0;s<i.parentNode.childNodes.length;s++)i.parentNode.childNodes[s]==i&&(n=s-t.conf.selected);null!=n&&t._animateStart(n),i=null}else t.conf.clear_click=!1},"function"==typeof window.addEventListener?(this.controls.addEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.addEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.attachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=function(t){return(t=t||event).preventDefault&&t.preventDefault(),t.returnValue=!1,!1})),this.showControls=function(){this.controls.style.display="",this.setSizes()},this.hideControls=function(){this.controls.style.display="none",this.setSizes()},this._checkControls=function(){this.controls.childNodes[1].className="dhx_carousel_btn dhx_carousel_btn_prev"+(this.conf.selected<=0?"_dis":""),this.controls.childNodes[2].className="dhx_carousel_btn dhx_carousel_btn_next"+(this.conf.selected>=this.conf.items_count-1||0==this.conf.items_count?"_dis":"")},this._adjustControls=function(){this.controls.firstChild.style.left=Math.round(this.cont.offsetWidth/2-this.controls.firstChild.offsetWidth/2)+"px"},this._addBar=function(){var t=document.createElement("DIV");t.className="dhx_carousel_onebar",t.innerHTML="<div class='dhx_carousel_barcore'>&nbsp;</div>",this.controls.firstChild.appendChild(t),t=null,this._adjustControls()},this._removeBar=function(t){var e=this.controls.firstChild.lastChild;null!=e&&(e.parentNode.removeChild(e),e=null,!1!==t&&this._adjustControls())},this._setBarIndex=function(t){for(var e=0;e<this.controls.firstChild.childNodes.length;e++)this.controls.firstChild.childNodes[e].className="dhx_carousel_onebar"+(e==t?" dhx_carousel_baractv":"")},this._unloadControls=function(){for("function"==typeof window.addEventListener?(this.controls.removeEventListener("click",this._doOnControlClick,!1),null!=window.dhx4.dnd.evs.start&&this.controls.removeEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.detachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=null));this.controls.firstChild.childNodes.length>0;)this._removeBar(!1);this.cont.removeChild(this.controls),this.controls=null,t=null},1!=this.conf.buttons&&this.hideControls(),this._checkControls()},window.dhtmlXCarouselCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_carousel"]);var i=this;return this.carousel=e,this.conf.skin=this.carousel.conf.skin,this.attachEvent("_onCellUnload",function(){this.carousel=null,i=null}),this.attachEvent("_onContentLoaded",function(){this.carousel._callMainEvent("onContentLoaded",[this._idd])}),this._showCover=function(){if(1!=this.conf.cover){this._showCellCover();var t=this.cell.childNodes[this.conf.idx.cover];t.onclick=function(){i.carousel._callMainEvent("_cellCoverClick",[i._idd])},t=null}},this._hideCover=function(){1==this.conf.cover&&(this.cell.childNodes[this.conf.idx.cover].onclick=null,this._hideCellCover())},this},dhtmlXCarouselCell.prototype=new dhtmlXCellObject,dhtmlXCarouselCell.prototype.getId=function(){return this._idd},dhtmlXCarouselCell.prototype.getIndex=function(){return this.carousel.cdata[this._idd].index},dhtmlXCarouselCell.prototype.setActive=function(){var t=this.getIndex()-this.carousel.conf.selected;0!=t&&this.carousel._animateStart(t)},dhtmlXCarouselCell.prototype.remove=function(){this.carousel._removeCell(this._idd)},dhtmlXCellObject.prototype.attachCarousel=function(t){this.callEvent("_onBeforeContentAttach",["carousel"]);var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),"function"==typeof window.dhtmlXSideBarCell&&this instanceof window.dhtmlXSideBarCell&&"dhx_terrace"==this.conf.skin&&(e._ofs={t:-1,r:-1,b:-1,l:-1}),void 0!==t&&null!=t||(t={}),void 0===t.skin&&(t.skin=this.conf.skin),t.parent=e,this.dataType="carousel",this.dataObj=new dhtmlXCarousel(t),t.parent=null,e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCarousel.prototype.ef.slide=!0,dhtmlXCarousel.prototype.ef.slide_conf={anim_step:25,anim_timeout:10,anim_slide:"left 0.3s"},dhtmlXCarousel.prototype.ef.slide_f={prepare:"_slide_prepare",start:"_slide_start",end:"_slide_end",update_selected:"_slide_update_selected",detect_x:"_slide_detect_x",detect_aw:"_slide_detect_area_width",cell_added:"_slide_cell_added"},dhtmlXCarousel.prototype._slide_init=function(){return this.ef.slide_conf},dhtmlXCarousel.prototype._slide_f=function(){return this.ef.slide_f},dhtmlXCarousel.prototype._slide_prepare=function(t,e){var i=this.conf.anim_step,n=this.conf.width+this.conf.ofs_item;0==e&&(i=n+1),this.area._init=parseInt(this.area.style.left);var s=this.ind[this.conf.selected+t];this._slide_update_selected(s),!1!==this.conf.transProp&&0!=e?(1!=this.conf.transEvInit&&(this.area.addEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!0),this.conf.current_dir=t,this.area.style[this.conf.transProp]=this.conf.anim_slide,this.area.style.left=this.area._init+n*-t+"px"):this._slide_start(i,0,n,t)},dhtmlXCarousel.prototype._slide_start=function(t,e,i,n){var s=!1;if((e+=t)>=i&&(e=i,s=!0),this.area.style.left=this.area._init+e*-n+"px",1!=s){var o=this;window.setTimeout(function(){o._slide_start(t,e,i,n),o=null},this.conf.anim_timeout)}else this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(n)},dhtmlXCarousel.prototype._slide_end=function(t,e){t.type==this.conf.transEv&&e==this.area&&(this.area.style[this.conf.transProp]="",1==this.conf.transEvInit&&(this.area.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!1),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir))},dhtmlXCarousel.prototype._slide_update_selected=function(t){this.cdata[t].cell._hideCover()},dhtmlXCarousel.prototype._slide_detect_x=function(t){return this.cdata[t].index*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._slide_cell_added=function(t){this.conf.selected!=this.cdata[t].index&&this.cdata[t].cell._showCover(),this.cdata[t].index<=this.conf.selected&&this.conf.items_count>1&&this._animateStart(1,!1)},dhtmlXCarousel.prototype._slide_detect_area_width=function(){return this.conf.items_count},dhtmlXCarousel.prototype.ef.flip=!0,dhtmlXCarousel.prototype.ef.flip_conf={anim_flip:"transform 0.3s ease-out",anim_flip_ang:-87,anim_flip_trstyle:"transform"},dhtmlXCarousel.prototype.ef.flip_f={prepare:"_flip_prepare",start:"_flip_start",end:"_flip_end",update_selected:"_flip_update_selected",detect_x:"_flip_detect_x",detect_aw:"_flip_detect_area_width",cell_added:"_flip_cell_added"},dhtmlXCarousel.prototype._flip_init=function(){var t=0!=this.conf.transProp&&this.ef.flip_conf;return!1!==t&&1==window.dhx4.isKHTML&&null==t.anim_flip.match("webkit")&&(t.anim_flip=t.anim_flip.replace(/transform/,"-webkit-transform"),t.anim_flip_trstyle="webkitTransform"),t},dhtmlXCarousel.prototype._flip_f=function(){return this.ef.flip_f},dhtmlXCarousel.prototype._flip_prepare=function(t){this.conf.flip_data={fromIndex:this.conf.selected,toIndex:this.conf.selected+t,mode:0,dir:t},this._flip_start()},dhtmlXCarousel.prototype._flip_start=function(){var t=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;null==this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className+=" dhxcarousel_area_flip"),1!=t.conf.tr_ev&&(t.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),t.conf.tr_ev=!0),0==this.conf.flip_data.mode?t.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.flip_data.dir>0?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)":(t.cell.style.visibility="visible",t.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"),t.cell.style[this.conf.transProp]=this.conf.anim_flip,t=null},dhtmlXCarousel.prototype._flip_end=function(t,e){if(t.type==this.conf.transEv){var i=this.cdata[this.ind[0==this.conf.flip_data.mode?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;if(e==i.cell)if(i.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),i.conf.tr_ev=!1,0==this.conf.flip_data.mode)i.cell.style[this.conf.transProp]="",i.cell.style.visibility="hidden",this.conf.flip_data.mode=1,this._flip_start();else{for(var n=this.conf.flip_data.dir,s=Math.min(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)+1,o=Math.max(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)-1,l=s;l<=o;l++)this.cdata[this.ind[l]].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.anim_flip_ang*n/Math.abs(n))+"deg)";null!=this.area.className.match(/dhxcarousel_area_flip/)&&(this.area.className=String(this.area.className).replace(/\s{0,}dhxcarousel_area_flip/gi,"")),this.conf.flip_data=null,i.cell.style[this.conf.transProp]="",this._animateEnd(n)}i=null}},dhtmlXCarousel.prototype._flip_update_selected=function(t){},dhtmlXCarousel.prototype._flip_detect_x=function(t){return 0*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._flip_cell_added=function(t){this.conf.selected!=this.cdata[t].index?(this.cdata[t].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.cdata[t].index<this.conf.selected?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)",this.cdata[t].cell.cell.style.visibility="hidden"):this.cdata[t].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"},dhtmlXCarousel.prototype._flip_detect_area_width=function(){return 1},dhtmlXCarousel.prototype.ef.cards=!0,dhtmlXCarousel.prototype.ef.cards_conf={anim_cards:"left 0.3s"},dhtmlXCarousel.prototype.ef.cards_f={prepare:"_cards_prepare",start:"_cards_start",end:"_cards_end",update_selected:"_cards_update_selected",detect_x:"_cards_detect_x",detect_aw:"_cards_detect_area_width",cell_added:"_cards_cell_added"},dhtmlXCarousel.prototype._cards_init=function(){return 0!=this.conf.transProp&&this.ef.cards_conf},dhtmlXCarousel.prototype._cards_f=function(){return this.ef.cards_f},dhtmlXCarousel.prototype._cards_prepare=function(t,e){if(t>0){var i=this.ind[this.conf.selected+t],n=this.cdata[i].cell;this._cards_update_selected(i),1!=n.conf.transEvInit&&(n.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),n.conf.transEvInit=!0),this.conf.current_id=i,this.conf.current_dir=t,n.cell.style[this.conf.transProp]=this.conf.anim_cards,n.cell.style.left=this._cards_detect_x(i,0)+"px",n=null}else{this._cards_adjust_middle(this.conf.selected+t+1,this.conf.selected-1,1);i=this.ind[this.conf.selected];(n=this.cdata[i].cell)._hideCover(),1!=n.conf.transEvInit&&(n.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),n.conf.transEvInit=!0),this.conf.current_id=i,this.conf.current_dir=t,this.cdata[this.ind[this.conf.selected+t]].cell._hideCover(),n.cell.style[this.conf.transProp]=this.conf.anim_cards,n.cell.style.left=this._cards_detect_x(i,1)+"px",n=null}},dhtmlXCarousel.prototype._cards_start=function(t,e,i,n){},dhtmlXCarousel.prototype._cards_end=function(t,e){if(t.type==this.conf.transEv&&null!=this.conf.current_id&&e==this.cdata[this.conf.current_id].cell.cell){var i=this.cdata[this.conf.current_id].cell;i.cell.style[this.conf.transProp]="",1!=i.conf.transEvInit&&(i.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),i.conf.transEvInit=!1),this.conf.current_id=null,this.conf.current_dir>0&&this._cards_adjust_middle(this.conf.selected+1,this.conf.selected+this.conf.current_dir-1,0),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir)}},dhtmlXCarousel.prototype._cards_update_selected=function(t){this.cdata[t].cell._hideCover()},dhtmlXCarousel.prototype._cards_adjust_middle=function(t,e,i){for(var n=t;n<=e;n++){var s=this.ind[n],o=this.cdata[s].cell;o.conf.size.x=this._cards_detect_x(s,i),o.cell.style.left=o.conf.size.x+"px",o=null}};dhtmlXCarousel.prototype._cards_detect_x=function(t,e){void 0!==e&&null!=e||(e=this.cdata[t].index<=this.conf.selected?0:1);return e*(this.conf.width+this.conf.ofs_left+this.conf.ofs_item)+this.conf.ofs_item},dhtmlXCarousel.prototype._cards_cell_added=function(t){this.cdata[t].cell.conf.size.x=this._cards_detect_x(t),this.cdata[t].cell.cell.style.left=this.cdata[t].cell.conf.size.x+"px",this.conf.selected!=this.cdata[t].index&&this.cdata[t].cell._showCover()},dhtmlXCarousel.prototype._cards_detect_area_width=function(){return 2},dhtmlXWindows.prototype.forEachWindow=function(t){for(var e in this.w)t.apply(window,[this.w[e].cell])},dhtmlXWindows.prototype.window=function(t){return null!=this.w[t]?this.w[t].cell:null},dhtmlXWindows.prototype.isWindow=function(t){return null!=this.w[t]},dhtmlXWindows.prototype.findByText=function(t){var e=[];for(var i in this.w)this.w[i].cell.getText().indexOf(String(t))>=0&&e.push(this.w[i]);return e},dhtmlXWindows.prototype.setSkin=function(t){if(t!=this.conf.skin){null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+t));for(var e in this.w)this.w[e].cell._resetSizeState(),this._winAdjustCell(e),this._winAdjustTitle(e);this.conf.skin=t}},dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)},dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)},dhtmlXWindows.prototype._getTopBottomWin=function(t){var e=null;for(var i in this.w)if(this.w[i].conf.visible){var n=!1;null!=e&&(n=e.z>this.w[i].win.style.zIndex,t&&(n=!n)),(null==e||n)&&(e={win:this.w[i].cell,z:this.w[i].win.style.zIndex})}return e?e.win:null},dhtmlXWindows.prototype._winMakeActive=function(t,e){if(null==t||!0===e||1!=this.w[t].conf.actv){for(var i=[],n={},s=0;s<this._zOrder.length;s++){var o=this._zOrder[s].name,l=this._zOrder[s].value,r=[];for(var a in this.w){var h=this.w[a];null==n[a]&&h.conf[o]===l&&1==h.conf.visible&&t!=a&&(window.dhx4.zim.clear(h.conf.z_id),r.push([a,Number(h.win.style.zIndex)]),n[a]=!0),h=null}if(r.sort(function(t,e){return t[1]<e[1]?1:-1}),null!=t&&this.w[t].conf[o]===l&&null==n[t]){window.dhx4.zim.clear(this.w[t].conf.z_id);r=[[t,Number(this.w[t].win.style.zIndex)]].concat(r),n[t]=!0}i=i.concat(r)}for(s=i.length-1;s>=0;s--){a=i[s][0];if((h=this.w[a]).win.style.zIndex=window.dhx4.zim.reserve(h.conf.z_id),h.conf.modal&&null!=this.mcover)for(var d in this.mcover)this.mcover[d].style.zIndex=h.win.style.zIndex;this._winAdjustFRMZIndex(a),null==t&&0==s&&(t=a),h.conf.actv=t==a,h.win.className=h.conf.actv?"dhxwin_active":"dhxwin_inactive",h=null}null!=t&&this.conf.last_active!=t&&this._callMainEvent("onFocus",t),this.conf.last_active=t}},dhtmlXWindows.prototype._zOrder=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}],dhtmlXWindows.prototype._vpPull={},dhtmlXWindows.prototype._vpOf={},dhtmlXWindows.prototype._vpPullAdd=function(){if(null!=this.vp){var t=null;for(var e in this._vpPull)this._vpPull[e].vp==this.vp&&(this._vpPull[e].count++,t=e);null==t&&(this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1}),this.vp==document.body&&1==this.conf.vp_of_auto&&this._vpOfInit(),this._vpOfUpd()}},dhtmlXWindows.prototype._vpPullRemove=function(){if(null==this.vp)return 0;var t=0;for(var e in this._vpPull)this._vpPull[e].vp==this.vp&&0==(t=--this._vpPull[e].count)&&(this._vpPull[e].vp=null,this._vpPull[e].count=null,delete this._vpPull[e]);return this._vpOfClear(),t},dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=!0},dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=!1,delete this._vpOf[this.conf.vp_of_id],this._vpOfUpd()},dhtmlXWindows.prototype._vpOfUpd=function(){var t=!1;for(var e in this._vpOf)t=t||this._vpOf[e];1==t?null==document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className+=" dhxwins_vp_auto"):null!=document.body.className.match(/dhxwins_vp_auto/)&&(document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,""))},dhtmlXWindows.prototype.attachViewportTo=function(t){var e=this._vpPullRemove();if(this.conf.vp_custom){for(;this.vp.childNodes.length>0;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp),this.vp=null}else null!=this.vp&&0==e&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==t)this.vp=null;else{this.vp="string"==typeof t?document.getElementById(t):t;var i="dhxwins_vp_"+this.conf.skin;this.vp.className.indexOf(i)<0&&(this.vp.className+=" "+i),t=null;for(var n in this.w)this.vp.appendChild(this.w[n].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static"),this._vpPullAdd()},dhtmlXWindows.prototype.setViewport=function(t,e,i,n,s){var o=document.createElement("DIV");o.style.position="absolute",o.style.left=t+"px",o.style.top=e+"px",o.style.width=i+"px",o.style.height=n+"px",void 0===s||null==s?s=document.body:"string"==typeof s&&(s=document.getElementById(s)),s.appendChild(o),this.attachViewportTo(o),this.conf.vp_custom=!0,s=o=null},dhtmlXWindows.prototype._winSetPosition=function(t,e,i){var n=this.w[t];n.conf.maxed&&(n.conf.lastMX+=e-n.conf.x,n.conf.lastMY+=i-n.conf.y),n.conf.x=e,n.conf.y=i,n.win.style.left=n.conf.x+"px",n.win.style.top=n.conf.y+"px",this._winAdjustFRMPosition(t),n=null},dhtmlXWindows.prototype._winAdjustPosition=function(t,e,i){var n=this.w[t];void 0===e&&(e=n.conf.x),void 0===i&&(i=n.conf.y);var s=n.conf.keep_in_vp?0:-n.conf.w+this.conf.vp_pos_ofs,o=n.conf.keep_in_vp?this.vp.clientWidth-n.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;e<s?e=s:e>o&&(e=o);var l=n.conf.keep_in_vp?this.vp.clientHeight-n.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;i<0?i=0:i>l&&(i=l),e==n.conf.x&&i==n.conf.y||this._winSetPosition(t,e,i),n=null},dhtmlXWindows.prototype._winSetSize=function(t,e,i,n,s){var o=this.w[t],l=null!=e?e:o.conf.w,r=null!=i?i:o.conf.h;null==this.conf.ofs_w&&(o.win.style.width=l+"px",o.win.style.height=r+"px",this.conf.ofs_w=o.win.offsetWidth-l,this.conf.ofs_h=o.win.offsetHeight-r),null!=o.conf.min_w&&l<o.conf.min_w&&(l=o.conf.min_w),null!=o.conf.max_w&&l>o.conf.max_w&&(l=o.conf.max_w),!o.conf.parked&&null!=o.conf.min_h&&r<o.conf.min_h&&(r=o.conf.min_h),null!=o.conf.max_h&&r>o.conf.max_h&&(r=o.conf.max_h),o.conf.keep_in_vp&&(l>this.vp.clientWidth&&(l=this.vp.clientWidth),r>this.vp.clientHeight&&(r=this.vp.clientHeight)),o.win.style.width=l-this.conf.ofs_w+"px",o.win.style.height=r-this.conf.ofs_h+"px",o.conf.w=l,o.conf.h=r,this._winAdjustFRMSize(t),s&&this._winAdjustPosition(t,o.conf.x,o.conf.y),o.conf.parked||1==n||this._winAdjustCell(t),o=null},dhtmlXWindows.prototype._winMinmax=function(t,e){if((void 0===e||this.w[t].conf.maxed!=e)&&0!=this.w[t].conf.allow_resize){var i=this.w[t];if(i.conf.parked&&this._winPark(t,!1),i.conf.maxed)this._winSetSize(t,i.conf.lastMW,i.conf.lastMH),this._winAdjustPosition(t,i.conf.lastMX,i.conf.lastMY),i.conf.maxed=!1;else{var n=0,s=0;null!=i.conf.max_w&&(n=i.conf.x+Math.round(i.conf.w-i.conf.max_w)/2),null!=i.conf.max_h&&(s=Math.max(i.conf.y+Math.round(i.conf.h-i.conf.max_h)/2,0)),i.conf.lastMX=i.conf.x,i.conf.lastMY=i.conf.y,i.conf.lastMW=i.conf.w,i.conf.lastMH=i.conf.h,this._winSetSize(t,this.vp.clientWidth,this.vp.clientHeight),this._winAdjustPosition(t,n,s),i.conf.maxed=!0}i.b.minmax.setCss(i.conf.maxed?"minmaxed":"minmax"),i.conf.maxed?this._callMainEvent("onMaximize",t):this._callMainEvent("onMinimize",t),i=null}},dhtmlXWindows.prototype._winShow=function(t,e){1!=this.w[t].conf.visible&&(this.w[t].win.style.display="",this.w[t].conf.visible=!0,1!=e&&null!=this.conf.last_active||this._winMakeActive(t,!0),this._callMainEvent("onShow",t))},dhtmlXWindows.prototype._winHide=function(t,e){0!=this.w[t].conf.visible&&(this.w[t].win.style.display="none",this.w[t].conf.visible=!1,this.w[t].conf.actv&&(this.w[t].conf.actv=!1,this.w[t].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",t))},dhtmlXWindows.prototype._winPark=function(t,e){if(0!=this.w[t].conf.allow_park&&0!=this.w[t].conf.header){var i=this.w[t];1==e&&!1!==this.conf.tr.prop&&(i.win.style[this.conf.tr.prop]=this.conf.tr[i.conf.parked?"height_open":"height_close"],i.conf.tr_ev||(i.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),i.conf.tr_ev=!0)),i.conf.parked?(i.hdr.className=String(i.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,""),i.hdr.style.zIndex=0,i.conf.parked=!1,i.conf.tr_mode="park",this._winCellSetOpacity(t,"open",e),this._winSetSize(t,i.conf.w,i.conf.lastPH,1==e&&!1!==this.conf.tr.prop),1==e&&!1!==this.conf.tr.prop||(this._callMainEvent("onParkDown",t),i.conf.keep_in_vp&&this._winAdjustPosition(t,i.conf.x,i.conf.y)),1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null!=i.cell.cell.className.match(/dhxwin_parked/)&&(i.cell.cell.className=i.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,""))):(i.conf.lastPH=i.conf.h,i.hdr.className+=" dhxwin_hdr_parked",0!=e&&0!=this.conf.tr.prop||(i.hdr.style.zIndex=3),i.conf.parked=!0,i.conf.tr_mode="park",this._winCellSetOpacity(t,"close",e),this._winSetSize(t,i.conf.w,i.hdr.offsetHeight+this.conf.ofs_h,1==e&&!1!==this.conf.tr.prop),1==e&&!1!==this.conf.tr.prop||this._callMainEvent("onParkUp",t),1==window.dhx4.isIE8&&0==this.conf.tr.prop&&null==i.cell.cell.className.match(/dhxwin_parked/)&&(i.cell.cell.className+=" dhxwin_parked")),i=null}},dhtmlXWindows.prototype._winCellSetOpacity=function(t,e,i,n){var s=this.w[t].cell;for(var o in s.conf.idx)1!={pr1:!0,pr2:!0}[o]&&(1==i&&0!=this.conf.tr.prop&&(s.cell.childNodes[s.conf.idx[o]].style[this.conf.tr.prop]=this.conf.tr["op_"+e]),s.cell.childNodes[s.conf.idx[o]].style.opacity=this.conf.tr["op_v_"+e]);s=null},dhtmlXWindows.prototype._winCellClearOpacity=function(t){var e=this.w[t].cell;for(var i in e.conf.idx)1!={pr1:!0,pr2:!0}[i]&&0!=this.conf.tr.prop&&(e.cell.childNodes[e.conf.idx[i]].style[this.conf.tr.prop]="");e=null},dhtmlXWindows.prototype._winStick=function(t,e){void 0!==e&&this.w[t].conf.sticked==e||(this.w[t].conf.sticked=!this.w[t].conf.sticked,this.w[t].b.stick.setCss(this.w[t].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[t].conf.sticked?this._callMainEvent("onStick",t):this._callMainEvent("onUnStick",t))},dhtmlXWindows.prototype._winClose=function(t){if(!0===this._callMainEvent("onClose",t)||1==this.conf.unloading){var e=this.w[t];e.conf.fs_mode&&e.cell.setToFullScreen(!1),e.conf.modal&&this._winSetModal(t,!1),window.dhx4.zim.clear(e.conf.z_id),null!=this.cm&&null!=this.cm.icon[t]&&this._detachContextMenu("icon",t,null),"function"==typeof window.addEventListener?(e.win.removeEventListener("mousedown",this._winOnMouseDown,!1),e.win.removeEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&e.win.removeEventListener("dblclick",this._winOnMouseDown,!1),1==this.conf.dnd_enabled&&null!=window.dhx4.dnd.evs.start&&(e.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),1!=window.dhx4.dnd.p_en&&(e.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),e.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(e.win.detachEvent("onmousedown",this._winOnMouseDown),e.win.detachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&e.win.attachEvent("ondblclick",this._winOnMouseDown));for(var i in e.b)this._winRemoveButton(t,i,!0);e.b=null,e.cell._unload(),e.cell=null,e.brd.parentNode.removeChild(e.brd),e.brd=null,null!=e.fr_cover&&(e.fr_cover.parentNode.removeChild(e.fr_cover),e.fr_cover=null),null!=e.fr_m_cover&&(e.fr_m_cover.parentNode.removeChild(e.fr_m_cover),e.fr_m_cover=null),e.hdr._isWinHdr=!0,e.hdr.firstChild._isWinIcon=!0,e.hdr.onselectstart=null,e.hdr.parentNode.removeChild(e.hdr),e.hdr=null;for(var i in e.conf)e.conf[i]=null,delete e.conf[i];e.conf=null,e.win._idd=null,e.win._isWindow=null,e.win.parentNode.removeChild(e.win),e.win=null,e=null,this.w[t]=null,delete this.w[t],this.conf.unloading||this._winMakeActive(null,!0)}},dhtmlXWindows.prototype._winSetModal=function(t,e,i){if(this.w[t].conf.modal!=e){void 0===i&&(i=!0);var n=this.w[t];if(1==e&&0==n.conf.modal){if(null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover){var s=document.createElement("DIV");s.className="dhxwins_mcover",this.vp.insertBefore(s,n.fr_m_cover||n.win),this.mcover={d:s},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,s)),s=null}else this.mcover.d.nextSibling!=(n.fr_m_cover||n.win)&&(this.vp.insertBefore(this.mcover.d,n.fr_m_cover||n.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d));n.conf.modal=!0,this.conf.last_modal=t,this._winMakeActive(t,!0)}else if(0==e&&1==n.conf.modal&&(n.conf.modal=!1,this.conf.last_modal=null,i&&null!=this.mcover)){for(var o in this.mcover)this.vp.removeChild(this.mcover[o]),this.mcover[o]=null;this.mcover=null}n=null}},dhtmlXWindows.prototype._winMouseDownHandler=function(t,e){var i=t.target||t.srcElement;if(!(t.button>=2)){if("button"==e.mode)if("mousedown"==e.press_type)this.conf.button_last=e.button_name;else if(("mouseup"==e.press_type&&e.button_name==this.conf.button_last||"MSPointerDown"==e.press_type||"pointerdown"==e.press_type)&&(this.conf.button_last=null,!0!==this._winButtonClick(e.id,e.button_name,t)))return;if(("pointerdown"==e.press_type||"mousedown"==e.press_type||"dblclick"==e.press_type)&&"hdr"==e.mode){if(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev)"dblclick"==e.press_type&&(this.conf.dblclick_active=!0);else if(null==this.conf.dblclick_last)this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=e.id;else{i=(new Date).getTime();this.conf.dblclick_last+this.conf.dblclick_tm>i&&this.dblclick_id==e.id?(this.conf.dblclick_active=!0,this.conf.dblclick_last=null,this.dblclick_id=null):(this.conf.dblclick_last=i,this.dblclick_id=e.id)}if(this.conf.dblclick_active)return void this._winDoHeaderDblClick(e.id)}"mousedown"!=e.press_type&&e.press_type!=window.dhx4.dnd.evs.start||this._winMakeActive(e.id),e.press_type}},dhtmlXWindows.prototype._winDoHeaderDblClick=function(t){"minmax"!=this.conf.dblclick_mode?"park"!=this.conf.dblclick_mode?"function"!=typeof this.conf.dblclick_mode?"function"!=typeof window[this.conf.dblclick_mode]||window[this.conf.dblclick_mode].apply(window,[t]):this.conf.dblclick_mode.apply(window,[t]):this._winPark(t,!0):this._winMinmax(t)},dhtmlXWindows.prototype._winAdjustCell=function(t){var e=this.w[t];if("material"==this.conf.skin)var i=0,n=e.conf.header?e.hdr.offsetHeight:1,s=e.win.clientWidth,o=e.win.clientHeight-n;else i=1,n=e.conf.header?e.hdr.offsetHeight:1,s=e.win.clientWidth-2,o=e.win.clientHeight-n-1;e.brd.style.left=i+"px",e.brd.style.top=n+"px",null==e.conf.brd&&(e.brd.style.width=s+"px",e.brd.style.height=o+"px",e.conf.brd={w:s-e.brd.offsetWidth,h:o-e.brd.offsetHeight}),e.brd.style.width=s+e.conf.brd.w+"px",e.brd.style.height=o+e.conf.brd.h+"px";var l=5;"material"==this.conf.skin&&(l=1);var r=1+l,a=e.conf.header?n:n+l,h=e.brd.clientWidth,d=e.brd.clientHeight;e.cell._setSize(r,a,h,d),e.fr_cover.style.left=r+"px",e.fr_cover.style.top=a+"px",e.fr_cover.style.width=h+"px",e.fr_cover.style.height=d+"px",e=null},dhtmlXWindows.prototype._winAdjustTitle=function(t){var e=this.w[t].hdr.childNodes[0],i=this.w[t].hdr.childNodes[1],n=this.w[t].hdr.childNodes[2],s="material"==this.conf.skin?7:0;i.style.paddingLeft=e.offsetWidth+12+s+"px",i.style.paddingRight=n.offsetWidth+10+s+"px",i=n=e=null},dhtmlXWindows.prototype._callMainEvent=function(t,e){var i=this.w[e];if(i.cell.checkEvent(t))var n=i.cell._callMainEvent(t,[i.cell]);else n=this.callEvent(t,[i.cell]);return i=null,n},dhtmlXWindows.prototype._winInitFRM=function(t){if(1==this.conf.fr_cover){var e=this.w[t],i=document.createElement("IFRAME");i.className="dhxwin_main_fr_cover",i.border=0,i.frameBorder=0,i.style.zIndex=e.win.style.zIndex,e.win.parentNode.insertBefore(i,e.win),e.fr_m_cover=i,i=null}},dhtmlXWindows.prototype._winAdjustFRMSize=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.width=e.conf.w+"px",e.fr_m_cover.style.height=e.conf.h+"px"),e=null},dhtmlXWindows.prototype._winAdjustFRMPosition=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.left=e.win.style.left,e.fr_m_cover.style.top=e.win.style.top),e=null},dhtmlXWindows.prototype._winAdjustFRMZIndex=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.zIndex=e.win.style.zIndex),e=null},dhtmlXWindowsCell.prototype=new dhtmlXCellObject,dhtmlXWindowsCell.prototype.setText=function(t){this.wins.w[this._idd].conf.text=t,this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=t},dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text},dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0},dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1},dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move},dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0,this.wins.w[this._idd].b.minmax.enable()},dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1,this.wins.w[this._idd].b.minmax.disable()},dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize},dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)},dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)},dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed},dhtmlXWindowsCell.prototype.setPosition=function(t,e){this.wins._winSetPosition(this._idd,t,e)},dhtmlXWindowsCell.prototype.getPosition=function(){var t=this.wins.w[this._idd],e=[t.conf.x,t.conf.y];return t=null,e},dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)},dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)},dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked},dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0,this.wins.w[this._idd].b.park.enable()},dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1,this.wins.w[this._idd].b.park.disable()},dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park},dhtmlXWindowsCell.prototype.show=function(t){this.wins._winShow(this._idd,window.dhx4.s2b(t))},dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)},dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible},dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)},dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)},dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked},dhtmlXWindowsCell.prototype.setDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.parked&&this.wins._winPark(this._idd,!1),i.conf.maxed?(null!=t&&(i.conf.lastMW=t),null!=e&&(i.conf.lastMH=e),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,t,e,!1,!0),i=null},dhtmlXWindowsCell.prototype.getDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.w,t.conf.h];return t=null,e},dhtmlXWindowsCell.prototype.setMinDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.min_w=t,i.conf.min_h=e,this.wins._winSetSize(this._idd,i.conf.w,i.conf.h),i=null},dhtmlXWindowsCell.prototype.getMinDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.min_w,t.conf.min_h];return t=null,e},dhtmlXWindowsCell.prototype.setMaxDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.max_w=t,i.conf.max_h=e,this.wins._winSetSize(this._idd,i.conf.w,i.conf.h),i=null},dhtmlXWindowsCell.prototype.getMaxDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.max_w,t.conf.max_h];return t=null,e},dhtmlXWindowsCell.prototype.keepInViewport=function(t){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(t)},dhtmlXWindowsCell.prototype.center=function(){var t=this.wins.vp,e=this.wins.w[this._idd],i=Math.round((t.clientWidth-e.conf.w)/2),n=Math.round((t.clientHeight-e.conf.h)/2);this.wins._winSetPosition(this._idd,i,n),t=e=null},dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var t=this.wins.w[this._idd],e=window.dhx4.screenDim(),i=window.dhx4.absLeft(this.wins.vp),n=window.dhx4.absTop(this.wins.vp),s=this.wins.vp.parentNode;null!=s;)s.scrollLeft&&(i-=s.scrollLeft),s.scrollTop&&(n-=s.scrollTop),s=s.parentNode;var o=Math.round((e.right-e.left-t.conf.w)/2),l=Math.round((e.bottom-e.top-t.conf.h)/2);this.wins._winAdjustPosition(this._idd,o-i,l-n),d=t=null},dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)},dhtmlXWindowsCell.prototype.bringToBottom=function(){var t=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id),this.wins.w[this._idd].win.style.zIndex=0,this.wins._winMakeActive(t,!0)},dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv},dhtmlXWindowsCell.prototype.isOnBottom=function(){var t={id:null,z:1/0};for(var e in this.wins.w)this.wins.w[e].conf.visible&&this.wins.w[e].win.style.zIndex<t.z&&(t.id=e,t.z=this.wins.w[e].win.style.zIndex);return t.id==this._idd},dhtmlXWindowsCell.prototype.showHeader=function(){var t=this.wins.w[this._idd];0==t.conf.header&&(t.hdr.className=String(t.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),t.brd.className=String(t.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,t.conf.brd=null,t.conf.header=!0,this.wins._winAdjustCell(this._idd)),t=null},dhtmlXWindowsCell.prototype.hideHeader=function(){var t=this.wins.w[this._idd];1==t.conf.header&&(t.conf.parked&&this.wins._winPark(this._idd,!1),t.hdr.className+=" dhxwin_hdr_hidden",t.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,t.conf.brd=null,t.conf.header=!1,this.wins._winAdjustCell(this._idd)),t=null},dhtmlXWindowsCell.prototype.setModal=function(t){this.wins._winSetModal(this._idd,window.dhx4.s2b(t))},dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal},dhtmlXWindowsCell.prototype._adjustByCont=function(t,e){t+=this.wins.w[this._idd].conf.w-this.conf.size.w,e+=this.wins.w[this._idd].conf.h-this.conf.size.h,this.wins._winSetSize(this._idd,t,e)},dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)},dhtmlXWindowsCell.prototype.setIconCss=function(t){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+t,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.setToFullScreen=function(t){t=window.dhx4.s2b(t);var e=this.wins.w[this._idd];e.conf.fs_mode!=t?(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),t?(this.wins.fsn.appendChild(e.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(e.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null)),e.conf.fs_mode=t,e=null):e=null},dhtmlXWindowsCell.prototype.button=function(t){return"minmax1"!=t&&"minmax2"!=t||(t="minmax"),this.wins.w[this._idd].b[t]},dhtmlXWindowsCell.prototype.addUserButton=function(t,e,i){var n=new dhtmlXWindowsButton(this.wins,this._idd,t,i,!0),s=null,o=this.wins.w[this._idd].hdr.lastChild;isNaN(e)?e=0:e<0&&(e=0),null!=o.childNodes[e]&&(s=o.childNodes[e]),null!=s?o.insertBefore(n.button,s):o.appendChild(n.button),this.wins.w[this._idd].b[t]=n,n=s=o=null,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.removeUserButton=function(t){null!=this.wins.w[this._idd].b[t]&&1==this.wins.w[this._idd].b[t].conf.custom&&this.wins._winRemoveButton(this._idd,t)},window.dhtmlXWindowsButton=function(t,e,i,n,s){return this.conf={wins:t,winId:e,name:i,enabled:!0,visible:!0,custom:!0},this.button=document.createElement("DIV"),this.button._buttonName=i,this.button.title=n,this.enable=function(){this.conf.enabled=!0,this.setCss(this.conf.css)},this.disable=function(){this.conf.enabled=!1,this.setCss(this.conf.css)},this.isEnabled=function(){return 1==this.conf.enabled},this.show=function(){this.button.style.display="",this.conf.visible=!0,this.conf.wins._winAdjustTitle(this.conf.winId)},this.hide=function(){this.button.style.display="none",this.conf.visible=!1,this.conf.wins._winAdjustTitle(this.conf.winId)},this.isHidden=function(){return 0==this.conf.visible},this.setCss=function(t){this.conf.css=t;var e=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+e+" dhxwin_button_"+this.conf.css+e},this._doOnClick=function(t){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])},this.unload=function(t){dhx4._eventable(this,"clear"),this.button._buttonName=null,this.button.parentNode.removeChild(this.button),null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name),this.button=null,this.enable=null,this.disable=null,this.isEnabled=null,this.show=null,this.hide=null,this.isHidden=null,this.setCss=null,this.unload=null,1!=t&&this.conf.wins._winAdjustTitle(this.conf.winId),this.conf.wins=null,this.conf.winId=null,this.conf=null},this.setCss(i),dhx4._eventable(this),this},dhtmlXWindows.prototype._winButtonClick=function(t,e,i){if(!this.w[t].b[e].isEnabled())return!0;if(!0===this.w[t].b[e]._doOnClick())return"help"==e&&this._callMainEvent("onHelp",t),"park"==e&&this._winPark(t,!0),"minmax"==e&&this._winMinmax(t),"stick"==e?(this._winStick(t),!1):"close"!=e||(this._winClose(t),!1)},dhtmlXWindows.prototype._winRemoveButton=function(t,e,i){this.w[t].b[e].unload(i),this.w[t].b[e]=null,delete this.w[t].b[e]},dhtmlXWindows.prototype._dndInitModule=function(){var t=this;this.conf.dnd_enabled=!0,this.conf.dnd_tm=null,this.conf.dnd_time=0,this._dndOnMouseDown=function(e,i){if(!t.conf.dblclick_active&&(e.preventDefault?e.preventDefault():e.returnValue=!1,!0===t._callMainEvent("onBeforeMoveStart",i))){t.conf.dnd={id:i,x:t._dndPos(e,"X"),y:t._dndPos(e,"Y"),ready:!0,css:!1,css_touch:!1,css_vp:!1,tr:null,mode:"def",moved:!1,prevent:!1},t.w[i].conf.keep_in_vp?(t.conf.dnd.minX=0,t.conf.dnd.maxX=t.vp.clientWidth-t.w[i].conf.w,t.conf.dnd.minY=0,t.conf.dnd.maxY=t.vp.clientHeight-t.w[i].conf.h):(t.conf.dnd.minX=-t.w[i].conf.w+t.conf.vp_pos_ofs,t.conf.dnd.maxX=t.vp.clientWidth-t.conf.vp_pos_ofs,t.conf.dnd.minY=0,t.conf.dnd.maxY=t.vp.clientHeight-t.conf.vp_pos_ofs);for(var n=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],s=0;s<n.length;s++)null!=document.documentElement.style[n[s]]&&null==t.conf.dnd.tr&&(t.conf.dnd.tr=n[s],t.conf.dnd.mode="tr");"tr"==t.conf.dnd.mode&&(t.w[i].win.style[t.conf.dnd.tr]="translate(0px,0px)",null!=t.w[i].fr_m_cover&&(t.w[i].fr_m_cover.style[t.conf.dnd.tr]=t.w[i].win.style[t.conf.dnd.tr])),0==window.dhx4.dnd._mTouch(e)&&e.type==window.dhx4.dnd.evs.start?(0==t.conf.dnd.css_touch&&(t.w[i].win.className+=" dhxwin_dnd_touch",t.conf.dnd.css_touch=!0),0==t.conf.dnd.css_vp&&(t.vp.className+=" dhxwins_vp_dnd",t.conf.dnd.css_vp=!0)):t._dndInitEvents()}},this._dndOnMouseMove=function(e){e=e||event;var i=t.conf.dnd,n=t._dndPos(e,"X")-i.x,s=t._dndPos(e,"Y")-i.y;if(e.type==window.dhx4.dnd.evs.move&&1!=i.moved&&(Math.abs(n)>20||Math.abs(s)>20))return null!=t.conf.dnd_tm&&(window.clearTimeout(t.conf.dnd_tm),t.conf.dnd_tm=null),void window.removeEventListener(window.dhx4.dnd.evs.start,t._dndOnMouseMove,!1);if(1==i.ready){var o=t.w[i.id];e.preventDefault?e.preventDefault():e.returnValue=!1,1!=i.css&&(0==i.css_touch&&(o.win.className+=" dhxwin_dnd"),o.fr_cover.className+=" dhxwin_fr_cover_dnd",i.css=!0),1!=i.css_vp&&(t.vp.className+=" dhxwins_vp_dnd",i.css_vp=!0),i.newX=o.conf.x+n,i.newY=o.conf.y+s,"tr"==i.mode?(i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX),n=i.newX-o.conf.x,i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY),s=i.newY-o.conf.y,o.win.style[i.tr]="translate("+n+"px,"+s+"px)",null!=o.fr_m_cover&&(o.fr_m_cover.style[i.tr]=o.win.style[i.tr])):(i.newX<i.minX||i.newX>i.maxX?i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX):i.x=t._dndPos(e,"X"),i.newY<i.minY||i.newY>i.maxY?i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY):i.y=t._dndPos(e,"Y"),t._winSetPosition(i.id,i.newX,i.newY)),i.moved=!0,o=i=null}},this._dndOnMouseUp=function(e){if(e=e||event,t._dndUnloadEvents(),null!=t.conf.dnd&&null!=t.conf.dnd.id){var i=t.conf.dnd,n=t.w[i.id];null!=i.newX&&"tr"==i.mode&&(t._winSetPosition(i.id,i.newX,i.newY),n.win.style[i.tr]="translate(0px,0px)",null!=n.fr_m_cover&&(n.fr_m_cover.style[i.tr]=n.win.style[i.tr])),1==i.css&&(0==i.css_touch&&(n.win.className=String(n.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")),n.fr_cover.className=String(n.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,"")),1==i.css_touch&&(n.win.className=String(n.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,"")),1==i.css_vp&&(t.vp.className=String(t.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")),1==i.moved?t._callMainEvent("onMoveFinish",i.id):t._callMainEvent("onMoveCancel",i.id),n=i=t.conf.dnd=null}1==window.dhx4.dnd.p_en&&e.type==window.dhx4.dnd.evs.end&&(window.dhx4.dnd._touchOn(),window.removeEventListener(window.dhx4.dnd.evs.end,t._dndOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,t._dndOnMouseMove,!1),null!=t.conf.dnd_tm&&window.clearTimeout(t.conf.dnd_tm),t.conf.dnd_tm=null)},this._dndOnSelectStart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid),this.conf.dnd_evid=null,this._dndOnMouseDown=null,this._dndOnMouseMove=null,this._dndOnMouseUp=null,this._dndOnSelectStart=null,this._dndInitEvents=null,this._dndUnloadEvents=null,this._dndInitModule=null,this._dndUnloadModule=null,t=null},this._dndPos=function(t,e){var i=t[this.conf.dnd_ev_prefix+e];return null!=i&&0!=i||null==t.touches||(i=t.touches[0][this.conf.dnd_ev_prefix+e]),i},this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(e,i){if(null!=this.w[i.id]&&1==this.w[i.id].conf.allow_move&&!(void 0!==e.button&&e.button>=2)){if(e.type==window.dhx4.dnd.evs.start){if("hdr"==i.mode){if(this.w[i.id].conf.maxed&&null==this.w[i.id].conf.max_w&&null==this.w[i.id].conf.max_h)return;this.conf.dnd_ev_prefix="page",this.conf.dnd={x:this._dndPos(e,"X"),y:this._dndPos(e,"Y")},this.conf.dnd_time<1?this._dndOnMouseDown(e,i.id):(null!=this.conf.dnd_tm&&window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=window.setTimeout(function(){t._dndOnMouseDown(e,i.id)},this.conf.dnd_time)),1==window.dhx4.dnd.p_en&&(window.dhx4.dnd._touchOff(),window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,!1)),window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1)}return!1}if(e.type==window.dhx4.dnd.evs.end)return null!=this.conf.dnd_tm&&(window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=null),this._dndOnMouseUp(e),window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1),!1;if(this.conf.dnd_ev_prefix="client","hdr"==i.mode&&"mousedown"==e.type&&(!this.w[i.id].conf.maxed||null!=this.w[i.id].conf.max_w||null!=this.w[i.id].conf.max_h))return e.preventDefault?e.preventDefault():e.returnValue=!1,this._dndOnMouseDown(e,i.id),!1}})},dhtmlXWindowsCell.prototype._initResize=function(){var t=this,e=navigator.userAgent;this.conf.resize={b_width:6,c_type:e.indexOf("MSIE 10.0")>0||e.indexOf("MSIE 9.0")>0||e.indexOf("MSIE 8.0")>0||e.indexOf("MSIE 7.0")>0||e.indexOf("MSIE 6.0")>0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&void 0===window.addEventListener?1:0},this._rOnCellMouseMove=function(e){if(1==t.wins.conf.resize_actv||0==t.wins.w[t._idd].conf.allow_resize||1==t.conf.progress||1==t.wins.w[t._idd].conf.maxed||1==t.wins.w[t._idd].conf.fs_mode){var i=t.wins.w[t._idd].brd;return"default"!=i.style.cursor&&(i.style.cursor="default"),void(i=null)}e=e||event;var n=t.wins.w[t._idd].brd,s=t.conf.resize,o=0==t.wins.w[t._idd].conf.header,l=e.clientX,r=e.clientY;l+=document.documentElement.scrollLeft||document.body.scrollLeft||0,r+=document.documentElement.scrollTop||document.body.scrollTop||0;var a=window.dhx4.absLeft(n),h=window.dhx4.absTop(n),d="";l<=a+s.b_width?d="w":l>=a+n.offsetWidth-s.b_width&&(d="e"),r>=h+n.offsetHeight-s.b_width?d="s"+d:o&&r<=h+s.b_width&&(d="n"+d),""==d&&(d=!1),s.mode!=d&&(s.mode=d,n.style.cursor=0==d?"default":d+"-resize"),n=s=null},this._rOnCellMouseDown=function(e){if((void 0===(e=e||event).button||e.button==t.conf.resize.btn_left)&&0!=t.conf.resize.mode&&1!=t.conf.progress&&0!=t.wins.w[t._idd].conf.allow_resize&&1!=t.wins.w[t._idd].conf.fs_mode&&(e.preventDefault?e.preventDefault():e.returnValue=!1,!0===t.wins._callMainEvent("onBeforeResizeStart",t._idd))){var i=t.wins.w[t._idd],n=t.conf.resize;if(t.wins.conf.resize_actv=!0,n.min_w=i.conf.min_w,n.min_h=i.conf.min_h,n.max_w=i.conf.max_w||1/0,n.max_h=i.conf.max_h||1/0,"layout"==i.cell.dataType&&null!=i.cell.dataObj&&"function"==typeof i.cell.dataObj._getWindowMinDimension){var s=i.cell.dataObj._getWindowMinDimension(i.cell);n.min_w=Math.max(s.w,n.min_w),n.min_h=Math.max(s.h,n.min_h)}n.vp_l=t.wins.conf.vp_pos_ofs,n.vp_r=t.wins.vp.clientWidth-t.wins.conf.vp_pos_ofs,n.vp_b=t.wins.vp.clientHeight-t.wins.conf.vp_pos_ofs,n.x=e.clientX,n.y=e.clientY,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",t._rOnWinMouseMove,!1),window.addEventListener("mouseup",t._rOnWinMouseUp,!1),window.addEventListener("selectstart",t._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",t._rOnWinMouseMove),document.body.attachEvent("onmouseup",t._rOnWinMouseUp),document.body.attachEvent("onselectstart",t._rOnSelectStart)),n.resized=!1,n.vp_cursor=t.wins.vp.style.cursor,t.wins.vp.style.cursor=n.mode+"-resize",i=n=null}},this._rOnCellContextMenu=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this._rOnWinMouseMove=function(e){e=e||event;var i=t.wins.w[t._idd],n=t.conf.resize;n.resized||(i.fr_cover.className+=" dhxwin_fr_cover_resize",n.resized=!0);var s=e.clientX-n.x,o=e.clientY-n.y;n.mode.indexOf("e")>=0?(n.rw=Math.min(Math.max(i.conf.w+s,n.min_w),n.max_w),n.rx=null,i.conf.x+n.rw<n.vp_l?n.rw=n.vp_l-i.conf.x:i.conf.x+n.rw>t.wins.vp.clientWidth&&(n.rw=t.wins.vp.clientWidth-i.conf.x)):n.mode.indexOf("w")>=0&&(n.rw=Math.min(Math.max(i.conf.w-s,n.min_w),n.max_w),n.rx=i.conf.x+i.conf.w-n.rw,n.rx<0?(n.rw=n.rw+n.rx,n.rx=0):n.rx>n.vp_r&&(n.rw=n.rw-n.vp_r,n.rx=n.vp_r)),n.mode.indexOf("s")>=0?(n.rh=Math.min(Math.max(i.conf.h+o,n.min_h),n.max_h),n.ry=null,i.conf.y+n.rh>t.wins.vp.clientHeight&&(n.rh=t.wins.vp.clientHeight-i.conf.y)):n.mode.indexOf("n")>=0&&(n.rh=Math.min(Math.max(i.conf.h-o,n.min_h),n.max_h),n.ry=i.conf.y+i.conf.h-n.rh,n.ry<0?(n.rh=n.rh+n.ry,n.ry=0):n.ry>n.vp_b&&(n.rh=n.rh-n.vp_b,n.ry=n.vp_b)),t._rAdjustSizer(),i=n=null},this._rOnWinMouseUp=function(){var e=t.conf.resize,i=t.wins.w[t._idd];t.wins.conf.resize_actv=!1,t.wins.vp.style.cursor=e.vp_cursor,i.fr_cover.className=String(i.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,""),e.resized&&(t.wins._winSetSize(t._idd,e.rw,e.rh),null==e.rx&&(e.rx=i.conf.x),null==e.ry&&(e.ry=i.conf.y),e.rx==i.conf.x&&e.ry==i.conf.y||t.wins._winSetPosition(t._idd,e.rx,e.ry)),null!=e.obj&&(e.obj.parentNode.removeChild(e.obj),e.obj=null),null!=e.objFR&&(e.objFR.parentNode.removeChild(e.objFR),e.objFR=null),"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",t._rOnWinMouseMove,!1),window.removeEventListener("mouseup",t._rOnWinMouseUp,!1),window.removeEventListener("selectstart",t._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",t._rOnWinMouseMove),document.body.detachEvent("onmouseup",t._rOnWinMouseUp),document.body.detachEvent("onselectstart",t._rOnSelectStart)),1==e.resized?("layout"==t.dataType&&null!=t.dataObj&&t.dataObj.callEvent("onResize",[]),t.wins._callMainEvent("onResizeFinish",t._idd)):t.wins._callMainEvent("onResizeCancel",t._idd),e.mode="",i=e=null},this._rOnSelectStart=function(t){return(t=t||event).preventDefault?t.preventDefault():t.returnValue=!1,!1},this._rInitSizer=function(){var e=t.conf.resize,i=t.wins.w[t._idd];e.obj=document.createElement("DIV"),e.obj.className="dhxwin_resize",e.obj.style.zIndex=i.win.style.zIndex,e.obj.style.cursor=e.mode+"-resize",t.wins.vp.appendChild(e.obj),1==t.wins.conf.fr_cover&&(e.objFR=document.createElement("IFRAME"),e.objFR.className="dhxwin_resize_fr_cover",e.objFR.style.zIndex=e.obj.style.zIndex,t.wins.vp.insertBefore(e.objFR,e.obj)),e.rx=i.conf.x,e.ry=i.conf.y,e.rw=i.conf.w,e.rh=i.conf.h,e=null},this._rAdjustSizer=function(){var e=t.conf.resize;e.obj||this._rInitSizer(),e.obj.style.width=e.rw+"px",e.obj.style.height=e.rh+"px",null!=e.rx&&(e.obj.style.left=e.rx+"px"),null!=e.ry&&(e.obj.style.top=e.ry+"px"),null!=e.objFR&&(e.objFR.style.width=e.obj.style.width,e.objFR.style.height=e.obj.style.height,null!=e.rx&&(e.objFR.style.left=e.obj.style.left),null!=e.ry&&(e.objFR.style.top=e.obj.style.top)),e=null},"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu)),this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu)),this._initResize=null,this._rOnCellMouseMove=null,this._rOnCellMouseDown=null,this._rOnWinMouseMove=null,this._rOnWinMouseUp=null,this._rOnSelectStart=null,this._rInitSizer=null,this._rAdjustSizer=null,this._unloadResize=null,this.conf.resize=null,t=null}},dhtmlXWindows.prototype.attachContextMenu=function(t){return this._renderContextMenu("icon",null,null,t)},dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null},dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)},dhtmlXWindowsCell.prototype.attachContextMenu=function(t){return this.wins._renderContextMenu("icon",this._idd,null,t)},dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null},dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)},dhtmlXWindowsButton.prototype.attachContextMenu=function(t){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,t)},dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null},dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)},dhtmlXWindows.prototype._renderContextMenu=function(t,e,i,n){var s=this,o=!1;if(null==this.cm&&(this.cm={global:null,icon:{},button:{}},o=!0),null==e){if(null!=this.cm.global)return}else if("icon"==t){if(null!=this.cm.icon[e])return}else if("button"==t&&null!=this.cm.button[e]&&null!=this.cm.button[e][i])return;null==n&&(n={}),n.parent=null,n.context=!0;var l=new dhtmlXMenuObject(n);return l.setAutoHideMode(!1),l.attachEvent("onShow",function(){this.conf.wins_menu_open=!0}),l.attachEvent("onHide",function(){this.conf.wins_menu_open=!1,s.conf.opened_menu=null}),null==e?this.cm.global=l:"icon"==t?this.cm.icon[e]=l:"button"==t&&(null==this.cm.button[e]&&(this.cm.button[e]={}),this.cm.button[e][i]=l),o&&(this._showContextMenu=function(t,e){if(!(t.button>=2)){if("icon"==e.mode&&null!=e.id&&"mousedown"==e.press_type){if(null==(n=this.cm.icon[e.id]||this.cm.global))return;t.cancelBubble=!0;var i=this.w[e.id].hdr.firstChild;n.conf.wins_menu_open&&this.conf.opened_menu==e.id?n.hideContextMenu():(this._hideContextMenu(),n.showContextMenu(window.dhx4.absLeft(i),window.dhx4.absTop(i)+i.offsetHeight),this.conf.opened_menu=e.id),n=i=null}if("button"==e.mode&&null!=e.id&&"mousedown"==e.press_type){if(null==this.cm.button[e.id]||null==this.cm.button[e.id][e.button_name])return;t.cancelBubble=!0,this.conf.button_last=null;var n=this.cm.button[e.id][e.button_name],s=this.w[e.id].b[e.button_name].button;n.conf.wins_menu_open&&this.conf.opened_menu==e.id?n.hideContextMenu():(this._hideContextMenu(),n.showContextMenu(window.dhx4.absLeft(s),window.dhx4.absTop(s)+s.offsetHeight),this.conf.opened_menu=e.id),n=s=null}}},this._hideContextMenu=function(t){if(null!=t){if("keydown"==(t=t||event).type&&27!=t.keyCode)return;for(var e=t.target||t.srcElement,i=!0;null!=e&&1==i;)null!=e.className&&e.className.search(/SubLevelArea_Polygon/)>=0?i=!1:e=e.parentNode}if(i||null==t){null!=s.cm.global&&s.cm.global.hideContextMenu();for(var n in s.cm.icon)null!=s.cm.icon[n]&&s.cm.icon[n].hideContextMenu();for(var n in s.cm.button)for(var o in s.cm.button[n])null!=s.cm.button[n][o]&&s.cm.button[n][o].hideContextMenu()}},this._detachContextMenu=function(t,e,i){null!=this.cm&&(null==e?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==t?null!=this.cm.icon[e]&&(this.cm.icon[e].unload(),this.cm.icon[e]=null):"button"==t&&null!=this.cm.button[e]&&null!=this.cm.button[e][i]&&(this.cm.button[e][i].unload(),this.cm.button[e][i]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null),this.cm=null,"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu)),s=null}),l},window.dhtmlx||(window.dhtmlx={}),function(){function t(t,e){var n=t.callback;i(!1),t.box.parentNode.removeChild(t.box),h=t.box=null,n&&n(e)}function e(e){if(h){var i=(e=e||event).which||event.keyCode;return dhtmlx.message.keyboard&&(13!=i&&32!=i||t(h,!0),27==i&&t(h,!1)),e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}}function i(t){i.cover||((i.cover=document.createElement("DIV")).onkeydown=e,i.cover.className="dhx_modal_cover",document.body.appendChild(i.cover));document.body.scrollHeight;i.cover.style.display=t?"inline-block":"none"}function n(t,e){return"<div class='dhtmlx_popup_button' result='"+e+"' ><div>"+t+"</div></div>"}function s(s,o,l){var r=s.tagName?s:function(e,i,s){var o=document.createElement("DIV");o.className=" dhtmlx_modal_box dhtmlx-"+e.type,o.setAttribute("dhxbox",1);var l="";if(e.width&&(o.style.width=e.width),e.height&&(o.style.height=e.height),e.title&&(l+='<div class="dhtmlx_popup_title">'+e.title+"</div>"),l+='<div class="dhtmlx_popup_text"><span>'+(e.content?"":e.text)+'</span></div><div  class="dhtmlx_popup_controls">',i&&(l+=n(e.ok||"OK",!0)),s&&(l+=n(e.cancel||"Cancel",!1)),e.buttons)for(var r=0;r<e.buttons.length;r++)l+=n(e.buttons[r],r);if(l+="</div>",o.innerHTML=l,e.content){var a=e.content;"string"==typeof a&&(a=document.getElementById(a)),"none"==a.style.display&&(a.style.display=""),o.childNodes[e.title?1:0].appendChild(a)}return o.onclick=function(i){var n=(i=i||event).target||i.srcElement;if(n.className||(n=n.parentNode),"dhtmlx_popup_button"==n.className){var s=n.getAttribute("result");t(e,s="true"==s||"false"!=s&&s)}},e.box=o,(i||s)&&(h=e),o}(s,o,l);s.hidden||i(!0),document.body.appendChild(r);var a=s.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-r.offsetWidth)/2)),d=s.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-r.offsetHeight)/2));return"top"==s.position?r.style.top="-3px":r.style.top=d+"px",r.style.left=a+"px",r.onkeydown=e,r.focus(),s.hidden&&dhtmlx.modalbox.hide(r),r}function o(t){return s(t,!0,!1)}function l(t){return s(t,!0,!0)}function r(t){return s(t)}function a(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}var h=null;document.attachEvent?document.attachEvent("onkeydown",e):document.addEventListener("keydown",e,!0),dhtmlx.alert=function(){var t=a.apply(this,arguments);return t.type=t.type||"confirm",o(t)},dhtmlx.confirm=function(){var t=a.apply(this,arguments);return t.type=t.type||"alert",l(t)},dhtmlx.modalbox=function(){var t=a.apply(this,arguments);return t.type=t.type||"alert",r(t)},dhtmlx.modalbox.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),i(!1),h=null)};var d=dhtmlx.message=function(t,e,i,n){(t=function(t,e,i,n){return"object"==typeof t&&t||(t={text:t,type:e,expire:i,id:n}),t.id=t.id||d.uid(),t.expire=t.expire||d.expire,t}.apply(this,arguments)).type=t.type||"info";switch(t.type.split("-")[0]){case"alert":return o(t);case"confirm":return l(t);case"modalbox":return r(t);default:return function(t){d.area||(d.area=document.createElement("DIV"),d.area.className="dhtmlx_message_area",d.area.style[d.position]="15px",document.body.appendChild(d.area)),d.hide(t.id);var e=document.createElement("DIV");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){t&&d.hide(t.id),t=null},"bottom"==d.position&&d.area.firstChild?d.area.insertBefore(e,d.area.firstChild):d.area.appendChild(e),t.expire>0&&(d.timers[t.id]=window.setTimeout(function(){d.hide(t.id)},t.expire)),d.pull[t.id]=e,e=null,t.id}(t)}};d.seed=(new Date).valueOf(),d.uid=function(){return d.seed++},d.expire=4e3,d.keyboard=!0,d.position="top",d.pull={},d.timers={},d.hideAll=function(){for(var t in d.pull)d.hide(t)},d.hide=function(t){var e=d.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",d.timers[t]&&window.clearTimeout(d.timers[t]),delete d.pull[t])}}(),function(){var dhx={};dhx.assert=function(t,e){t||dhx.assert_error(e)},dhx.assert_error=function(message){dhx.log("error",message),dhx.message&&"string"==typeof message&&dhx.message({type:"debug",text:message,expire:-1}),!1!==dhx.debug&&eval("debugger;")},dhx.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()},dhx.codebase="./",dhx.name="Core",dhx.clone=function(t){var e=dhx.clone._function;return e.prototype=t,new e},dhx.clone._function=function(){},dhx.extend=function(t,e,i){if(dhx.assert(t,"Invalid mixing target"),dhx.assert(e,"Invalid mixing source"),t._dhx_proto_wait)return dhx.PowerArray.insertAt.call(t._dhx_proto_wait,e,1),t;for(var n in e)t[n]&&!i||(t[n]=e[n]);return e.defaults&&dhx.extend(t.defaults,e.defaults),e.$init&&e.$init.call(t),t},dhx.copy=function(t){if(dhx.assert(t,"Invalid mixing target"),arguments.length>1){var e=arguments[0];t=arguments[1]}else e=dhx.isArray(t)?[]:{};for(var i in t)t[i]&&"object"==typeof t[i]&&!dhx.isDate(t[i])?(e[i]=dhx.isArray(t[i])?[]:{},dhx.copy(e[i],t[i])):e[i]=t[i];return e},dhx.single=function(t){var e=null;return function(i){return e||(e=new t({})),e._reinit&&e._reinit.apply(e,arguments),e}},dhx.protoUI=function(){dhx.debug_proto&&dhx.log("UI registered: "+arguments[0].name);var t=arguments[0].name,e=function(i){if(!e)return dhx.ui[t].prototype;var n=e._dhx_proto_wait;if(n){for(var s=[n[0]],o=1;o<n.length;o++)s[o]=n[o],s[o]._dhx_proto_wait&&(s[o]=s[o].call(dhx,s[o].name)),s[o].prototype&&s[o].prototype.name&&(dhx.ui[s[o].prototype.name]=s[o]);if(dhx.ui[t]=dhx.proto.apply(dhx,s),e._dhx_type_wait)for(o=0;o<e._dhx_type_wait.length;o++)dhx.Type(dhx.ui[t],e._dhx_type_wait[o]);e=n=null}return this!=dhx?new dhx.ui[t](i):dhx.ui[t]};return e._dhx_proto_wait=Array.prototype.slice.call(arguments,0),dhx.ui[t]=e},dhx.proto=function(){dhx.debug_proto&&dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var t=arguments,e=t[0],i=!!e.$init,n=[];dhx.assert(e,"Invalid mixing target");for(var s=t.length-1;s>0;s--){if(dhx.assert(t[s],"Invalid mixing source"),"function"==typeof t[s]&&(t[s]=t[s].prototype),t[s].$init&&n.push(t[s].$init),t[s].defaults){var o=t[s].defaults;e.defaults||(e.defaults={});for(var l in o)dhx.isUndefined(e.defaults[l])&&(e.defaults[l]=o[l])}if(t[s].type&&e.type)for(var l in t[s].type)e.type[l]||(e.type[l]=t[s].type[l]);for(var r in t[s])e[r]||(e[r]=t[s][r])}i&&n.push(e.$init),e.$init=function(){for(var t=0;t<n.length;t++)n[t].apply(this,arguments)};var a=function(t){this.$ready=[],dhx.assert(this.$init,"object without init method"),this.$init(t),this._parseSettings&&this._parseSettings(t,this.defaults);for(var e=0;e<this.$ready.length;e++)this.$ready[e].call(this)};return a.prototype=e,e=t=null,a},dhx.bind=function(t,e){return function(){return t.apply(e,arguments)}},dhx.require=function(t,e,i){if("string"==typeof t){if(!0!==dhx._modules[t]){if(".css"==t.substr(-4)){var n=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+t});return document.head.appendChild(n),void(e&&e.call(i||window))}arguments[4];e?dhx._modules[t]?dhx._modules[t].push([e,i]):(dhx._modules[t]=[[e,i]],dhx.ajax(dhx.codebase+t,function(e){dhx.exec(e);var i=dhx._modules[t];dhx._modules[t]=!0;for(var n=0;n<i.length;n++)i[n][0].call(i[n][1]||window,!n)})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+t).responseText),dhx._modules[t]=!0)}}else{var s=t.length||0,o=e;if(s)(e=function(){if(!s)return o.apply(this,arguments);s--,dhx.require(t[t.length-s-1],e,i)})();else{for(var l in t)s++;e=function(){0===--s&&o.apply(this,arguments)};for(var l in t)dhx.require(l,e,i)}}},dhx._modules={},dhx.exec=function(t){window.execScript?window.execScript(t):window.eval(t)},dhx.wrap=function(t,e){return t?function(){var i=t.apply(this,arguments);return e.apply(this,arguments),i}:e},dhx.isUndefined=function(t){return void 0===t},dhx.delay=function(t,e,i,n){return window.setTimeout(function(){var n=t.apply(e,i||[]);return t=e=i=null,n},n||1)},dhx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhx.toNode=function(t){return"string"==typeof t?document.getElementById(t):t},dhx.toArray=function(t){return dhx.extend(t||[],dhx.PowerArray,!0)},dhx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhx.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},dhx.isDate=function(t){return t instanceof Date},dhx._events={},dhx.event=function(t,e,i,n){t=dhx.toNode(t);var s=dhx.uid();return n&&(i=dhx.bind(i,n)),dhx._events[s]=[t,e,i],t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i),s},dhx.eventRemove=function(t){if(t){dhx.assert(this._events[t],"Removing non-existing event");var e=dhx._events[t];e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],!1):e[0].detachEvent&&e[0].detachEvent("on"+e[1],e[2]),delete this._events[t]}},dhx.log=function(t,e,i){1==arguments.length&&(e=t,t="log"),window.console&&console.log&&(t=t.toLowerCase(),window.console[t]?window.console[t](e||"unknown error"):window.console.log(t+": "+e),i&&window.console.log(i))},dhx.log_full_time=function(t){dhx._start_time_log=new Date,dhx.log("Timing start ["+t+"]"),window.setTimeout(function(){var e=new Date;dhx.log("Timing end ["+t+"]:"+(e.valueOf()-dhx._start_time_log.valueOf())/1e3+"s")},1)},dhx.log_time=function(t){var e="_start_time_log"+t;if(dhx[e]){var i=new Date;dhx.log("Info","Timing end ["+t+"]:"+(i.valueOf()-dhx[e].valueOf())/1e3+"s"),dhx[e]=null}else dhx[e]=new Date,dhx.log("Info","Timing start ["+t+"]")},dhx.debug_code=function(t){t.call(dhx)},dhx.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(t){dhx.extend(this._evs_map,t,!0)},on_setter:function(t){if(t)for(var e in t)"function"==typeof t[e]&&this.attachEvent(e,t[e])},callEvent:function(t,e){if(this._evs_events._block)return!0;t=t.toLowerCase();var i=this._evs_events[t.toLowerCase()],n=!0;if(dhx.debug&&dhx.log("info","["+this.name+"] event:"+t,e),i)for(var s=0;s<i.length;s++)!1===i[s].apply(this,e||[])&&(n=!1);return this._evs_map[t]&&!this._evs_map[t].callEvent(t,e)&&(n=!1),n},attachEvent:function(t,e,i){dhx.assert(e,"Invalid event handler for "+t),t=t.toLowerCase(),i=i||dhx.uid(),e=dhx.toFunctor(e);var n=this._evs_events[t]||dhx.toArray();return n.push(e),this._evs_events[t]=n,this._evs_handlers[i]={f:e,t:t},i},detachEvent:function(t){if(this._evs_handlers[t]){var e=this._evs_handlers[t].t,i=this._evs_handlers[t].f;this._evs_events[e].remove(i),delete this._evs_handlers[t]}},hasEvent:function(t){return t=t.toLowerCase(),!!this._evs_events[t]}},dhx.extend(dhx,dhx.EventSystem),dhx.PowerArray={removeAt:function(t,e){t>=0&&this.splice(t,e||1)},remove:function(t){this.removeAt(this.find(t))},insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}},dhx.env={},function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0),(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(dhx.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")),-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(dhx.env.isAndroid=!0),dhx.env.transform=!1,dhx.env.transition=!1;var t={};t.names=["transform","transition"],t.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e=document.createElement("DIV"),i=0;i<t.names.length;i++)for(var n=t[t.names[i]],s=0;s<n.length;s++)if(void 0!==e.style[n[s]]){dhx.env[t.names[i]]=n[s];break}e.style[dhx.env.transform]="translate3d(0,0,0)",dhx.env.translate=e.style[dhx.env.transform]?"translate3d":"translate";var o="",l=!1;dhx.env.isOpera&&(o="-o-",l="O"),dhx.env.isFF&&(o="-Moz-"),dhx.env.isWebKit&&(o="-webkit-"),dhx.env.isIE&&(o="-ms-"),dhx.env.transformCSSPrefix=o,dhx.env.transformPrefix=l||dhx.env.transformCSSPrefix.replace(/-/gi,""),dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"}(),dhx.env.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),dhx.html={_native_on_selectstart:0,denySelect:function(){dhx._native_on_selectstart||(dhx._native_on_selectstart=document.onselectstart),document.onselectstart=dhx.html.stopEvent},allowSelect:function(){0!==dhx._native_on_selectstart&&(document.onselectstart=dhx._native_on_selectstart||null),dhx._native_on_selectstart=0},index:function(t){for(var e=0;t=t.previousSibling;)e++;return e},_style_cache:{},createCss:function(t){var e="";for(var i in t)e+=i+":"+t[i]+";";var n=this._style_cache[e];return n||(n="s"+dhx.uid(),this.addStyle("."+n+"{"+e+"}"),this._style_cache[e]=n),n},addStyle:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("media","screen"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)},create:function(t,e,i){e=e||{};var n=document.createElement(t);for(var s in e)n.setAttribute(s,e[s]);return e.style&&(n.style.cssText=e.style),e.class&&(n.className=e.class),i&&(n.innerHTML=i),n},getValue:function(t){return(t=dhx.toNode(t))?dhx.isUndefined(t.value)?t.innerHTML:t.value:""},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else t&&t.parentNode&&t.parentNode.removeChild(t)},insertBefore:function(t,e,i){t&&(e&&e.parentNode?e.parentNode.insertBefore(t,e):i.appendChild(t))},locate:function(t,e){if(t.tagName)var i=t;else i=(t=t||event).target||t.srcElement;for(;i;){if(i.getAttribute){var n=i.getAttribute(e);if(n)return n}i=i.parentNode}return null},offset:function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,l=n.clientTop||i.clientTop||0,r=n.clientLeft||i.clientLeft||0,a=e.top+s-l,h=e.left+o-r;return{y:Math.round(a),x:Math.round(h)}}for(a=0,h=0;t;)a+=parseInt(t.offsetTop,10),h+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:a,x:h}},posRelative:function(t){return t=t||event,dhx.isUndefined(t.offsetX)?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}},pos:function(t){if((t=t||event).pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}},preventEvent:function(t){return t&&t.preventDefault&&t.preventDefault(),dhx.html.stopEvent(t)},stopEvent:function(t){return(t||event).cancelBubble=!0,!1},addCss:function(t,e){t.className+=" "+e},removeCss:function(t,e){t.className=t.className.replace(RegExp(" "+e,"g"),"")}},dhx.ready=function(t){this._ready?t.call():this._ready_code.push(t)},dhx._ready_code=[],function(){var t=document.getElementsByTagName("SCRIPT");dhx.assert(t.length,"Can't locate codebase"),t.length&&((t=(t[t.length-1].getAttribute("src")||"").split("/")).splice(t.length-1,1),dhx.codebase=t.slice(0,t.length).join("/")+"/"),dhx.event(window,"load",function(){dhx4.callEvent("onReady",[]),dhx.delay(function(){dhx._ready=!0;for(var t=0;t<dhx._ready_code.length;t++)dhx._ready_code[t].call();dhx._ready_code=[]})})}(),dhx.locale=dhx.locale||{},dhx.assert_core_ready(),dhx.ready(function(){dhx.event(document.body,"click",function(t){dhx4.callEvent("onClick",[t||event])})}),function(){var t={},e=new RegExp("(\\r\\n|\\n)","g"),i=new RegExp('(\\")',"g");dhx.Template=function(n){if("function"==typeof n)return n;if(t[n])return t[n];if(-1!=(n=(n||"").toString()).indexOf("->"))switch((n=n.split("->"))[0]){case"html":n=dhx.html.getValue(n[1])}n=(n=(n=(n=(n=(n=(n=(n=(n=(n||"").toString()).replace(e,"\\n")).replace(i,'\\"')).replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"')).replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"")).replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"')).replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"')).replace("{obj}",'"+obj+"')).replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{t[n]=Function("obj","common",'return "'+n+'";')}catch(t){dhx.assert_error("Invalid template:"+n)}return t[n]},dhx.Template.empty=function(){return""},dhx.Template.bind=function(t){return dhx.bind(dhx.Template(t),this)},dhx.Type=function(t,e){if(t._dhx_proto_wait)return t._dhx_type_wait||(t._dhx_type_wait=[]),void t._dhx_type_wait.push(e);"function"==typeof t&&(t=t.prototype),t.types||(t.types={default:t.type},t.type.name="default");var i=e.name,n=t.type;i&&(n=t.types[i]=dhx.clone(e.baseType?t.types[e.baseType]:t.type));for(var s in e)0===s.indexOf("template")?n[s]=dhx.Template(e[s]):n[s]=e[s];return i}}(),dhx.Settings={$init:function(){this._settings=this.config={}},define:function(t,e){return"object"==typeof t?this._parseSeetingColl(t):this._define(t,e)},_define:function(t,e){var i=this[t+"_setter"];return this._settings[t]=i?i.call(this,e,t):e},_parseSeetingColl:function(t){if(t)for(var e in t)this._define(e,t[e])},_parseSettings:function(t,e){var i={};e&&(i=dhx.extend(i,e)),"object"!=typeof t||t.tagName||dhx.extend(i,t,!0),this._parseSeetingColl(i)},_mergeSettings:function(t,e){for(var i in e)switch(typeof t[i]){case"object":t[i]=this._mergeSettings(t[i]||{},e[i]);break;case"undefined":t[i]=e[i]}return t},debug_freid_c_id:!0,debug_freid_a_name:!0},dhx.ajax=function(t,e,i){if(0!==arguments.length){var n=new dhx.ajax;return i&&(n.master=i),n.get(t,null,e)}return this.getXHR?this:new dhx.ajax},dhx.ajax.count=0,dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(t,e,i){var n=this.getXHR();if(dhx.isArray(i)||(i=[i]),"object"==typeof e){var s=[];for(var o in e){var l=e[o];null!==l&&l!==dhx.undefined||(l=""),s.push(o+"="+encodeURIComponent(l))}e=s.join("&")}e&&"GET"===this.request&&(t=t+(-1!=t.indexOf("?")?"&":"?")+e,e=null),n.open(this.request,t,!this._sync),"POST"===this.request&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=this;return n.onreadystatechange=function(){if(!n.readyState||4==n.readyState){if(dhx.debug_time&&dhx.log_full_time("data_loading"),dhx.ajax.count++,i&&r)for(var t=0;t<i.length;t++)if(i[t]){var e=i[t].success||i[t];(n.status>=400||!n.status&&!n.responseText)&&(e=i[t].error),e&&e.call(r.master||r,n.responseText,n.responseXML,n)}r&&(r.master=null),i=r=null}},n.send(e||null),n},get:function(t,e,i){return 2==arguments.length&&(i=e,e=null),this.request="GET",this.send(t,e,i)},post:function(t,e,i){return this.request="POST",this.send(t,e,i)},put:function(t,e,i){return this.request="PUT",this.send(t,e,i)},del:function(t,e,i){return this.request="DELETE",this.send(t,e,i)},sync:function(){return this._sync=!0,this},bind:function(t){return this.master=t,this}},dhx.send=function(t,e,i,n){var s=dhx.html.create("FORM",{target:n||"_self",action:t,method:i||"POST"},"");for(var o in e){var l=dhx.html.create("INPUT",{type:"hidden",name:o,value:e[o]},"");s.appendChild(l)}s.style.display="none",document.body.appendChild(s),s.submit(),document.body.removeChild(s)},dhx.AtomDataLoader={$init:function(t){this.data={},t&&(this._settings.datatype=t.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(t){return this._ready_for_data?(this.load(t,this._settings.datatype),t):t},data_setter:function(t){return this._ready_for_data?(this.parse(t,this._settings.datatype),!0):t},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(t,e){if(!t.$proxy){this.callEvent("onXLS",[]),"string"==typeof e?(this.data.driver=dhx.DataDriver[e],e=arguments[2]):this.data.driver||(this.data.driver=dhx.DataDriver.json);var i=[{success:this._onLoad,error:this._onLoadError}];return e&&(dhx.isArray(e)?i.push.apply(i,e):i.push(e)),dhx.ajax(t,i,this)}t.load(this,"string"==typeof e?e:"json")},parse:function(t,e){this.callEvent("onXLS",[]),this.data.driver=dhx.DataDriver[e||"json"],this._onLoad(t,null)},_onLoad:function(t,e,i,n){var s=this.data.driver,o=s.toObject(t,e);if(o){var l=s.getRecords(o)[0];this.data=s?s.getDetails(l):t}else this._onLoadError(t,e,i);this.callEvent("onXLE",[])},_onLoadError:function(t,e,i){this.callEvent("onXLE",[]),this.callEvent("onLoadError",arguments),dhx4.callEvent("onLoadError",[t,e,i,this])},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.callEvent("onXLS",[]),dhx.ajax(e,function(t,e,i){this._ignore_feed=!0;var n=dhx.DataDriver.toObject(t,e);n?this.setValues(n.getDetails(n.getRecords()[0])):this._onLoadError(t,e,i),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhx.DataDriver={},dhx.DataDriver.json={toObject:function(data){if(data||(data="[]"),"string"==typeof data){try{eval("dhx.temp="+data)}catch(t){return dhx.assert_error(t),null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data)"data"!=key&&(t[key]=data[key]);data=data.data}return data},getRecords:function(t){return t&&!dhx.isArray(t)?[t]:t},getDetails:function(t){return"string"==typeof t?{id:dhx.uid(),value:t}:t},getInfo:function(t){var e=t.config;return e?{_size:e.total_count||0,_from:e.pos||0,_parent:e.parent||0,_config:e.config,_key:e.dhx_security}:{}},child:"data"},dhx.DataDriver.html={toObject:function(t){if("string"==typeof t){var e=null;return-1==t.indexOf("<")&&(e=dhx.toNode(t)),e||((e=document.createElement("DIV")).innerHTML=t),e.getElementsByTagName(this.tag)}return t},getRecords:function(t){for(var e=[],i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];1==n.nodeType&&e.push(n)}return e},getDetails:function(t){return dhx.DataDriver.xml.tagToObject(t)},getInfo:function(t){return{_size:0,_from:0}},tag:"LI"},dhx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhx.temp="+data),dhx.temp):data},getRecords:function(t){return t},getDetails:function(t){for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(t){return{_size:0,_from:0}}},dhx.DataDriver.csv={toObject:function(t){return t},getRecords:function(t){return t.split(this.row)},getDetails:function(t){t=this.stringToArray(t);for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(t){return{_size:0,_from:0}},stringToArray:function(t){t=t.split(this.cell);for(var e=0;e<t.length;e++)t[e]=t[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return t},row:"\n",cell:","},dhx.DataDriver.xml={_isValidXML:function(t){return t&&t.documentElement?t.getElementsByTagName("parsererror").length?null:t:null},toObject:function(t,e){if(this._isValidXML(i))return i;if("string"==typeof t)var i=this.fromString(t.replace(/^[\s]+/,""));else i=t;return this._isValidXML(i)?i:null},getRecords:function(t){return this.xpath(t,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(t){return this.tagToObject(t,{})},getInfo:function(t){var e=this.xpath(t,this.config);return e=e.length?this.assignTypes(this.tagToObject(e[0],{})):null,{_size:t.documentElement.getAttribute("total_count")||0,_from:t.documentElement.getAttribute("pos")||0,_parent:t.documentElement.getAttribute("parent")||0,_config:e,_key:t.documentElement.getAttribute("dhx_security")||null}},xpath:function(t,e){if(window.XPathResult){var i=t;-1==t.nodeName.indexOf("document")&&(t=t.ownerDocument);for(var n=[],s=t.evaluate(e,i,null,XPathResult.ANY_TYPE,null),o=s.iterateNext();o;)n.push(o),o=s.iterateNext();return n}var l=!0;try{void 0===t.selectNodes&&(l=!1)}catch(t){}if(l)return t.selectNodes(e);var r=e.split("/").pop();return t.getElementsByTagName(r)},assignTypes:function(t){for(var e in t){var i=t[e];if("object"==typeof i)this.assignTypes(i);else if("string"==typeof i){if(""===i)continue;"true"==i?t[e]=!0:"false"==i?t[e]=!1:i==1*i&&(t[e]=1*t[e])}}return t},tagToObject:function(t,e){e=e||{};var i=!1,n=t.attributes;if(n&&n.length){for(var s=0;s<n.length;s++)e[n[s].name]=n[s].value;i=!0}var o=t.childNodes;for(s=0;s<o.length;s++)if(1==o[s].nodeType){var l=o[s].tagName;void 0!==e[l]?(dhx.isArray(e[l])||(e[l]=[e[l]]),e[l].push(this.tagToObject(o[s],{}))):e[o[s].tagName]=this.tagToObject(o[s],{}),i=!0}return i?(e.value=e.value||this.nodeValue(t),e):this.nodeValue(t)},nodeValue:function(t){return t.firstChild?t.firstChild.data:""},fromString:function(t){try{if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");return e.loadXML(t),e}}catch(t){return dhx.assert_error(t),null}dhx.assert_error("Load from xml string is not supported")}},dhx.DataLoader=dhx.proto({$init:function(t){t=t||"",this._ajax_queue=dhx.toArray(),this.data=new dhx.DataStore,this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this)),this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this)),this.data.feed=this._feed},_feed:function(t,e,i){if(this._load_count)return this._load_count=[t,e,i];this._load_count=!0,this._feed_last=[t,e],this._feed_common.call(this,t,e,i)},_feed_common:function(t,e,i){var n=this.data.url;t<0&&(t=0),this.load(n+(-1==n.indexOf("?")?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+t+"&count="+e,[this._feed_callback,i])},_feed_callback:function(){var t=this._load_count,e=this._feed_last;this._load_count=!1,"object"!=typeof t||t[0]==e[0]&&t[1]==e[1]||this.data.feed.apply(this,t)},load:function(t,e){var i=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(i),this.data.url||(this.data.url=t)},loadNext:function(t,e,i,n,s){if(this._settings.datathrottle&&!s)return this._throttle_request&&window.clearTimeout(this._throttle_request),void(this._throttle_request=dhx.delay(function(){this.loadNext(t,e,i,n,!0)},this,0,this._settings.datathrottle));e||0===e||(e=this.dataCount()),this.data.url=this.data.url||n,this.callEvent("onDataRequest",[e,t,i,n])&&this.data.url&&this.data.feed.call(this,e,t,i)},_maybe_loading_already:function(t,e){var i=this._feed_last;return!!(this._load_count&&i&&i[0]<=e&&i[1]+i[0]>=t+e)},_onLoad:function(t,e,i){this._ajax_queue.remove(i);var n=this.data.driver.toObject(t,e);if(!n)return this._onLoadError(t,e,i);this.data._parse(n),this._call_onready(),this.callEvent("onXLE",[])},removeMissed_setter:function(t){return this.data._removeMissed=t},scheme_setter:function(t){this.data.scheme(t)},dataFeed_setter:function(t){return this.data.attachEvent("onBeforeFilter",dhx.bind(function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else i={text:e};this.clearAll();var n=this._settings.dataFeed,s=[];if("function"==typeof n)return n.call(this,e,i);for(var o in i)s.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(n+(n.indexOf("?")<0?"?":"&")+s.join("&"),this._settings.datatype),!1}},this)),t},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var t=dhx.toFunctor(this._settings.ready);t&&dhx.delay(t,this,arguments),this._ready_was_used=!0}},_call_onclearall:function(){for(var t=0;t<this._ajax_queue.length;t++)this._ajax_queue[t].abort();this._ajax_queue=dhx.toArray()},_call_on_config:function(t){this._parseSeetingColl(t)}},dhx.AtomDataLoader),dhx.DataStore=function(){this.name="DataStore",dhx.extend(this,dhx.EventSystem),this.setDriver("json"),this.pull={},this.order=dhx.toArray(),this._marks={}},dhx.DataStore.prototype={setDriver:function(t){dhx.assert(dhx.DataDriver[t],"incorrect DataDriver"),this.driver=dhx.DataDriver[t]},_parse:function(t,e){this.callEvent("onParse",[this.driver,t]),this._filter_order&&this.filter();var i=this.driver.getInfo(t);i._key&&(dhx.securityKey=i._key),i._config&&this.callEvent("onServerConfig",[i._config]);var n=this.driver.getRecords(t);this._inner_parse(i,n),this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group),this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,t]),this.refresh()},_inner_parse:function(t,e){var i=1*(t._from||0),n=!0,s=!1;if(0===i&&this.order[0]){if(this._removeMissed){s={};for(var o=0;o<this.order.length;o++)s[this.order[o]]=!0}n=!1,i=this.order.length}var l=0;for(o=0;o<e.length;o++){var r=this.driver.getDetails(e[o]),a=this.id(r);this.pull[a]?n&&this.order[l+i]&&l++:(this.order[l+i]=a,l++),this.pull[a]?(dhx.extend(this.pull[a],r,!0),this._scheme_update&&this._scheme_update(this.pull[a]),s&&delete s[a]):(this.pull[a]=r,this._scheme_init&&this._scheme_init(r))}if(s){this.blockEvent();for(var h in s)this.remove(h);this.unblockEvent()}this.order[t._size-1]||(this.order[t._size-1]=dhx.undefined)},id:function(t){return t.id||(t.id=dhx.uid())},changeId:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]),this.pull[e].id=e,this.order[this.order.find(t)]=e,this._filter_order&&(this._filter_order[this._filter_order.find(t)]=e),this._marks[t]&&(this._marks[e]=this._marks[t],delete this._marks[t]),this.callEvent("onIdChange",[t,e]),this._render_change_id&&this._render_change_id(t,e),delete this.pull[t]},item:function(t){return this.pull[t]},update:function(t,e){if(dhx.isUndefined(e)&&(e=this.item(t)),this._scheme_update&&this._scheme_update(e),!1===this.callEvent("onBeforeUpdate",[t,e]))return!1;this.pull[t]=e,this.callEvent("onStoreUpdated",[t,e,"update"])},refresh:function(t){this._skip_refresh||(t?this.callEvent("onStoreUpdated",[t,this.pull[t],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(t,e){this._skip_refresh=!0,t.call(e||this),this._skip_refresh=!1},getRange:function(t,e){if(t=t?this.indexById(t):this.$min||this.startOffset||0,e?e=this.indexById(e):(e=Math.min(this.$max||this.endOffset||1/0,this.dataCount()-1))<0&&(e=0),t>e){var i=e;e=t,t=i}return this.getIndexRange(t,e)},getIndexRange:function(t,e){e=Math.min(e||1/0,this.dataCount()-1);for(var i=dhx.toArray(),n=t||0;n<=e;n++)i.push(this.item(this.order[n]));return i},dataCount:function(){return this.order.length},exists:function(t){return!!this.pull[t]},move:function(t,e){dhx.assert(t>=0&&e>=0,"DataStore::move","Incorrect indexes");var i=this.idByIndex(t),n=this.item(i);this.order.removeAt(t),this.order.insertAt(i,Math.min(this.order.length,e)),this.callEvent("onStoreUpdated",[i,n,"move"])},scheme:function(t){this._scheme={},this._scheme_init=t.$init,this._scheme_update=t.$update,this._scheme_serialize=t.$serialize,this._scheme_group=t.$group,this._scheme_sort=t.$sort;for(var e in t)"$"!=e.substr(0,1)&&(this._scheme[e]=t[e])},sync:function(t,e,i){"string"==typeof t&&(t=$$("source")),"function"!=typeof e&&(i=e,e=null),dhx.debug_bind&&(this.debug_sync_master=t,dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)),this._backbone_source=!1,"DataStore"!=t.name&&(t.data&&"DataStore"==t.data.name?t=t.data:this._backbone_source=!0);var n=dhx.bind(function(n,s,o){if(this._backbone_source){if(!n)return;if(0===n.indexOf("change"))return"change"==n?(this.pull[s.id]=s.attributes,void this.refresh(s.id)):void 0;"reset"==n&&(o=s),this.order=[],this.pull={},this._filter_order=null;for(var l=0;l<o.models.length;l++){var r=o.models[l].id;this.order.push(r),this.pull[r]=o.models[l].attributes}}else this._filter_order=null,this.order=dhx.toArray([].concat(t.order)),this.pull=t.pull;e&&this.silent(e),this._on_sync&&this._on_sync(),dhx.debug_bind&&dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),this.callEvent("onSyncApply",[]),i?i=!1:this.refresh()},this);this._backbone_source?t.bind("all",n):this._sync_events=[t.attachEvent("onStoreUpdated",n),t.attachEvent("onIdChange",dhx.bind(function(t,e){this.changeId(t,e)},this))],n()},add:function(t,e){if(this._scheme)for(var i in this._scheme)dhx.isUndefined(t[i])&&(t[i]=this._scheme[i]);this._scheme_init&&this._scheme_init(t);var n=this.id(t),s=arguments[2]||this.order,o=s.length;if((dhx.isUndefined(e)||e<0)&&(e=o),e>o&&(dhx.log("Warning","DataStore:add","Index of out of bounds"),e=Math.min(s.length,e)),!1===this.callEvent("onBeforeAdd",[n,t,e]))return!1;if(dhx.assert(!this.exists(n),"Not unique ID"),this.pull[n]=t,s.insertAt(n,e),this._filter_order){var l=this._filter_order.length;!e&&this.order.length&&(l=0),this._filter_order.insertAt(n,l)}return this.callEvent("onAfterAdd",[n,e]),this.callEvent("onStoreUpdated",[n,t,"add"]),n},remove:function(t){if(dhx.isArray(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else{if(!1===this.callEvent("onBeforeDelete",[t]))return!1;dhx.assert(this.exists(t),"Not existing ID in remove command"+t);var i=this.item(t);this.order.remove(t),this._filter_order&&this._filter_order.remove(t),delete this.pull[t],this._marks[t]&&delete this._marks[t],this.callEvent("onAfterDelete",[t]),this.callEvent("onStoreUpdated",[t,i,"delete"])}},clearAll:function(){this.pull={},this.order=dhx.toArray(),this._filter_order=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(t){return(t>=this.order.length||t<0)&&dhx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[t]},indexById:function(t){var e=this.order.find(t);return this.pull[t]||dhx.log("Warning","DataStore::indexById Non-existing ID: "+t),e},next:function(t,e){return this.order[this.indexById(t)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(t,e){return this.order[this.indexById(t)-(e||1)]},sort:function(t,e,i){var n=t;"function"==typeof t?n={as:t,dir:e}:"string"==typeof t&&(n={by:t.replace(/#/g,""),dir:e,as:i});var s=[n.by,n.dir,n.as];this.callEvent("onBeforeSort",s)&&(this._sort_core(n),this.refresh(),this.callEvent("onAfterSort",s))},_sort_core:function(t){if(this.order.length){var e=this._sort._create(t),i=this.getRange(this.first(),this.last());i.sort(e),this.order=i.map(function(t){return dhx.assert(t,"Client sorting can't be used with dynamic loading"),this.id(t)},this)}},_filter_reset:function(t){this._filter_order&&!t&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(t,e,i){for(var n=dhx.toArray(),s=0;s<this.order.length;s++){var o=this.order[s];t(this.item(o),e)&&n.push(o)}i&&this._filter_order||(this._filter_order=this.order),this.order=n},filter:function(t,e,i){if(this.callEvent("onBeforeFilter",[t,e])&&(this._filter_reset(i),this.order.length)){if(t){var n=t;e=e||"","string"==typeof t&&(t=t.replace(/#/g,""),"function"==typeof e?n=function(i){return e(i[t])}:(e=e.toString().toLowerCase(),n=function(e,i){return dhx.assert(e,"Client side filtering can't be used with dynamic loading"),-1!=(e[t]||"").toString().toLowerCase().indexOf(i)})),this._filter_core(n,e,i,this._filterMode)}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(t,e){for(var i=0;i<this.order.length;i++)t.call(e||this,this.item(this.order[i]))},_methodPush:function(t,e){return function(){return t[e].apply(t,arguments)}},addMark:function(t,e,i,n){var s=this._marks[t]||{};return this._marks[t]=s,s[e]||(s[e]=n||!0,i&&(this.item(t).$css=(this.item(t).$css||"")+" "+e,this.refresh(t))),s[e]},removeMark:function(t,e,i){var n=this._marks[t];if(n&&n[e]&&delete n[e],i){var s=this.item(t).$css;s&&(this.item(t).$css=s.replace(e,""),this.refresh(t))}},hasMark:function(t,e){var i=this._marks[t];return i&&i[e]},provideApi:function(t,e){this.debug_bind_master=t,e&&this.mapEvent({onbeforesort:t,onaftersort:t,onbeforeadd:t,onafteradd:t,onbeforedelete:t,onafterdelete:t,onbeforeupdate:t});for(var i=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"],n=0;n<i.length;n++)t[i[n]]=this._methodPush(this,i[n])},serialize:function(){for(var t=this.order,e=[],i=0;i<t.length;i++){var n=this.pull[t[i]];this._scheme_serialize&&!1===(n=this._scheme_serialize(n))||e.push(n)}return e},_sort:{_create:function(t){return this._dir(t.dir,this._by(t.by,t.as))},_as:{date:function(t,e){return t-=0,e-=0,t>e?1:t<e?-1:0},int:function(t,e){return t*=1,e*=1,t>e?1:t<e?-1:0},string_strict:function(t,e){return t=t.toString(),e=e.toString(),t>e?1:t<e?-1:0},string:function(t,e){return e?t?(t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:t<e?-1:0):-1:1}},_by:function(t,e){return t?("function"!=typeof e&&(e=this._as[e||"string"]),dhx.assert(e,"Invalid sorting method"),function(i,n){return e(i[t],n[t])}):e},_dir:function(t,e){return"asc"!=t&&t?function(t,i){return-1*e(t,i)}:e}}},dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(t,e,i){if("string"==typeof t&&(t=dhx.ui.get(t)),t._initBindSource&&t._initBindSource(),this._initBindSource&&this._initBindSource(),t.getBindData||dhx.extend(t,dhx.BindSource),!this._bind_ready){var n=this.render;if(this.filter){var s=this._settings.id;this.data._on_sync=function(){t._bind_updated[s]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var t=this.callEvent("onBindRequest");return this._in_bind_processing=!1,n.apply(this,!1===t?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){this.validate&&!this.validate()||t.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)}),this._bind_ready=!0}t.addBind(this._settings.id,e,i),dhx.debug_bind&&dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+t.name+"@"+t._settings.id);var o=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return t.getBindData(o)}),!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){t._bind_updated[o]=!1}),this.isVisible(this._settings.id)&&this.refresh()},unbind:function(t){return this._unbind(t)},_unbind:function(t){t.removeBind(this._settings.id);var e=this._sync_events||(this.data?this.data._sync_events:0);if(e&&t.data)for(var i=0;i<e.length;i++)t.data.detachEvent(e[i])}},dhx.BindSource={$init:function(){this._bind_hash={},this._bind_updated={},this._ignore_binds={},this._bind_specific_rules(this)},saveBatch:function(t){this._do_not_update_binds=!0,t.call(this),this._do_not_update_binds=!1,this._update_binds()},setBindData:function(t,e){if(e&&(this._ignore_binds[e]=!0),dhx.debug_bind&&dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+e),this.setValue)this.setValue(t);else if(this.setValues)this.setValues(t);else{var i=this.getCursor();i&&(t=dhx.extend(this.item(i),t,!0),this.update(i,t))}this.callEvent("onBindUpdate",[t,e,i]),this.save&&this.save(),e&&(this._ignore_binds[e]=!1)},getBindData:function(t,e){if(this._bind_updated[t])return!1;var i=dhx.ui.get(t);i.isVisible(i._settings.id)&&(this._bind_updated[t]=!0,dhx.debug_bind&&dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+i.name+"@"+i._settings.id),this._bind_update(i,this._bind_hash[t][0],this._bind_hash[t][1]),e&&i.filter&&i.refresh())},addBind:function(t,e,i){this._bind_hash[t]=[e,i]},removeBind:function(t){delete this._bind_hash[t],delete this._bind_updated[t],delete this._ignore_binds[t]},_bind_specific_rules:function(t){t.filter?dhx.extend(this,dhx.CollectionBind):t.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var t in this._bind_hash)this._ignore_binds[t]||(this._bind_updated[t]=!1,this.getBindData(t,!0))},_bind_update_common:function(t,e,i){t.setValue?t.setValue(i?i[e]:i):t.filter?t.data.silent(function(){this.filter(e,i)}):!i&&t.clear?t.clear():t._check_data_feed(i)&&t.setValues(dhx.clone(i)),t.callEvent("onBindApply",[i,e,this])}},dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(t){this.data=t;var e=t&&t.id?t.id:dhx.uid();this._settings={id:e},dhx.ui.views[e]=this},setValue:function(t){this.data=t,this.callEvent("onChange",[t])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind),dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(t){this.data=t||{};var e=t&&t.id?t.id:dhx.uid();this._settings={id:e},dhx.ui.views[e]=this},getValues:function(){return this.data},setValues:function(t){this.data=t,this.callEvent("onChange",[t])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings),dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return!!(this.data.order.length||this.data._filter_order||this._settings.dataFeed)},$init:function(t){this.data.provideApi(this,!0);var e=t&&t.id?t.id:dhx.uid();this._settings.id=e,dhx.ui.views[e]=this,this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings),dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e,i){var n=this.getValue()||"";if(i&&(n=i(n)),t.setValue)t.setValue(n);else if(t.filter)t.data.silent(function(){this.filter(e,n)});else{var s={};s[e]=n,t._check_data_feed(n)&&t.setValues(s)}t.callEvent("onBindApply",[n,e,this])}},dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e){var i=this.getValues()||null;this._bind_update_common(t,e,i)}},dhx.CollectionBind={$init:function(){this._cursor=null,this.attachEvent("onSelectChange",function(t){var e=this.getSelected();this.setCursor(e?e.id||e:null)}),this.attachEvent("onAfterCursorChange",this._update_binds),this.data.attachEvent("onStoreUpdated",dhx.bind(function(t,e,i){t&&t==this.getCursor()&&"paint"!=i&&this._update_binds()},this)),this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this)),this.data.attachEvent("onIdChange",dhx.bind(function(t,e){this._cursor==t&&(this._cursor=e)},this))},setCursor:function(t){t==this._cursor||null!==t&&!this.item(t)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=t,this.callEvent("onAfterCursorChange",[t]))},getCursor:function(){return this._cursor},_bind_update:function(t,e){var i=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(t,e,i)}},dhx.ui||(dhx.ui={}),dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(t){return t._settings?t:dhx.ui.views[t]}),window.dhtmlx&&(dhtmlx.BaseBind=dhx.BaseBind),dhtmlXDataStore=function(t){var e=new dhx.DataCollection(t);return e._dp_init=function(t){var e="_methods";t[e]=["dummy","dummy","changeId","dummy"],this.data._old_names={add:"inserted",update:"updated",delete:"deleted"},this.data.attachEvent("onStoreUpdated",function(e,i,n){e&&!t._silent&&t.setUpdated(e,!0,this._old_names[n])}),t[e="_getRowData"]=function(t,e){var i=this.obj.data.item(t),n={id:t};if(n[this.action_param]=this.obj.getUserData(t),i)for(var s in i)n[s]=i[s];return n},this.changeId=function(e,i){this.data.changeId(e,i),t._silent=!0,this.data.callEvent("onStoreUpdated",[i,this.item(i),"update"]),t._silent=!1},t[e="_clearUpdateFlag"]=function(){},this._userdata={}},e.dummy=function(){},e.setUserData=function(t,e,i){this._userdata[t]=i},e.getUserData=function(t,e){return this._userdata[t]},e.dataFeed=function(t){this.define("dataFeed",t)},dhx.extend(e,dhx.BindSource),e},window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return!!(this.data.order.length||this.data._filter_order||this._settings.dataFeed)};this._settings=this._settings||this._settings,this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return!!(this.data.order.length||this.data._filtered_state||this._settings.dataFeed)};this._settings=this._settings||this._settings,this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),dhx.BaseBind.unsync=function(t){return dhx.BaseBind._unbind.call(this,t)},dhx.BaseBind.unbind=function(t){return dhx.BaseBind._unbind.call(this,t)},dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)},dhx.BaseBind.legacySync=function(t,e){return this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource(),this.attachEvent("onAfterEditStop",function(t){return this.save(t),!0}),this.attachEvent("onDataRequest",function(e,i){for(var n=e;n<e+i;n++)if(!t.data.order[n])return t.loadNext(i,e),!1}),this.save=function(e){e||(e=this.getCursor());var i=this.item(e),n=t.item(e);for(var s in i)0!==s.indexOf("$")&&(n[s]=i[s]);t.refresh(e)},t&&"DataCollection"==t.name?t.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)},window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(t){dhx.BaseBind.bind.apply(this,arguments),t.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXForm.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.load(e),!1)},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(t){return!0}),window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(t){t.sync=function(e,i){this._initBindSource&&this._initBindSource(),e._initBindSource&&e._initBindSource();var n=function(n){t.clearAll();for(var s=e.data.order,o=e.data.pull,l=[],r=0;r<s.length;r++)i&&i.copy?l[r]=dhx.clone(o[s[r]]):l[r]=o[s[r]];t._process_loading(l),t.callEvent("onSyncApply",[])};this.save=function(t){t||(t=this.getCursor());var i=this.item(t),n=e.item(t);this.callEvent("onStoreSave",[t,i,n])&&(dhx.extend(e.item(t),i,!0),e.update(t))},this.item=function(t){return this.getEvent(t)},this._sync_events=[e.data.attachEvent("onStoreUpdated",function(t,e,i){n.call(this)}),e.data.attachEvent("onIdChange",function(t,e){combo.changeOptionId(t,e)})],this.attachEvent("onEventChanged",function(t){this.save(t)}),this.attachEvent("onEventAdded",function(t,i){e.data.pull[t]||e.add(i)}),this.attachEvent("onEventDeleted",function(t){e.data.pull[t]&&e.remove(t)}),n()},t.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},t._initBindSource=function(){this._settings||(this._settings={id:dhx.uid()})}},Scheduler.$syncFactory(window.scheduler)),window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXCombo.prototype.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXCombo.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXCombo.prototype.sync=function(t,e){this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource();var i=this,n=function(t){i.clearAll(),i.addOption(this.serialize()),i.callEvent("onSyncApply",[])};this._sync_events=[t.data.attachEvent("onStoreUpdated",function(t,e,i){n.call(this)}),t.data.attachEvent("onIdChange",function(t,e){i.changeOptionId(t,e)})],n.call(t)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(t){return this.getOption(t)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return!(!this.optionsArr.length&&!this._settings.dataFeed)},dhtmlXCombo.prototype.refresh=function(){this.render(!0)}),window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(t,e,i){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXGridObject.prototype.sync=function(t,e){this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource();var i=this;this.save=function(e){e||(e=this.getCursor()),dhx.extend(t.item(e),this.item(e),!0),t.update(e)};var n=function(t){var e=i.getCursor?i.getCursor():null,n=0;i._legacy_ignore_next?(n=i._legacy_ignore_next,i._legacy_ignore_next=!1):i.clearAll();var s=this.dataCount();if(s){i._parsing=!0;for(var o=n;o<s;o++){var l=this.order[o];l&&(n&&i.rowsBuffer[o]||(i.rowsBuffer[o]={idd:l,data:this.pull[l]},i.rowsBuffer[o]._parser=i._process_store_row,i.rowsBuffer[o]._locator=i._get_store_data,i.rowsAr[l]=this.pull[l]))}i.rowsBuffer[s-1]||(i.rowsBuffer[s-1]=dhtmlx.undefined,i.xmlFileUrl=i.xmlFileUrl||this.url),i.pagingOn?i.changePage():i._srnd&&i._fillers?i._update_srnd_view():(i.render_dataset(),i.callEvent("onXLE",[])),i._parsing=!1}e&&i.setCursor&&i.setCursor(i.rowsAr[e]?e:null),i.callEvent("onSyncApply",[])};this._sync_events=[t.data.attachEvent("onStoreUpdated",function(t,e,s){"delete"==s?(i.deleteRow(t),i.data.callEvent("onStoreUpdated",[t,e,s])):"update"==s?(i.callEvent("onSyncUpdate",[e,s]),i.update(t,e),i.data.callEvent("onStoreUpdated",[t,e,s])):"add"==s?(i.callEvent("onSyncUpdate",[e,s]),i.add(t,e,this.indexById(t)),i.data.callEvent("onStoreUpdated",[t,e,s])):n.call(this)}),t.data.attachEvent("onStoreLoad",function(e,n){i.xmlFileUrl=t.data.url,i._legacy_ignore_next=e.getInfo(n)._from}),t.data.attachEvent("onIdChange",function(t,e){i.changeRowId(t,e)})],i.attachEvent("onDynXLS",function(e,s){for(var o=e;o<e+s;o++)if(!t.data.order[o])return t.loadNext(s,e),!1;i._legacy_ignore_next=e,n.call(t.data)}),n.call(t.data),i.attachEvent("onEditCell",function(t,e,i,n,s){return 2==t&&n!=s&&this.save(e),!0}),i.attachEvent("onClearAll",function(){this._f_rowsBuffer=null}),e&&e.sort&&i.attachEvent("onBeforeSorting",function(e,n,s){if("connector"==n)return!1;var o=this.getColumnId(e);return t.sort("#"+o+"#","asc"==s?"asc":"desc","int"==n?n:"string"),i.setSortImgState(!0,e,s),!1}),e&&e.filter&&(i.attachEvent("onFilterStart",function(e,n){return(!i._con_f_used||!i._con_f_used.length)&&(t.data.silent(function(){t.filter();for(var s=0;s<e.length;s++)if(""!=n[s]){var o=i.getColumnId(e[s]);t.filter("#"+o+"#",n[s],0!=s)}}),t.refresh(),!1)}),i.collectValues=function(e){var i=this.getColumnId(e);return function(t){var e=[],i={};return this.data.each(function(n){var s=n[t];i[s]||(i[s]=!0,e.push(s))}),e.sort(),e}.call(t,i)}),e&&e.select&&i.attachEvent("onRowSelect",function(e){t.setCursor(e)}),i.clearAndLoad=function(e){t.clearAll(),t.load(e)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhx4._eventable(this.data);for(var t=0;t<this._cCount;t++)this.columnIds[t]||(this.columnIds[t]="cell"+t);this.attachEvent("onSelectStateChanged",function(t){this.callEvent("onSelectChange",[t])}),this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])}),this.attachEvent("onEditCell",function(t,e){return 2===t&&this.getCursor&&e&&e==this.getCursor()&&this._update_binds(),!0}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(t){if(null===t)return null;var e=this.getRowById(t);if(!e)return null;var i=dhx.copy(e._attrs);i.id=t;for(var n=this.getColumnsNum(),s=0;s<n;s++)i[this.columnIds[s]]=this.cells(t,s).getValue();return i},dhtmlXGridObject.prototype.update=function(t,e){for(var i=0;i<this.columnIds.length;i++){var n=this.columnIds[i];dhx.isUndefined(e[n])||this.cells(t,i).setValue(e[n])}var s=this.getRowById(t)._attrs;for(var n in e)s[n]=e[n];this.callEvent("onBindUpdate",[e,null,t])},dhtmlXGridObject.prototype.add=function(t,e,i){for(var n=[],s=0;s<this.columnIds.length;s++){var o=this.columnIds[s];n[s]=dhx.isUndefined(e[o])?"":e[o]}this.addRow(t,n,i);this.getRowById(t)._attrs=dhx.copy(e)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return!!(this.rowsBuffer.length||this._f_rowsBuffer||this._settings.dataFeed)},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else dhx.isUndefined(t)?i=e:i[t]=e;this.clearAll();var n=this._settings.dataFeed;if("function"==typeof n)return n.call(this,e,i);var s=[];for(var o in i)s.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(n+(n.indexOf("?")<0?"?":"&")+s.join("&")),!1}if(null===e)return this.filterBy(0,function(){return!1});this.filterBy(0,function(i,n){return t.call(this,n,e)})}),window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXTreeObject.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(t){this.callEvent("onSelectChange",[t])}),this.attachEvent("onEdit",function(t,e){return 2===t&&e&&e==this.getCursor()&&this._update_binds(),!0}))},dhtmlXTreeObject.prototype.item=function(t){return null===t?null:{id:t,text:this.getItemText(t)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else dhx.isUndefined(t)?i=e:i[t]=e;this.deleteChildItems(0);var n=this._settings.dataFeed;if("function"==typeof n)return n.call(this,[data.id||data,data]);var s=[];for(var o in i)s.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.loadXML(n+(n.indexOf("?")<0?"?":"&")+s.join("&")),!1}},dhtmlXTreeObject.prototype.update=function(t,e){dhx.isUndefined(e.text)||this.setItemText(t,e.text)})}(),dataProcessor.prototype={url:function(t){return-1!=t.indexOf("?")?"&":"?"},setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,this._headers=this._headers||t.headers,this._payload=this._payload||t.payload):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0)},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=dhx4.s2b(t)},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=dhx4.s2b(t)},enablePartialDataSend:function(t){this._changed=dhx4.s2b(t)},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(this._log("item "+t+" "+(e?"marked":"unmarked")+" ["+(i||"updated")+"]"),!this._silent_mode){var n=this.findRow(t);i=i||"updated";var s=this.obj.getUserData(t,this.action_param);s&&"updated"==i&&(i=s),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(t){},markRow:function(t,e,i){var n="",s=this.is_invalid(t);if(s&&(n=this.styles[s],e=!0),this.callEvent("onRowMark",[t,e,i,s])&&(n=this.styles[e?i:"clear"]+n,this.obj[this._methods[0]](t,n),s&&s.details)){n+=this.styles[s+"_cell"];for(var o=0;o<s.details.length;o++)s.details[o]&&this.obj[this._methods[1]](t,o,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(t){return!0},sendData:function(t){if(t&&this._log("Sending: "+t),!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend)return this.sendAllData();if(this._in_progress[t])return!1;if(this.messages=[],"deleted"!==this.getState(t)&&!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))return!1;this._beforeSendData(this._getRowData(t),t)}},_beforeSendData:function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var s in t)t.hasOwnProperty(s)&&(i.push(this.serialize_one(t[s],s+this.post_delim)),n.push(s));return i.push("ids="+this.escape(n.join(","))),window.dhtmlx&&dhtmlx.security_key&&i.push("dhx_security="+dhtmlx.security_key),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_applyPayload:function(t){if(this._payload)for(var e in this._payload)t=t+(-1===t.indexOf("?")?"?":"&")+this.escape(e)+"="+this.escape(this._payload[e]);return t},_sendData:function(t,e){if(this._log("url: "+this.serverProcessor),this._log(t),t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=this,n=function(n){var s=[];if(e)s.push(e);else if(t)for(var o in t)s.push(o);return i.afterUpdate(i,n,s)},s=this.serverProcessor+(this._user?this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),o=this._applyPayload(s);if("GET"==this._tMode)dhx4.ajax.query({url:o+(-1!=o.indexOf("?")?"&":"?")+this.serialize(t,e),method:"GET",headers:this._headers,callback:n});else if("POST"==this._tMode)dhx4.ajax.query({url:o,method:"POST",headers:this._headers,callback:n,data:this.serialize(t,e)});else if("REST"==this._tMode){var l=this.getState(e),r=s.replace(/(\&|\?)editing\=true/,""),a=r.split("?");a[1]&&(a[1]="?"+a[1]);var h="",d="post";"inserted"==l?h=this.serialize(t,e):"deleted"==l?(d="DELETE",r=a[0]+e+(a[1]||"")):(d="PUT",h=this.serialize(t,e),r=a[0]+e+(a[1]||"")),this._applyPayload(r),dhx4.ajax.query({url:r,method:d,headers:this._headers,data:h,callback:n})}this._waitMode++}},sendAllData:function(){if(this._log("Sending all updated items"),this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)"deleted"!==this.getState(this.updatedRows[e])&&(t&=this.checkBeforeUpdate(this.updatedRows[e]));if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(t){for(var e={},i=!1,n=0;n<this.updatedRows.length;n++){var s=this.updatedRows[n];this._in_progress[s]||this.is_invalid(s)||this.callEvent("onBeforeUpdate",[s,this.getState(s),this._getRowData(s)])&&(e[s]=this._getRowData(s,s+this.post_delim),i=!0,this._in_progress[s]=(new Date).valueOf())}return i?e:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){this._log("Action: "+i+" SID:"+t+" TID:"+e,n);var s=t,o="error"!=i&&"invalid"!=i;if(o||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[s];"wait"!=this._in_progress[s]&&this.setUpdated(t,!1);var l=t;switch(i){case"inserted":case"insert":e!=t&&(this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t),delete this._in_progress[s],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[s]?(o&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[s]):(delete this._in_progress[s],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[l,i,e,n])},enableDebug:function(){this._debug=!0},_log:function(){this._debug&&window.console&&window.console.info&&window.console.info.apply(window.console,arguments)},afterUpdate:function(t,e,i){if(this._log("Server response received"),window.JSON)try{var n=JSON.parse(e.xmlDoc.responseText),s=n.action||this.getState(i)||"updated",o=n.sid||i[0],l=n.tid||i[0];return t.afterUpdateCallback(o,l,s,n),void t.finalizeUpdate()}catch(t){}var r=dhx4.ajax.xmltop("data",e.xmlDoc);if(!r||"DIV"==r.tagName)return this.cleanUpdate(i);var a=dhx4.ajax.xpath("//data/action",r);if(!a.length)return this.cleanUpdate(i);for(var h=0;h<a.length;h++){var d=a[h];s=d.getAttribute("type"),o=d.getAttribute("sid"),l=d.getAttribute("tid");t.afterUpdateCallback(o,l,s,d)}t.finalizeUpdate()},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,t._dp_init&&t._dp_init(this),this.connector_init&&(t._dataprocessor=this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e,i,n){return"collision"!=e||(this._need_update=!0,!1)},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){if(this._update_busy)return!1;this._update_busy=!0,dhx4.ajax.get(t,e)},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this,e=this.obj.getUserData(0,"version"),i=this.serverProcessor+this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+e].join("&");i=i.replace("editing=true&",""),this.getUpdates(i,function(e){var i=dhx4.ajax.xmltop("updates",e.xmlDoc),n=dhx4.ajax.xpath("//userdata",i);t.obj.setUserData(0,"version",t._v(n[0]));var s=dhx4.ajax.xpath("//update",i);if(s.length){t._silent_mode=!0;for(var o=0;o<s.length;o++){var l=s[o].getAttribute("status"),r=s[o].getAttribute("id"),a=s[o].getAttribute("parent");switch(l){case"inserted":t.callEvent("insertCallback",[s[o],r,a]);break;case"updated":t.callEvent("updateCallback",[s[o],r,a]);break;case"deleted":t.callEvent("deleteCallback",[s[o],r,a])}}t._silent_mode=!1}t._update_busy=!1,t=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.connector_init=!0),dhtmlXCellObject.prototype.attachHTMLString__old=dhtmlXCellObject.prototype.attachHTMLString,dhtmlXCellObject.prototype.attachHTMLString=function(t){_isIE<=8?$(t).appendTo(this.cell.childNodes[this.conf.idx.cont]):dhtmlXCellObject.prototype.attachHTMLString__old.apply(this,arguments)},dhtmlXTreeObject.prototype._parseItem__old=dhtmlXTreeObject.prototype._parseItem,dhtmlXTreeObject.prototype._parseItem=function(t,e,i,n){this._currentItem=t.get_all(),dhtmlXTreeObject.prototype._parseItem__old.apply(this,arguments);for(var s in this._currentItem)"id"!=s&&"text"!=s&&"open"!=s&&"item"!=s&&"child"!=s&&"nocheckbox"!=s&&"userdata"!=s&&this.setUserData(this._currentItem.id,s,this._currentItem[s]);this._currentItem=null},dhtmlXTreeObject.prototype.getUserData__old=dhtmlXTreeObject.prototype.getUserData,dhtmlXTreeObject.prototype.getUserData=function(t,e){if(e)return dhtmlXTreeObject.prototype.getUserData__old.apply(this,arguments);var i=this._globalIdStorageFind(t,0,!0);if(i){var n={};for(var s in i.userData)"function"!=typeof i.userData[s]&&(n[s.replace("t_","")]=i.userData[s]);return n}},dhtmlXTreeObject.prototype._createItem=function(t,e,i){var n=document.createElement("table");n.cellSpacing=0,n.cellPadding=0,n.border=0,this.hfMode&&(n.style.tableLayout="fixed"),n.style.margin=0,n.style.padding=0;var s=document.createElement("tbody"),o=document.createElement("tr"),l=document.createElement("td");if(l.className="standartTreeImage",this._txtimg){var r=document.createElement("div");l.appendChild(r),r.className="dhx_tree_textSign"}else{(r=this._getImg(e.id)).border="0","IMG"==r.tagName&&(r.align="absmiddle"),l.appendChild(r),r.style.padding=0,r.style.margin=0,r.style.width=this.def_line_img_x,r.style.height=this.def_line_img_y}var a=document.createElement("td"),h=this._getImg(this.cBROf?this.rootId:e.id);h.checked=0,this._setSrc(h,this.imPath+this.checkArray[0]),h.style.width="18px",h.style.height="18px",t||(a.style.display="none"),a.appendChild(h),this.cBROf||"IMG"!=h.tagName||(h.align="absmiddle"),h.onclick=this.onCheckBoxClick,h.treeNod=this,h.parentObject=e,window._KHTMLrv?a.width="16px":a.width="20px";var d=document.createElement("td");d.className="standartTreeImage";var c=(this._currentItem||{}).icon;if(c){(u=document.createElement("i")).className=c,u.style.fontSize="16px",u.style.color="#ff5722",u.style.paddingTop="4px",d.appendChild(u),u.onmousedown=this._preventNsDrag,u.ondragstart=this._preventNsDrag,this._aimgs&&(u.parentObject=e,u.onclick=this.onRowSelect)}else{var u;(u=this._getImg(this.timgen?e.id:this.rootId)).onmousedown=this._preventNsDrag,u.ondragstart=this._preventNsDrag,u.border="0",this._aimgs&&(u.parentObject=e,"IMG"==u.tagName&&(u.align="absmiddle"),u.onclick=this.onRowSelect),i||this._setSrc(u,this.iconURL+this.imageArray[0]),d.appendChild(u),u.style.padding=0,u.style.margin=0}this.timgen?(d.style.width=u.style.width=this.def_img_x,u.style.height=this.def_img_y):(u.style.width="0px",u.style.height="0px",(_isOpera||window._KHTMLrv)&&(d.style.display="none"));var f=document.createElement("td");return f.className="standartTreeRow",e.span=document.createElement("span"),e.span.className="standartTreeRow",this.mlitems?(e.span.style.width=this.mlitems,e.span.style.display="block"):f.noWrap=!0,_isIE&&_isIE>7?f.style.width="999999px":window._KHTMLrv||(f.style.width="100%"),e.span.innerHTML=e.label,f.appendChild(e.span),f.parentObject=e,l.parentObject=e,f.onclick=this.onRowSelect,l.onclick=this.onRowClick,f.ondblclick=this.onRowClick2,this.ettip&&(o.title=e.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(d,this),d.parentObject=e),this.dragger.addDraggableItem(f,this)),e.span.style.paddingLeft="5px",e.span.style.paddingRight="5px",f.style.verticalAlign="",f.style.fontSize="10pt",f.style.cursor=this.style_pointer,o.appendChild(l),o.appendChild(a),o.appendChild(d),o.appendChild(f),s.appendChild(o),n.appendChild(s),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(o.onmousemove=this._itemMouseIn,o[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),n},dhtmlXGridObject.prototype.setQuery=function(){var t=this,e=arguments[0];t.queryParams=arguments[1]||{};var i=arguments[2];t.query=function(){var n={};this.pagingOn?n={pageindex:t.currentPage,pagesize:t.rowsBufferOutSize}:this._srnd&&(n={pageindex:1,pagesize:t._dpref});var s=$.extend({},t.queryParams,n,arguments[0]);if(!arguments[1])try{var o=t.getSortingState();t.clearAll(),2==o.length&&t.setSortImgState(!0,o[0],o[1])}catch(t){}t.callEvent("onXLS",[t]),e(s,function(e){e=t.convertSource(e),t.parse(e,"json"),t.callEvent("onXLE",[t,0,0,e]),void 0!=i&&"function"==typeof i&&i(t)}),t.queryParams=s},t.query(t.queryParams)},dhtmlXGridObject.prototype.convertSource=function(t){return{pageCount:t.PageCount,rows:t.Source,total:t.TotalCount}},dhtmlXGridObject.prototype.setFields=function(){var t=arguments[0]||"|";if(-1!=t.indexOf("|")){var e=t.split("|");this._idField=e[0],this._fields=e[1].split(",")}},dhtmlXGridObject.prototype.load_old=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(t,e,i){this.xmlFileUrl||(this.xmlFileUrl=t);var n={};if(-1!=t.indexOf("?")){var s=t.split("?")[1];strs=s.split("&");for(var o=0;o<strs.length;o++)n[strs[o].split("=")[0]]=unescape(strs[o].split("=")[1])}this.pagingOn&&(n.page=this.currentPage,n.rows=this.rowsBufferOutSize),!n.page&&n.posStart&&n.count&&(n.page=n.posStart/n.count+1,n.rows=n.count,delete n.count,delete n.posStart),!n.page&&this._srnd&&(n.page=1,n.rows=this._dpref);var l=this.getSortingState();2==l.length&&(n.sort=this._fields[l[0]],n.order="des"==l[1]?"desc":"asc");var r="";for(var a in n)r+=(r?"&":"?")+a+"="+n[a];t=t.split("?")[0]+r,dhtmlXGridObject.prototype.load_old.apply(this,arguments)},dhtmlXGridObject.prototype._process_json_old=dhtmlXGridObject.prototype._process_json,dhtmlXGridObject.prototype._process_json=function(data,mode){function convertToDhxJson(t){var e=this._fields,i=this._idField,n=0;t.pos>=0?n=t.pos:this.pagingOn?n=(this.currentPage-1)*this.rowsBufferOutSize:this._srnd&&this._current_load&&(n=this._current_load[0]);var s=function(t,e){var i=[];for(var n in e)i.push(t[e[n]]);return i};if(t.total>=0&&t.rows){var o={};o.total_count=t.total,o.pos=n,o.rows=[];for(var l in t.rows){var r={};r.id=t.rows[l][i],this.onJsonRowConvert&&this.onJsonRowConvert(r.id,t.rows[l],t),r.data=s(t.rows[l],e),o.rows.push(r)}return o}return t}data&&data.xmlDoc?(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=convertToDhxJson.call(this,dhtmlx.temp)):data&&data.rows&&data.total>=0&&(data=convertToDhxJson.call(this,data)),dhtmlXGridObject.prototype._process_json_old.apply(this,arguments)},dhtmlXGridObject.prototype.sortRows_old=dhtmlXGridObject.prototype.sortRows,dhtmlXGridObject.prototype.sortRows=function(t,e,i){if(i=(i||"asc").toLowerCase(),e=e||this.fldSort[t],t=t||0,"server"==e&&this.query){var n={};n.sort=this._fields[t],n.order="des"==i?"desc":i,this.query(n)}else dhtmlXGridObject.prototype.sortRows_old.apply(this,arguments)},dhtmlXGridObject.prototype.render_dataset=function(t,e){if(this._srnd){if(this._fillers)return this._update_srnd_view();e=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(t=Math.max(t||0,(this.currentPage-1)*this.rowsBufferOutSize),e=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(t=t||0,e=e||this.rowsBuffer.length);for(var i=t;i<e;i++){var n=this.render_row(i);if(-1==n){this.xmlFileUrl?this.callEvent("onDynXLS",[i,this._dpref?this._dpref:e-i])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+i+"&count="+(this._dpref?this._dpref:e-i),this._data_type):this.query&&this.query({},!0),e=i;break}if(n.parentNode&&n.parentNode.tagName||(this._insertRowAt(n,i),(n._attrs.selected||n._attrs.select)&&(this.selectRow(n,!!n._attrs.call,!0),n._attrs.selected=n._attrs.select=null)),this._ads_count&&i-t==this._ads_count){var s=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){s._contextCallTimer=null,s.render_dataset(i,e),s._contextCallTimer||(s._context_parsing?s.callEvent("onXLE",[]):s._fixAlterCss(),s.callEvent("onDistributedEnd",[]),s._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&i==e&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var o=this.rowsBuffer.length-e;for(this._fillers=[],this._fake&&(this._fake._fillers=[]);o>0;){var l=_isIE||window._FFrv?Math.min(o,5e4):o,r=this._add_filler(e,l);r&&this._fillers.push(r),o-=l,e+=l}}this.setSizes()},dhtmlXGridObject.prototype._update_srnd_view=function(){var t=Math.floor(this.objBox.scrollTop/this._srdh),e=t+this._get_view_size();if(this.multiLine){var i=this.objBox.scrollTop;for(t=0;i>0;)i-=this.rowsCol[t]?this.rowsCol[t].offsetHeight:this._srdh,t++;e=t+this._get_view_size(),t>0&&t--}(e+=this._srnd_pr||0)>this.rowsBuffer.length&&(e=this.rowsBuffer.length);for(var n=t;n<e;n++)if(!this.rowsCol[n]){if(-1==this._add_from_buffer(n)){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[e-1]){this._dpref&&this._dpref;var s=Math.max(0,Math.min(n,e-this._dpref));this._current_load=[s,e-s]}else this._current_load=[n,this._dpref?this._dpref:e-n];if(this.callEvent("onDynXLS",this._current_load)){this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type);break}}else if(this.query){if(this._dpref&&this.rowsBuffer[e-1]){this._dpref&&this._dpref,s=Math.max(0,Math.min(n,e-this._dpref));this._current_load=[s,e-s]}else this._current_load=[n,this._dpref?this._dpref:e-n];if(this.callEvent("onDynXLS",this._current_load)){this.query({page:this._current_load[0]/this._dpref+1,rows:this._dpref},!0);break}}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]),this._updateParentLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n])),n&&n==(this._realfake?this._fake:this)._r_select&&this.selectCell(n,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype.collectValues_old=dhtmlXGridObject.prototype.collectValues,dhtmlXGridObject.prototype.collectValues=function(t){return dhtmlXGridObject.prototype.collectValues_old.apply(this,arguments)},dhtmlXGridObject.prototype._get_cell_value_old=dhtmlXGridObject.prototype._get_cell_value,dhtmlXGridObject.prototype._get_cell_value=function(t,e,i){return t?dhtmlXGridObject.prototype._get_cell_value_old.apply(this,arguments):null},dhtmlXGridObject.prototype._pgn_toolbar_old=dhtmlXGridObject.prototype._pgn_toolbar,dhtmlXGridObject.prototype._pgn_toolbar=function(t,e,i){dhtmlXGridObject.prototype._pgn_toolbar_old.apply(this,arguments),this._WTDef[1]&&this.getRowsNum()&&this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+" 共"+this.rowsBuffer.length+"条</div>")},dhtmlXGridObject.prototype.filterBy=function(t,e,i){var n={};for(var s in t)n[this._fields[t[s]]]=e[s];if(this.xmlFileUrl){var o="";for(var s in n)n[s]&&(o+=(o?"&":"")+s+"="+n[s]);this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+o,this._data_type)}else this.query&&this.query(n)},eXcell_roch.prototype=new eXcell,eXcell_roch.prototype.setValue=function(t){this.cell.style.verticalAlign="middle",t&&("false"!=(t=t.toString()._dhx_trim())&&"0"!=t||(t="")),t?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+t+".gif'>",this.cell.chstate)},eXcell_filter.prototype=new eXcell;var requirejs,require,define;!function(ba){function G(t){return"[object Function]"===K.call(t)}function H(t){return"[object Array]"===K.call(t)}function v(t,e){if(t){var i;for(i=0;i<t.length&&(!t[i]||!e(t[i],i,t));i+=1);}}function T(t,e){if(t){var i;for(i=t.length-1;-1<i&&(!t[i]||!e(t[i],i,t));i-=1);}}function t(t,e){return fa.call(t,e)}function m(e,i){return t(e,i)&&e[i]}function B(e,i){for(var n in e)if(t(e,n)&&i(e[n],n))break}function U(e,i,n,s){return i&&B(i,function(i,o){!n&&t(e,o)||(!s||"object"!=typeof i||!i||H(i)||G(i)||i instanceof RegExp?e[o]=i:(e[o]||(e[o]={}),U(e[o],i,n,s)))}),e}function u(t,e){return function(){return e.apply(t,arguments)}}function ca(t){throw t}function da(t){if(!t)return t;var e=ba;return v(t.split("."),function(t){e=e[t]}),e}function C(t,e,i,n){return e=Error(e+"\nhttp://requirejs.org/docs/errors.html#"+t),e.requireType=t,e.requireModules=n,i&&(e.originalError=i),e}function ga(e){function i(t,e,i){e=e&&e.split("/");var n,s,o,l,r,a,h,d,c=E.map,u=c&&c["*"];if(t){for(s=(t=t.split("/")).length-1,E.nodeIdCompat&&Q.test(t[s])&&(t[s]=t[s].replace(Q,"")),"."===t[0].charAt(0)&&e&&(s=e.slice(0,e.length-1),t=s.concat(t)),s=t,o=0;o<s.length;o++)"."===(l=s[o])?(s.splice(o,1),o-=1):".."===l&&0!==o&&(1!=o||".."!==s[2])&&".."!==s[o-1]&&0<o&&(s.splice(o-1,2),o-=2);t=t.join("/")}if(i&&c&&(e||u)){o=(s=t.split("/")).length;t:for(;0<o;o-=1){if(r=s.slice(0,o).join("/"),e)for(l=e.length;0<l;l-=1)if((i=m(c,e.slice(0,l).join("/")))&&(i=m(i,r))){n=i,a=o;break t}!h&&u&&m(u,r)&&(h=m(u,r),d=o)}!n&&h&&(n=h,a=d),n&&(s.splice(0,a,n),t=s.join("/"))}return(n=m(E.pkgs,t))?n:t}function n(t){z&&v(document.getElementsByTagName("script"),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===k.contextName)return e.parentNode.removeChild(e),!0})}function s(t){var e=m(E.paths,t);if(e&&H(e)&&1<e.length)return e.shift(),k.require.undef(t),k.makeRequire(null,{skipMap:!0})([t]),!0}function o(t){var e,i=t?t.indexOf("!"):-1;return-1<i&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t,e,n,s){var l,r,a=null,h=e?e.name:null,d=t,c=!0,u="";return t||(c=!1,t="_@r"+($+=1)),t=o(t),a=t[0],t=t[1],a&&(a=i(a,h,s),r=m(L,a)),t&&(a?u=r&&r.normalize?r.normalize(t,function(t){return i(t,h,s)}):-1===t.indexOf("!")?i(t,h,s):t:(u=i(t,h,s),t=o(u),a=t[0],u=t[1],n=!0,l=k.nameToUrl(u))),n=!a||r||n?"":"_unnormalized"+(F+=1),{prefix:a,name:u,parentMap:e,unnormalized:!!n,url:l,originalName:d,isDefine:c,id:(a?a+"!"+u:u)+n}}function r(t){var e=t.id,i=m(O,e);return i||(i=O[e]=new k.Module(t)),i}function a(e,i,n){var s=e.id,o=m(O,s);!t(L,s)||o&&!o.defineEmitComplete?(o=r(e)).error&&"error"===i?n(o.error):o.on(i,n):"defined"===i&&n(L[s])}function h(t,e){var i=t.requireModules,n=!1;e?e(t):(v(i,function(e){(e=m(O,e))&&(e.error=t,e.events.error&&(n=!0,e.emit("error",t)))}),n||g.onError(t))}function d(){R.length&&(ha.apply(D,[D.length,0].concat(R)),R=[])}function c(t){delete O[t],delete j[t]}function f(t,e,i){var n=t.map.id;t.error?t.emit("error",t.error):(e[n]=!0,v(t.depMaps,function(n,s){var o=n.id,l=m(O,o);l&&!t.depMatched[s]&&!i[o]&&(m(e,o)?(t.defineDep(s,L[o]),t.check()):f(l,e,i))}),i[n]=!0)}function p(){var t,e,i=(t=1e3*E.waitSeconds)&&k.startTime+t<(new Date).getTime(),o=[],l=[],r=!1,a=!0;if(!x){if(x=!0,B(j,function(t){var h=t.map,d=h.id;if(t.enabled&&(h.isDefine||l.push(t),!t.error))if(!t.inited&&i)s(d)?r=e=!0:(o.push(d),n(d));else if(!t.inited&&t.fetched&&h.isDefine&&(r=!0,!h.prefix))return a=!1}),i&&o.length)return t=C("timeout","Load timeout for modules: "+o,null,o),t.contextName=k.contextName,h(t);a&&v(l,function(t){f(t,{},{})}),i&&!e||!r||!z&&!ea||S||(S=setTimeout(function(){S=0,p()},50)),x=!1}}function _(e){t(L,e[0])||r(l(e[0],null,!0)).init(e[1],e[2])}function b(t){t=t.currentTarget||t.srcElement;var e=k.onScriptLoad;return t.detachEvent&&!Y?t.detachEvent("onreadystatechange",e):t.removeEventListener("load",e,!1),e=k.onScriptError,(!t.detachEvent||Y)&&t.removeEventListener("error",e,!1),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function y(){var t;for(d();D.length;){if(null===(t=D.shift())[0])return h(C("mismatch","Mismatched anonymous define() module: "+t[t.length-1]));_(t)}}var x,w,k,I,S,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},j={},A={},D=[],L={},X={},P={},$=1,F=1;return I={require:function(t){return t.require?t.require:t.require=k.makeRequire(t.map)},exports:function(t){if(t.usingExports=!0,t.map.isDefine)return t.exports?L[t.map.id]=t.exports:t.exports=L[t.map.id]={}},module:function(t){return t.module?t.module:t.module={id:t.map.id,uri:t.map.url,config:function(){return m(E.config,t.map.id)||{}},exports:t.exports||(t.exports={})}}},w=function(t){this.events=m(A,t.id)||{},this.map=t,this.shim=m(E.shim,t.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},w.prototype={init:function(t,e,i,n){n=n||{},this.inited||(this.factory=e,i?this.on("error",i):this.events.error&&(i=u(this,function(t){this.emit("error",t)})),this.depMaps=t&&t.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(t,e){this.depMatched[t]||(this.depMatched[t]=!0,this.depCount-=1,this.depExports[t]=e)},fetch:function(){if(!this.fetched){this.fetched=!0,k.startTime=(new Date).getTime();var t=this.map;if(!this.shim)return t.prefix?this.callPlugin():this.load();k.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return t.prefix?this.callPlugin():this.load()}))}},load:function(){var t=this.map.url;X[t]||(X[t]=!0,k.load(this.map.id,t))},check:function(){if(this.enabled&&!this.enabling){var t,e,i=this.map.id;e=this.depExports;var n=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(s)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{n=k.execCb(i,s,e,n)}catch(e){t=e}else n=k.execCb(i,s,e,n);if(this.map.isDefine&&void 0===n&&((e=this.module)?n=e.exports:this.usingExports&&(n=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",h(this.error=t)}else n=s;this.exports=n,this.map.isDefine&&!this.ignore&&(L[i]=n,g.onResourceLoad)&&g.onResourceLoad(k,this.map,this.depMaps),c(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,s=l(e.prefix);this.depMaps.push(s),a(s,"defined",u(this,function(s){var o,d;d=m(P,this.map.id);var f=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,_=k.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(s.normalize&&(f=s.normalize(f,function(t){return i(t,p,!0)})||""),a(s=l(e.prefix+"!"+f,this.map.parentMap),"defined",u(this,function(t){this.init([],function(){return t},null,{enabled:!0,ignore:!0})})),(d=m(O,s.id))&&(this.depMaps.push(s),this.events.error&&d.on("error",u(this,function(t){this.emit("error",t)})),d.enable())):d?(this.map.url=k.nameToUrl(d),this.load()):(o=u(this,function(t){this.init([],function(){return t},null,{enabled:!0})}),o.error=u(this,function(t){this.inited=!0,this.error=t,t.requireModules=[n],B(O,function(t){0===t.map.id.indexOf(n+"_unnormalized")&&c(t.map.id)}),h(t)}),o.fromText=u(this,function(i,s){var a=e.name,d=l(a),c=M;s&&(i=s),c&&(M=!1),r(d),t(E.config,n)&&(E.config[a]=E.config[n]);try{g.exec(i)}catch(t){return h(C("fromtexteval","fromText eval for "+n+" failed: "+t,t,[n]))}c&&(M=!0),this.depMaps.push(d),k.completeLoad(a),_([a],o)}),s.load(e.name,_,o,E))})),k.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){j[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,i){var n,s;if("string"==typeof e){if(e=l(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=e,n=m(I,e.id))return void(this.depExports[i]=n(this));this.depCount+=1,a(e,"defined",u(this,function(t){this.defineDep(i,t),this.check()})),this.errback&&a(e,"error",u(this,this.errback))}n=e.id,s=O[n],!t(I,n)&&s&&!s.enabled&&k.enable(e,this)})),B(this.pluginMaps,u(this,function(t){var e=m(O,t.id);e&&!e.enabled&&k.enable(t,this)})),this.enabling=!1,this.check()},on:function(t,e){var i=this.events[t];i||(i=this.events[t]=[]),i.push(e)},emit:function(t,e){v(this.events[t],function(t){t(e)}),"error"===t&&delete this.events[t]}},k={config:E,contextName:e,registry:O,defined:L,urlFetched:X,defQueue:D,Module:w,makeModuleMap:l,nextTick:g.nextTick,onError:h,configure:function(t){t.baseUrl&&"/"!==t.baseUrl.charAt(t.baseUrl.length-1)&&(t.baseUrl+="/");var e=E.shim,i={paths:!0,bundles:!0,config:!0,map:!0};B(t,function(t,e){i[e]?(E[e]||(E[e]={}),U(E[e],t,!0,!0)):E[e]=t}),t.bundles&&B(t.bundles,function(t,e){v(t,function(t){t!==e&&(P[t]=e)})}),t.shim&&(B(t.shim,function(t,i){H(t)&&(t={deps:t}),!t.exports&&!t.init||t.exportsFn||(t.exportsFn=k.makeShimExports(t)),e[i]=t}),E.shim=e),t.packages&&v(t.packages,function(t){var e;e=(t="string"==typeof t?{name:t}:t).name,t.location&&(E.paths[e]=t.location),E.pkgs[e]=t.name+"/"+(t.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(t,e){!t.inited&&!t.map.unnormalized&&(t.map=l(e))}),(t.deps||t.callback)&&k.require(t.deps||[],t.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(ba,arguments)),e||t.exports&&da(t.exports)}},makeRequire:function(s,o){function a(i,n,d){var c,u;return o.enableBuildCallback&&n&&G(n)&&(n.__requireJsBuild=!0),"string"==typeof i?G(n)?h(C("requireargs","Invalid require call"),d):s&&t(I,i)?I[i](O[s.id]):g.get?g.get(k,i,s,a):(c=l(i,s,!1,!0),c=c.id,t(L,c)?L[c]:h(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(s?"":". Use require([])")))):(y(),k.nextTick(function(){y(),(u=r(l(null,s))).skipMap=o.skipMap,u.init(i,n,d,{enabled:!0}),p()}),a)}return o=o||{},U(a,{isBrowser:z,toUrl:function(t){var e,n=t.lastIndexOf("."),o=t.split("/")[0];return-1!==n&&("."!==o&&".."!==o||1<n)&&(e=t.substring(n,t.length),t=t.substring(0,n)),k.nameToUrl(i(t,s&&s.id,!0),e,!0)},defined:function(e){return t(L,l(e,s,!1,!0).id)},specified:function(e){return e=l(e,s,!1,!0).id,t(L,e)||t(O,e)}}),s||(a.undef=function(t){d();var e=l(t,s,!0),i=m(O,t);n(t),delete L[t],delete X[e.url],delete A[t],T(D,function(e,i){e[0]===t&&D.splice(i,1)}),i&&(i.events.defined&&(A[t]=i.events),c(t))}),a},enable:function(t){m(O,t.id)&&r(t).enable()},completeLoad:function(e){var i,n,o=m(E.shim,e)||{},l=o.exports;for(d();D.length;){if(null===(n=D.shift())[0]){if(n[0]=e,i)break;i=!0}else n[0]===e&&(i=!0);_(n)}if(n=m(O,e),!i&&!t(L,e)&&n&&!n.inited){if(E.enforceDefine&&(!l||!da(l)))return s(e)?void 0:h(C("nodefine","No define call for "+e,null,[e]));_([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(t,e,i){var n,s,o;if((n=m(E.pkgs,t))&&(t=n),n=m(P,t))return k.nameToUrl(n,e,i);if(g.jsExtRegExp.test(t))n=t+(e||"");else{for(n=E.paths,s=(t=t.split("/")).length;0<s;s-=1)if(o=t.slice(0,s).join("/"),o=m(n,o)){H(o)&&(o=o[0]),t.splice(0,s,o);break}n=t.join("/"),n=("/"===(n+=e||(/^data\:|\?/.test(n)||i?"":".js")).charAt(0)||n.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+n}return E.urlArgs?n+(-1===n.indexOf("?")?"?":"&")+E.urlArgs:n},load:function(t,e){g.load(k,t,e)},execCb:function(t,e,i,n){return e.apply(n,i)},onScriptLoad:function(t){("load"===t.type||ja.test((t.currentTarget||t.srcElement).readyState))&&(N=null,t=b(t),k.completeLoad(t.id))},onScriptError:function(t){var e=b(t);if(!s(e.id))return h(C("scripterror","Script error for: "+e.id,t,[e.id]))}},k.require=k.makeRequire(),k}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if(void 0===define){if(void 0!==requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}void 0!==require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(t,e,i,n){var s,o="_";return!H(t)&&"string"!=typeof t&&(s=t,H(e)?(t=e,e=i,i=n):t=[]),s&&s.context&&(o=s.context),(n=m(F,o))||(n=F[o]=g.s.newContext(o)),s&&n.configure(s),n.require(t,e,i)},g.config=function(t){return g(t)},g.nextTick="undefined"!=typeof setTimeout?function(t){setTimeout(t,4)}:function(t){t()},require||(require=g),g.version="2.1.15",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(t){g[t]=function(){var e=F._;return e.require[t].apply(e,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(t){var e=t.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return e.type=t.scriptType||"text/javascript",e.charset="utf-8",e.async=!0,e},g.load=function(t,e,i){var n=t&&t.config||{};if(z)return(n=g.createNode(n,e,i)).setAttribute("data-requirecontext",t.contextName),n.setAttribute("data-requiremodule",e),!n.attachEvent||n.attachEvent.toString&&0>n.attachEvent.toString().indexOf("[native code")||Y?(n.addEventListener("load",t.onScriptLoad,!1),n.addEventListener("error",t.onScriptError,!1)):(M=!0,n.attachEvent("onreadystatechange",t.onScriptLoad)),n.src=i,J=n,D?y.insertBefore(n,D):y.appendChild(n),J=null,n;if(ea)try{importScripts(i),t.completeLoad(e)}catch(n){t.onError(C("importscripts","importScripts failed for "+e+" at "+i,n,[e]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(t){if(y||(y=t.parentNode),I=t.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(t,e,i){var n,s;"string"!=typeof t&&(i=e,e=t,t=null),H(e)||(i=e,e=null),!e&&G(i)&&(e=[],i.length&&(i.toString().replace(ka,"").replace(la,function(t,i){e.push(i)}),e=(1===i.length?["require"]:["require","exports","module"]).concat(e))),M&&((n=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(t){if("interactive"===t.readyState)return N=t}),n=N),n&&(t||(t=n.getAttribute("data-requiremodule")),s=F[n.getAttribute("data-requirecontext")])),(s?s.defQueue:R).push([t,e,i])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),require.config({baseUrl:"./app/js/",paths:{assets:"../../assets/",css:"../../assets/lib/requirejs/css",text:"../../assets/lib/requirejs/text",views:"../views",config:"config/global","angular-resource":"../../assets/lib/angularjs/1.3.9/angular-resource"},shim:{},urlArgs:"v=201502100127&r="+Math.random()}),require(["app","config","angular-resource","service/index","factory/index","directive/index","controller/index"],function(t,e){t.init()});